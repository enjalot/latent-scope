function PS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var NS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U1={exports:{}},th={},V1={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),kS=Symbol.for("react.portal"),IS=Symbol.for("react.fragment"),DS=Symbol.for("react.strict_mode"),MS=Symbol.for("react.profiler"),FS=Symbol.for("react.provider"),jS=Symbol.for("react.context"),BS=Symbol.for("react.forward_ref"),$S=Symbol.for("react.suspense"),GS=Symbol.for("react.memo"),zS=Symbol.for("react.lazy"),$g=Symbol.iterator;function US(e){return e===null||typeof e!="object"?null:(e=$g&&e[$g]||e["@@iterator"],typeof e=="function"?e:null)}var H1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W1=Object.assign,X1={};function Jl(e,t,n){this.props=e,this.context=t,this.refs=X1,this.updater=n||H1}Jl.prototype.isReactComponent={};Jl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y1(){}Y1.prototype=Jl.prototype;function G0(e,t,n){this.props=e,this.context=t,this.refs=X1,this.updater=n||H1}var z0=G0.prototype=new Y1;z0.constructor=G0;W1(z0,Jl.prototype);z0.isPureReactComponent=!0;var Gg=Array.isArray,Q1=Object.prototype.hasOwnProperty,U0={current:null},K1={key:!0,ref:!0,__self:!0,__source:!0};function q1(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Q1.call(t,r)&&!K1.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ku,type:e,key:o,ref:a,props:i,_owner:U0.current}}function VS(e,t){return{$$typeof:Ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ku}function HS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zg=/\/+/g;function Gm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HS(""+e.key):t.toString(36)}function td(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ku:case kS:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Gm(a,0):r,Gg(i)?(n="",e!=null&&(n=e.replace(zg,"$&/")+"/"),td(i,t,n,"",function(f){return f})):i!=null&&(V0(i)&&(i=VS(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(zg,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Gg(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+Gm(o,l);a+=td(o,t,n,u,i)}else if(u=US(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+Gm(o,l++),a+=td(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Tf(e,t,n){if(e==null)return e;var r=[],i=0;return td(e,r,"","",function(o){return t.call(n,o,i++)}),r}function WS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rr={current:null},nd={transition:null},XS={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:nd,ReactCurrentOwner:U0};$t.Children={map:Tf,forEach:function(e,t,n){Tf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tf(e,function(){t++}),t},toArray:function(e){return Tf(e,function(t){return t})||[]},only:function(e){if(!V0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$t.Component=Jl;$t.Fragment=IS;$t.Profiler=MS;$t.PureComponent=G0;$t.StrictMode=DS;$t.Suspense=$S;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XS;$t.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=W1({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=U0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Q1.call(t,u)&&!K1.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ku,type:e.type,key:i,ref:o,props:r,_owner:a}};$t.createContext=function(e){return e={$$typeof:jS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FS,_context:e},e.Consumer=e};$t.createElement=q1;$t.createFactory=function(e){var t=q1.bind(null,e);return t.type=e,t};$t.createRef=function(){return{current:null}};$t.forwardRef=function(e){return{$$typeof:BS,render:e}};$t.isValidElement=V0;$t.lazy=function(e){return{$$typeof:zS,_payload:{_status:-1,_result:e},_init:WS}};$t.memo=function(e,t){return{$$typeof:GS,type:e,compare:t===void 0?null:t}};$t.startTransition=function(e){var t=nd.transition;nd.transition={};try{e()}finally{nd.transition=t}};$t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$t.useCallback=function(e,t){return rr.current.useCallback(e,t)};$t.useContext=function(e){return rr.current.useContext(e)};$t.useDebugValue=function(){};$t.useDeferredValue=function(e){return rr.current.useDeferredValue(e)};$t.useEffect=function(e,t){return rr.current.useEffect(e,t)};$t.useId=function(){return rr.current.useId()};$t.useImperativeHandle=function(e,t,n){return rr.current.useImperativeHandle(e,t,n)};$t.useInsertionEffect=function(e,t){return rr.current.useInsertionEffect(e,t)};$t.useLayoutEffect=function(e,t){return rr.current.useLayoutEffect(e,t)};$t.useMemo=function(e,t){return rr.current.useMemo(e,t)};$t.useReducer=function(e,t,n){return rr.current.useReducer(e,t,n)};$t.useRef=function(e){return rr.current.useRef(e)};$t.useState=function(e){return rr.current.useState(e)};$t.useSyncExternalStore=function(e,t,n){return rr.current.useSyncExternalStore(e,t,n)};$t.useTransition=function(){return rr.current.useTransition()};$t.version="18.2.0";V1.exports=$t;var z=V1.exports;const Z1=$0(z),YS=PS({__proto__:null,default:Z1},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QS=z,KS=Symbol.for("react.element"),qS=Symbol.for("react.fragment"),ZS=Object.prototype.hasOwnProperty,JS=QS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ew={key:!0,ref:!0,__self:!0,__source:!0};function J1(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)ZS.call(t,r)&&!ew.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:KS,type:e,key:o,ref:a,props:i,_owner:JS.current}}th.Fragment=qS;th.jsx=J1;th.jsxs=J1;U1.exports=th;var L=U1.exports,Dp={},ex={exports:{}},Lr={},tx={exports:{}},nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_e,De){var Fe=_e.length;_e.push(De);e:for(;0<Fe;){var ae=Fe-1>>>1,Qe=_e[ae];if(0<i(Qe,De))_e[ae]=De,_e[Fe]=Qe,Fe=ae;else break e}}function n(_e){return _e.length===0?null:_e[0]}function r(_e){if(_e.length===0)return null;var De=_e[0],Fe=_e.pop();if(Fe!==De){_e[0]=Fe;e:for(var ae=0,Qe=_e.length,it=Qe>>>1;ae<it;){var Dt=2*(ae+1)-1,Wt=_e[Dt],Xt=Dt+1,Qt=_e[Xt];if(0>i(Wt,Fe))Xt<Qe&&0>i(Qt,Wt)?(_e[ae]=Qt,_e[Xt]=Fe,ae=Xt):(_e[ae]=Wt,_e[Dt]=Fe,ae=Dt);else if(Xt<Qe&&0>i(Qt,Fe))_e[ae]=Qt,_e[Xt]=Fe,ae=Xt;else break e}}return De}function i(_e,De){var Fe=_e.sortIndex-De.sortIndex;return Fe!==0?Fe:_e.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],f=[],m=1,g=null,d=3,T=!1,x=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(_e){for(var De=n(f);De!==null;){if(De.callback===null)r(f);else if(De.startTime<=_e)r(f),De.sortIndex=De.expirationTime,t(u,De);else break;De=n(f)}}function G(_e){if(O=!1,C(_e),!x)if(n(u)!==null)x=!0,gt(q);else{var De=n(f);De!==null&&dt(G,De.startTime-_e)}}function q(_e,De){x=!1,O&&(O=!1,p(ue),ue=-1),T=!0;var Fe=d;try{for(C(De),g=n(u);g!==null&&(!(g.expirationTime>De)||_e&&!ge());){var ae=g.callback;if(typeof ae=="function"){g.callback=null,d=g.priorityLevel;var Qe=ae(g.expirationTime<=De);De=e.unstable_now(),typeof Qe=="function"?g.callback=Qe:g===n(u)&&r(u),C(De)}else r(u);g=n(u)}if(g!==null)var it=!0;else{var Dt=n(f);Dt!==null&&dt(G,Dt.startTime-De),it=!1}return it}finally{g=null,d=Fe,T=!1}}var oe=!1,we=null,ue=-1,ut=5,Ue=-1;function ge(){return!(e.unstable_now()-Ue<ut)}function Xe(){if(we!==null){var _e=e.unstable_now();Ue=_e;var De=!0;try{De=we(!0,_e)}finally{De?Ke():(oe=!1,we=null)}}else oe=!1}var Ke;if(typeof w=="function")Ke=function(){w(Xe)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,Lt=We.port2;We.port1.onmessage=Xe,Ke=function(){Lt.postMessage(null)}}else Ke=function(){M(Xe,0)};function gt(_e){we=_e,oe||(oe=!0,Ke())}function dt(_e,De){ue=M(function(){_e(e.unstable_now())},De)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_e){_e.callback=null},e.unstable_continueExecution=function(){x||T||(x=!0,gt(q))},e.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ut=0<_e?Math.floor(1e3/_e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(_e){switch(d){case 1:case 2:case 3:var De=3;break;default:De=d}var Fe=d;d=De;try{return _e()}finally{d=Fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_e,De){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var Fe=d;d=_e;try{return De()}finally{d=Fe}},e.unstable_scheduleCallback=function(_e,De,Fe){var ae=e.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?ae+Fe:ae):Fe=ae,_e){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Fe+Qe,_e={id:m++,callback:De,priorityLevel:_e,startTime:Fe,expirationTime:Qe,sortIndex:-1},Fe>ae?(_e.sortIndex=Fe,t(f,_e),n(u)===null&&_e===n(f)&&(O?(p(ue),ue=-1):O=!0,dt(G,Fe-ae))):(_e.sortIndex=Qe,t(u,_e),x||T||(x=!0,gt(q))),_e},e.unstable_shouldYield=ge,e.unstable_wrapCallback=function(_e){var De=d;return function(){var Fe=d;d=De;try{return _e.apply(this,arguments)}finally{d=Fe}}}})(nx);tx.exports=nx;var tw=tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx=z,Cr=tw;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ix=new Set,bu={};function Pa(e,t){Hl(e,t),Hl(e+"Capture",t)}function Hl(e,t){for(bu[e]=t,e=0;e<t.length;e++)ix.add(t[e])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mp=Object.prototype.hasOwnProperty,nw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ug={},Vg={};function rw(e){return Mp.call(Vg,e)?!0:Mp.call(Ug,e)?!1:nw.test(e)?Vg[e]=!0:(Ug[e]=!0,!1)}function iw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ow(e,t,n,r){if(t===null||typeof t>"u"||iw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ir(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xn[e]=new ir(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xn[t]=new ir(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xn[e]=new ir(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xn[e]=new ir(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xn[e]=new ir(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xn[e]=new ir(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xn[e]=new ir(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xn[e]=new ir(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xn[e]=new ir(e,5,!1,e.toLowerCase(),null,!1,!1)});var H0=/[\-:]([a-z])/g;function W0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H0,W0);Xn[t]=new ir(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H0,W0);Xn[t]=new ir(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H0,W0);Xn[t]=new ir(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xn[e]=new ir(e,1,!1,e.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xn[e]=new ir(e,1,!1,e.toLowerCase(),null,!0,!0)});function X0(e,t,n,r){var i=Xn.hasOwnProperty(t)?Xn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ow(t,n,i,r)&&(n=null),r||i===null?rw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Hi=rx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Af=Symbol.for("react.element"),wl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),Y0=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),ox=Symbol.for("react.provider"),ax=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),jp=Symbol.for("react.suspense"),Bp=Symbol.for("react.suspense_list"),K0=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),lx=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function eu(e){return e===null||typeof e!="object"?null:(e=Hg&&e[Hg]||e["@@iterator"],typeof e=="function"?e:null)}var mn=Object.assign,zm;function du(e){if(zm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zm=t&&t[1]||""}return`
`+zm+e}var Um=!1;function Vm(e,t){if(!e||Um)return"";Um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{Um=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?du(e):""}function aw(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=Vm(e.type,!1),e;case 11:return e=Vm(e.type.render,!1),e;case 1:return e=Vm(e.type,!0),e;default:return""}}function $p(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case wl:return"Portal";case Fp:return"Profiler";case Y0:return"StrictMode";case jp:return"Suspense";case Bp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ax:return(e.displayName||"Context")+".Consumer";case ox:return(e._context.displayName||"Context")+".Provider";case Q0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K0:return t=e.displayName||null,t!==null?t:$p(e.type)||"Memo";case Eo:t=e._payload,e=e._init;try{return $p(e(t))}catch{}}return null}function lw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $p(t);case 8:return t===Y0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sw(e){var t=sx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bf(e){e._valueTracker||(e._valueTracker=sw(e))}function ux(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gp(e,t){var n=t.checked;return mn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cx(e,t){t=t.checked,t!=null&&X0(e,"checked",t,!1)}function zp(e,t){cx(e,t);var n=Mo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Up(e,t.type,n):t.hasOwnProperty("defaultValue")&&Up(e,t.type,Mo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Up(e,t,n){(t!=="number"||vd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var hu=Array.isArray;function jl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mo(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return mn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(hu(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mo(n)}}function fx(e,t){var n=Mo(t.value),r=Mo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cf,hx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cf=Cf||document.createElement("div"),Cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uw=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(e){uw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gu[t]=gu[e]})});function mx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gu.hasOwnProperty(e)&&gu[e]?(""+t).trim():t+"px"}function px(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var cw=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(e,t){if(t){if(cw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Xp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yp=null;function q0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qp=null,Bl=null,$l=null;function Kg(e){if(e=Ju(e)){if(typeof Qp!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=ah(t),Qp(e.stateNode,e.type,t))}}function vx(e){Bl?$l?$l.push(e):$l=[e]:Bl=e}function gx(){if(Bl){var e=Bl,t=$l;if($l=Bl=null,Kg(e),t)for(e=0;e<t.length;e++)Kg(t[e])}}function yx(e,t){return e(t)}function xx(){}var Hm=!1;function Ex(e,t,n){if(Hm)return e(t,n);Hm=!0;try{return yx(e,t,n)}finally{Hm=!1,(Bl!==null||$l!==null)&&(xx(),gx())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=ah(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var Kp=!1;if(Gi)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{Kp=!1}function fw(e,t,n,r,i,o,a,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(m){this.onError(m)}}var yu=!1,gd=null,yd=!1,qp=null,dw={onError:function(e){yu=!0,gd=e}};function hw(e,t,n,r,i,o,a,l,u){yu=!1,gd=null,fw.apply(dw,arguments)}function mw(e,t,n,r,i,o,a,l,u){if(hw.apply(this,arguments),yu){if(yu){var f=gd;yu=!1,gd=null}else throw Error(Pe(198));yd||(yd=!0,qp=f)}}function Na(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qg(e){if(Na(e)!==e)throw Error(Pe(188))}function pw(e){var t=e.alternate;if(!t){if(t=Na(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qg(i),e;if(o===r)return qg(i),t;o=o.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function Sx(e){return e=pw(e),e!==null?wx(e):null}function wx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wx(e);if(t!==null)return t;e=e.sibling}return null}var Tx=Cr.unstable_scheduleCallback,Zg=Cr.unstable_cancelCallback,vw=Cr.unstable_shouldYield,gw=Cr.unstable_requestPaint,Cn=Cr.unstable_now,yw=Cr.unstable_getCurrentPriorityLevel,Z0=Cr.unstable_ImmediatePriority,Ax=Cr.unstable_UserBlockingPriority,xd=Cr.unstable_NormalPriority,xw=Cr.unstable_LowPriority,bx=Cr.unstable_IdlePriority,nh=null,xi=null;function Ew(e){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(nh,e,void 0,(e.current.flags&128)===128)}catch{}}var ei=Math.clz32?Math.clz32:ww,_w=Math.log,Sw=Math.LN2;function ww(e){return e>>>=0,e===0?32:31-(_w(e)/Sw|0)|0}var Lf=64,Rf=4194304;function mu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ed(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=mu(l):(o&=a,o!==0&&(r=mu(o)))}else a=n&~i,a!==0?r=mu(a):o!==0&&(r=mu(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ei(t),i=1<<n,r|=e[n],t&=~i;return r}function Tw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ei(o),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=Tw(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function Zp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cx(){var e=Lf;return Lf<<=1,!(Lf&4194240)&&(Lf=64),e}function Wm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ei(t),e[t]=n}function bw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ei(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function J0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ei(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Kt=0;function Lx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rx,ev,Ox,Px,Nx,Jp=!1,Of=[],Co=null,Lo=null,Ro=null,Ru=new Map,Ou=new Map,So=[],Cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jg(e,t){switch(e){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function nu(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Ju(t),t!==null&&ev(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Lw(e,t,n,r,i){switch(t){case"focusin":return Co=nu(Co,e,t,n,r,i),!0;case"dragenter":return Lo=nu(Lo,e,t,n,r,i),!0;case"mouseover":return Ro=nu(Ro,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ru.set(o,nu(Ru.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ou.set(o,nu(Ou.get(o)||null,e,t,n,r,i)),!0}return!1}function kx(e){var t=ga(e.target);if(t!==null){var n=Na(t);if(n!==null){if(t=n.tag,t===13){if(t=_x(n),t!==null){e.blockedOn=t,Nx(e.priority,function(){Ox(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=e0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yp=r,n.target.dispatchEvent(r),Yp=null}else return t=Ju(n),t!==null&&ev(t),e.blockedOn=n,!1;t.shift()}return!0}function ey(e,t,n){rd(e)&&n.delete(t)}function Rw(){Jp=!1,Co!==null&&rd(Co)&&(Co=null),Lo!==null&&rd(Lo)&&(Lo=null),Ro!==null&&rd(Ro)&&(Ro=null),Ru.forEach(ey),Ou.forEach(ey)}function ru(e,t){e.blockedOn===t&&(e.blockedOn=null,Jp||(Jp=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,Rw)))}function Pu(e){function t(i){return ru(i,e)}if(0<Of.length){ru(Of[0],e);for(var n=1;n<Of.length;n++){var r=Of[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Co!==null&&ru(Co,e),Lo!==null&&ru(Lo,e),Ro!==null&&ru(Ro,e),Ru.forEach(t),Ou.forEach(t),n=0;n<So.length;n++)r=So[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<So.length&&(n=So[0],n.blockedOn===null);)kx(n),n.blockedOn===null&&So.shift()}var Gl=Hi.ReactCurrentBatchConfig,_d=!0;function Ow(e,t,n,r){var i=Kt,o=Gl.transition;Gl.transition=null;try{Kt=1,tv(e,t,n,r)}finally{Kt=i,Gl.transition=o}}function Pw(e,t,n,r){var i=Kt,o=Gl.transition;Gl.transition=null;try{Kt=4,tv(e,t,n,r)}finally{Kt=i,Gl.transition=o}}function tv(e,t,n,r){if(_d){var i=e0(e,t,n,r);if(i===null)np(e,t,r,Sd,n),Jg(e,r);else if(Lw(i,e,t,n,r))r.stopPropagation();else if(Jg(e,r),t&4&&-1<Cw.indexOf(e)){for(;i!==null;){var o=Ju(i);if(o!==null&&Rx(o),o=e0(e,t,n,r),o===null&&np(e,t,r,Sd,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else np(e,t,r,null,n)}}var Sd=null;function e0(e,t,n,r){if(Sd=null,e=q0(r),e=ga(e),e!==null)if(t=Na(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_x(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sd=e,null}function Ix(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yw()){case Z0:return 1;case Ax:return 4;case xd:case xw:return 16;case bx:return 536870912;default:return 16}default:return 16}}var To=null,nv=null,id=null;function Dx(){if(id)return id;var e,t=nv,n=t.length,r,i="value"in To?To.value:To.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return id=i.slice(e,1<r?1-r:void 0)}function od(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pf(){return!0}function ty(){return!1}function Rr(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Pf:ty,this.isPropagationStopped=ty,this}return mn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pf)},persist:function(){},isPersistent:Pf}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=Rr(es),Zu=mn({},es,{view:0,detail:0}),Nw=Rr(Zu),Xm,Ym,iu,rh=mn({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==iu&&(iu&&e.type==="mousemove"?(Xm=e.screenX-iu.screenX,Ym=e.screenY-iu.screenY):Ym=Xm=0,iu=e),Xm)},movementY:function(e){return"movementY"in e?e.movementY:Ym}}),ny=Rr(rh),kw=mn({},rh,{dataTransfer:0}),Iw=Rr(kw),Dw=mn({},Zu,{relatedTarget:0}),Qm=Rr(Dw),Mw=mn({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Fw=Rr(Mw),jw=mn({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bw=Rr(jw),$w=mn({},es,{data:0}),ry=Rr($w),Gw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uw[e])?!!t[e]:!1}function iv(){return Vw}var Hw=mn({},Zu,{key:function(e){if(e.key){var t=Gw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iv,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ww=Rr(Hw),Xw=mn({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=Rr(Xw),Yw=mn({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iv}),Qw=Rr(Yw),Kw=mn({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),qw=Rr(Kw),Zw=mn({},rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jw=Rr(Zw),eT=[9,13,27,32],ov=Gi&&"CompositionEvent"in window,xu=null;Gi&&"documentMode"in document&&(xu=document.documentMode);var tT=Gi&&"TextEvent"in window&&!xu,Mx=Gi&&(!ov||xu&&8<xu&&11>=xu),oy=" ",ay=!1;function Fx(e,t){switch(e){case"keyup":return eT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Al=!1;function nT(e,t){switch(e){case"compositionend":return jx(t);case"keypress":return t.which!==32?null:(ay=!0,oy);case"textInput":return e=t.data,e===oy&&ay?null:e;default:return null}}function rT(e,t){if(Al)return e==="compositionend"||!ov&&Fx(e,t)?(e=Dx(),id=nv=To=null,Al=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mx&&t.locale!=="ko"?null:t.data;default:return null}}var iT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iT[e.type]:t==="textarea"}function Bx(e,t,n,r){vx(r),t=wd(t,"onChange"),0<t.length&&(n=new rv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eu=null,Nu=null;function oT(e){Kx(e,0)}function ih(e){var t=Ll(e);if(ux(t))return e}function aT(e,t){if(e==="change")return t}var $x=!1;if(Gi){var Km;if(Gi){var qm="oninput"in document;if(!qm){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),qm=typeof sy.oninput=="function"}Km=qm}else Km=!1;$x=Km&&(!document.documentMode||9<document.documentMode)}function uy(){Eu&&(Eu.detachEvent("onpropertychange",Gx),Nu=Eu=null)}function Gx(e){if(e.propertyName==="value"&&ih(Nu)){var t=[];Bx(t,Nu,e,q0(e)),Ex(oT,t)}}function lT(e,t,n){e==="focusin"?(uy(),Eu=t,Nu=n,Eu.attachEvent("onpropertychange",Gx)):e==="focusout"&&uy()}function sT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ih(Nu)}function uT(e,t){if(e==="click")return ih(t)}function cT(e,t){if(e==="input"||e==="change")return ih(t)}function fT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ni=typeof Object.is=="function"?Object.is:fT;function ku(e,t){if(ni(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mp.call(t,i)||!ni(e[i],t[i]))return!1}return!0}function cy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fy(e,t){var n=cy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cy(n)}}function zx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ux(){for(var e=window,t=vd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vd(e.document)}return t}function av(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dT(e){var t=Ux(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zx(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=fy(n,o);var a=fy(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hT=Gi&&"documentMode"in document&&11>=document.documentMode,bl=null,t0=null,_u=null,n0=!1;function dy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n0||bl==null||bl!==vd(r)||(r=bl,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&ku(_u,r)||(_u=r,r=wd(t0,"onSelect"),0<r.length&&(t=new rv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bl)))}function Nf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cl={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Zm={},Vx={};Gi&&(Vx=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function oh(e){if(Zm[e])return Zm[e];if(!Cl[e])return e;var t=Cl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Vx)return Zm[e]=t[n];return e}var Hx=oh("animationend"),Wx=oh("animationiteration"),Xx=oh("animationstart"),Yx=oh("transitionend"),Qx=new Map,hy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(e,t){Qx.set(e,t),Pa(t,[e])}for(var Jm=0;Jm<hy.length;Jm++){var ep=hy[Jm],mT=ep.toLowerCase(),pT=ep[0].toUpperCase()+ep.slice(1);jo(mT,"on"+pT)}jo(Hx,"onAnimationEnd");jo(Wx,"onAnimationIteration");jo(Xx,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(Yx,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function my(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mw(r,t,void 0,e),e.currentTarget=null}function Kx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;my(i,l,f),o=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;my(i,l,f),o=u}}}if(yd)throw e=qp,yd=!1,qp=null,e}function rn(e,t){var n=t[l0];n===void 0&&(n=t[l0]=new Set);var r=e+"__bubble";n.has(r)||(qx(t,e,2,!1),n.add(r))}function tp(e,t,n){var r=0;t&&(r|=4),qx(n,e,r,t)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[kf]){e[kf]=!0,ix.forEach(function(n){n!=="selectionchange"&&(vT.has(n)||tp(n,!1,e),tp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kf]||(t[kf]=!0,tp("selectionchange",!1,t))}}function qx(e,t,n,r){switch(Ix(t)){case 1:var i=Ow;break;case 4:i=Pw;break;default:i=tv}n=i.bind(null,t,n,e),i=void 0,!Kp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function np(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ga(l),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Ex(function(){var f=o,m=q0(n),g=[];e:{var d=Qx.get(e);if(d!==void 0){var T=rv,x=e;switch(e){case"keypress":if(od(n)===0)break e;case"keydown":case"keyup":T=Ww;break;case"focusin":x="focus",T=Qm;break;case"focusout":x="blur",T=Qm;break;case"beforeblur":case"afterblur":T=Qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Qw;break;case Hx:case Wx:case Xx:T=Fw;break;case Yx:T=qw;break;case"scroll":T=Nw;break;case"wheel":T=Jw;break;case"copy":case"cut":case"paste":T=Bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=iy}var O=(t&4)!==0,M=!O&&e==="scroll",p=O?d!==null?d+"Capture":null:d;O=[];for(var w=f,C;w!==null;){C=w;var G=C.stateNode;if(C.tag===5&&G!==null&&(C=G,p!==null&&(G=Lu(w,p),G!=null&&O.push(Du(w,G,C)))),M)break;w=w.return}0<O.length&&(d=new T(d,x,null,n,m),g.push({event:d,listeners:O}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",d&&n!==Yp&&(x=n.relatedTarget||n.fromElement)&&(ga(x)||x[zi]))break e;if((T||d)&&(d=m.window===m?m:(d=m.ownerDocument)?d.defaultView||d.parentWindow:window,T?(x=n.relatedTarget||n.toElement,T=f,x=x?ga(x):null,x!==null&&(M=Na(x),x!==M||x.tag!==5&&x.tag!==6)&&(x=null)):(T=null,x=f),T!==x)){if(O=ny,G="onMouseLeave",p="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(O=iy,G="onPointerLeave",p="onPointerEnter",w="pointer"),M=T==null?d:Ll(T),C=x==null?d:Ll(x),d=new O(G,w+"leave",T,n,m),d.target=M,d.relatedTarget=C,G=null,ga(m)===f&&(O=new O(p,w+"enter",x,n,m),O.target=C,O.relatedTarget=M,G=O),M=G,T&&x)t:{for(O=T,p=x,w=0,C=O;C;C=yl(C))w++;for(C=0,G=p;G;G=yl(G))C++;for(;0<w-C;)O=yl(O),w--;for(;0<C-w;)p=yl(p),C--;for(;w--;){if(O===p||p!==null&&O===p.alternate)break t;O=yl(O),p=yl(p)}O=null}else O=null;T!==null&&py(g,d,T,O,!1),x!==null&&M!==null&&py(g,M,x,O,!0)}}e:{if(d=f?Ll(f):window,T=d.nodeName&&d.nodeName.toLowerCase(),T==="select"||T==="input"&&d.type==="file")var q=aT;else if(ly(d))if($x)q=cT;else{q=sT;var oe=lT}else(T=d.nodeName)&&T.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=uT);if(q&&(q=q(e,f))){Bx(g,q,n,m);break e}oe&&oe(e,d,f),e==="focusout"&&(oe=d._wrapperState)&&oe.controlled&&d.type==="number"&&Up(d,"number",d.value)}switch(oe=f?Ll(f):window,e){case"focusin":(ly(oe)||oe.contentEditable==="true")&&(bl=oe,t0=f,_u=null);break;case"focusout":_u=t0=bl=null;break;case"mousedown":n0=!0;break;case"contextmenu":case"mouseup":case"dragend":n0=!1,dy(g,n,m);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":dy(g,n,m)}var we;if(ov)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Al?Fx(e,n)&&(ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ue="onCompositionStart");ue&&(Mx&&n.locale!=="ko"&&(Al||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Al&&(we=Dx()):(To=m,nv="value"in To?To.value:To.textContent,Al=!0)),oe=wd(f,ue),0<oe.length&&(ue=new ry(ue,e,null,n,m),g.push({event:ue,listeners:oe}),we?ue.data=we:(we=jx(n),we!==null&&(ue.data=we)))),(we=tT?nT(e,n):rT(e,n))&&(f=wd(f,"onBeforeInput"),0<f.length&&(m=new ry("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=we))}Kx(g,t)})}function Du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Lu(e,n),o!=null&&r.unshift(Du(e,o,i)),o=Lu(e,t),o!=null&&r.push(Du(e,o,i))),e=e.return}return r}function yl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function py(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Lu(n,o),u!=null&&a.unshift(Du(n,u,l))):i||(u=Lu(n,o),u!=null&&a.push(Du(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var gT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function vy(e){return(typeof e=="string"?e:""+e).replace(gT,`
`).replace(yT,"")}function If(e,t,n){if(t=vy(t),vy(e)!==t&&n)throw Error(Pe(425))}function Td(){}var r0=null,i0=null;function o0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,xT=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(e){return gy.resolve(null).then(e).catch(_T)}:a0;function _T(e){setTimeout(function(){throw e})}function rp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(t)}function Oo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),yi="__reactFiber$"+ts,Mu="__reactProps$"+ts,zi="__reactContainer$"+ts,l0="__reactEvents$"+ts,ST="__reactListeners$"+ts,wT="__reactHandles$"+ts;function ga(e){var t=e[yi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zi]||n[yi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yy(e);e!==null;){if(n=e[yi])return n;e=yy(e)}return t}e=n,n=e.parentNode}return null}function Ju(e){return e=e[yi]||e[zi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function ah(e){return e[Mu]||null}var s0=[],Rl=-1;function Bo(e){return{current:e}}function on(e){0>Rl||(e.current=s0[Rl],s0[Rl]=null,Rl--)}function en(e,t){Rl++,s0[Rl]=e.current,e.current=t}var Fo={},qn=Bo(Fo),hr=Bo(!1),Ta=Fo;function Wl(e,t){var n=e.type.contextTypes;if(!n)return Fo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mr(e){return e=e.childContextTypes,e!=null}function Ad(){on(hr),on(qn)}function xy(e,t,n){if(qn.current!==Fo)throw Error(Pe(168));en(qn,t),en(hr,n)}function Zx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Pe(108,lw(e)||"Unknown",i));return mn({},n,r)}function bd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fo,Ta=qn.current,en(qn,e),en(hr,hr.current),!0}function Ey(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=Zx(e,t,Ta),r.__reactInternalMemoizedMergedChildContext=e,on(hr),on(qn),en(qn,e)):on(hr),en(hr,n)}var Fi=null,lh=!1,ip=!1;function Jx(e){Fi===null?Fi=[e]:Fi.push(e)}function TT(e){lh=!0,Jx(e)}function $o(){if(!ip&&Fi!==null){ip=!0;var e=0,t=Kt;try{var n=Fi;for(Kt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fi=null,lh=!1}catch(i){throw Fi!==null&&(Fi=Fi.slice(e+1)),Tx(Z0,$o),i}finally{Kt=t,ip=!1}}return null}var Ol=[],Pl=0,Cd=null,Ld=0,Fr=[],jr=0,Aa=null,ji=1,Bi="";function pa(e,t){Ol[Pl++]=Ld,Ol[Pl++]=Cd,Cd=e,Ld=t}function eE(e,t,n){Fr[jr++]=ji,Fr[jr++]=Bi,Fr[jr++]=Aa,Aa=e;var r=ji;e=Bi;var i=32-ei(r)-1;r&=~(1<<i),n+=1;var o=32-ei(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ji=1<<32-ei(t)+i|n<<i|r,Bi=o+e}else ji=1<<o|n<<i|r,Bi=e}function lv(e){e.return!==null&&(pa(e,1),eE(e,1,0))}function sv(e){for(;e===Cd;)Cd=Ol[--Pl],Ol[Pl]=null,Ld=Ol[--Pl],Ol[Pl]=null;for(;e===Aa;)Aa=Fr[--jr],Fr[jr]=null,Bi=Fr[--jr],Fr[jr]=null,ji=Fr[--jr],Fr[jr]=null}var br=null,Ar=null,ln=!1,Zr=null;function tE(e,t){var n=Br(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _y(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,br=e,Ar=Oo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,br=e,Ar=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Aa!==null?{id:ji,overflow:Bi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Br(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,br=e,Ar=null,!0):!1;default:return!1}}function u0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function c0(e){if(ln){var t=Ar;if(t){var n=t;if(!_y(e,t)){if(u0(e))throw Error(Pe(418));t=Oo(n.nextSibling);var r=br;t&&_y(e,t)?tE(r,n):(e.flags=e.flags&-4097|2,ln=!1,br=e)}}else{if(u0(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,ln=!1,br=e}}}function Sy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Df(e){if(e!==br)return!1;if(!ln)return Sy(e),ln=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!o0(e.type,e.memoizedProps)),t&&(t=Ar)){if(u0(e))throw nE(),Error(Pe(418));for(;t;)tE(e,t),t=Oo(t.nextSibling)}if(Sy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ar=Oo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ar=null}}else Ar=br?Oo(e.stateNode.nextSibling):null;return!0}function nE(){for(var e=Ar;e;)e=Oo(e.nextSibling)}function Xl(){Ar=br=null,ln=!1}function uv(e){Zr===null?Zr=[e]:Zr.push(e)}var AT=Hi.ReactCurrentBatchConfig;function Kr(e,t){if(e&&e.defaultProps){t=mn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Rd=Bo(null),Od=null,Nl=null,cv=null;function fv(){cv=Nl=Od=null}function dv(e){var t=Rd.current;on(Rd),e._currentValue=t}function f0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zl(e,t){Od=e,cv=Nl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fr=!0),e.firstContext=null)}function Gr(e){var t=e._currentValue;if(cv!==e)if(e={context:e,memoizedValue:t,next:null},Nl===null){if(Od===null)throw Error(Pe(308));Nl=e,Od.dependencies={lanes:0,firstContext:e}}else Nl=Nl.next=e;return t}var ya=null;function hv(e){ya===null?ya=[e]:ya.push(e)}function rE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,hv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ui(e,r)}function Ui(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _o=!1;function mv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Vt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ui(e,n)}return i=r.interleaved,i===null?(t.next=t,hv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ui(e,n)}function ad(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,J0(e,n)}}function wy(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pd(e,t,n,r){var i=e.updateQueue;_o=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?o=f:a.next=f,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(o!==null){var g=i.baseState;a=0,m=f=u=null,l=o;do{var d=l.lane,T=l.eventTime;if((r&d)===d){m!==null&&(m=m.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,O=l;switch(d=t,T=n,O.tag){case 1:if(x=O.payload,typeof x=="function"){g=x.call(T,g,d);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=O.payload,d=typeof x=="function"?x.call(T,g,d):x,d==null)break e;g=mn({},g,d);break e;case 2:_o=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else T={eventTime:T,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=T,u=g):m=m.next=T,a|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(m===null&&(u=g),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Ca|=a,e.lanes=a,e.memoizedState=g}}function Ty(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Pe(191,i));i.call(r)}}}var oE=new rx.Component().refs;function d0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sh={isMounted:function(e){return(e=e._reactInternals)?Na(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nr(),i=ko(e),o=$i(r,i);o.payload=t,n!=null&&(o.callback=n),t=Po(e,o,i),t!==null&&(ti(t,e,i,r),ad(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nr(),i=ko(e),o=$i(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Po(e,o,i),t!==null&&(ti(t,e,i,r),ad(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nr(),r=ko(e),i=$i(n,r);i.tag=2,t!=null&&(i.callback=t),t=Po(e,i,r),t!==null&&(ti(t,e,r,n),ad(t,e,r))}};function Ay(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!ku(n,r)||!ku(i,o):!0}function aE(e,t,n){var r=!1,i=Fo,o=t.contextType;return typeof o=="object"&&o!==null?o=Gr(o):(i=mr(t)?Ta:qn.current,r=t.contextTypes,o=(r=r!=null)?Wl(e,i):Fo),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function by(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sh.enqueueReplaceState(t,t.state,null)}function h0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=oE,mv(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Gr(o):(o=mr(t)?Ta:qn.current,i.context=Wl(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(d0(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sh.enqueueReplaceState(i,i.state,null),Pd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ou(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=i.refs;l===oE&&(l=i.refs={}),a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function Mf(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cy(e){var t=e._init;return t(e._payload)}function lE(e){function t(p,w){if(e){var C=p.deletions;C===null?(p.deletions=[w],p.flags|=16):C.push(w)}}function n(p,w){if(!e)return null;for(;w!==null;)t(p,w),w=w.sibling;return null}function r(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function i(p,w){return p=Io(p,w),p.index=0,p.sibling=null,p}function o(p,w,C){return p.index=C,e?(C=p.alternate,C!==null?(C=C.index,C<w?(p.flags|=2,w):C):(p.flags|=2,w)):(p.flags|=1048576,w)}function a(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,w,C,G){return w===null||w.tag!==6?(w=fp(C,p.mode,G),w.return=p,w):(w=i(w,C),w.return=p,w)}function u(p,w,C,G){var q=C.type;return q===Tl?m(p,w,C.props.children,G,C.key):w!==null&&(w.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Eo&&Cy(q)===w.type)?(G=i(w,C.props),G.ref=ou(p,w,C),G.return=p,G):(G=dd(C.type,C.key,C.props,null,p.mode,G),G.ref=ou(p,w,C),G.return=p,G)}function f(p,w,C,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=dp(C,p.mode,G),w.return=p,w):(w=i(w,C.children||[]),w.return=p,w)}function m(p,w,C,G,q){return w===null||w.tag!==7?(w=Sa(C,p.mode,G,q),w.return=p,w):(w=i(w,C),w.return=p,w)}function g(p,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=fp(""+w,p.mode,C),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Af:return C=dd(w.type,w.key,w.props,null,p.mode,C),C.ref=ou(p,null,w),C.return=p,C;case wl:return w=dp(w,p.mode,C),w.return=p,w;case Eo:var G=w._init;return g(p,G(w._payload),C)}if(hu(w)||eu(w))return w=Sa(w,p.mode,C,null),w.return=p,w;Mf(p,w)}return null}function d(p,w,C,G){var q=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:l(p,w,""+C,G);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Af:return C.key===q?u(p,w,C,G):null;case wl:return C.key===q?f(p,w,C,G):null;case Eo:return q=C._init,d(p,w,q(C._payload),G)}if(hu(C)||eu(C))return q!==null?null:m(p,w,C,G,null);Mf(p,C)}return null}function T(p,w,C,G,q){if(typeof G=="string"&&G!==""||typeof G=="number")return p=p.get(C)||null,l(w,p,""+G,q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Af:return p=p.get(G.key===null?C:G.key)||null,u(w,p,G,q);case wl:return p=p.get(G.key===null?C:G.key)||null,f(w,p,G,q);case Eo:var oe=G._init;return T(p,w,C,oe(G._payload),q)}if(hu(G)||eu(G))return p=p.get(C)||null,m(w,p,G,q,null);Mf(w,G)}return null}function x(p,w,C,G){for(var q=null,oe=null,we=w,ue=w=0,ut=null;we!==null&&ue<C.length;ue++){we.index>ue?(ut=we,we=null):ut=we.sibling;var Ue=d(p,we,C[ue],G);if(Ue===null){we===null&&(we=ut);break}e&&we&&Ue.alternate===null&&t(p,we),w=o(Ue,w,ue),oe===null?q=Ue:oe.sibling=Ue,oe=Ue,we=ut}if(ue===C.length)return n(p,we),ln&&pa(p,ue),q;if(we===null){for(;ue<C.length;ue++)we=g(p,C[ue],G),we!==null&&(w=o(we,w,ue),oe===null?q=we:oe.sibling=we,oe=we);return ln&&pa(p,ue),q}for(we=r(p,we);ue<C.length;ue++)ut=T(we,p,ue,C[ue],G),ut!==null&&(e&&ut.alternate!==null&&we.delete(ut.key===null?ue:ut.key),w=o(ut,w,ue),oe===null?q=ut:oe.sibling=ut,oe=ut);return e&&we.forEach(function(ge){return t(p,ge)}),ln&&pa(p,ue),q}function O(p,w,C,G){var q=eu(C);if(typeof q!="function")throw Error(Pe(150));if(C=q.call(C),C==null)throw Error(Pe(151));for(var oe=q=null,we=w,ue=w=0,ut=null,Ue=C.next();we!==null&&!Ue.done;ue++,Ue=C.next()){we.index>ue?(ut=we,we=null):ut=we.sibling;var ge=d(p,we,Ue.value,G);if(ge===null){we===null&&(we=ut);break}e&&we&&ge.alternate===null&&t(p,we),w=o(ge,w,ue),oe===null?q=ge:oe.sibling=ge,oe=ge,we=ut}if(Ue.done)return n(p,we),ln&&pa(p,ue),q;if(we===null){for(;!Ue.done;ue++,Ue=C.next())Ue=g(p,Ue.value,G),Ue!==null&&(w=o(Ue,w,ue),oe===null?q=Ue:oe.sibling=Ue,oe=Ue);return ln&&pa(p,ue),q}for(we=r(p,we);!Ue.done;ue++,Ue=C.next())Ue=T(we,p,ue,Ue.value,G),Ue!==null&&(e&&Ue.alternate!==null&&we.delete(Ue.key===null?ue:Ue.key),w=o(Ue,w,ue),oe===null?q=Ue:oe.sibling=Ue,oe=Ue);return e&&we.forEach(function(Xe){return t(p,Xe)}),ln&&pa(p,ue),q}function M(p,w,C,G){if(typeof C=="object"&&C!==null&&C.type===Tl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Af:e:{for(var q=C.key,oe=w;oe!==null;){if(oe.key===q){if(q=C.type,q===Tl){if(oe.tag===7){n(p,oe.sibling),w=i(oe,C.props.children),w.return=p,p=w;break e}}else if(oe.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Eo&&Cy(q)===oe.type){n(p,oe.sibling),w=i(oe,C.props),w.ref=ou(p,oe,C),w.return=p,p=w;break e}n(p,oe);break}else t(p,oe);oe=oe.sibling}C.type===Tl?(w=Sa(C.props.children,p.mode,G,C.key),w.return=p,p=w):(G=dd(C.type,C.key,C.props,null,p.mode,G),G.ref=ou(p,w,C),G.return=p,p=G)}return a(p);case wl:e:{for(oe=C.key;w!==null;){if(w.key===oe)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(p,w.sibling),w=i(w,C.children||[]),w.return=p,p=w;break e}else{n(p,w);break}else t(p,w);w=w.sibling}w=dp(C,p.mode,G),w.return=p,p=w}return a(p);case Eo:return oe=C._init,M(p,w,oe(C._payload),G)}if(hu(C))return x(p,w,C,G);if(eu(C))return O(p,w,C,G);Mf(p,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(p,w.sibling),w=i(w,C),w.return=p,p=w):(n(p,w),w=fp(C,p.mode,G),w.return=p,p=w),a(p)):n(p,w)}return M}var Yl=lE(!0),sE=lE(!1),ec={},Ei=Bo(ec),Fu=Bo(ec),ju=Bo(ec);function xa(e){if(e===ec)throw Error(Pe(174));return e}function pv(e,t){switch(en(ju,t),en(Fu,e),en(Ei,ec),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hp(t,e)}on(Ei),en(Ei,t)}function Ql(){on(Ei),on(Fu),on(ju)}function uE(e){xa(ju.current);var t=xa(Ei.current),n=Hp(t,e.type);t!==n&&(en(Fu,e),en(Ei,n))}function vv(e){Fu.current===e&&(on(Ei),on(Fu))}var dn=Bo(0);function Nd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var op=[];function gv(){for(var e=0;e<op.length;e++)op[e]._workInProgressVersionPrimary=null;op.length=0}var ld=Hi.ReactCurrentDispatcher,ap=Hi.ReactCurrentBatchConfig,ba=0,hn=null,Mn=null,Un=null,kd=!1,Su=!1,Bu=0,bT=0;function Yn(){throw Error(Pe(321))}function yv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ni(e[n],t[n]))return!1;return!0}function xv(e,t,n,r,i,o){if(ba=o,hn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ld.current=e===null||e.memoizedState===null?OT:PT,e=n(r,i),Su){o=0;do{if(Su=!1,Bu=0,25<=o)throw Error(Pe(301));o+=1,Un=Mn=null,t.updateQueue=null,ld.current=NT,e=n(r,i)}while(Su)}if(ld.current=Id,t=Mn!==null&&Mn.next!==null,ba=0,Un=Mn=hn=null,kd=!1,t)throw Error(Pe(300));return e}function Ev(){var e=Bu!==0;return Bu=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?hn.memoizedState=Un=e:Un=Un.next=e,Un}function zr(){if(Mn===null){var e=hn.alternate;e=e!==null?e.memoizedState:null}else e=Mn.next;var t=Un===null?hn.memoizedState:Un.next;if(t!==null)Un=t,Mn=e;else{if(e===null)throw Error(Pe(310));Mn=e,e={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},Un===null?hn.memoizedState=Un=e:Un=Un.next=e}return Un}function $u(e,t){return typeof t=="function"?t(e):t}function lp(e){var t=zr(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=Mn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,u=null,f=o;do{var m=f.lane;if((ba&m)===m)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,hn.lanes|=m,Ca|=m}f=f.next}while(f!==null&&f!==o);u===null?a=r:u.next=l,ni(r,t.memoizedState)||(fr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,hn.lanes|=o,Ca|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sp(e){var t=zr(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ni(o,t.memoizedState)||(fr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function cE(){}function fE(e,t){var n=hn,r=zr(),i=t(),o=!ni(r.memoizedState,i);if(o&&(r.memoizedState=i,fr=!0),r=r.queue,_v(mE.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Un!==null&&Un.memoizedState.tag&1){if(n.flags|=2048,Gu(9,hE.bind(null,n,r,i,t),void 0,null),Vn===null)throw Error(Pe(349));ba&30||dE(n,t,i)}return i}function dE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hE(e,t,n,r){t.value=n,t.getSnapshot=r,pE(t)&&vE(e)}function mE(e,t,n){return n(function(){pE(t)&&vE(e)})}function pE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ni(e,n)}catch{return!0}}function vE(e){var t=Ui(e,1);t!==null&&ti(t,e,1,-1)}function Ly(e){var t=vi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=RT.bind(null,hn,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=hn.updateQueue,t===null?(t={lastEffect:null,stores:null},hn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gE(){return zr().memoizedState}function sd(e,t,n,r){var i=vi();hn.flags|=e,i.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function uh(e,t,n,r){var i=zr();r=r===void 0?null:r;var o=void 0;if(Mn!==null){var a=Mn.memoizedState;if(o=a.destroy,r!==null&&yv(r,a.deps)){i.memoizedState=Gu(t,n,o,r);return}}hn.flags|=e,i.memoizedState=Gu(1|t,n,o,r)}function Ry(e,t){return sd(8390656,8,e,t)}function _v(e,t){return uh(2048,8,e,t)}function yE(e,t){return uh(4,2,e,t)}function xE(e,t){return uh(4,4,e,t)}function EE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _E(e,t,n){return n=n!=null?n.concat([e]):null,uh(4,4,EE.bind(null,t,e),n)}function Sv(){}function SE(e,t){var n=zr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wE(e,t){var n=zr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function TE(e,t,n){return ba&21?(ni(n,t)||(n=Cx(),hn.lanes|=n,Ca|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fr=!0),e.memoizedState=n)}function CT(e,t){var n=Kt;Kt=n!==0&&4>n?n:4,e(!0);var r=ap.transition;ap.transition={};try{e(!1),t()}finally{Kt=n,ap.transition=r}}function AE(){return zr().memoizedState}function LT(e,t,n){var r=ko(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bE(e))CE(t,n);else if(n=rE(e,t,n,r),n!==null){var i=nr();ti(n,e,r,i),LE(n,t,r)}}function RT(e,t,n){var r=ko(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bE(e))CE(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,ni(l,a)){var u=t.interleaved;u===null?(i.next=i,hv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=rE(e,t,i,r),n!==null&&(i=nr(),ti(n,e,r,i),LE(n,t,r))}}function bE(e){var t=e.alternate;return e===hn||t!==null&&t===hn}function CE(e,t){Su=kd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function LE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,J0(e,n)}}var Id={readContext:Gr,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},OT={readContext:Gr,useCallback:function(e,t){return vi().memoizedState=[e,t===void 0?null:t],e},useContext:Gr,useEffect:Ry,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,sd(4194308,4,EE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sd(4194308,4,e,t)},useInsertionEffect:function(e,t){return sd(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=LT.bind(null,hn,e),[r.memoizedState,e]},useRef:function(e){var t=vi();return e={current:e},t.memoizedState=e},useState:Ly,useDebugValue:Sv,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ly(!1),t=e[0];return e=CT.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=hn,i=vi();if(ln){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),Vn===null)throw Error(Pe(349));ba&30||dE(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ry(mE.bind(null,r,o,e),[e]),r.flags|=2048,Gu(9,hE.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vi(),t=Vn.identifierPrefix;if(ln){var n=Bi,r=ji;n=(r&~(1<<32-ei(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},PT={readContext:Gr,useCallback:SE,useContext:Gr,useEffect:_v,useImperativeHandle:_E,useInsertionEffect:yE,useLayoutEffect:xE,useMemo:wE,useReducer:lp,useRef:gE,useState:function(){return lp($u)},useDebugValue:Sv,useDeferredValue:function(e){var t=zr();return TE(t,Mn.memoizedState,e)},useTransition:function(){var e=lp($u)[0],t=zr().memoizedState;return[e,t]},useMutableSource:cE,useSyncExternalStore:fE,useId:AE,unstable_isNewReconciler:!1},NT={readContext:Gr,useCallback:SE,useContext:Gr,useEffect:_v,useImperativeHandle:_E,useInsertionEffect:yE,useLayoutEffect:xE,useMemo:wE,useReducer:sp,useRef:gE,useState:function(){return sp($u)},useDebugValue:Sv,useDeferredValue:function(e){var t=zr();return Mn===null?t.memoizedState=e:TE(t,Mn.memoizedState,e)},useTransition:function(){var e=sp($u)[0],t=zr().memoizedState;return[e,t]},useMutableSource:cE,useSyncExternalStore:fE,useId:AE,unstable_isNewReconciler:!1};function Kl(e,t){try{var n="",r=t;do n+=aw(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function up(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function RE(e,t,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Md||(Md=!0,T0=r),m0(e,t)},n}function OE(e,t,n){n=$i(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){m0(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){m0(e,t),typeof r!="function"&&(No===null?No=new Set([this]):No.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Oy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=XT.bind(null,e,t,n),t.then(e,e))}function Py(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ny(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$i(-1,1),t.tag=2,Po(n,t,1))),n.lanes|=1),e)}var IT=Hi.ReactCurrentOwner,fr=!1;function er(e,t,n,r){t.child=e===null?sE(t,null,n,r):Yl(t,e.child,n,r)}function ky(e,t,n,r,i){n=n.render;var o=t.ref;return zl(t,i),r=xv(e,t,n,r,o,i),n=Ev(),e!==null&&!fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vi(e,t,i)):(ln&&n&&lv(t),t.flags|=1,er(e,t,r,i),t.child)}function Iy(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Ov(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,PE(e,t,o,r,i)):(e=dd(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(a,r)&&e.ref===t.ref)return Vi(e,t,i)}return t.flags|=1,e=Io(o,r),e.ref=t.ref,e.return=t,t.child=e}function PE(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(ku(o,r)&&e.ref===t.ref)if(fr=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(fr=!0);else return t.lanes=e.lanes,Vi(e,t,i)}return p0(e,t,n,r,i)}function NE(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(Il,Tr),Tr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,en(Il,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,en(Il,Tr),Tr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,en(Il,Tr),Tr|=r;return er(e,t,i,n),t.child}function kE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function p0(e,t,n,r,i){var o=mr(n)?Ta:qn.current;return o=Wl(t,o),zl(t,i),n=xv(e,t,n,r,o,i),r=Ev(),e!==null&&!fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vi(e,t,i)):(ln&&r&&lv(t),t.flags|=1,er(e,t,n,i),t.child)}function Dy(e,t,n,r,i){if(mr(n)){var o=!0;bd(t)}else o=!1;if(zl(t,i),t.stateNode===null)ud(e,t),aE(t,n,r),h0(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=Gr(f):(f=mr(n)?Ta:qn.current,f=Wl(t,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==f)&&by(t,a,r,f),_o=!1;var d=t.memoizedState;a.state=d,Pd(t,r,a,i),u=t.memoizedState,l!==r||d!==u||hr.current||_o?(typeof m=="function"&&(d0(t,n,m,r),u=t.memoizedState),(l=_o||Ay(t,n,l,r,d,u,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,iE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Kr(t.type,l),a.props=f,g=t.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gr(u):(u=mr(n)?Ta:qn.current,u=Wl(t,u));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||d!==u)&&by(t,a,r,u),_o=!1,d=t.memoizedState,a.state=d,Pd(t,r,a,i);var x=t.memoizedState;l!==g||d!==x||hr.current||_o?(typeof T=="function"&&(d0(t,n,T,r),x=t.memoizedState),(f=_o||Ay(t,n,f,r,d,x,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=u,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return v0(e,t,n,r,o,i)}function v0(e,t,n,r,i,o){kE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Ey(t,n,!1),Vi(e,t,o);r=t.stateNode,IT.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Yl(t,e.child,null,o),t.child=Yl(t,null,l,o)):er(e,t,l,o),t.memoizedState=r.state,i&&Ey(t,n,!0),t.child}function IE(e){var t=e.stateNode;t.pendingContext?xy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xy(e,t.context,!1),pv(e,t.containerInfo)}function My(e,t,n,r,i){return Xl(),uv(i),t.flags|=256,er(e,t,n,r),t.child}var g0={dehydrated:null,treeContext:null,retryLane:0};function y0(e){return{baseLanes:e,cachePool:null,transitions:null}}function DE(e,t,n){var r=t.pendingProps,i=dn.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),en(dn,i&1),e===null)return c0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=dh(a,r,0,null),e=Sa(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=y0(n),t.memoizedState=g0,e):wv(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return DT(e,t,a,r,l,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Io(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Io(l,o):(o=Sa(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?y0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=g0,r}return o=e.child,e=o.sibling,r=Io(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function wv(e,t){return t=dh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ff(e,t,n,r){return r!==null&&uv(r),Yl(t,e.child,null,n),e=wv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function DT(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=up(Error(Pe(422))),Ff(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=dh({mode:"visible",children:r.children},i,0,null),o=Sa(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Yl(t,e.child,null,a),t.child.memoizedState=y0(a),t.memoizedState=g0,o);if(!(t.mode&1))return Ff(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(Pe(419)),r=up(o,r,void 0),Ff(e,t,a,r)}if(l=(a&e.childLanes)!==0,fr||l){if(r=Vn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ui(e,i),ti(r,e,i,-1))}return Rv(),r=up(Error(Pe(421))),Ff(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=YT.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ar=Oo(i.nextSibling),br=t,ln=!0,Zr=null,e!==null&&(Fr[jr++]=ji,Fr[jr++]=Bi,Fr[jr++]=Aa,ji=e.id,Bi=e.overflow,Aa=t),t=wv(t,r.children),t.flags|=4096,t)}function Fy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),f0(e.return,t,n)}function cp(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ME(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(er(e,t,r.children,n),r=dn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fy(e,n,t);else if(e.tag===19)Fy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(en(dn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Nd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),cp(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Nd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}cp(t,!0,n,null,o);break;case"together":cp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ud(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ca|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=Io(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Io(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function MT(e,t,n){switch(t.tag){case 3:IE(t),Xl();break;case 5:uE(t);break;case 1:mr(t.type)&&bd(t);break;case 4:pv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;en(Rd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(en(dn,dn.current&1),t.flags|=128,null):n&t.child.childLanes?DE(e,t,n):(en(dn,dn.current&1),e=Vi(e,t,n),e!==null?e.sibling:null);en(dn,dn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ME(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),en(dn,dn.current),r)break;return null;case 22:case 23:return t.lanes=0,NE(e,t,n)}return Vi(e,t,n)}var FE,x0,jE,BE;FE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x0=function(){};jE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,xa(Ei.current);var o=null;switch(n){case"input":i=Gp(e,i),r=Gp(e,r),o=[];break;case"select":i=mn({},i,{value:void 0}),r=mn({},r,{value:void 0}),o=[];break;case"textarea":i=Vp(e,i),r=Vp(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Td)}Wp(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(bu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(bu.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&rn("scroll",e),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};BE=function(e,t,n,r){n!==r&&(t.flags|=4)};function au(e,t){if(!ln)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function FT(e,t,n){var r=t.pendingProps;switch(sv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return mr(t.type)&&Ad(),Qn(t),null;case 3:return r=t.stateNode,Ql(),on(hr),on(qn),gv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Df(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zr!==null&&(C0(Zr),Zr=null))),x0(e,t),Qn(t),null;case 5:vv(t);var i=xa(ju.current);if(n=t.type,e!==null&&t.stateNode!=null)jE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return Qn(t),null}if(e=xa(Ei.current),Df(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[yi]=t,r[Mu]=o,e=(t.mode&1)!==0,n){case"dialog":rn("cancel",r),rn("close",r);break;case"iframe":case"object":case"embed":rn("load",r);break;case"video":case"audio":for(i=0;i<pu.length;i++)rn(pu[i],r);break;case"source":rn("error",r);break;case"img":case"image":case"link":rn("error",r),rn("load",r);break;case"details":rn("toggle",r);break;case"input":Wg(r,o),rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},rn("invalid",r);break;case"textarea":Yg(r,o),rn("invalid",r)}Wp(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&If(r.textContent,l,e),i=["children",""+l]):bu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&rn("scroll",r)}switch(n){case"input":bf(r),Xg(r,o,!0);break;case"textarea":bf(r),Qg(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Td)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[yi]=t,e[Mu]=r,FE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Xp(n,r),n){case"dialog":rn("cancel",e),rn("close",e),i=r;break;case"iframe":case"object":case"embed":rn("load",e),i=r;break;case"video":case"audio":for(i=0;i<pu.length;i++)rn(pu[i],e);i=r;break;case"source":rn("error",e),i=r;break;case"img":case"image":case"link":rn("error",e),rn("load",e),i=r;break;case"details":rn("toggle",e),i=r;break;case"input":Wg(e,r),i=Gp(e,r),rn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=mn({},r,{value:void 0}),rn("invalid",e);break;case"textarea":Yg(e,r),i=Vp(e,r),rn("invalid",e);break;default:i=r}Wp(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?px(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hx(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cu(e,u):typeof u=="number"&&Cu(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bu.hasOwnProperty(o)?u!=null&&o==="onScroll"&&rn("scroll",e):u!=null&&X0(e,o,u,a))}switch(n){case"input":bf(e),Xg(e,r,!1);break;case"textarea":bf(e),Qg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mo(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?jl(e,!!r.multiple,o,!1):r.defaultValue!=null&&jl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Td)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qn(t),null;case 6:if(e&&t.stateNode!=null)BE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=xa(ju.current),xa(Ei.current),Df(t)){if(r=t.stateNode,n=t.memoizedProps,r[yi]=t,(o=r.nodeValue!==n)&&(e=br,e!==null))switch(e.tag){case 3:If(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&If(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yi]=t,t.stateNode=r}return Qn(t),null;case 13:if(on(dn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ln&&Ar!==null&&t.mode&1&&!(t.flags&128))nE(),Xl(),t.flags|=98560,o=!1;else if(o=Df(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Pe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Pe(317));o[yi]=t}else Xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qn(t),o=!1}else Zr!==null&&(C0(Zr),Zr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dn.current&1?Fn===0&&(Fn=3):Rv())),t.updateQueue!==null&&(t.flags|=4),Qn(t),null);case 4:return Ql(),x0(e,t),e===null&&Iu(t.stateNode.containerInfo),Qn(t),null;case 10:return dv(t.type._context),Qn(t),null;case 17:return mr(t.type)&&Ad(),Qn(t),null;case 19:if(on(dn),o=t.memoizedState,o===null)return Qn(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)au(o,!1);else{if(Fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Nd(e),a!==null){for(t.flags|=128,au(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return en(dn,dn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Cn()>ql&&(t.flags|=128,r=!0,au(o,!1),t.lanes=4194304)}else{if(!r)if(e=Nd(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),au(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ln)return Qn(t),null}else 2*Cn()-o.renderingStartTime>ql&&n!==1073741824&&(t.flags|=128,r=!0,au(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Cn(),t.sibling=null,n=dn.current,en(dn,r?n&1|2:n&1),t):(Qn(t),null);case 22:case 23:return Lv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tr&1073741824&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function jT(e,t){switch(sv(t),t.tag){case 1:return mr(t.type)&&Ad(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ql(),on(hr),on(qn),gv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vv(t),null;case 13:if(on(dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));Xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return on(dn),null;case 4:return Ql(),null;case 10:return dv(t.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var jf=!1,Kn=!1,BT=typeof WeakSet=="function"?WeakSet:Set,tt=null;function kl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_n(e,t,r)}else n.current=null}function E0(e,t,n){try{n()}catch(r){_n(e,t,r)}}var jy=!1;function $T(e,t){if(r0=_d,e=Ux(),av(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,m=0,g=e,d=null;t:for(;;){for(var T;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==o||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)d=g,g=T;for(;;){if(g===e)break t;if(d===n&&++f===i&&(l=a),d===o&&++m===r&&(u=a),(T=g.nextSibling)!==null)break;g=d,d=g.parentNode}g=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(i0={focusedElem:e,selectionRange:n},_d=!1,tt=t;tt!==null;)if(t=tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tt=e;else for(;tt!==null;){t=tt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var O=x.memoizedProps,M=x.memoizedState,p=t.stateNode,w=p.getSnapshotBeforeUpdate(t.elementType===t.type?O:Kr(t.type,O),M);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(G){_n(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,tt=e;break}tt=t.return}return x=jy,jy=!1,x}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&E0(t,n,o)}i=i.next}while(i!==r)}}function ch(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $E(e){var t=e.alternate;t!==null&&(e.alternate=null,$E(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yi],delete t[Mu],delete t[l0],delete t[ST],delete t[wT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function GE(e){return e.tag===5||e.tag===3||e.tag===4}function By(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||GE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function S0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Td));else if(r!==4&&(e=e.child,e!==null))for(S0(e,t,n),e=e.sibling;e!==null;)S0(e,t,n),e=e.sibling}function w0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(w0(e,t,n),e=e.sibling;e!==null;)w0(e,t,n),e=e.sibling}var Hn=null,qr=!1;function vo(e,t,n){for(n=n.child;n!==null;)zE(e,t,n),n=n.sibling}function zE(e,t,n){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(nh,n)}catch{}switch(n.tag){case 5:Kn||kl(n,t);case 6:var r=Hn,i=qr;Hn=null,vo(e,t,n),Hn=r,qr=i,Hn!==null&&(qr?(e=Hn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(qr?(e=Hn,n=n.stateNode,e.nodeType===8?rp(e.parentNode,n):e.nodeType===1&&rp(e,n),Pu(e)):rp(Hn,n.stateNode));break;case 4:r=Hn,i=qr,Hn=n.stateNode.containerInfo,qr=!0,vo(e,t,n),Hn=r,qr=i;break;case 0:case 11:case 14:case 15:if(!Kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&E0(n,t,a),i=i.next}while(i!==r)}vo(e,t,n);break;case 1:if(!Kn&&(kl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){_n(n,t,l)}vo(e,t,n);break;case 21:vo(e,t,n);break;case 22:n.mode&1?(Kn=(r=Kn)||n.memoizedState!==null,vo(e,t,n),Kn=r):vo(e,t,n);break;default:vo(e,t,n)}}function $y(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new BT),t.forEach(function(r){var i=QT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Hn=l.stateNode,qr=!1;break e;case 3:Hn=l.stateNode.containerInfo,qr=!0;break e;case 4:Hn=l.stateNode.containerInfo,qr=!0;break e}l=l.return}if(Hn===null)throw Error(Pe(160));zE(o,a,i),Hn=null,qr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){_n(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)UE(t,e),t=t.sibling}function UE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yr(t,e),mi(e),r&4){try{wu(3,e,e.return),ch(3,e)}catch(O){_n(e,e.return,O)}try{wu(5,e,e.return)}catch(O){_n(e,e.return,O)}}break;case 1:Yr(t,e),mi(e),r&512&&n!==null&&kl(n,n.return);break;case 5:if(Yr(t,e),mi(e),r&512&&n!==null&&kl(n,n.return),e.flags&32){var i=e.stateNode;try{Cu(i,"")}catch(O){_n(e,e.return,O)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&cx(i,o),Xp(l,a);var f=Xp(l,o);for(a=0;a<u.length;a+=2){var m=u[a],g=u[a+1];m==="style"?px(i,g):m==="dangerouslySetInnerHTML"?hx(i,g):m==="children"?Cu(i,g):X0(i,m,g,f)}switch(l){case"input":zp(i,o);break;case"textarea":fx(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?jl(i,!!o.multiple,T,!1):d!==!!o.multiple&&(o.defaultValue!=null?jl(i,!!o.multiple,o.defaultValue,!0):jl(i,!!o.multiple,o.multiple?[]:"",!1))}i[Mu]=o}catch(O){_n(e,e.return,O)}}break;case 6:if(Yr(t,e),mi(e),r&4){if(e.stateNode===null)throw Error(Pe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(O){_n(e,e.return,O)}}break;case 3:if(Yr(t,e),mi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(O){_n(e,e.return,O)}break;case 4:Yr(t,e),mi(e);break;case 13:Yr(t,e),mi(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(bv=Cn())),r&4&&$y(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(Kn=(f=Kn)||m,Yr(t,e),Kn=f):Yr(t,e),mi(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(tt=e,m=e.child;m!==null;){for(g=tt=m;tt!==null;){switch(d=tt,T=d.child,d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return);break;case 1:kl(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(O){_n(r,n,O)}}break;case 5:kl(d,d.return);break;case 22:if(d.memoizedState!==null){zy(g);continue}}T!==null?(T.return=d,tt=T):zy(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{i=g.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=mx("display",a))}catch(O){_n(e,e.return,O)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(O){_n(e,e.return,O)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Yr(t,e),mi(e),r&4&&$y(e);break;case 21:break;default:Yr(t,e),mi(e)}}function mi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(GE(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var o=By(e);w0(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=By(e);S0(e,l,a);break;default:throw Error(Pe(161))}}catch(u){_n(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GT(e,t,n){tt=e,VE(e)}function VE(e,t,n){for(var r=(e.mode&1)!==0;tt!==null;){var i=tt,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||jf;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Kn;l=jf;var f=Kn;if(jf=a,(Kn=u)&&!f)for(tt=i;tt!==null;)a=tt,u=a.child,a.tag===22&&a.memoizedState!==null?Uy(i):u!==null?(u.return=a,tt=u):Uy(i);for(;o!==null;)tt=o,VE(o),o=o.sibling;tt=i,jf=l,Kn=f}Gy(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,tt=o):Gy(e)}}function Gy(e){for(;tt!==null;){var t=tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kn||ch(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Kr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ty(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ty(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Pu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Kn||t.flags&512&&_0(t)}catch(d){_n(t,t.return,d)}}if(t===e){tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,tt=n;break}tt=t.return}}function zy(e){for(;tt!==null;){var t=tt;if(t===e){tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,tt=n;break}tt=t.return}}function Uy(e){for(;tt!==null;){var t=tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ch(4,t)}catch(u){_n(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){_n(t,i,u)}}var o=t.return;try{_0(t)}catch(u){_n(t,o,u)}break;case 5:var a=t.return;try{_0(t)}catch(u){_n(t,a,u)}}}catch(u){_n(t,t.return,u)}if(t===e){tt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,tt=l;break}tt=t.return}}var zT=Math.ceil,Dd=Hi.ReactCurrentDispatcher,Tv=Hi.ReactCurrentOwner,$r=Hi.ReactCurrentBatchConfig,Vt=0,Vn=null,Pn=null,Wn=0,Tr=0,Il=Bo(0),Fn=0,zu=null,Ca=0,fh=0,Av=0,Tu=null,cr=null,bv=0,ql=1/0,Mi=null,Md=!1,T0=null,No=null,Bf=!1,Ao=null,Fd=0,Au=0,A0=null,cd=-1,fd=0;function nr(){return Vt&6?Cn():cd!==-1?cd:cd=Cn()}function ko(e){return e.mode&1?Vt&2&&Wn!==0?Wn&-Wn:AT.transition!==null?(fd===0&&(fd=Cx()),fd):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:Ix(e.type)),e):1}function ti(e,t,n,r){if(50<Au)throw Au=0,A0=null,Error(Pe(185));qu(e,n,r),(!(Vt&2)||e!==Vn)&&(e===Vn&&(!(Vt&2)&&(fh|=n),Fn===4&&wo(e,Wn)),pr(e,r),n===1&&Vt===0&&!(t.mode&1)&&(ql=Cn()+500,lh&&$o()))}function pr(e,t){var n=e.callbackNode;Aw(e,t);var r=Ed(e,e===Vn?Wn:0);if(r===0)n!==null&&Zg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zg(n),t===1)e.tag===0?TT(Vy.bind(null,e)):Jx(Vy.bind(null,e)),ET(function(){!(Vt&6)&&$o()}),n=null;else{switch(Lx(r)){case 1:n=Z0;break;case 4:n=Ax;break;case 16:n=xd;break;case 536870912:n=bx;break;default:n=xd}n=ZE(n,HE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function HE(e,t){if(cd=-1,fd=0,Vt&6)throw Error(Pe(327));var n=e.callbackNode;if(Ul()&&e.callbackNode!==n)return null;var r=Ed(e,e===Vn?Wn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=jd(e,r);else{t=r;var i=Vt;Vt|=2;var o=XE();(Vn!==e||Wn!==t)&&(Mi=null,ql=Cn()+500,_a(e,t));do try{HT();break}catch(l){WE(e,l)}while(!0);fv(),Dd.current=o,Vt=i,Pn!==null?t=0:(Vn=null,Wn=0,t=Fn)}if(t!==0){if(t===2&&(i=Zp(e),i!==0&&(r=i,t=b0(e,i))),t===1)throw n=zu,_a(e,0),wo(e,r),pr(e,Cn()),n;if(t===6)wo(e,r);else{if(i=e.current.alternate,!(r&30)&&!UT(i)&&(t=jd(e,r),t===2&&(o=Zp(e),o!==0&&(r=o,t=b0(e,o))),t===1))throw n=zu,_a(e,0),wo(e,r),pr(e,Cn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:va(e,cr,Mi);break;case 3:if(wo(e,r),(r&130023424)===r&&(t=bv+500-Cn(),10<t)){if(Ed(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){nr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=a0(va.bind(null,e,cr,Mi),t);break}va(e,cr,Mi);break;case 4:if(wo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ei(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zT(r/1960))-r,10<r){e.timeoutHandle=a0(va.bind(null,e,cr,Mi),r);break}va(e,cr,Mi);break;case 5:va(e,cr,Mi);break;default:throw Error(Pe(329))}}}return pr(e,Cn()),e.callbackNode===n?HE.bind(null,e):null}function b0(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(_a(e,t).flags|=256),e=jd(e,t),e!==2&&(t=cr,cr=n,t!==null&&C0(t)),e}function C0(e){cr===null?cr=e:cr.push.apply(cr,e)}function UT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ni(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wo(e,t){for(t&=~Av,t&=~fh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ei(t),r=1<<n;e[n]=-1,t&=~r}}function Vy(e){if(Vt&6)throw Error(Pe(327));Ul();var t=Ed(e,0);if(!(t&1))return pr(e,Cn()),null;var n=jd(e,t);if(e.tag!==0&&n===2){var r=Zp(e);r!==0&&(t=r,n=b0(e,r))}if(n===1)throw n=zu,_a(e,0),wo(e,t),pr(e,Cn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,va(e,cr,Mi),pr(e,Cn()),null}function Cv(e,t){var n=Vt;Vt|=1;try{return e(t)}finally{Vt=n,Vt===0&&(ql=Cn()+500,lh&&$o())}}function La(e){Ao!==null&&Ao.tag===0&&!(Vt&6)&&Ul();var t=Vt;Vt|=1;var n=$r.transition,r=Kt;try{if($r.transition=null,Kt=1,e)return e()}finally{Kt=r,$r.transition=n,Vt=t,!(Vt&6)&&$o()}}function Lv(){Tr=Il.current,on(Il)}function _a(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xT(n)),Pn!==null)for(n=Pn.return;n!==null;){var r=n;switch(sv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ad();break;case 3:Ql(),on(hr),on(qn),gv();break;case 5:vv(r);break;case 4:Ql();break;case 13:on(dn);break;case 19:on(dn);break;case 10:dv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(Vn=e,Pn=e=Io(e.current,null),Wn=Tr=t,Fn=0,zu=null,Av=fh=Ca=0,cr=Tu=null,ya!==null){for(t=0;t<ya.length;t++)if(n=ya[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}ya=null}return e}function WE(e,t){do{var n=Pn;try{if(fv(),ld.current=Id,kd){for(var r=hn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kd=!1}if(ba=0,Un=Mn=hn=null,Su=!1,Bu=0,Tv.current=null,n===null||n.return===null){Fn=1,zu=t,Pn=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Wn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,m=l,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var d=m.alternate;d?(m.updateQueue=d.updateQueue,m.memoizedState=d.memoizedState,m.lanes=d.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=Py(a);if(T!==null){T.flags&=-257,Ny(T,a,l,o,t),T.mode&1&&Oy(o,f,t),t=T,u=f;var x=t.updateQueue;if(x===null){var O=new Set;O.add(u),t.updateQueue=O}else x.add(u);break e}else{if(!(t&1)){Oy(o,f,t),Rv();break e}u=Error(Pe(426))}}else if(ln&&l.mode&1){var M=Py(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Ny(M,a,l,o,t),uv(Kl(u,l));break e}}o=u=Kl(u,l),Fn!==4&&(Fn=2),Tu===null?Tu=[o]:Tu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=RE(o,u,t);wy(o,p);break e;case 1:l=u;var w=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(No===null||!No.has(C)))){o.flags|=65536,t&=-t,o.lanes|=t;var G=OE(o,l,t);wy(o,G);break e}}o=o.return}while(o!==null)}QE(n)}catch(q){t=q,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(!0)}function XE(){var e=Dd.current;return Dd.current=Id,e===null?Id:e}function Rv(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Vn===null||!(Ca&268435455)&&!(fh&268435455)||wo(Vn,Wn)}function jd(e,t){var n=Vt;Vt|=2;var r=XE();(Vn!==e||Wn!==t)&&(Mi=null,_a(e,t));do try{VT();break}catch(i){WE(e,i)}while(!0);if(fv(),Vt=n,Dd.current=r,Pn!==null)throw Error(Pe(261));return Vn=null,Wn=0,Fn}function VT(){for(;Pn!==null;)YE(Pn)}function HT(){for(;Pn!==null&&!vw();)YE(Pn)}function YE(e){var t=qE(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?QE(e):Pn=t,Tv.current=null}function QE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jT(n,t),n!==null){n.flags&=32767,Pn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fn=6,Pn=null;return}}else if(n=FT(n,t,Tr),n!==null){Pn=n;return}if(t=t.sibling,t!==null){Pn=t;return}Pn=t=e}while(t!==null);Fn===0&&(Fn=5)}function va(e,t,n){var r=Kt,i=$r.transition;try{$r.transition=null,Kt=1,WT(e,t,n,r)}finally{$r.transition=i,Kt=r}return null}function WT(e,t,n,r){do Ul();while(Ao!==null);if(Vt&6)throw Error(Pe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(bw(e,o),e===Vn&&(Pn=Vn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bf||(Bf=!0,ZE(xd,function(){return Ul(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$r.transition,$r.transition=null;var a=Kt;Kt=1;var l=Vt;Vt|=4,Tv.current=null,$T(e,n),UE(n,e),dT(i0),_d=!!r0,i0=r0=null,e.current=n,GT(n),gw(),Vt=l,Kt=a,$r.transition=o}else e.current=n;if(Bf&&(Bf=!1,Ao=e,Fd=i),o=e.pendingLanes,o===0&&(No=null),Ew(n.stateNode),pr(e,Cn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Md)throw Md=!1,e=T0,T0=null,e;return Fd&1&&e.tag!==0&&Ul(),o=e.pendingLanes,o&1?e===A0?Au++:(Au=0,A0=e):Au=0,$o(),null}function Ul(){if(Ao!==null){var e=Lx(Fd),t=$r.transition,n=Kt;try{if($r.transition=null,Kt=16>e?16:e,Ao===null)var r=!1;else{if(e=Ao,Ao=null,Fd=0,Vt&6)throw Error(Pe(331));var i=Vt;for(Vt|=4,tt=e.current;tt!==null;){var o=tt,a=o.child;if(tt.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(tt=f;tt!==null;){var m=tt;switch(m.tag){case 0:case 11:case 15:wu(8,m,o)}var g=m.child;if(g!==null)g.return=m,tt=g;else for(;tt!==null;){m=tt;var d=m.sibling,T=m.return;if($E(m),m===f){tt=null;break}if(d!==null){d.return=T,tt=d;break}tt=T}}}var x=o.alternate;if(x!==null){var O=x.child;if(O!==null){x.child=null;do{var M=O.sibling;O.sibling=null,O=M}while(O!==null)}}tt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,tt=a;else e:for(;tt!==null;){if(o=tt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wu(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,tt=p;break e}tt=o.return}}var w=e.current;for(tt=w;tt!==null;){a=tt;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,tt=C;else e:for(a=w;tt!==null;){if(l=tt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(q){_n(l,l.return,q)}if(l===a){tt=null;break e}var G=l.sibling;if(G!==null){G.return=l.return,tt=G;break e}tt=l.return}}if(Vt=i,$o(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(nh,e)}catch{}r=!0}return r}finally{Kt=n,$r.transition=t}}return!1}function Hy(e,t,n){t=Kl(n,t),t=RE(e,t,1),e=Po(e,t,1),t=nr(),e!==null&&(qu(e,1,t),pr(e,t))}function _n(e,t,n){if(e.tag===3)Hy(e,e,n);else for(;t!==null;){if(t.tag===3){Hy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(No===null||!No.has(r))){e=Kl(n,e),e=OE(t,e,1),t=Po(t,e,1),e=nr(),t!==null&&(qu(t,1,e),pr(t,e));break}}t=t.return}}function XT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&n,Vn===e&&(Wn&n)===n&&(Fn===4||Fn===3&&(Wn&130023424)===Wn&&500>Cn()-bv?_a(e,0):Av|=n),pr(e,t)}function KE(e,t){t===0&&(e.mode&1?(t=Rf,Rf<<=1,!(Rf&130023424)&&(Rf=4194304)):t=1);var n=nr();e=Ui(e,t),e!==null&&(qu(e,t,n),pr(e,n))}function YT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),KE(e,n)}function QT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),KE(e,n)}var qE;qE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hr.current)fr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fr=!1,MT(e,t,n);fr=!!(e.flags&131072)}else fr=!1,ln&&t.flags&1048576&&eE(t,Ld,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ud(e,t),e=t.pendingProps;var i=Wl(t,qn.current);zl(t,n),i=xv(null,t,r,e,i,n);var o=Ev();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mr(r)?(o=!0,bd(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mv(t),i.updater=sh,t.stateNode=i,i._reactInternals=t,h0(t,r,e,n),t=v0(null,t,r,!0,o,n)):(t.tag=0,ln&&o&&lv(t),er(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ud(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=qT(r),e=Kr(r,e),i){case 0:t=p0(null,t,r,e,n);break e;case 1:t=Dy(null,t,r,e,n);break e;case 11:t=ky(null,t,r,e,n);break e;case 14:t=Iy(null,t,r,Kr(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kr(r,i),p0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kr(r,i),Dy(e,t,r,i,n);case 3:e:{if(IE(t),e===null)throw Error(Pe(387));r=t.pendingProps,o=t.memoizedState,i=o.element,iE(e,t),Pd(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Kl(Error(Pe(423)),t),t=My(e,t,r,n,i);break e}else if(r!==i){i=Kl(Error(Pe(424)),t),t=My(e,t,r,n,i);break e}else for(Ar=Oo(t.stateNode.containerInfo.firstChild),br=t,ln=!0,Zr=null,n=sE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xl(),r===i){t=Vi(e,t,n);break e}er(e,t,r,n)}t=t.child}return t;case 5:return uE(t),e===null&&c0(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,o0(r,i)?a=null:o!==null&&o0(r,o)&&(t.flags|=32),kE(e,t),er(e,t,a,n),t.child;case 6:return e===null&&c0(t),null;case 13:return DE(e,t,n);case 4:return pv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yl(t,null,r,n):er(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kr(r,i),ky(e,t,r,i,n);case 7:return er(e,t,t.pendingProps,n),t.child;case 8:return er(e,t,t.pendingProps.children,n),t.child;case 12:return er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,en(Rd,r._currentValue),r._currentValue=a,o!==null)if(ni(o.value,a)){if(o.children===i.children&&!hr.current){t=Vi(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=$i(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?u.next=u:(u.next=m.next,m.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),f0(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Pe(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),f0(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}er(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zl(t,n),i=Gr(i),r=r(i),t.flags|=1,er(e,t,r,n),t.child;case 14:return r=t.type,i=Kr(r,t.pendingProps),i=Kr(r.type,i),Iy(e,t,r,i,n);case 15:return PE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kr(r,i),ud(e,t),t.tag=1,mr(r)?(e=!0,bd(t)):e=!1,zl(t,n),aE(t,r,i),h0(t,r,i,n),v0(null,t,r,!0,e,n);case 19:return ME(e,t,n);case 22:return NE(e,t,n)}throw Error(Pe(156,t.tag))};function ZE(e,t){return Tx(e,t)}function KT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(e,t,n,r){return new KT(e,t,n,r)}function Ov(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qT(e){if(typeof e=="function")return Ov(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Q0)return 11;if(e===K0)return 14}return 2}function Io(e,t){var n=e.alternate;return n===null?(n=Br(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function dd(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Ov(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Tl:return Sa(n.children,i,o,t);case Y0:a=8,i|=8;break;case Fp:return e=Br(12,n,t,i|2),e.elementType=Fp,e.lanes=o,e;case jp:return e=Br(13,n,t,i),e.elementType=jp,e.lanes=o,e;case Bp:return e=Br(19,n,t,i),e.elementType=Bp,e.lanes=o,e;case lx:return dh(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ox:a=10;break e;case ax:a=9;break e;case Q0:a=11;break e;case K0:a=14;break e;case Eo:a=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=Br(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Sa(e,t,n,r){return e=Br(7,e,r,t),e.lanes=n,e}function dh(e,t,n,r){return e=Br(22,e,r,t),e.elementType=lx,e.lanes=n,e.stateNode={isHidden:!1},e}function fp(e,t,n){return e=Br(6,e,null,t),e.lanes=n,e}function dp(e,t,n){return t=Br(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wm(0),this.expirationTimes=Wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pv(e,t,n,r,i,o,a,l,u){return e=new ZT(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Br(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(o),e}function JT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function JE(e){if(!e)return Fo;e=e._reactInternals;e:{if(Na(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(mr(n))return Zx(e,n,t)}return t}function e_(e,t,n,r,i,o,a,l,u){return e=Pv(n,r,!0,e,i,o,a,l,u),e.context=JE(null),n=e.current,r=nr(),i=ko(n),o=$i(r,i),o.callback=t??null,Po(n,o,i),e.current.lanes=i,qu(e,i,r),pr(e,r),e}function hh(e,t,n,r){var i=t.current,o=nr(),a=ko(i);return n=JE(n),t.context===null?t.context=n:t.pendingContext=n,t=$i(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Po(i,t,a),e!==null&&(ti(e,i,a,o),ad(e,i,a)),a}function Bd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nv(e,t){Wy(e,t),(e=e.alternate)&&Wy(e,t)}function eA(){return null}var t_=typeof reportError=="function"?reportError:function(e){console.error(e)};function kv(e){this._internalRoot=e}mh.prototype.render=kv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));hh(e,t,null,null)};mh.prototype.unmount=kv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;La(function(){hh(null,e,null,null)}),t[zi]=null}};function mh(e){this._internalRoot=e}mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Px();e={blockedOn:null,target:e,priority:t};for(var n=0;n<So.length&&t!==0&&t<So[n].priority;n++);So.splice(n,0,e),n===0&&kx(e)}};function Iv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ph(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xy(){}function tA(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=Bd(a);o.call(f)}}var a=e_(t,r,e,0,null,!1,!1,"",Xy);return e._reactRootContainer=a,e[zi]=a.current,Iu(e.nodeType===8?e.parentNode:e),La(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Bd(u);l.call(f)}}var u=Pv(e,0,!1,null,null,!1,!1,"",Xy);return e._reactRootContainer=u,e[zi]=u.current,Iu(e.nodeType===8?e.parentNode:e),La(function(){hh(t,u,n,r)}),u}function vh(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var u=Bd(a);l.call(u)}}hh(t,a,e,i)}else a=tA(n,t,e,i,r);return Bd(a)}Rx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mu(t.pendingLanes);n!==0&&(J0(t,n|1),pr(t,Cn()),!(Vt&6)&&(ql=Cn()+500,$o()))}break;case 13:La(function(){var r=Ui(e,1);if(r!==null){var i=nr();ti(r,e,1,i)}}),Nv(e,1)}};ev=function(e){if(e.tag===13){var t=Ui(e,134217728);if(t!==null){var n=nr();ti(t,e,134217728,n)}Nv(e,134217728)}};Ox=function(e){if(e.tag===13){var t=ko(e),n=Ui(e,t);if(n!==null){var r=nr();ti(n,e,t,r)}Nv(e,t)}};Px=function(){return Kt};Nx=function(e,t){var n=Kt;try{return Kt=e,t()}finally{Kt=n}};Qp=function(e,t,n){switch(t){case"input":if(zp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ah(r);if(!i)throw Error(Pe(90));ux(r),zp(r,i)}}}break;case"textarea":fx(e,n);break;case"select":t=n.value,t!=null&&jl(e,!!n.multiple,t,!1)}};yx=Cv;xx=La;var nA={usingClientEntryPoint:!1,Events:[Ju,Ll,ah,vx,gx,Cv]},lu={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rA={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sx(e),e===null?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||eA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{nh=$f.inject(rA),xi=$f}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nA;Lr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iv(t))throw Error(Pe(200));return JT(e,t,null,n)};Lr.createRoot=function(e,t){if(!Iv(e))throw Error(Pe(299));var n=!1,r="",i=t_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Pv(e,1,!1,null,null,n,!1,r,i),e[zi]=t.current,Iu(e.nodeType===8?e.parentNode:e),new kv(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=Sx(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return La(e)};Lr.hydrate=function(e,t,n){if(!ph(t))throw Error(Pe(200));return vh(null,e,t,!0,n)};Lr.hydrateRoot=function(e,t,n){if(!Iv(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=t_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=e_(t,null,e,1,n??null,i,!1,o,a),e[zi]=t.current,Iu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mh(t)};Lr.render=function(e,t,n){if(!ph(t))throw Error(Pe(200));return vh(null,e,t,!1,n)};Lr.unmountComponentAtNode=function(e){if(!ph(e))throw Error(Pe(40));return e._reactRootContainer?(La(function(){vh(null,null,e,!1,function(){e._reactRootContainer=null,e[zi]=null})}),!0):!1};Lr.unstable_batchedUpdates=Cv;Lr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ph(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return vh(e,t,n,!1,r)};Lr.version="18.2.0-next-9e3b772b8-20220608";function n_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n_)}catch(e){console.error(e)}}n_(),ex.exports=Lr;var iA=ex.exports,Yy=iA;Dp.createRoot=Yy.createRoot,Dp.hydrateRoot=Yy.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}var bo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bo||(bo={}));const Qy="popstate";function oA(e){e===void 0&&(e={});function t(i,o){let{pathname:a="/",search:l="",hash:u=""}=ka(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),L0("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=i.location.href,f=u.indexOf("#");l=f===-1?u:u.slice(0,f)}return l+"#"+(typeof o=="string"?o:$d(o))}function r(i,o){gh(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return lA(t,n,r,e)}function Nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aA(){return Math.random().toString(36).substr(2,8)}function Ky(e,t){return{usr:e.state,key:e.key,idx:t}}function L0(e,t,n,r){return n===void 0&&(n=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ka(t):t,{state:n,key:t&&t.key||r||aA()})}function $d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ka(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function lA(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=bo.Pop,u=null,f=m();f==null&&(f=0,a.replaceState(Uu({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){l=bo.Pop;let M=m(),p=M==null?null:M-f;f=M,u&&u({action:l,location:O.location,delta:p})}function d(M,p){l=bo.Push;let w=L0(O.location,M,p);n&&n(w,M),f=m()+1;let C=Ky(w,f),G=O.createHref(w);try{a.pushState(C,"",G)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(G)}o&&u&&u({action:l,location:O.location,delta:1})}function T(M,p){l=bo.Replace;let w=L0(O.location,M,p);n&&n(w,M),f=m();let C=Ky(w,f),G=O.createHref(w);a.replaceState(C,"",G),o&&u&&u({action:l,location:O.location,delta:0})}function x(M){let p=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof M=="string"?M:$d(M);return Nn(p,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,p)}let O={get action(){return l},get location(){return e(i,a)},listen(M){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Qy,g),u=M,()=>{i.removeEventListener(Qy,g),u=null}},createHref(M){return t(i,M)},createURL:x,encodeLocation(M){let p=x(M);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:T,go(M){return a.go(M)}};return O}var qy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qy||(qy={}));function sA(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ka(t):t,i=Dv(r.pathname||"/",n);if(i==null)return null;let o=r_(e);uA(o);let a=null;for(let l=0;a==null&&l<o.length;++l)a=yA(o[l],_A(i));return a}function r_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Nn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Do([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Nn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),r_(o.children,t,m,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:vA(f,o.index),routesMeta:m})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of i_(o.path))i(o,a,u)}),t}function i_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=i_(r.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...a),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function uA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:gA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cA=/^:\w+$/,fA=3,dA=2,hA=1,mA=10,pA=-2,Zy=e=>e==="*";function vA(e,t){let n=e.split("/"),r=n.length;return n.some(Zy)&&(r+=pA),t&&(r+=dA),n.filter(i=>!Zy(i)).reduce((i,o)=>i+(cA.test(o)?fA:o===""?hA:mA),r)}function gA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yA(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=xA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!m)return null;Object.assign(r,m.params);let g=l.route;o.push({params:r,pathname:Do([i,m.pathname]),pathnameBase:AA(Do([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Do([i,m.pathnameBase]))}return o}function xA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=EA(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,m,g)=>{let{paramName:d,isOptional:T}=m;if(d==="*"){let O=l[g]||"";a=o.slice(0,o.length-O.length).replace(/(.)\/+$/,"$1")}const x=l[g];return T&&!x?f[d]=void 0:f[d]=SA(x||"",d),f},{}),pathname:o,pathnameBase:a,pattern:e}}function EA(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function _A(e){try{return decodeURI(e)}catch(t){return gh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function SA(e,t){try{return decodeURIComponent(e)}catch(n){return gh(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Dv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function wA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ka(e):e;return{pathname:n?n.startsWith("/")?n:TA(n,t):t,search:bA(r),hash:CA(i)}}function TA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function a_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ka(e):(i=Uu({},e),Nn(!i.pathname||!i.pathname.includes("?"),hp("?","pathname","search",i)),Nn(!i.pathname||!i.pathname.includes("#"),hp("#","pathname","hash",i)),Nn(!i.search||!i.search.includes("#"),hp("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,l;if(a==null)l=n;else if(r){let g=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),g.pop();i.pathname=d.join("/")}l="/"+g.join("/")}else{let g=t.length-1;if(a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),g-=1;i.pathname=d.join("/")}l=g>=0?t[g]:"/"}let u=wA(i,l),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}const Do=e=>e.join("/").replace(/\/\/+/g,"/"),AA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function LA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l_=["post","put","patch","delete"];new Set(l_);const RA=["get",...l_];new Set(RA);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gd.apply(this,arguments)}const Mv=z.createContext(null),OA=z.createContext(null),ns=z.createContext(null),yh=z.createContext(null),Go=z.createContext({outlet:null,matches:[],isDataRoute:!1}),s_=z.createContext(null);function PA(e,t){let{relative:n}=t===void 0?{}:t;tc()||Nn(!1);let{basename:r,navigator:i}=z.useContext(ns),{hash:o,pathname:a,search:l}=f_(e,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Do([r,a])),i.createHref({pathname:u,search:l,hash:o})}function tc(){return z.useContext(yh)!=null}function xh(){return tc()||Nn(!1),z.useContext(yh).location}function u_(e){z.useContext(ns).static||z.useLayoutEffect(e)}function Eh(){let{isDataRoute:e}=z.useContext(Go);return e?VA():NA()}function NA(){tc()||Nn(!1);let e=z.useContext(Mv),{basename:t,navigator:n}=z.useContext(ns),{matches:r}=z.useContext(Go),{pathname:i}=xh(),o=JSON.stringify(o_(r).map(u=>u.pathnameBase)),a=z.useRef(!1);return u_(()=>{a.current=!0}),z.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let m=a_(u,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Do([t,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[t,n,o,i,e])}function c_(){let{matches:e}=z.useContext(Go),t=e[e.length-1];return t?t.params:{}}function f_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=z.useContext(Go),{pathname:i}=xh(),o=JSON.stringify(o_(r).map(a=>a.pathnameBase));return z.useMemo(()=>a_(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function kA(e,t){return IA(e,t)}function IA(e,t,n){tc()||Nn(!1);let{navigator:r}=z.useContext(ns),{matches:i}=z.useContext(Go),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=xh(),f;if(t){var m;let O=typeof t=="string"?ka(t):t;l==="/"||(m=O.pathname)!=null&&m.startsWith(l)||Nn(!1),f=O}else f=u;let g=f.pathname||"/",d=l==="/"?g:g.slice(l.length)||"/",T=sA(e,{pathname:d}),x=BA(T&&T.map(O=>Object.assign({},O,{params:Object.assign({},a,O.params),pathname:Do([l,r.encodeLocation?r.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?l:Do([l,r.encodeLocation?r.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),i,n);return t&&x?z.createElement(yh.Provider,{value:{location:Gd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:bo.Pop}},x):x}function DA(){let e=UA(),t=LA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),n?z.createElement("pre",{style:i},n):null,o)}const MA=z.createElement(DA,null);class FA extends z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?z.createElement(Go.Provider,{value:this.props.routeContext},z.createElement(s_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jA(e){let{routeContext:t,match:n,children:r}=e,i=z.useContext(Mv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(Go.Provider,{value:t},r)}function BA(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let o=e,a=(r=n)==null?void 0:r.errors;if(a!=null){let l=o.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id]));l>=0||Nn(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,u,f)=>{let m=u.route.id?a==null?void 0:a[u.route.id]:null,g=null;n&&(g=u.route.errorElement||MA);let d=t.concat(o.slice(0,f+1)),T=()=>{let x;return m?x=g:u.route.Component?x=z.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,z.createElement(jA,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?z.createElement(FA,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:T(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):T()},null)}var d_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(d_||{}),zd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zd||{});function $A(e){let t=z.useContext(Mv);return t||Nn(!1),t}function GA(e){let t=z.useContext(OA);return t||Nn(!1),t}function zA(e){let t=z.useContext(Go);return t||Nn(!1),t}function h_(e){let t=zA(),n=t.matches[t.matches.length-1];return n.route.id||Nn(!1),n.route.id}function UA(){var e;let t=z.useContext(s_),n=GA(zd.UseRouteError),r=h_(zd.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function VA(){let{router:e}=$A(d_.UseNavigateStable),t=h_(zd.UseNavigateStable),n=z.useRef(!1);return u_(()=>{n.current=!0}),z.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Gd({fromRouteId:t},o)))},[e,t])}function vu(e){Nn(!1)}function HA(e){let{basename:t="/",children:n=null,location:r,navigationType:i=bo.Pop,navigator:o,static:a=!1}=e;tc()&&Nn(!1);let l=t.replace(/^\/*/,"/"),u=z.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);typeof r=="string"&&(r=ka(r));let{pathname:f="/",search:m="",hash:g="",state:d=null,key:T="default"}=r,x=z.useMemo(()=>{let O=Dv(f,l);return O==null?null:{location:{pathname:O,search:m,hash:g,state:d,key:T},navigationType:i}},[l,f,m,g,d,T,i]);return x==null?null:z.createElement(ns.Provider,{value:u},z.createElement(yh.Provider,{children:n,value:x}))}function WA(e){let{children:t,location:n}=e;return kA(R0(t),n)}new Promise(()=>{});function R0(e,t){t===void 0&&(t=[]);let n=[];return z.Children.forEach(e,(r,i)=>{if(!z.isValidElement(r))return;let o=[...t,i];if(r.type===z.Fragment){n.push.apply(n,R0(r.props.children,o));return}r.type!==vu&&Nn(!1),!r.props.index||!r.props.children||Nn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=R0(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O0.apply(this,arguments)}function XA(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function YA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function QA(e,t){return e.button===0&&(!t||t==="_self")&&!YA(e)}const KA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],qA="startTransition",Jy=YS[qA];function ZA(e){let{basename:t,children:n,future:r,window:i}=e,o=z.useRef();o.current==null&&(o.current=oA({window:i,v5Compat:!0}));let a=o.current,[l,u]=z.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},m=z.useCallback(g=>{f&&Jy?Jy(()=>u(g)):u(g)},[u,f]);return z.useLayoutEffect(()=>a.listen(m),[a,m]),z.createElement(HA,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}const JA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vu=z.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:u,to:f,preventScrollReset:m,unstable_viewTransition:g}=t,d=XA(t,KA),{basename:T}=z.useContext(ns),x,O=!1;if(typeof f=="string"&&eb.test(f)&&(x=f,JA))try{let C=new URL(window.location.href),G=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Dv(G.pathname,T);G.origin===C.origin&&q!=null?f=q+G.search+G.hash:O=!0}catch{}let M=PA(f,{relative:i}),p=tb(f,{replace:a,state:l,target:u,preventScrollReset:m,relative:i,unstable_viewTransition:g});function w(C){r&&r(C),C.defaultPrevented||p(C)}return z.createElement("a",O0({},d,{href:x||M,onClick:O||o?r:w,ref:n,target:u}))});var e1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(e1||(e1={}));var t1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(t1||(t1={}));function tb(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l}=t===void 0?{}:t,u=Eh(),f=xh(),m=f_(e,{relative:a});return z.useCallback(g=>{if(QA(g,n)){g.preventDefault();let d=r!==void 0?r:$d(f)===$d(m);u(e,{replace:d,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l})}},[f,u,m,r,i,n,e,o,a,l])}const nb="https://api.latentscope.com/api";function m_(e,t,n){let r=null;return console.log("start polling",n),r=setInterval(()=>{fetch(`${nb}/jobs/job?dataset=${e.id}&job_id=${n}`).then(i=>{if(!i.ok)throw clearInterval(r),t(null),new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{console.log("polling job status",i),t(i),(i.status==="completed"||i.status==="error")&&(clearInterval(r),setTimeout(()=>{t(null),t(i)},200))}).catch(i=>{console.error("Error polling job status",i),clearInterval(r),t(null)})},200),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",r),r&&clearInterval(r)}}function Ra(e,t,n){return{startJob:z.useCallback(i=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(i)}`).then(o=>o.json()).then(o=>{const a=o.job_id;m_(e,t,a)})},[e,t,n])}}var p_={exports:{}},rb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ib=rb,ob=ib;function v_(){}function g_(){}g_.resetWarningCache=v_;var ab=function(){function e(r,i,o,a,l,u){if(u!==ob){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:g_,resetWarningCache:v_};return n.PropTypes=n,n};p_.exports=ab();var lb=p_.exports;const qe=$0(lb);rs.propTypes={job:qe.object,onlyLast:qe.bool,clearJob:qe.func.isRequired};function rs({job:e,onlyLast:t,clearJob:n}){const r=z.useRef(null);return z.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),L.jsx(L.Fragment,{children:e?L.jsxs("div",{className:"job-progress",children:["Running ",L.jsx("b",{children:e.job_name}),L.jsx("br",{}),L.jsx("code",{children:e.command}),L.jsx("pre",{ref:r,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),e.status=="completed"?L.jsx("button",{onClick:n,children:""}):null,e.status=="error"?L.jsx("button",{onClick:n,children:""}):null]}):L.jsx(L.Fragment,{})})}const Gf="https://api.latentscope.com/api";function sb(){const[e,t]=z.useState([]);z.useEffect(()=>{fetch(`${Gf}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=z.useState({});z.useEffect(()=>{e.forEach(d=>{fetch(`${Gf}/datasets/${d.id}/scopes`).then(T=>T.json()).then(T=>r(x=>{const O={...x};return O[d.id]=T,O}))})},[e]),z.useEffect(()=>{console.log("scopes",n)},[n]);const[i,o]=z.useState(null),a=d=>{d.preventDefault();const T=d.target[1].value,O=d.target[0].files[0],M=new FormData;M.append("dataset",T),M.append("file",O),fetch(`${Gf}/jobs/ingest`,{method:"POST",body:M}).then(p=>p.json()).then(p=>{console.log("Job ID:",p.job_id),m_({id:T},o,p.job_id)}).catch(p=>{console.error("Error:",p)})},l=d=>{d.preventDefault()};function u(d){let T=d.substring(0,d.lastIndexOf("."));return T=T.replace(/\s/g,"-"),T}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const T=d.dataTransfer.files[0].name,x=u(T);document.getElementById("dataset-name").value=x},m=d=>{const T=d.target.files[0].name,x=u(T);document.getElementById("dataset-name").value=x},g=Eh();return z.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){g(`/datasets/${i.dataset}/setup`)},1e3)},[i,g]),L.jsxs("div",{className:"home",children:[L.jsxs("div",{className:"new-dataset",children:[L.jsx("h3",{children:"Create new dataset"}),L.jsxs("form",{onSubmit:a,onDragOver:l,onDrop:f,children:[L.jsx("label",{htmlFor:"upload-button",children:L.jsx("span",{children:"Import a CSV to create a new dataset"})}),L.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:m}),L.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),L.jsx("button",{type:"submit",children:"Submit"})]}),L.jsx(rs,{job:i,clearJob:()=>o(null)})]}),L.jsx("h3",{children:"Datasets"}),L.jsx("ul",{children:e.map(d=>{var T;return L.jsxs("li",{children:[L.jsxs(Vu,{to:`/datasets/${d.id}/setup`,children:["Setup ",d.id]}),L.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((T=n[d.id])==null?void 0:T.map((x,O)=>L.jsxs("div",{className:"scope-link",children:[L.jsxs(Vu,{to:`/datasets/${d.id}/explore/${x.id}`,children:["Explore ",x.id," - ",x.label,L.jsx("br",{}),L.jsx("img",{width:"120px",src:`${Gf}/files/${d.id}/clusters/${x.cluster_id}.png`})]}),L.jsx("br",{})]},O)))})]},d.id)})})]})}const n1="https://api.latentscope.com/api";Fv.propTypes={data:qe.array.isRequired,tagset:qe.object,datasetId:qe.string,maxRows:qe.number,onTagset:qe.func,onHover:qe.func,onClick:qe.func};function Fv({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:o,onClick:a}){if(!e.length)return L.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(g,d){console.log("tag",g),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[g]),t[g].includes(d)?(console.log("removing"),fetch(`${n1}/tags/remove?dataset=${n}&tag=${g}&index=${d}`).then(T=>T.json()).then(T=>{console.log("removed",T),i(T)})):(console.log("adding"),fetch(`${n1}/tags/add?dataset=${n}&tag=${g}&index=${d}`).then(T=>T.json()).then(T=>{console.log("added",T),i(T)}))}t&&(u=Object.keys(t));const m=r?e.slice(0,r):e;return L.jsxs(L.Fragment,{children:[L.jsxs("table",{className:"datatable",children:[L.jsx("thead",{children:L.jsxs("tr",{children:[l.map((g,d)=>L.jsx("th",{children:g},d)),u?L.jsx("th",{children:"tags"}):null]})}),L.jsx("tbody",{children:m.map((g,d)=>L.jsxs("tr",{onMouseEnter:()=>o&&o(g.index),onMouseLeave:()=>o&&o(),onClick:()=>a&&a(g.index),children:[l.map((T,x)=>L.jsx("td",{children:g[T]},x)),u?L.jsx("td",{children:u.map((T,x)=>L.jsx("button",{onClick:O=>{f(T,g.index),O.preventDefault(),O.stopPropagation()},className:t[T].includes(g.index)?"tag-active":"tag-inactive",children:T},x))}):null]},d))})]}),r&&e.length>r?L.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const ub="https://api.latentscope.com/api";Dl.propTypes={dataset:qe.object.isRequired,indices:qe.array.isRequired,distances:qe.array,clusterIndices:qe.array,clusterLabels:qe.array,maxRows:qe.number,tagset:qe.object,onHover:qe.func,onClick:qe.func,onTagset:qe.func};function Dl({dataset:e,indices:t,distances:n=[],clusterIndices:r=[],clusterLabels:i=[],maxRows:o,tagset:a,onHover:l,onClick:u,onTagset:f}){const[m,g]=z.useState([]),d=z.useCallback(T=>{e&&fetch(`${ub}/indexed?dataset=${e.id}&indices=${JSON.stringify(T)}`).then(x=>x.json()).then(x=>{let O=x.map((M,p)=>{let w=T[p],C={index:w,...M};return n&&n.length&&(C.distance=n[p]),r&&r.length&&i&&i.length&&(C.cluster=i[r[w].cluster].label),C});g(O)})},[e,n,r,i]);return z.useEffect(()=>{t&&t.length&&(console.log("refetching hydrate"),d(t))},[t]),L.jsx("div",{children:L.jsx(Fv,{data:m,tagset:a,datasetId:e==null?void 0:e.id,maxRows:o,onTagset:f,onHover:l,onClick:u})})}const y_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),jv=(e,t)=>t?e.toLowerCase():e,x_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const o=jv(n,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(r),e.__times__[o].push(+i||1/0),{event:o,handler:r}},Bv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=jv(n,t);if(!e[i])return;const o=e[i].indexOf(r);o===-1||o>=e[i].length||(e[i].splice(o,1),e.__times__[i].splice(o,1))},r1=(e,t)=>()=>{e.forEach(n=>n(t))},E_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Bv(e);return(o,a,l={})=>{const u=jv(o,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((m,g)=>{--e.__times__[u][g]<1&&i(u,m)}),r||l.async?setTimeout(r1(f,a),0):r1(f,a)(),t&&!l.isNoGlobalBroadcast)try{y_.postMessage({event:u,news:a})}catch(m){if(m instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw m}}},cb=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},__=()=>({__times__:{}}),fb=({async:e=!1,caseInsensitive:t=!1,stack:n=__()}={})=>(n.__times__||(n.__times__={}),{publish:E_(n,{async:e,caseInsensitive:t}),subscribe:x_(n,{caseInsensitive:t}),unsubscribe:Bv(n,{caseInsensitive:t}),clear:cb(n),stack:n}),zf=__(),db={publish:E_(zf,{isGlobal:!0}),subscribe:x_(zf),unsubscribe:Bv(zf),stack:zf};y_.onmessage=({data:{event:e,news:t}})=>db.publish(e,t,{isNoGlobalBroadcast:!0});var S_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(NS,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,y){for(var R=Object.keys(y),X=0;X<R.length;++X)c[R[X]]=y[R[X]];return c},i=`
`;function o(c){return typeof atob<"u"?atob(c):"base64:"+c}function a(c){var y=new Error("(regl) "+c);throw console.error(y),y}function l(c,y){c||a(y)}function u(c){return c?": "+c:""}function f(c,y,R){c in y||a("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(y).join())}function m(c,y){n(c)||a("invalid parameter type"+u(y)+". must be a typed array")}function g(c,y){switch(y){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,y,R){g(c,y)||a("invalid parameter type"+u(R)+". expected "+y+", got "+typeof c)}function T(c,y){c>=0&&(c|0)===c||a("invalid parameter type, ("+c+")"+u(y)+". must be a nonnegative integer")}function x(c,y,R){y.indexOf(c)<0&&a("invalid value"+u(R)+". must be one of: "+y)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(c){Object.keys(c).forEach(function(y){O.indexOf(y)<0&&a('invalid regl constructor argument "'+y+'". must be one of '+O)})}function p(c,y){for(c=c+"";c.length<y;)c=" "+c;return c}function w(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(c,y){this.number=c,this.line=y,this.errors=[]}function G(c,y,R){this.file=c,this.line=y,this.message=R}function q(){var c=new Error,y=(c.stack||c).toString(),R=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(y);if(R)return R[1];var X=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(y);return X?X[1]:"unknown"}function oe(){var c=new Error,y=(c.stack||c).toString(),R=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(y);if(R)return R[1];var X=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(y);return X?X[1]:"unknown"}function we(c,y){var R=c.split(`
`),X=1,ne=0,W={unknown:new w,0:new w};W.unknown.name=W[0].name=y||q(),W.unknown.lines.push(new C(0,""));for(var K=0;K<R.length;++K){var de=R[K],fe=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(de);if(fe)switch(fe[1]){case"line":var ye=/(\d+)(\s+\d+)?/.exec(fe[2]);ye&&(X=ye[1]|0,ye[2]&&(ne=ye[2]|0,ne in W||(W[ne]=new w)));break;case"define":var Ee=/SHADER_NAME(_B64)?\s+(.*)$/.exec(fe[2]);Ee&&(W[ne].name=Ee[1]?o(Ee[2]):Ee[2]);break}W[ne].lines.push(new C(X++,de))}return Object.keys(W).forEach(function(xe){var Te=W[xe];Te.lines.forEach(function(he){Te.index[he.number]=he})}),W}function ue(c){var y=[];return c.split(`
`).forEach(function(R){if(!(R.length<5)){var X=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(R);X?y.push(new G(X[1]|0,X[2]|0,X[3].trim())):R.length>0&&y.push(new G("unknown",0,R))}}),y}function ut(c,y){y.forEach(function(R){var X=c[R.file];if(X){var ne=X.index[R.line];if(ne){ne.errors.push(R),X.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(R)})}function Ue(c,y,R,X,ne){if(!c.getShaderParameter(y,c.COMPILE_STATUS)){var W=c.getShaderInfoLog(y),K=X===c.FRAGMENT_SHADER?"fragment":"vertex";dt(R,"string",K+" shader source must be a string",ne);var de=we(R,ne),fe=ue(W);ut(de,fe),Object.keys(de).forEach(function(ye){var Ee=de[ye];if(!Ee.hasErrors)return;var xe=[""],Te=[""];function he(ve,j){xe.push(ve),Te.push(j||"")}he("file number "+ye+": "+Ee.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ee.lines.forEach(function(ve){if(ve.errors.length>0){he(p(ve.number,4)+"|  ","background-color:yellow; font-weight:bold"),he(ve.line+i,"color:red; background-color:yellow; font-weight:bold");var j=0;ve.errors.forEach(function(Q){var pe=Q.message,Me=/^\s*'(.*)'\s*:\s*(.*)$/.exec(pe);if(Me){var ce=Me[1];switch(pe=Me[2],ce){case"assign":ce="=";break}j=Math.max(ve.line.indexOf(ce,j),0)}else j=0;he(p("| ",6)),he(p("^^^",j+3)+i,"font-weight:bold"),he(p("| ",6)),he(pe+i,"font-weight:bold")}),he(p("| ",6)+i)}else he(p(ve.number,4)+"|  "),he(ve.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Te[0]=xe.join("%c"),console.log.apply(console,Te)):console.log(xe.join(""))}),l.raise("Error compiling "+K+" shader, "+de[0].name)}}function ge(c,y,R,X,ne){if(!c.getProgramParameter(y,c.LINK_STATUS)){var W=c.getProgramInfoLog(y),K=we(R,ne),de=we(X,ne),fe='Error linking program with vertex shader, "'+de[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+fe+i+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(fe+i+W),l.raise(fe)}}function Xe(c){c._commandRef=q()}function Ke(c,y,R,X){Xe(c);function ne(fe){return fe?X.id(fe):0}c._fragId=ne(c.static.frag),c._vertId=ne(c.static.vert);function W(fe,ye){Object.keys(ye).forEach(function(Ee){fe[X.id(Ee)]=!0})}var K=c._uniformSet={};W(K,y.static),W(K,y.dynamic);var de=c._attributeSet={};W(de,R.static),W(de,R.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function We(c,y){var R=oe();a(c+" in command "+(y||q())+(R==="unknown"?"":" called from "+R))}function Lt(c,y,R){c||We(y,R||q())}function gt(c,y,R,X){c in y||We("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(y).join(),X||q())}function dt(c,y,R,X){g(c,y)||We("invalid parameter type"+u(R)+". expected "+y+", got "+typeof c,X||q())}function _e(c){c()}function De(c,y,R){c.texture?x(c.texture._texture.internalformat,y,"unsupported texture format for attachment"):x(c.renderbuffer._renderbuffer.format,R,"unsupported renderbuffer format for attachment")}var Fe=33071,ae=9728,Qe=9984,it=9985,Dt=9986,Wt=9987,Xt=5120,Qt=5121,Pt=5122,Ft=5123,pn=5124,Ln=5125,Nt=5126,an=32819,yt=32820,xt=33635,_t=34042,St=36193,Ct={};Ct[Xt]=Ct[Qt]=1,Ct[Pt]=Ct[Ft]=Ct[St]=Ct[xt]=Ct[an]=Ct[yt]=2,Ct[pn]=Ct[Ln]=Ct[Nt]=Ct[_t]=4;function zt(c,y){return c===yt||c===an||c===xt?2:c===_t?4:Ct[c]*y}function sn(c){return!(c&c-1)&&!!c}function jn(c,y,R){var X,ne=y.width,W=y.height,K=y.channels;l(ne>0&&ne<=R.maxTextureSize&&W>0&&W<=R.maxTextureSize,"invalid texture shape"),(c.wrapS!==Fe||c.wrapT!==Fe)&&l(sn(ne)&&sn(W),"incompatible wrap mode for texture, both width and height must be power of 2"),y.mipmask===1?ne!==1&&W!==1&&l(c.minFilter!==Qe&&c.minFilter!==Dt&&c.minFilter!==it&&c.minFilter!==Wt,"min filter requires mipmap"):(l(sn(ne)&&sn(W),"texture must be a square power of 2 to support mipmapping"),l(y.mipmask===(ne<<1)-1,"missing or incomplete mipmap data")),y.type===Nt&&(R.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===ae&&c.magFilter===ae,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var de=y.images;for(X=0;X<16;++X)if(de[X]){var fe=ne>>X,ye=W>>X;l(y.mipmask&1<<X,"missing mipmap data");var Ee=de[X];if(l(Ee.width===fe&&Ee.height===ye,"invalid shape for mip images"),l(Ee.format===y.format&&Ee.internalformat===y.internalformat&&Ee.type===y.type,"incompatible type for mip image"),!Ee.compressed)if(Ee.data){var xe=Math.ceil(zt(Ee.type,K)*fe/Ee.unpackAlignment)*Ee.unpackAlignment;l(Ee.data.byteLength===xe*ye,"invalid data for image, buffer size is inconsistent with image format")}else Ee.element||Ee.copy}else c.genMipmaps||l((y.mipmask&1<<X)===0,"extra mipmap data");y.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function Ur(c,y,R,X){var ne=c.width,W=c.height,K=c.channels;l(ne>0&&ne<=X.maxTextureSize&&W>0&&W<=X.maxTextureSize,"invalid texture shape"),l(ne===W,"cube map must be square"),l(y.wrapS===Fe&&y.wrapT===Fe,"wrap mode not supported by cube map");for(var de=0;de<R.length;++de){var fe=R[de];l(fe.width===ne&&fe.height===W,"inconsistent cube map face shape"),y.genMipmaps&&(l(!fe.compressed,"can not generate mipmap for compressed textures"),l(fe.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ye=fe.images,Ee=0;Ee<16;++Ee){var xe=ye[Ee];if(xe){var Te=ne>>Ee,he=W>>Ee;l(fe.mipmask&1<<Ee,"missing mipmap data"),l(xe.width===Te&&xe.height===he,"invalid shape for mip images"),l(xe.format===c.format&&xe.internalformat===c.internalformat&&xe.type===c.type,"incompatible type for mip image"),xe.compressed||(xe.data?l(xe.data.byteLength===Te*he*Math.max(zt(xe.type,K),xe.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):xe.element||xe.copy)}}}}var v=r(l,{optional:_e,raise:a,commandRaise:We,command:Lt,parameter:f,commandParameter:gt,constructor:M,type:d,commandType:dt,isTypedArray:m,nni:T,oneOf:x,shaderError:Ue,linkError:ge,callSite:oe,saveCommandRef:Xe,saveDrawInfo:Ke,framebufferFormat:De,guessCommand:q,texture2D:jn,textureCube:Ur}),At=0,Mt=0,Ne=5,Ht=6;function pt(c,y){this.id=At++,this.type=c,this.data=y}function je(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Z(c){if(c.length===0)return[];var y=c.charAt(0),R=c.charAt(c.length-1);if(c.length>1&&y===R&&(y==='"'||y==="'"))return['"'+je(c.substr(1,c.length-2))+'"'];var X=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(X)return Z(c.substr(0,X.index)).concat(Z(X[1])).concat(Z(c.substr(X.index+X[0].length)));var ne=c.split(".");if(ne.length===1)return['"'+je(c)+'"'];for(var W=[],K=0;K<ne.length;++K)W=W.concat(Z(ne[K]));return W}function nt(c){return"["+Z(c).join("][")+"]"}function et(c,y){return new pt(c,nt(y+""))}function Yt(c){return typeof c=="function"&&!c._reglType||c instanceof pt}function tn(c,y){if(typeof c=="function")return new pt(Mt,c);if(typeof c=="number"||typeof c=="boolean")return new pt(Ne,c);if(Array.isArray(c))return new pt(Ht,c.map(function(R,X){return tn(R,y+"["+X+"]")}));if(c instanceof pt)return c;v(!1,"invalid option type in uniform "+y)}var Rt={DynamicVariable:pt,define:et,isDynamic:Yt,unbox:tn,accessor:nt},vn={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},kn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Vr(){var c={"":0},y=[""];return{id:function(R){var X=c[R];return X||(X=c[R]=y.length,y.push(R),X)},str:function(R){return y[R]}}}function Or(c,y,R){var X=document.createElement("canvas");r(X.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(X),c===document.body&&(X.style.position="absolute",r(c.style,{margin:0,padding:0}));function ne(){var de=window.innerWidth,fe=window.innerHeight;if(c!==document.body){var ye=X.getBoundingClientRect();de=ye.right-ye.left,fe=ye.bottom-ye.top}X.width=R*de,X.height=R*fe}var W;c!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(ne)}),W.observe(c)):window.addEventListener("resize",ne,!1);function K(){W?W.disconnect():window.removeEventListener("resize",ne),c.removeChild(X)}return ne(),{canvas:X,onDestroy:K}}function Si(c,y){function R(X){try{return c.getContext(X,y)}catch{return null}}return R("webgl")||R("experimental-webgl")||R("webgl-experimental")}function Bn(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function Wi(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function Ia(c){return typeof c=="string"?c.split():(v(Array.isArray(c),"invalid extension array"),c)}function Da(c){return typeof c=="string"?(v(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function Xi(c){var y=c||{},R,X,ne,W,K={},de=[],fe=[],ye=typeof window>"u"?1:window.devicePixelRatio,Ee=!1,xe=function(ve){ve&&v.raise(ve)},Te=function(){};if(typeof y=="string"?(v(typeof document<"u","selector queries only supported in DOM enviroments"),R=document.querySelector(y),v(R,"invalid query string for element")):typeof y=="object"?Bn(y)?R=y:Wi(y)?(W=y,ne=W.canvas):(v.constructor(y),"gl"in y?W=y.gl:"canvas"in y?ne=Da(y.canvas):"container"in y&&(X=Da(y.container)),"attributes"in y&&(K=y.attributes,v.type(K,"object","invalid context attributes")),"extensions"in y&&(de=Ia(y.extensions)),"optionalExtensions"in y&&(fe=Ia(y.optionalExtensions)),"onDone"in y&&(v.type(y.onDone,"function","invalid or missing onDone callback"),xe=y.onDone),"profile"in y&&(Ee=!!y.profile),"pixelRatio"in y&&(ye=+y.pixelRatio,v(ye>0,"invalid pixel ratio"))):v.raise("invalid arguments to regl"),R&&(R.nodeName.toLowerCase()==="canvas"?ne=R:X=R),!W){if(!ne){v(typeof document<"u","must manually specify webgl context outside of DOM environments");var he=Or(X||document.body,xe,ye);if(!he)return null;ne=he.canvas,Te=he.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=Si(ne,K)}return W?{gl:W,canvas:ne,container:X,extensions:de,optionalExtensions:fe,pixelRatio:ye,profile:Ee,onDone:xe,onDestroy:Te}:(Te(),xe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Yi(c,y){var R={};function X(K){v.type(K,"string","extension name must be string");var de=K.toLowerCase(),fe;try{fe=R[de]=c.getExtension(de)}catch{}return!!fe}for(var ne=0;ne<y.extensions.length;++ne){var W=y.extensions[ne];if(!X(W))return y.onDestroy(),y.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return y.optionalExtensions.forEach(X),{extensions:R,restore:function(){Object.keys(R).forEach(function(K){if(R[K]&&!X(K))throw new Error("(regl): error restoring extension "+K)})}}}function un(c,y){for(var R=Array(c),X=0;X<c;++X)R[X]=y(X);return R}var vr=5120,is=5121,zo=5122,Uo=5123,os=5124,Ma=5125,Qi=5126;function Vo(c){for(var y=16;y<=1<<28;y*=16)if(c<=y)return y;return 0}function Ki(c){var y,R;return y=(c>65535)<<4,c>>>=y,R=(c>255)<<3,c>>>=R,y|=R,R=(c>15)<<2,c>>>=R,y|=R,R=(c>3)<<1,c>>>=R,y|=R,y|c>>1}function Fa(){var c=un(8,function(){return[]});function y(W){var K=Vo(W),de=c[Ki(K)>>2];return de.length>0?de.pop():new ArrayBuffer(K)}function R(W){c[Ki(W.byteLength)>>2].push(W)}function X(W,K){var de=null;switch(W){case vr:de=new Int8Array(y(K),0,K);break;case is:de=new Uint8Array(y(K),0,K);break;case zo:de=new Int16Array(y(2*K),0,K);break;case Uo:de=new Uint16Array(y(2*K),0,K);break;case os:de=new Int32Array(y(4*K),0,K);break;case Ma:de=new Uint32Array(y(4*K),0,K);break;case Qi:de=new Float32Array(y(4*K),0,K);break;default:return null}return de.length!==K?de.subarray(0,K):de}function ne(W){R(W.buffer)}return{alloc:y,free:R,allocType:X,freeType:ne}}var vt=Fa();vt.zero=Fa();var wi=3408,ja=3410,rc=3411,ri=3412,ii=3413,oi=3414,ic=3415,gr=33901,as=33902,Ho=3379,ls=3386,Wo=34921,Ba=36347,$a=36348,Ga=35661,za=35660,Ti=34930,Xo=36349,ss=34076,us=34024,oc=7936,qi=7937,Zi=7938,Ua=35724,Ji=34047,cs=36063,or=34852,ai=3553,li=34067,Ai=34069,Rn=33984,Pr=6408,In=5126,gn=5121,eo=36160,Va=36053,Ha=36064,Wa=16384,ac=function(c,y){var R=1;y.ext_texture_filter_anisotropic&&(R=c.getParameter(Ji));var X=1,ne=1;y.webgl_draw_buffers&&(X=c.getParameter(or),ne=c.getParameter(cs));var W=!!y.oes_texture_float;if(W){var K=c.createTexture();c.bindTexture(ai,K),c.texImage2D(ai,0,Pr,1,1,0,Pr,In,null);var de=c.createFramebuffer();if(c.bindFramebuffer(eo,de),c.framebufferTexture2D(eo,Ha,ai,K,0),c.bindTexture(ai,null),c.checkFramebufferStatus(eo)!==Va)W=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(Wa);var fe=vt.allocType(In,4);c.readPixels(0,0,1,1,Pr,In,fe),c.getError()?W=!1:(c.deleteFramebuffer(de),c.deleteTexture(K),W=fe[0]===1),vt.freeType(fe)}}var ye=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ee=!0;if(!ye){var xe=c.createTexture(),Te=vt.allocType(gn,36);c.activeTexture(Rn),c.bindTexture(li,xe),c.texImage2D(Ai,0,Pr,3,3,0,Pr,gn,Te),vt.freeType(Te),c.bindTexture(li,null),c.deleteTexture(xe),Ee=!c.getError()}return{colorBits:[c.getParameter(ja),c.getParameter(rc),c.getParameter(ri),c.getParameter(ii)],depthBits:c.getParameter(oi),stencilBits:c.getParameter(ic),subpixelBits:c.getParameter(wi),extensions:Object.keys(y).filter(function(he){return!!y[he]}),maxAnisotropic:R,maxDrawbuffers:X,maxColorAttachments:ne,pointSizeDims:c.getParameter(gr),lineWidthDims:c.getParameter(as),maxViewportDims:c.getParameter(ls),maxCombinedTextureUnits:c.getParameter(Ga),maxCubeMapSize:c.getParameter(ss),maxRenderbufferSize:c.getParameter(us),maxTextureUnits:c.getParameter(Ti),maxTextureSize:c.getParameter(Ho),maxAttributes:c.getParameter(Wo),maxVertexUniforms:c.getParameter(Ba),maxVertexTextureUnits:c.getParameter(za),maxVaryingVectors:c.getParameter($a),maxFragmentUniforms:c.getParameter(Xo),glsl:c.getParameter(Ua),renderer:c.getParameter(qi),vendor:c.getParameter(oc),version:c.getParameter(Zi),readFloat:W,npotTextureCube:Ee}};function ar(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var Zn=function(c){return Object.keys(c).map(function(y){return c[y]})},yr={shape:Sh,flatten:_h};function lc(c,y,R){for(var X=0;X<y;++X)R[X]=c[X]}function fs(c,y,R,X){for(var ne=0,W=0;W<y;++W)for(var K=c[W],de=0;de<R;++de)X[ne++]=K[de]}function Xa(c,y,R,X,ne,W){for(var K=W,de=0;de<y;++de)for(var fe=c[de],ye=0;ye<R;++ye)for(var Ee=fe[ye],xe=0;xe<X;++xe)ne[K++]=Ee[xe]}function ds(c,y,R,X,ne){for(var W=1,K=R+1;K<y.length;++K)W*=y[K];var de=y[R];if(y.length-R===4){var fe=y[R+1],ye=y[R+2],Ee=y[R+3];for(K=0;K<de;++K)Xa(c[K],fe,ye,Ee,X,ne),ne+=W}else for(K=0;K<de;++K)ds(c[K],y,R+1,X,ne),ne+=W}function _h(c,y,R,X){var ne=1;if(y.length)for(var W=0;W<y.length;++W)ne*=y[W];else ne=0;var K=X||vt.allocType(R,ne);switch(y.length){case 0:break;case 1:lc(c,y[0],K);break;case 2:fs(c,y[0],y[1],K);break;case 3:Xa(c,y[0],y[1],y[2],K,0);break;default:ds(c,y,0,K,0)}return K}function Sh(c){for(var y=[],R=c;R.length;R=R[0])y.push(R.length);return y}var to={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Yo=5120,bi=5122,Ya=5124,wh=5121,Qa=5123,no=5125,Qo=5126,hs=5126,ro={int8:Yo,int16:bi,int32:Ya,uint8:wh,uint16:Qa,uint32:no,float:Qo,float32:hs},tg=35048,Sn=35040,Ka={dynamic:tg,stream:Sn,static:35044},Ko=yr.flatten,sc=yr.shape,ms=35044,ps=35040,qa=5121,Za=5126,Hr=[];Hr[5120]=1,Hr[5122]=2,Hr[5124]=4,Hr[5121]=1,Hr[5123]=2,Hr[5125]=4,Hr[5126]=4;function qo(c){return to[Object.prototype.toString.call(c)]|0}function Ja(c,y){for(var R=0;R<y.length;++R)c[R]=y[R]}function vs(c,y,R,X,ne,W,K){for(var de=0,fe=0;fe<R;++fe)for(var ye=0;ye<X;++ye)c[de++]=y[ne*fe+W*ye+K]}function gs(c,y,R,X){var ne=0,W={};function K(j){this.id=ne++,this.buffer=c.createBuffer(),this.type=j,this.usage=ms,this.byteLength=0,this.dimension=1,this.dtype=qa,this.persistentData=null,R.profile&&(this.stats={size:0})}K.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){Te(this)};var de=[];function fe(j,Q){var pe=de.pop();return pe||(pe=new K(j)),pe.bind(),xe(pe,Q,ps,0,1,!1),pe}function ye(j){de.push(j)}function Ee(j,Q,pe){j.byteLength=Q.byteLength,c.bufferData(j.type,Q,pe)}function xe(j,Q,pe,Me,ce,ke){var Re;if(j.usage=pe,Array.isArray(Q)){if(j.dtype=Me||Za,Q.length>0){var Je;if(Array.isArray(Q[0])){Re=sc(Q);for(var re=1,te=1;te<Re.length;++te)re*=Re[te];j.dimension=re,Je=Ko(Q,Re,j.dtype),Ee(j,Je,pe),ke?j.persistentData=Je:vt.freeType(Je)}else if(typeof Q[0]=="number"){j.dimension=ce;var ze=vt.allocType(j.dtype,Q.length);Ja(ze,Q),Ee(j,ze,pe),ke?j.persistentData=ze:vt.freeType(ze)}else n(Q[0])?(j.dimension=Q[0].length,j.dtype=Me||qo(Q[0])||Za,Je=Ko(Q,[Q.length,Q[0].length],j.dtype),Ee(j,Je,pe),ke?j.persistentData=Je:vt.freeType(Je)):v.raise("invalid buffer data")}}else if(n(Q))j.dtype=Me||qo(Q),j.dimension=ce,Ee(j,Q,pe),ke&&(j.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(ar(Q)){Re=Q.shape;var be=Q.stride,me=Q.offset,Ce=0,Le=0,ct=0,st=0;Re.length===1?(Ce=Re[0],Le=1,ct=be[0],st=0):Re.length===2?(Ce=Re[0],Le=Re[1],ct=be[0],st=be[1]):v.raise("invalid shape"),j.dtype=Me||qo(Q.data)||Za,j.dimension=Le;var Oe=vt.allocType(j.dtype,Ce*Le);vs(Oe,Q.data,Ce,Le,ct,st,me),Ee(j,Oe,pe),ke?j.persistentData=Oe:vt.freeType(Oe)}else Q instanceof ArrayBuffer?(j.dtype=qa,j.dimension=ce,Ee(j,Q,pe),ke&&(j.persistentData=new Uint8Array(new Uint8Array(Q)))):v.raise("invalid buffer data")}function Te(j){y.bufferCount--,X(j);var Q=j.buffer;v(Q,"buffer must not be deleted already"),c.deleteBuffer(Q),j.buffer=null,delete W[j.id]}function he(j,Q,pe,Me){y.bufferCount++;var ce=new K(Q);W[ce.id]=ce;function ke(re){var te=ms,ze=null,be=0,me=0,Ce=1;return Array.isArray(re)||n(re)||ar(re)||re instanceof ArrayBuffer?ze=re:typeof re=="number"?be=re|0:re&&(v.type(re,"object","buffer arguments must be an object, a number or an array"),"data"in re&&(v(ze===null||Array.isArray(ze)||n(ze)||ar(ze),"invalid data for buffer"),ze=re.data),"usage"in re&&(v.parameter(re.usage,Ka,"invalid buffer usage"),te=Ka[re.usage]),"type"in re&&(v.parameter(re.type,ro,"invalid buffer type"),me=ro[re.type]),"dimension"in re&&(v.type(re.dimension,"number","invalid dimension"),Ce=re.dimension|0),"length"in re&&(v.nni(be,"buffer length must be a nonnegative integer"),be=re.length|0)),ce.bind(),ze?xe(ce,ze,te,me,Ce,Me):(be&&c.bufferData(ce.type,be,te),ce.dtype=me||qa,ce.usage=te,ce.dimension=Ce,ce.byteLength=be),R.profile&&(ce.stats.size=ce.byteLength*Hr[ce.dtype]),ke}function Re(re,te){v(te+re.byteLength<=ce.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+re.byteLength+" starting from offset "+te+" to a buffer of size "+ce.byteLength),c.bufferSubData(ce.type,te,re)}function Je(re,te){var ze=(te||0)|0,be;if(ce.bind(),n(re)||re instanceof ArrayBuffer)Re(re,ze);else if(Array.isArray(re)){if(re.length>0)if(typeof re[0]=="number"){var me=vt.allocType(ce.dtype,re.length);Ja(me,re),Re(me,ze),vt.freeType(me)}else if(Array.isArray(re[0])||n(re[0])){be=sc(re);var Ce=Ko(re,be,ce.dtype);Re(Ce,ze),vt.freeType(Ce)}else v.raise("invalid buffer data")}else if(ar(re)){be=re.shape;var Le=re.stride,ct=0,st=0,Oe=0,Ie=0;be.length===1?(ct=be[0],st=1,Oe=Le[0],Ie=0):be.length===2?(ct=be[0],st=be[1],Oe=Le[0],Ie=Le[1]):v.raise("invalid shape");var ot=Array.isArray(re.data)?ce.dtype:qo(re.data),ft=vt.allocType(ot,ct*st);vs(ft,re.data,ct,st,Oe,Ie,re.offset),Re(ft,ze),vt.freeType(ft)}else v.raise("invalid data for buffer subdata");return ke}return pe||ke(j),ke._reglType="buffer",ke._buffer=ce,ke.subdata=Je,R.profile&&(ke.stats=ce.stats),ke.destroy=function(){Te(ce)},ke}function ve(){Zn(W).forEach(function(j){j.buffer=c.createBuffer(),c.bindBuffer(j.type,j.buffer),c.bufferData(j.type,j.persistentData||j.byteLength,j.usage)})}return R.profile&&(y.getTotalBufferSize=function(){var j=0;return Object.keys(W).forEach(function(Q){j+=W[Q].stats.size}),j}),{create:he,createStream:fe,destroyStream:ye,clear:function(){Zn(W).forEach(Te),de.forEach(Te)},getBuffer:function(j){return j&&j._buffer instanceof K?j._buffer:null},restore:ve,_initBuffer:xe}}var Th=0,ys=0,Ah=1,xs=1,bh=4,Ch=4,si={points:Th,point:ys,lines:Ah,line:xs,triangles:bh,triangle:Ch,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Lh=0,Ci=1,Li=4,Rh=5120,ui=5121,uc=5122,io=5123,cc=5124,Wr=5125,Es=34963,Oh=35040,_s=35044;function Ss(c,y,R,X){var ne={},W=0,K={uint8:ui,uint16:io};y.oes_element_index_uint&&(K.uint32=Wr);function de(ve){this.id=W++,ne[this.id]=this,this.buffer=ve,this.primType=Li,this.vertCount=0,this.type=0}de.prototype.bind=function(){this.buffer.bind()};var fe=[];function ye(ve){var j=fe.pop();return j||(j=new de(R.create(null,Es,!0,!1)._buffer)),xe(j,ve,Oh,-1,-1,0,0),j}function Ee(ve){fe.push(ve)}function xe(ve,j,Q,pe,Me,ce,ke){ve.buffer.bind();var Re;if(j){var Je=ke;!ke&&(!n(j)||ar(j)&&!n(j.data))&&(Je=y.oes_element_index_uint?Wr:io),R._initBuffer(ve.buffer,j,Q,Je,3)}else c.bufferData(Es,ce,Q),ve.buffer.dtype=Re||ui,ve.buffer.usage=Q,ve.buffer.dimension=3,ve.buffer.byteLength=ce;if(Re=ke,!ke){switch(ve.buffer.dtype){case ui:case Rh:Re=ui;break;case io:case uc:Re=io;break;case Wr:case cc:Re=Wr;break;default:v.raise("unsupported type for element array")}ve.buffer.dtype=Re}ve.type=Re,v(Re!==Wr||!!y.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var re=Me;re<0&&(re=ve.buffer.byteLength,Re===io?re>>=1:Re===Wr&&(re>>=2)),ve.vertCount=re;var te=pe;if(pe<0){te=Li;var ze=ve.buffer.dimension;ze===1&&(te=Lh),ze===2&&(te=Ci),ze===3&&(te=Li)}ve.primType=te}function Te(ve){X.elementsCount--,v(ve.buffer!==null,"must not double destroy elements"),delete ne[ve.id],ve.buffer.destroy(),ve.buffer=null}function he(ve,j){var Q=R.create(null,Es,!0),pe=new de(Q._buffer);X.elementsCount++;function Me(ce){if(!ce)Q(),pe.primType=Li,pe.vertCount=0,pe.type=ui;else if(typeof ce=="number")Q(ce),pe.primType=Li,pe.vertCount=ce|0,pe.type=ui;else{var ke=null,Re=_s,Je=-1,re=-1,te=0,ze=0;Array.isArray(ce)||n(ce)||ar(ce)?ke=ce:(v.type(ce,"object","invalid arguments for elements"),"data"in ce&&(ke=ce.data,v(Array.isArray(ke)||n(ke)||ar(ke),"invalid data for element buffer")),"usage"in ce&&(v.parameter(ce.usage,Ka,"invalid element buffer usage"),Re=Ka[ce.usage]),"primitive"in ce&&(v.parameter(ce.primitive,si,"invalid element buffer primitive"),Je=si[ce.primitive]),"count"in ce&&(v(typeof ce.count=="number"&&ce.count>=0,"invalid vertex count for elements"),re=ce.count|0),"type"in ce&&(v.parameter(ce.type,K,"invalid buffer type"),ze=K[ce.type]),"length"in ce?te=ce.length|0:(te=re,ze===io||ze===uc?te*=2:(ze===Wr||ze===cc)&&(te*=4))),xe(pe,ke,Re,Je,re,te,ze)}return Me}return Me(ve),Me._reglType="elements",Me._elements=pe,Me.subdata=function(ce,ke){return Q.subdata(ce,ke),Me},Me.destroy=function(){Te(pe)},Me}return{create:he,createStream:ye,destroyStream:Ee,getElements:function(ve){return typeof ve=="function"&&ve._elements instanceof de?ve._elements:null},clear:function(){Zn(ne).forEach(Te)}}}var fc=new Float32Array(1),Ph=new Uint32Array(fc.buffer),Nh=5123;function dc(c){for(var y=vt.allocType(Nh,c.length),R=0;R<c.length;++R)if(isNaN(c[R]))y[R]=65535;else if(c[R]===1/0)y[R]=31744;else if(c[R]===-1/0)y[R]=64512;else{fc[0]=c[R];var X=Ph[0],ne=X>>>31<<15,W=(X<<1>>>24)-127,K=X>>13&1023;if(W<-24)y[R]=ne;else if(W<-14){var de=-14-W;y[R]=ne+(K+1024>>de)}else W>15?y[R]=ne+31744:y[R]=ne+(W+15<<10)+K}return y}function qt(c){return Array.isArray(c)||n(c)}var hc=function(c){return!(c&c-1)&&!!c},kh=34467,Nr=3553,ws=34067,el=34069,Ri=6408,Ts=6406,tl=6407,Oi=6409,nl=6410,mc=32854,As=32855,bs=36194,Ih=32819,Dh=32820,Mh=33635,pc=34042,rl=6402,Zo=34041,Jo=35904,ea=35906,oo=36193,Pi=33776,Cs=33777,Ls=33778,Rs=33779,vc=35986,gc=35987,yc=34798,xc=35840,Ec=35841,_c=35842,Sc=35843,wc=36196,ao=5121,Os=5123,Ps=5125,xr=5126,Fh=10242,jh=10243,Bh=10497,Ns=33071,$h=33648,Gh=10240,zh=10241,ks=9728,Uh=9729,il=9984,Is=9985,Tc=9986,Ds=9987,Vh=33170,ta=4352,Ac=4353,Hh=4354,Wh=34046,Xh=3317,Yh=37440,Qh=37441,Kh=37443,lo=37444,na=33984,bc=[il,Tc,Is,Ds],ra=[0,Oi,nl,tl,Ri],Er={};Er[Oi]=Er[Ts]=Er[rl]=1,Er[Zo]=Er[nl]=2,Er[tl]=Er[Jo]=3,Er[Ri]=Er[ea]=4;function so(c){return"[object "+c+"]"}var Cc=so("HTMLCanvasElement"),Lc=so("OffscreenCanvas"),Rc=so("CanvasRenderingContext2D"),Oc=so("ImageBitmap"),Pc=so("HTMLImageElement"),ol=so("HTMLVideoElement"),qh=Object.keys(to).concat([Cc,Lc,Rc,Oc,Pc,ol]),uo=[];uo[ao]=1,uo[xr]=4,uo[oo]=2,uo[Os]=2,uo[Ps]=4;var wn=[];wn[mc]=2,wn[As]=2,wn[bs]=2,wn[Zo]=4,wn[Pi]=.5,wn[Cs]=.5,wn[Ls]=1,wn[Rs]=1,wn[vc]=.5,wn[gc]=1,wn[yc]=1,wn[xc]=.5,wn[Ec]=.25,wn[_c]=.5,wn[Sc]=.25,wn[wc]=.5;function Nc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Ms(c){if(!Array.isArray(c))return!1;var y=c.length;return!(y===0||!qt(c[0]))}function Ni(c){return Object.prototype.toString.call(c)}function Fs(c){return Ni(c)===Cc}function kc(c){return Ni(c)===Lc}function Zh(c){return Ni(c)===Rc}function js(c){return Ni(c)===Oc}function Ic(c){return Ni(c)===Pc}function Dc(c){return Ni(c)===ol}function Bs(c){if(!c)return!1;var y=Ni(c);return qh.indexOf(y)>=0?!0:Nc(c)||Ms(c)||ar(c)}function Mc(c){return to[Object.prototype.toString.call(c)]|0}function Jh(c,y){var R=y.length;switch(c.type){case ao:case Os:case Ps:case xr:var X=vt.allocType(c.type,R);X.set(y),c.data=X;break;case oo:c.data=dc(y);break;default:v.raise("unsupported texture type, must specify a typed array")}}function Fc(c,y){return vt.allocType(c.type===oo?xr:c.type,y)}function jc(c,y){c.type===oo?(c.data=dc(y),vt.freeType(y)):c.data=y}function Bc(c,y,R,X,ne,W){for(var K=c.width,de=c.height,fe=c.channels,ye=K*de*fe,Ee=Fc(c,ye),xe=0,Te=0;Te<de;++Te)for(var he=0;he<K;++he)for(var ve=0;ve<fe;++ve)Ee[xe++]=y[R*he+X*Te+ne*ve+W];jc(c,Ee)}function al(c,y,R,X,ne,W){var K;if(typeof wn[c]<"u"?K=wn[c]:K=Er[c]*uo[y],W&&(K*=6),ne){for(var de=0,fe=R;fe>=1;)de+=K*fe*fe,fe/=2;return de}else return K*R*X}function em(c,y,R,X,ne,W,K){var de={"don't care":ta,"dont care":ta,nice:Hh,fast:Ac},fe={repeat:Bh,clamp:Ns,mirror:$h},ye={nearest:ks,linear:Uh},Ee=r({mipmap:Ds,"nearest mipmap nearest":il,"linear mipmap nearest":Is,"nearest mipmap linear":Tc,"linear mipmap linear":Ds},ye),xe={none:0,browser:lo},Te={uint8:ao,rgba4:Ih,rgb565:Mh,"rgb5 a1":Dh},he={alpha:Ts,luminance:Oi,"luminance alpha":nl,rgb:tl,rgba:Ri,rgba4:mc,"rgb5 a1":As,rgb565:bs},ve={};y.ext_srgb&&(he.srgb=Jo,he.srgba=ea),y.oes_texture_float&&(Te.float32=Te.float=xr),y.oes_texture_half_float&&(Te.float16=Te["half float"]=oo),y.webgl_depth_texture&&(r(he,{depth:rl,"depth stencil":Zo}),r(Te,{uint16:Os,uint32:Ps,"depth stencil":pc})),y.webgl_compressed_texture_s3tc&&r(ve,{"rgb s3tc dxt1":Pi,"rgba s3tc dxt1":Cs,"rgba s3tc dxt3":Ls,"rgba s3tc dxt5":Rs}),y.webgl_compressed_texture_atc&&r(ve,{"rgb atc":vc,"rgba atc explicit alpha":gc,"rgba atc interpolated alpha":yc}),y.webgl_compressed_texture_pvrtc&&r(ve,{"rgb pvrtc 4bppv1":xc,"rgb pvrtc 2bppv1":Ec,"rgba pvrtc 4bppv1":_c,"rgba pvrtc 2bppv1":Sc}),y.webgl_compressed_texture_etc1&&(ve["rgb etc1"]=wc);var j=Array.prototype.slice.call(c.getParameter(kh));Object.keys(ve).forEach(function(A){var Y=ve[A];j.indexOf(Y)>=0&&(he[A]=Y)});var Q=Object.keys(he);R.textureFormats=Q;var pe=[];Object.keys(he).forEach(function(A){var Y=he[A];pe[Y]=A});var Me=[];Object.keys(Te).forEach(function(A){var Y=Te[A];Me[Y]=A});var ce=[];Object.keys(ye).forEach(function(A){var Y=ye[A];ce[Y]=A});var ke=[];Object.keys(Ee).forEach(function(A){var Y=Ee[A];ke[Y]=A});var Re=[];Object.keys(fe).forEach(function(A){var Y=fe[A];Re[Y]=A});var Je=Q.reduce(function(A,Y){var H=he[Y];return H===Oi||H===Ts||H===Oi||H===nl||H===rl||H===Zo||y.ext_srgb&&(H===Jo||H===ea)?A[H]=H:H===As||Y.indexOf("rgba")>=0?A[H]=Ri:A[H]=tl,A},{});function re(){this.internalformat=Ri,this.format=Ri,this.type=ao,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=lo,this.width=0,this.height=0,this.channels=0}function te(A,Y){A.internalformat=Y.internalformat,A.format=Y.format,A.type=Y.type,A.compressed=Y.compressed,A.premultiplyAlpha=Y.premultiplyAlpha,A.flipY=Y.flipY,A.unpackAlignment=Y.unpackAlignment,A.colorSpace=Y.colorSpace,A.width=Y.width,A.height=Y.height,A.channels=Y.channels}function ze(A,Y){if(!(typeof Y!="object"||!Y)){if("premultiplyAlpha"in Y&&(v.type(Y.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),A.premultiplyAlpha=Y.premultiplyAlpha),"flipY"in Y&&(v.type(Y.flipY,"boolean","invalid texture flip"),A.flipY=Y.flipY),"alignment"in Y&&(v.oneOf(Y.alignment,[1,2,4,8],"invalid texture unpack alignment"),A.unpackAlignment=Y.alignment),"colorSpace"in Y&&(v.parameter(Y.colorSpace,xe,"invalid colorSpace"),A.colorSpace=xe[Y.colorSpace]),"type"in Y){var H=Y.type;v(y.oes_texture_float||!(H==="float"||H==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),v(y.oes_texture_half_float||!(H==="half float"||H==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),v(y.webgl_depth_texture||!(H==="uint16"||H==="uint32"||H==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(H,Te,"invalid texture type"),A.type=Te[H]}var Ge=A.width,Et=A.height,E=A.channels,h=!1;"shape"in Y?(v(Array.isArray(Y.shape)&&Y.shape.length>=2,"shape must be an array"),Ge=Y.shape[0],Et=Y.shape[1],Y.shape.length===3&&(E=Y.shape[2],v(E>0&&E<=4,"invalid number of channels"),h=!0),v(Ge>=0&&Ge<=R.maxTextureSize,"invalid width"),v(Et>=0&&Et<=R.maxTextureSize,"invalid height")):("radius"in Y&&(Ge=Et=Y.radius,v(Ge>=0&&Ge<=R.maxTextureSize,"invalid radius")),"width"in Y&&(Ge=Y.width,v(Ge>=0&&Ge<=R.maxTextureSize,"invalid width")),"height"in Y&&(Et=Y.height,v(Et>=0&&Et<=R.maxTextureSize,"invalid height")),"channels"in Y&&(E=Y.channels,v(E>0&&E<=4,"invalid number of channels"),h=!0)),A.width=Ge|0,A.height=Et|0,A.channels=E|0;var P=!1;if("format"in Y){var F=Y.format;v(y.webgl_depth_texture||!(F==="depth"||F==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(F,he,"invalid texture format");var B=A.internalformat=he[F];A.format=Je[B],F in Te&&("type"in Y||(A.type=Te[F])),F in ve&&(A.compressed=!0),P=!0}!h&&P?A.channels=Er[A.format]:h&&!P?A.channels!==ra[A.format]&&(A.format=A.internalformat=ra[A.channels]):P&&h&&v(A.channels===Er[A.format],"number of channels inconsistent with specified format")}}function be(A){c.pixelStorei(Yh,A.flipY),c.pixelStorei(Qh,A.premultiplyAlpha),c.pixelStorei(Kh,A.colorSpace),c.pixelStorei(Xh,A.unpackAlignment)}function me(){re.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ce(A,Y){var H=null;if(Bs(Y)?H=Y:Y&&(v.type(Y,"object","invalid pixel data type"),ze(A,Y),"x"in Y&&(A.xOffset=Y.x|0),"y"in Y&&(A.yOffset=Y.y|0),Bs(Y.data)&&(H=Y.data)),v(!A.compressed||H instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Y.copy){v(!H,"can not specify copy and data field for the same texture");var Ge=ne.viewportWidth,Et=ne.viewportHeight;A.width=A.width||Ge-A.xOffset,A.height=A.height||Et-A.yOffset,A.needsCopy=!0,v(A.xOffset>=0&&A.xOffset<Ge&&A.yOffset>=0&&A.yOffset<Et&&A.width>0&&A.width<=Ge&&A.height>0&&A.height<=Et,"copy texture read out of bounds")}else if(!H)A.width=A.width||1,A.height=A.height||1,A.channels=A.channels||4;else if(n(H))A.channels=A.channels||4,A.data=H,!("type"in Y)&&A.type===ao&&(A.type=Mc(H));else if(Nc(H))A.channels=A.channels||4,Jh(A,H),A.alignment=1,A.needsFree=!0;else if(ar(H)){var E=H.data;!Array.isArray(E)&&A.type===ao&&(A.type=Mc(E));var h=H.shape,P=H.stride,F,B,k,N,D,_;h.length===3?(k=h[2],_=P[2]):(v(h.length===2,"invalid ndarray pixel data, must be 2 or 3D"),k=1,_=1),F=h[0],B=h[1],N=P[0],D=P[1],A.alignment=1,A.width=F,A.height=B,A.channels=k,A.format=A.internalformat=ra[k],A.needsFree=!0,Bc(A,E,N,D,_,H.offset)}else if(Fs(H)||kc(H)||Zh(H))Fs(H)||kc(H)?A.element=H:A.element=H.canvas,A.width=A.element.width,A.height=A.element.height,A.channels=4;else if(js(H))A.element=H,A.width=H.width,A.height=H.height,A.channels=4;else if(Ic(H))A.element=H,A.width=H.naturalWidth,A.height=H.naturalHeight,A.channels=4;else if(Dc(H))A.element=H,A.width=H.videoWidth,A.height=H.videoHeight,A.channels=4;else if(Ms(H)){var b=A.width||H[0].length,S=A.height||H.length,V=A.channels;qt(H[0][0])?V=V||H[0][0].length:V=V||1;for(var $=yr.shape(H),ee=1,ie=0;ie<$.length;++ie)ee*=$[ie];var Se=Fc(A,ee);yr.flatten(H,$,"",Se),jc(A,Se),A.alignment=1,A.width=b,A.height=S,A.channels=V,A.format=A.internalformat=ra[V],A.needsFree=!0}A.type===xr?v(R.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):A.type===oo&&v(R.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Le(A,Y,H){var Ge=A.element,Et=A.data,E=A.internalformat,h=A.format,P=A.type,F=A.width,B=A.height;be(A),Ge?c.texImage2D(Y,H,h,h,P,Ge):A.compressed?c.compressedTexImage2D(Y,H,E,F,B,0,Et):A.needsCopy?(X(),c.copyTexImage2D(Y,H,h,A.xOffset,A.yOffset,F,B,0)):c.texImage2D(Y,H,h,F,B,0,h,P,Et||null)}function ct(A,Y,H,Ge,Et){var E=A.element,h=A.data,P=A.internalformat,F=A.format,B=A.type,k=A.width,N=A.height;be(A),E?c.texSubImage2D(Y,Et,H,Ge,F,B,E):A.compressed?c.compressedTexSubImage2D(Y,Et,H,Ge,P,k,N,h):A.needsCopy?(X(),c.copyTexSubImage2D(Y,Et,H,Ge,A.xOffset,A.yOffset,k,N)):c.texSubImage2D(Y,Et,H,Ge,k,N,F,B,h)}var st=[];function Oe(){return st.pop()||new me}function Ie(A){A.needsFree&&vt.freeType(A.data),me.call(A),st.push(A)}function ot(){re.call(this),this.genMipmaps=!1,this.mipmapHint=ta,this.mipmask=0,this.images=Array(16)}function ft(A,Y,H){var Ge=A.images[0]=Oe();A.mipmask=1,Ge.width=A.width=Y,Ge.height=A.height=H,Ge.channels=A.channels=4}function wt(A,Y){var H=null;if(Bs(Y))H=A.images[0]=Oe(),te(H,A),Ce(H,Y),A.mipmask=1;else if(ze(A,Y),Array.isArray(Y.mipmap))for(var Ge=Y.mipmap,Et=0;Et<Ge.length;++Et)H=A.images[Et]=Oe(),te(H,A),H.width>>=Et,H.height>>=Et,Ce(H,Ge[Et]),A.mipmask|=1<<Et;else H=A.images[0]=Oe(),te(H,A),Ce(H,Y),A.mipmask=1;te(A,A.images[0]),A.compressed&&(A.internalformat===Pi||A.internalformat===Cs||A.internalformat===Ls||A.internalformat===Rs)&&v(A.width%4===0&&A.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Jt(A,Y){for(var H=A.images,Ge=0;Ge<H.length;++Ge){if(!H[Ge])return;Le(H[Ge],Y,Ge)}}var nn=[];function bt(){var A=nn.pop()||new ot;re.call(A),A.mipmask=0;for(var Y=0;Y<16;++Y)A.images[Y]=null;return A}function Tn(A){for(var Y=A.images,H=0;H<Y.length;++H)Y[H]&&Ie(Y[H]),Y[H]=null;nn.push(A)}function Zt(){this.minFilter=ks,this.magFilter=ks,this.wrapS=Ns,this.wrapT=Ns,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ta}function En(A,Y){if("min"in Y){var H=Y.min;v.parameter(H,Ee),A.minFilter=Ee[H],bc.indexOf(A.minFilter)>=0&&!("faces"in Y)&&(A.genMipmaps=!0)}if("mag"in Y){var Ge=Y.mag;v.parameter(Ge,ye),A.magFilter=ye[Ge]}var Et=A.wrapS,E=A.wrapT;if("wrap"in Y){var h=Y.wrap;typeof h=="string"?(v.parameter(h,fe),Et=E=fe[h]):Array.isArray(h)&&(v.parameter(h[0],fe),v.parameter(h[1],fe),Et=fe[h[0]],E=fe[h[1]])}else{if("wrapS"in Y){var P=Y.wrapS;v.parameter(P,fe),Et=fe[P]}if("wrapT"in Y){var F=Y.wrapT;v.parameter(F,fe),E=fe[F]}}if(A.wrapS=Et,A.wrapT=E,"anisotropic"in Y){var B=Y.anisotropic;v(typeof B=="number"&&B>=1&&B<=R.maxAnisotropic,"aniso samples must be between 1 and "),A.anisotropic=Y.anisotropic}if("mipmap"in Y){var k=!1;switch(typeof Y.mipmap){case"string":v.parameter(Y.mipmap,de,"invalid mipmap hint"),A.mipmapHint=de[Y.mipmap],A.genMipmaps=!0,k=!0;break;case"boolean":k=A.genMipmaps=Y.mipmap;break;case"object":v(Array.isArray(Y.mipmap),"invalid mipmap type"),A.genMipmaps=!1,k=!0;break;default:v.raise("invalid mipmap type")}k&&!("min"in Y)&&(A.minFilter=il)}}function An(A,Y){c.texParameteri(Y,zh,A.minFilter),c.texParameteri(Y,Gh,A.magFilter),c.texParameteri(Y,Fh,A.wrapS),c.texParameteri(Y,jh,A.wrapT),y.ext_texture_filter_anisotropic&&c.texParameteri(Y,Wh,A.anisotropic),A.genMipmaps&&(c.hint(Vh,A.mipmapHint),c.generateMipmap(Y))}var bn=0,Dn={},$n=R.maxTextureUnits,cn=Array($n).map(function(){return null});function mt(A){re.call(this),this.mipmask=0,this.internalformat=Ri,this.id=bn++,this.refCount=1,this.target=A,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Zt,K.profile&&(this.stats={size:0})}function Gn(A){c.activeTexture(na),c.bindTexture(A.target,A.texture)}function Bt(){var A=cn[0];A?c.bindTexture(A.target,A.texture):c.bindTexture(Nr,null)}function rt(A){var Y=A.texture;v(Y,"must not double destroy texture");var H=A.unit,Ge=A.target;H>=0&&(c.activeTexture(na+H),c.bindTexture(Ge,null),cn[H]=null),c.deleteTexture(Y),A.texture=null,A.params=null,A.pixels=null,A.refCount=0,delete Dn[A.id],W.textureCount--}r(mt.prototype,{bind:function(){var A=this;A.bindCount+=1;var Y=A.unit;if(Y<0){for(var H=0;H<$n;++H){var Ge=cn[H];if(Ge){if(Ge.bindCount>0)continue;Ge.unit=-1}cn[H]=A,Y=H;break}Y>=$n&&v.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<Y+1&&(W.maxTextureUnits=Y+1),A.unit=Y,c.activeTexture(na+Y),c.bindTexture(A.target,A.texture)}return Y},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&rt(this)}});function Tt(A,Y){var H=new mt(Nr);Dn[H.id]=H,W.textureCount++;function Ge(h,P){var F=H.texInfo;Zt.call(F);var B=bt();return typeof h=="number"?typeof P=="number"?ft(B,h|0,P|0):ft(B,h|0,h|0):h?(v.type(h,"object","invalid arguments to regl.texture"),En(F,h),wt(B,h)):ft(B,1,1),F.genMipmaps&&(B.mipmask=(B.width<<1)-1),H.mipmask=B.mipmask,te(H,B),v.texture2D(F,B,R),H.internalformat=B.internalformat,Ge.width=B.width,Ge.height=B.height,Gn(H),Jt(B,Nr),An(F,Nr),Bt(),Tn(B),K.profile&&(H.stats.size=al(H.internalformat,H.type,B.width,B.height,F.genMipmaps,!1)),Ge.format=pe[H.internalformat],Ge.type=Me[H.type],Ge.mag=ce[F.magFilter],Ge.min=ke[F.minFilter],Ge.wrapS=Re[F.wrapS],Ge.wrapT=Re[F.wrapT],Ge}function Et(h,P,F,B){v(!!h,"must specify image data");var k=P|0,N=F|0,D=B|0,_=Oe();return te(_,H),_.width=0,_.height=0,Ce(_,h),_.width=_.width||(H.width>>D)-k,_.height=_.height||(H.height>>D)-N,v(H.type===_.type&&H.format===_.format&&H.internalformat===_.internalformat,"incompatible format for texture.subimage"),v(k>=0&&N>=0&&k+_.width<=H.width&&N+_.height<=H.height,"texture.subimage write out of bounds"),v(H.mipmask&1<<D,"missing mipmap data"),v(_.data||_.element||_.needsCopy,"missing image data"),Gn(H),ct(_,Nr,k,N,D),Bt(),Ie(_),Ge}function E(h,P){var F=h|0,B=P|0||F;if(F===H.width&&B===H.height)return Ge;Ge.width=H.width=F,Ge.height=H.height=B,Gn(H);for(var k=0;H.mipmask>>k;++k){var N=F>>k,D=B>>k;if(!N||!D)break;c.texImage2D(Nr,k,H.format,N,D,0,H.format,H.type,null)}return Bt(),K.profile&&(H.stats.size=al(H.internalformat,H.type,F,B,!1,!1)),Ge}return Ge(A,Y),Ge.subimage=Et,Ge.resize=E,Ge._reglType="texture2d",Ge._texture=H,K.profile&&(Ge.stats=H.stats),Ge.destroy=function(){H.decRef()},Ge}function Ot(A,Y,H,Ge,Et,E){var h=new mt(ws);Dn[h.id]=h,W.cubeCount++;var P=new Array(6);function F(N,D,_,b,S,V){var $,ee=h.texInfo;for(Zt.call(ee),$=0;$<6;++$)P[$]=bt();if(typeof N=="number"||!N){var ie=N|0||1;for($=0;$<6;++$)ft(P[$],ie,ie)}else if(typeof N=="object")if(D)wt(P[0],N),wt(P[1],D),wt(P[2],_),wt(P[3],b),wt(P[4],S),wt(P[5],V);else if(En(ee,N),ze(h,N),"faces"in N){var Se=N.faces;for(v(Array.isArray(Se)&&Se.length===6,"cube faces must be a length 6 array"),$=0;$<6;++$)v(typeof Se[$]=="object"&&!!Se[$],"invalid input for cube map face"),te(P[$],h),wt(P[$],Se[$])}else for($=0;$<6;++$)wt(P[$],N);else v.raise("invalid arguments to cube map");for(te(h,P[0]),v.optional(function(){R.npotTextureCube||v(hc(h.width)&&hc(h.height),"your browser does not support non power or two texture dimensions")}),ee.genMipmaps?h.mipmask=(P[0].width<<1)-1:h.mipmask=P[0].mipmask,v.textureCube(h,ee,P,R),h.internalformat=P[0].internalformat,F.width=P[0].width,F.height=P[0].height,Gn(h),$=0;$<6;++$)Jt(P[$],el+$);for(An(ee,ws),Bt(),K.profile&&(h.stats.size=al(h.internalformat,h.type,F.width,F.height,ee.genMipmaps,!0)),F.format=pe[h.internalformat],F.type=Me[h.type],F.mag=ce[ee.magFilter],F.min=ke[ee.minFilter],F.wrapS=Re[ee.wrapS],F.wrapT=Re[ee.wrapT],$=0;$<6;++$)Tn(P[$]);return F}function B(N,D,_,b,S){v(!!D,"must specify image data"),v(typeof N=="number"&&N===(N|0)&&N>=0&&N<6,"invalid face");var V=_|0,$=b|0,ee=S|0,ie=Oe();return te(ie,h),ie.width=0,ie.height=0,Ce(ie,D),ie.width=ie.width||(h.width>>ee)-V,ie.height=ie.height||(h.height>>ee)-$,v(h.type===ie.type&&h.format===ie.format&&h.internalformat===ie.internalformat,"incompatible format for texture.subimage"),v(V>=0&&$>=0&&V+ie.width<=h.width&&$+ie.height<=h.height,"texture.subimage write out of bounds"),v(h.mipmask&1<<ee,"missing mipmap data"),v(ie.data||ie.element||ie.needsCopy,"missing image data"),Gn(h),ct(ie,el+N,V,$,ee),Bt(),Ie(ie),F}function k(N){var D=N|0;if(D!==h.width){F.width=h.width=D,F.height=h.height=D,Gn(h);for(var _=0;_<6;++_)for(var b=0;h.mipmask>>b;++b)c.texImage2D(el+_,b,h.format,D>>b,D>>b,0,h.format,h.type,null);return Bt(),K.profile&&(h.stats.size=al(h.internalformat,h.type,F.width,F.height,!1,!0)),F}}return F(A,Y,H,Ge,Et,E),F.subimage=B,F.resize=k,F._reglType="textureCube",F._texture=h,K.profile&&(F.stats=h.stats),F.destroy=function(){h.decRef()},F}function fn(){for(var A=0;A<$n;++A)c.activeTexture(na+A),c.bindTexture(Nr,null),cn[A]=null;Zn(Dn).forEach(rt),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var A=0;return Object.keys(Dn).forEach(function(Y){A+=Dn[Y].stats.size}),A});function di(){for(var A=0;A<$n;++A){var Y=cn[A];Y&&(Y.bindCount=0,Y.unit=-1,cn[A]=null)}Zn(Dn).forEach(function(H){H.texture=c.createTexture(),c.bindTexture(H.target,H.texture);for(var Ge=0;Ge<32;++Ge)if(H.mipmask&1<<Ge)if(H.target===Nr)c.texImage2D(Nr,Ge,H.internalformat,H.width>>Ge,H.height>>Ge,0,H.internalformat,H.type,null);else for(var Et=0;Et<6;++Et)c.texImage2D(el+Et,Ge,H.internalformat,H.width>>Ge,H.height>>Ge,0,H.internalformat,H.type,null);An(H.texInfo,H.target)})}function fa(){for(var A=0;A<$n;++A){var Y=cn[A];Y&&(Y.bindCount=0,Y.unit=-1,cn[A]=null),c.activeTexture(na+A),c.bindTexture(Nr,null),c.bindTexture(ws,null)}}return{create2D:Tt,createCube:Ot,clear:fn,getTexture:function(A){return null},restore:di,refresh:fa}}var ci=36161,ll=32854,$c=32855,Gc=36194,zc=33189,Uc=36168,Vc=34041,Hc=35907,Wc=34836,Xc=34842,Yc=34843,_r=[];_r[ll]=2,_r[$c]=2,_r[Gc]=2,_r[zc]=2,_r[Uc]=1,_r[Vc]=4,_r[Hc]=4,_r[Wc]=16,_r[Xc]=8,_r[Yc]=6;function Qc(c,y,R){return _r[c]*y*R}var tm=function(c,y,R,X,ne){var W={rgba4:ll,rgb565:Gc,"rgb5 a1":$c,depth:zc,stencil:Uc,"depth stencil":Vc};y.ext_srgb&&(W.srgba=Hc),y.ext_color_buffer_half_float&&(W.rgba16f=Xc,W.rgb16f=Yc),y.webgl_color_buffer_float&&(W.rgba32f=Wc);var K=[];Object.keys(W).forEach(function(he){var ve=W[he];K[ve]=he});var de=0,fe={};function ye(he){this.id=de++,this.refCount=1,this.renderbuffer=he,this.format=ll,this.width=0,this.height=0,ne.profile&&(this.stats={size:0})}ye.prototype.decRef=function(){--this.refCount<=0&&Ee(this)};function Ee(he){var ve=he.renderbuffer;v(ve,"must not double destroy renderbuffer"),c.bindRenderbuffer(ci,null),c.deleteRenderbuffer(ve),he.renderbuffer=null,he.refCount=0,delete fe[he.id],X.renderbufferCount--}function xe(he,ve){var j=new ye(c.createRenderbuffer());fe[j.id]=j,X.renderbufferCount++;function Q(Me,ce){var ke=0,Re=0,Je=ll;if(typeof Me=="object"&&Me){var re=Me;if("shape"in re){var te=re.shape;v(Array.isArray(te)&&te.length>=2,"invalid renderbuffer shape"),ke=te[0]|0,Re=te[1]|0}else"radius"in re&&(ke=Re=re.radius|0),"width"in re&&(ke=re.width|0),"height"in re&&(Re=re.height|0);"format"in re&&(v.parameter(re.format,W,"invalid renderbuffer format"),Je=W[re.format])}else typeof Me=="number"?(ke=Me|0,typeof ce=="number"?Re=ce|0:Re=ke):Me?v.raise("invalid arguments to renderbuffer constructor"):ke=Re=1;if(v(ke>0&&Re>0&&ke<=R.maxRenderbufferSize&&Re<=R.maxRenderbufferSize,"invalid renderbuffer size"),!(ke===j.width&&Re===j.height&&Je===j.format))return Q.width=j.width=ke,Q.height=j.height=Re,j.format=Je,c.bindRenderbuffer(ci,j.renderbuffer),c.renderbufferStorage(ci,Je,ke,Re),v(c.getError()===0,"invalid render buffer format"),ne.profile&&(j.stats.size=Qc(j.format,j.width,j.height)),Q.format=K[j.format],Q}function pe(Me,ce){var ke=Me|0,Re=ce|0||ke;return ke===j.width&&Re===j.height||(v(ke>0&&Re>0&&ke<=R.maxRenderbufferSize&&Re<=R.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=j.width=ke,Q.height=j.height=Re,c.bindRenderbuffer(ci,j.renderbuffer),c.renderbufferStorage(ci,j.format,ke,Re),v(c.getError()===0,"invalid render buffer format"),ne.profile&&(j.stats.size=Qc(j.format,j.width,j.height))),Q}return Q(he,ve),Q.resize=pe,Q._reglType="renderbuffer",Q._renderbuffer=j,ne.profile&&(Q.stats=j.stats),Q.destroy=function(){j.decRef()},Q}ne.profile&&(X.getTotalRenderbufferSize=function(){var he=0;return Object.keys(fe).forEach(function(ve){he+=fe[ve].stats.size}),he});function Te(){Zn(fe).forEach(function(he){he.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(ci,he.renderbuffer),c.renderbufferStorage(ci,he.format,he.width,he.height)}),c.bindRenderbuffer(ci,null)}return{create:xe,clear:function(){Zn(fe).forEach(Ee)},restore:Te}},Xr=36160,$s=36161,ki=3553,sl=34069,Kc=36064,ul=36096,qc=36128,Zc=33306,Jc=36053,nm=36054,rm=36055,im=36057,om=36061,am=36193,lm=5121,sm=5126,ef=6407,tf=6408,um=6402,cm=[ef,tf],Gs=[];Gs[tf]=4,Gs[ef]=3;var ia=[];ia[lm]=1,ia[sm]=4,ia[am]=2;var fm=32854,nf=32855,dm=36194,rf=33189,of=36168,zs=34041,af=35907,hm=34836,oa=34842,mm=34843,pm=[fm,nf,dm,af,oa,mm,hm],co={};co[Jc]="complete",co[nm]="incomplete attachment",co[im]="incomplete dimensions",co[rm]="incomplete, missing attachment",co[om]="unsupported";function vm(c,y,R,X,ne,W){var K={cur:null,next:null,dirty:!1,setFBO:null},de=["rgba"],fe=["rgba4","rgb565","rgb5 a1"];y.ext_srgb&&fe.push("srgba"),y.ext_color_buffer_half_float&&fe.push("rgba16f","rgb16f"),y.webgl_color_buffer_float&&fe.push("rgba32f");var ye=["uint8"];y.oes_texture_half_float&&ye.push("half float","float16"),y.oes_texture_float&&ye.push("float","float32");function Ee(me,Ce,Le){this.target=me,this.texture=Ce,this.renderbuffer=Le;var ct=0,st=0;Ce?(ct=Ce.width,st=Ce.height):Le&&(ct=Le.width,st=Le.height),this.width=ct,this.height=st}function xe(me){me&&(me.texture&&me.texture._texture.decRef(),me.renderbuffer&&me.renderbuffer._renderbuffer.decRef())}function Te(me,Ce,Le){if(me)if(me.texture){var ct=me.texture._texture,st=Math.max(1,ct.width),Oe=Math.max(1,ct.height);v(st===Ce&&Oe===Le,"inconsistent width/height for supplied texture"),ct.refCount+=1}else{var Ie=me.renderbuffer._renderbuffer;v(Ie.width===Ce&&Ie.height===Le,"inconsistent width/height for renderbuffer"),Ie.refCount+=1}}function he(me,Ce){Ce&&(Ce.texture?c.framebufferTexture2D(Xr,me,Ce.target,Ce.texture._texture.texture,0):c.framebufferRenderbuffer(Xr,me,$s,Ce.renderbuffer._renderbuffer.renderbuffer))}function ve(me){var Ce=ki,Le=null,ct=null,st=me;typeof me=="object"&&(st=me.data,"target"in me&&(Ce=me.target|0)),v.type(st,"function","invalid attachment data");var Oe=st._reglType;return Oe==="texture2d"?(Le=st,v(Ce===ki)):Oe==="textureCube"?(Le=st,v(Ce>=sl&&Ce<sl+6,"invalid cube map target")):Oe==="renderbuffer"?(ct=st,Ce=$s):v.raise("invalid regl object for attachment"),new Ee(Ce,Le,ct)}function j(me,Ce,Le,ct,st){if(Le){var Oe=X.create2D({width:me,height:Ce,format:ct,type:st});return Oe._texture.refCount=0,new Ee(ki,Oe,null)}else{var Ie=ne.create({width:me,height:Ce,format:ct});return Ie._renderbuffer.refCount=0,new Ee($s,null,Ie)}}function Q(me){return me&&(me.texture||me.renderbuffer)}function pe(me,Ce,Le){me&&(me.texture?me.texture.resize(Ce,Le):me.renderbuffer&&me.renderbuffer.resize(Ce,Le),me.width=Ce,me.height=Le)}var Me=0,ce={};function ke(){this.id=Me++,ce[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Re(me){me.colorAttachments.forEach(xe),xe(me.depthAttachment),xe(me.stencilAttachment),xe(me.depthStencilAttachment)}function Je(me){var Ce=me.framebuffer;v(Ce,"must not double destroy framebuffer"),c.deleteFramebuffer(Ce),me.framebuffer=null,W.framebufferCount--,delete ce[me.id]}function re(me){var Ce;c.bindFramebuffer(Xr,me.framebuffer);var Le=me.colorAttachments;for(Ce=0;Ce<Le.length;++Ce)he(Kc+Ce,Le[Ce]);for(Ce=Le.length;Ce<R.maxColorAttachments;++Ce)c.framebufferTexture2D(Xr,Kc+Ce,ki,null,0);c.framebufferTexture2D(Xr,Zc,ki,null,0),c.framebufferTexture2D(Xr,ul,ki,null,0),c.framebufferTexture2D(Xr,qc,ki,null,0),he(ul,me.depthAttachment),he(qc,me.stencilAttachment),he(Zc,me.depthStencilAttachment);var ct=c.checkFramebufferStatus(Xr);!c.isContextLost()&&ct!==Jc&&v.raise("framebuffer configuration not supported, status = "+co[ct]),c.bindFramebuffer(Xr,K.next?K.next.framebuffer:null),K.cur=K.next,c.getError()}function te(me,Ce){var Le=new ke;W.framebufferCount++;function ct(Oe,Ie){var ot;v(K.next!==Le,"can not update framebuffer which is currently in use");var ft=0,wt=0,Jt=!0,nn=!0,bt=null,Tn=!0,Zt="rgba",En="uint8",An=1,bn=null,Dn=null,$n=null,cn=!1;if(typeof Oe=="number")ft=Oe|0,wt=Ie|0||ft;else if(!Oe)ft=wt=1;else{v.type(Oe,"object","invalid arguments for framebuffer");var mt=Oe;if("shape"in mt){var Gn=mt.shape;v(Array.isArray(Gn)&&Gn.length>=2,"invalid shape for framebuffer"),ft=Gn[0],wt=Gn[1]}else"radius"in mt&&(ft=wt=mt.radius),"width"in mt&&(ft=mt.width),"height"in mt&&(wt=mt.height);("color"in mt||"colors"in mt)&&(bt=mt.color||mt.colors,Array.isArray(bt)&&v(bt.length===1||y.webgl_draw_buffers,"multiple render targets not supported")),bt||("colorCount"in mt&&(An=mt.colorCount|0,v(An>0,"invalid color buffer count")),"colorTexture"in mt&&(Tn=!!mt.colorTexture,Zt="rgba4"),"colorType"in mt&&(En=mt.colorType,Tn?(v(y.oes_texture_float||!(En==="float"||En==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),v(y.oes_texture_half_float||!(En==="half float"||En==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):En==="half float"||En==="float16"?(v(y.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zt="rgba16f"):(En==="float"||En==="float32")&&(v(y.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zt="rgba32f"),v.oneOf(En,ye,"invalid color type")),"colorFormat"in mt&&(Zt=mt.colorFormat,de.indexOf(Zt)>=0?Tn=!0:fe.indexOf(Zt)>=0?Tn=!1:v.optional(function(){Tn?v.oneOf(mt.colorFormat,de,"invalid color format for texture"):v.oneOf(mt.colorFormat,fe,"invalid color format for renderbuffer")}))),("depthTexture"in mt||"depthStencilTexture"in mt)&&(cn=!!(mt.depthTexture||mt.depthStencilTexture),v(!cn||y.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in mt&&(typeof mt.depth=="boolean"?Jt=mt.depth:(bn=mt.depth,nn=!1)),"stencil"in mt&&(typeof mt.stencil=="boolean"?nn=mt.stencil:(Dn=mt.stencil,Jt=!1)),"depthStencil"in mt&&(typeof mt.depthStencil=="boolean"?Jt=nn=mt.depthStencil:($n=mt.depthStencil,Jt=!1,nn=!1))}var Bt=null,rt=null,Tt=null,Ot=null;if(Array.isArray(bt))Bt=bt.map(ve);else if(bt)Bt=[ve(bt)];else for(Bt=new Array(An),ot=0;ot<An;++ot)Bt[ot]=j(ft,wt,Tn,Zt,En);v(y.webgl_draw_buffers||Bt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),v(Bt.length<=R.maxColorAttachments,"too many color attachments, not supported"),ft=ft||Bt[0].width,wt=wt||Bt[0].height,bn?rt=ve(bn):Jt&&!nn&&(rt=j(ft,wt,cn,"depth","uint32")),Dn?Tt=ve(Dn):nn&&!Jt&&(Tt=j(ft,wt,!1,"stencil","uint8")),$n?Ot=ve($n):!bn&&!Dn&&nn&&Jt&&(Ot=j(ft,wt,cn,"depth stencil","depth stencil")),v(!!bn+!!Dn+!!$n<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var fn=null;for(ot=0;ot<Bt.length;++ot)if(Te(Bt[ot],ft,wt),v(!Bt[ot]||Bt[ot].texture&&cm.indexOf(Bt[ot].texture._texture.format)>=0||Bt[ot].renderbuffer&&pm.indexOf(Bt[ot].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ot+" is invalid"),Bt[ot]&&Bt[ot].texture){var di=Gs[Bt[ot].texture._texture.format]*ia[Bt[ot].texture._texture.type];fn===null?fn=di:v(fn===di,"all color attachments much have the same number of bits per pixel.")}return Te(rt,ft,wt),v(!rt||rt.texture&&rt.texture._texture.format===um||rt.renderbuffer&&rt.renderbuffer._renderbuffer.format===rf,"invalid depth attachment for framebuffer object"),Te(Tt,ft,wt),v(!Tt||Tt.renderbuffer&&Tt.renderbuffer._renderbuffer.format===of,"invalid stencil attachment for framebuffer object"),Te(Ot,ft,wt),v(!Ot||Ot.texture&&Ot.texture._texture.format===zs||Ot.renderbuffer&&Ot.renderbuffer._renderbuffer.format===zs,"invalid depth-stencil attachment for framebuffer object"),Re(Le),Le.width=ft,Le.height=wt,Le.colorAttachments=Bt,Le.depthAttachment=rt,Le.stencilAttachment=Tt,Le.depthStencilAttachment=Ot,ct.color=Bt.map(Q),ct.depth=Q(rt),ct.stencil=Q(Tt),ct.depthStencil=Q(Ot),ct.width=Le.width,ct.height=Le.height,re(Le),ct}function st(Oe,Ie){v(K.next!==Le,"can not resize a framebuffer which is currently in use");var ot=Math.max(Oe|0,1),ft=Math.max(Ie|0||ot,1);if(ot===Le.width&&ft===Le.height)return ct;for(var wt=Le.colorAttachments,Jt=0;Jt<wt.length;++Jt)pe(wt[Jt],ot,ft);return pe(Le.depthAttachment,ot,ft),pe(Le.stencilAttachment,ot,ft),pe(Le.depthStencilAttachment,ot,ft),Le.width=ct.width=ot,Le.height=ct.height=ft,re(Le),ct}return ct(me,Ce),r(ct,{resize:st,_reglType:"framebuffer",_framebuffer:Le,destroy:function(){Je(Le),Re(Le)},use:function(Oe){K.setFBO({framebuffer:ct},Oe)}})}function ze(me){var Ce=Array(6);function Le(st){var Oe;v(Ce.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Ie={color:null},ot=0,ft=null,wt="rgba",Jt="uint8",nn=1;if(typeof st=="number")ot=st|0;else if(!st)ot=1;else{v.type(st,"object","invalid arguments for framebuffer");var bt=st;if("shape"in bt){var Tn=bt.shape;v(Array.isArray(Tn)&&Tn.length>=2,"invalid shape for framebuffer"),v(Tn[0]===Tn[1],"cube framebuffer must be square"),ot=Tn[0]}else"radius"in bt&&(ot=bt.radius|0),"width"in bt?(ot=bt.width|0,"height"in bt&&v(bt.height===ot,"must be square")):"height"in bt&&(ot=bt.height|0);("color"in bt||"colors"in bt)&&(ft=bt.color||bt.colors,Array.isArray(ft)&&v(ft.length===1||y.webgl_draw_buffers,"multiple render targets not supported")),ft||("colorCount"in bt&&(nn=bt.colorCount|0,v(nn>0,"invalid color buffer count")),"colorType"in bt&&(v.oneOf(bt.colorType,ye,"invalid color type"),Jt=bt.colorType),"colorFormat"in bt&&(wt=bt.colorFormat,v.oneOf(bt.colorFormat,de,"invalid color format for texture"))),"depth"in bt&&(Ie.depth=bt.depth),"stencil"in bt&&(Ie.stencil=bt.stencil),"depthStencil"in bt&&(Ie.depthStencil=bt.depthStencil)}var Zt;if(ft)if(Array.isArray(ft))for(Zt=[],Oe=0;Oe<ft.length;++Oe)Zt[Oe]=ft[Oe];else Zt=[ft];else{Zt=Array(nn);var En={radius:ot,format:wt,type:Jt};for(Oe=0;Oe<nn;++Oe)Zt[Oe]=X.createCube(En)}for(Ie.color=Array(Zt.length),Oe=0;Oe<Zt.length;++Oe){var An=Zt[Oe];v(typeof An=="function"&&An._reglType==="textureCube","invalid cube map"),ot=ot||An.width,v(An.width===ot&&An.height===ot,"invalid cube map shape"),Ie.color[Oe]={target:sl,data:Zt[Oe]}}for(Oe=0;Oe<6;++Oe){for(var bn=0;bn<Zt.length;++bn)Ie.color[bn].target=sl+Oe;Oe>0&&(Ie.depth=Ce[0].depth,Ie.stencil=Ce[0].stencil,Ie.depthStencil=Ce[0].depthStencil),Ce[Oe]?Ce[Oe](Ie):Ce[Oe]=te(Ie)}return r(Le,{width:ot,height:ot,color:Zt})}function ct(st){var Oe,Ie=st|0;if(v(Ie>0&&Ie<=R.maxCubeMapSize,"invalid radius for cube fbo"),Ie===Le.width)return Le;var ot=Le.color;for(Oe=0;Oe<ot.length;++Oe)ot[Oe].resize(Ie);for(Oe=0;Oe<6;++Oe)Ce[Oe].resize(Ie);return Le.width=Le.height=Ie,Le}return Le(me),r(Le,{faces:Ce,resize:ct,_reglType:"framebufferCube",destroy:function(){Ce.forEach(function(st){st.destroy()})}})}function be(){K.cur=null,K.next=null,K.dirty=!0,Zn(ce).forEach(function(me){me.framebuffer=c.createFramebuffer(),re(me)})}return r(K,{getFramebuffer:function(me){if(typeof me=="function"&&me._reglType==="framebuffer"){var Ce=me._framebuffer;if(Ce instanceof ke)return Ce}return null},create:te,createCube:ze,clear:function(){Zn(ce).forEach(Je)},restore:be})}var gm=5126,s=34962,I=34963,U=["attributes","elements","offset","count","primitive","instances"];function le(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=gm,this.offset=0,this.stride=0,this.divisor=0}function Ae(c,y,R,X,ne,W,K){for(var de=R.maxAttributes,fe=new Array(de),ye=0;ye<de;++ye)fe[ye]=new le;var Ee=0,xe={},Te={Record:le,scope:{},state:fe,currentVAO:null,targetVAO:null,restore:ve()?Re:function(){},createVAO:Je,getVAO:Q,destroyBuffer:he,setVAO:ve()?pe:Me,clear:ve()?ce:function(){}};function he(re){for(var te=0;te<fe.length;++te){var ze=fe[te];ze.buffer===re&&(c.disableVertexAttribArray(te),ze.buffer=null)}}function ve(){return y.oes_vertex_array_object}function j(){return y.angle_instanced_arrays}function Q(re){return typeof re=="function"&&re._vao?re._vao:null}function pe(re){if(re!==Te.currentVAO){var te=ve();re?te.bindVertexArrayOES(re.vao):te.bindVertexArrayOES(null),Te.currentVAO=re}}function Me(re){if(re!==Te.currentVAO){if(re)re.bindAttrs();else{for(var te=j(),ze=0;ze<fe.length;++ze){var be=fe[ze];be.buffer?(c.enableVertexAttribArray(ze),be.buffer.bind(),c.vertexAttribPointer(ze,be.size,be.type,be.normalized,be.stride,be.offfset),te&&be.divisor&&te.vertexAttribDivisorANGLE(ze,be.divisor)):(c.disableVertexAttribArray(ze),c.vertexAttrib4f(ze,be.x,be.y,be.z,be.w))}K.elements?c.bindBuffer(I,K.elements.buffer.buffer):c.bindBuffer(I,null)}Te.currentVAO=re}}function ce(){Zn(xe).forEach(function(re){re.destroy()})}function ke(){this.id=++Ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var re=ve();re?this.vao=re.createVertexArrayOES():this.vao=null,xe[this.id]=this,this.buffers=[]}ke.prototype.bindAttrs=function(){for(var re=j(),te=this.attributes,ze=0;ze<te.length;++ze){var be=te[ze];be.buffer?(c.enableVertexAttribArray(ze),c.bindBuffer(s,be.buffer.buffer),c.vertexAttribPointer(ze,be.size,be.type,be.normalized,be.stride,be.offset),re&&be.divisor&&re.vertexAttribDivisorANGLE(ze,be.divisor)):(c.disableVertexAttribArray(ze),c.vertexAttrib4f(ze,be.x,be.y,be.z,be.w))}for(var me=te.length;me<de;++me)c.disableVertexAttribArray(me);var Ce=W.getElements(this.elements);Ce?c.bindBuffer(I,Ce.buffer.buffer):c.bindBuffer(I,null)},ke.prototype.refresh=function(){var re=ve();re&&(re.bindVertexArrayOES(this.vao),this.bindAttrs(),Te.currentVAO=null,re.bindVertexArrayOES(null))},ke.prototype.destroy=function(){if(this.vao){var re=ve();this===Te.currentVAO&&(Te.currentVAO=null,re.bindVertexArrayOES(null)),re.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),xe[this.id]&&(delete xe[this.id],X.vaoCount-=1)};function Re(){var re=ve();re&&Zn(xe).forEach(function(te){te.refresh()})}function Je(re){var te=new ke;X.vaoCount+=1;function ze(be){var me;if(Array.isArray(be))me=be,te.elements&&te.ownsElements&&te.elements.destroy(),te.elements=null,te.ownsElements=!1,te.offset=0,te.count=0,te.instances=-1,te.primitive=4;else{if(v(typeof be=="object","invalid arguments for create vao"),v("attributes"in be,"must specify attributes for vao"),be.elements){var Ce=be.elements;te.ownsElements?typeof Ce=="function"&&Ce._reglType==="elements"?(te.elements.destroy(),te.ownsElements=!1):(te.elements(Ce),te.ownsElements=!1):W.getElements(be.elements)?(te.elements=be.elements,te.ownsElements=!1):(te.elements=W.create(be.elements),te.ownsElements=!0)}else te.elements=null,te.ownsElements=!1;me=be.attributes,te.offset=0,te.count=-1,te.instances=-1,te.primitive=4,te.elements&&(te.count=te.elements._elements.vertCount,te.primitive=te.elements._elements.primType),"offset"in be&&(te.offset=be.offset|0),"count"in be&&(te.count=be.count|0),"instances"in be&&(te.instances=be.instances|0),"primitive"in be&&(v(be.primitive in si,"bad primitive type: "+be.primitive),te.primitive=si[be.primitive]),v.optional(()=>{for(var Jt=Object.keys(be),nn=0;nn<Jt.length;++nn)v(U.indexOf(Jt[nn])>=0,'invalid option for vao: "'+Jt[nn]+'" valid options are '+U)}),v(Array.isArray(me),"attributes must be an array")}v(me.length<de,"too many attributes"),v(me.length>0,"must specify at least one attribute");var Le={},ct=te.attributes;ct.length=me.length;for(var st=0;st<me.length;++st){var Oe=me[st],Ie=ct[st]=new le,ot=Oe.data||Oe;if(Array.isArray(ot)||n(ot)||ar(ot)){var ft;te.buffers[st]&&(ft=te.buffers[st],n(ot)&&ft._buffer.byteLength>=ot.byteLength?ft.subdata(ot):(ft.destroy(),te.buffers[st]=null)),te.buffers[st]||(ft=te.buffers[st]=ne.create(Oe,s,!1,!0)),Ie.buffer=ne.getBuffer(ft),Ie.size=Ie.buffer.dimension|0,Ie.normalized=!1,Ie.type=Ie.buffer.dtype,Ie.offset=0,Ie.stride=0,Ie.divisor=0,Ie.state=1,Le[st]=1}else ne.getBuffer(Oe)?(Ie.buffer=ne.getBuffer(Oe),Ie.size=Ie.buffer.dimension|0,Ie.normalized=!1,Ie.type=Ie.buffer.dtype,Ie.offset=0,Ie.stride=0,Ie.divisor=0,Ie.state=1):ne.getBuffer(Oe.buffer)?(Ie.buffer=ne.getBuffer(Oe.buffer),Ie.size=(+Oe.size||Ie.buffer.dimension)|0,Ie.normalized=!!Oe.normalized||!1,"type"in Oe?(v.parameter(Oe.type,ro,"invalid buffer type"),Ie.type=ro[Oe.type]):Ie.type=Ie.buffer.dtype,Ie.offset=(Oe.offset||0)|0,Ie.stride=(Oe.stride||0)|0,Ie.divisor=(Oe.divisor||0)|0,Ie.state=1,v(Ie.size>=1&&Ie.size<=4,"size must be between 1 and 4"),v(Ie.offset>=0,"invalid offset"),v(Ie.stride>=0&&Ie.stride<=255,"stride must be between 0 and 255"),v(Ie.divisor>=0,"divisor must be positive"),v(!Ie.divisor||!!y.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Oe?(v(st>0,"first attribute must not be a constant"),Ie.x=+Oe.x||0,Ie.y=+Oe.y||0,Ie.z=+Oe.z||0,Ie.w=+Oe.w||0,Ie.state=2):v(!1,"invalid attribute spec for location "+st)}for(var wt=0;wt<te.buffers.length;++wt)!Le[wt]&&te.buffers[wt]&&(te.buffers[wt].destroy(),te.buffers[wt]=null);return te.refresh(),ze}return ze.destroy=function(){for(var be=0;be<te.buffers.length;++be)te.buffers[be]&&te.buffers[be].destroy();te.buffers.length=0,te.ownsElements&&(te.elements.destroy(),te.elements=null,te.ownsElements=!1),te.destroy()},ze._vao=te,ze._reglType="vao",ze(re)}return Te}var Be=35632,He=35633,ht=35718,jt=35721;function kt(c,y,R,X){var ne={},W={};function K(j,Q,pe,Me){this.name=j,this.id=Q,this.location=pe,this.info=Me}function de(j,Q){for(var pe=0;pe<j.length;++pe)if(j[pe].id===Q.id){j[pe].location=Q.location;return}j.push(Q)}function fe(j,Q,pe){var Me=j===Be?ne:W,ce=Me[Q];if(!ce){var ke=y.str(Q);ce=c.createShader(j),c.shaderSource(ce,ke),c.compileShader(ce),v.shaderError(c,ce,ke,j,pe),Me[Q]=ce}return ce}var ye={},Ee=[],xe=0;function Te(j,Q){this.id=xe++,this.fragId=j,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,X.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function he(j,Q,pe){var Me,ce,ke=fe(Be,j.fragId),Re=fe(He,j.vertId),Je=j.program=c.createProgram();if(c.attachShader(Je,ke),c.attachShader(Je,Re),pe)for(Me=0;Me<pe.length;++Me){var re=pe[Me];c.bindAttribLocation(Je,re[0],re[1])}c.linkProgram(Je),v.linkError(c,Je,y.str(j.fragId),y.str(j.vertId),Q);var te=c.getProgramParameter(Je,ht);X.profile&&(j.stats.uniformsCount=te);var ze=j.uniforms;for(Me=0;Me<te;++Me)if(ce=c.getActiveUniform(Je,Me),ce){if(ce.size>1)for(var be=0;be<ce.size;++be){var me=ce.name.replace("[0]","["+be+"]");de(ze,new K(me,y.id(me),c.getUniformLocation(Je,me),ce))}var Ce=ce.name;ce.size>1&&(Ce=Ce.replace("[0]","")),de(ze,new K(Ce,y.id(Ce),c.getUniformLocation(Je,Ce),ce))}var Le=c.getProgramParameter(Je,jt);X.profile&&(j.stats.attributesCount=Le);var ct=j.attributes;for(Me=0;Me<Le;++Me)ce=c.getActiveAttrib(Je,Me),ce&&de(ct,new K(ce.name,y.id(ce.name),c.getAttribLocation(Je,ce.name),ce))}X.profile&&(R.getMaxUniformsCount=function(){var j=0;return Ee.forEach(function(Q){Q.stats.uniformsCount>j&&(j=Q.stats.uniformsCount)}),j},R.getMaxAttributesCount=function(){var j=0;return Ee.forEach(function(Q){Q.stats.attributesCount>j&&(j=Q.stats.attributesCount)}),j});function ve(){ne={},W={};for(var j=0;j<Ee.length;++j)he(Ee[j],null,Ee[j].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var j=c.deleteShader.bind(c);Zn(ne).forEach(j),ne={},Zn(W).forEach(j),W={},Ee.forEach(function(Q){c.deleteProgram(Q.program)}),Ee.length=0,ye={},R.shaderCount=0},program:function(j,Q,pe,Me){v.command(j>=0,"missing vertex shader",pe),v.command(Q>=0,"missing fragment shader",pe);var ce=ye[Q];ce||(ce=ye[Q]={});var ke=ce[j];if(ke&&(ke.refCount++,!Me))return ke;var Re=new Te(Q,j);return R.shaderCount++,he(Re,pe,Me),ke||(ce[j]=Re),Ee.push(Re),r(Re,{destroy:function(){if(Re.refCount--,Re.refCount<=0){c.deleteProgram(Re.program);var Je=Ee.indexOf(Re);Ee.splice(Je,1),R.shaderCount--}ce[Re.vertId].refCount<=0&&(c.deleteShader(W[Re.vertId]),delete W[Re.vertId],delete ye[Re.fragId][Re.vertId]),Object.keys(ye[Re.fragId]).length||(c.deleteShader(ne[Re.fragId]),delete ne[Re.fragId],delete ye[Re.fragId])}})},restore:ve,shader:fe,frag:-1,vert:-1}}var yn=6408,Ut=5121,It=3333,lf=5126;function q_(c,y,R,X,ne,W,K){function de(Ee){var xe;y.next===null?(v(ne.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),xe=Ut):(v(y.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),xe=y.next.colorAttachments[0].texture._texture.type,v.optional(function(){W.oes_texture_float?(v(xe===Ut||xe===lf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),xe===lf&&v(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):v(xe===Ut,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Te=0,he=0,ve=X.framebufferWidth,j=X.framebufferHeight,Q=null;n(Ee)?Q=Ee:Ee&&(v.type(Ee,"object","invalid arguments to regl.read()"),Te=Ee.x|0,he=Ee.y|0,v(Te>=0&&Te<X.framebufferWidth,"invalid x offset for regl.read"),v(he>=0&&he<X.framebufferHeight,"invalid y offset for regl.read"),ve=(Ee.width||X.framebufferWidth-Te)|0,j=(Ee.height||X.framebufferHeight-he)|0,Q=Ee.data||null),Q&&(xe===Ut?v(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):xe===lf&&v(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),v(ve>0&&ve+Te<=X.framebufferWidth,"invalid width for read pixels"),v(j>0&&j+he<=X.framebufferHeight,"invalid height for read pixels"),R();var pe=ve*j*4;return Q||(xe===Ut?Q=new Uint8Array(pe):xe===lf&&(Q=Q||new Float32Array(pe))),v.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),v(Q.byteLength>=pe,"data buffer for regl.read() too small"),c.pixelStorei(It,4),c.readPixels(Te,he,ve,j,yn,xe,Q),Q}function fe(Ee){var xe;return y.setFBO({framebuffer:Ee.framebuffer},function(){xe=de(Ee)}),xe}function ye(Ee){return!Ee||!("framebuffer"in Ee)?de(Ee):fe(Ee)}return ye}function cl(c){return Array.prototype.slice.call(c)}function fl(c){return cl(c).join("")}function Z_(){var c=0,y=[],R=[];function X(xe){for(var Te=0;Te<R.length;++Te)if(R[Te]===xe)return y[Te];var he="g"+c++;return y.push(he),R.push(xe),he}function ne(){var xe=[];function Te(){xe.push.apply(xe,cl(arguments))}var he=[];function ve(){var j="v"+c++;return he.push(j),arguments.length>0&&(xe.push(j,"="),xe.push.apply(xe,cl(arguments)),xe.push(";")),j}return r(Te,{def:ve,toString:function(){return fl([he.length>0?"var "+he.join(",")+";":"",fl(xe)])}})}function W(){var xe=ne(),Te=ne(),he=xe.toString,ve=Te.toString;function j(Q,pe){Te(Q,pe,"=",xe.def(Q,pe),";")}return r(function(){xe.apply(xe,cl(arguments))},{def:xe.def,entry:xe,exit:Te,save:j,set:function(Q,pe,Me){j(Q,pe),xe(Q,pe,"=",Me,";")},toString:function(){return he()+ve()}})}function K(){var xe=fl(arguments),Te=W(),he=W(),ve=Te.toString,j=he.toString;return r(Te,{then:function(){return Te.apply(Te,cl(arguments)),this},else:function(){return he.apply(he,cl(arguments)),this},toString:function(){var Q=j();return Q&&(Q="else{"+Q+"}"),fl(["if(",xe,"){",ve(),"}",Q])}})}var de=ne(),fe={};function ye(xe,Te){var he=[];function ve(){var ce="a"+he.length;return he.push(ce),ce}Te=Te||0;for(var j=0;j<Te;++j)ve();var Q=W(),pe=Q.toString,Me=fe[xe]=r(Q,{arg:ve,toString:function(){return fl(["function(",he.join(),"){",pe(),"}"])}});return Me}function Ee(){var xe=['"use strict";',de,"return {"];Object.keys(fe).forEach(function(ve){xe.push('"',ve,'":',fe[ve].toString(),",")}),xe.push("}");var Te=fl(xe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),he=Function.apply(null,y.concat(Te));return he.apply(null,R)}return{global:de,link:X,block:ne,proc:ye,scope:W,cond:K,compile:Ee}}var dl="xyzw".split(""),ng=5121,hl=1,ym=2,xm=0,Em=1,_m=2,Sm=3,sf=4,rg=5,ig=6,og="dither",ag="blend.enable",lg="blend.color",wm="blend.equation",Tm="blend.func",sg="depth.enable",ug="depth.func",cg="depth.range",fg="depth.mask",Am="colorMask",dg="cull.enable",hg="cull.face",bm="frontFace",Cm="lineWidth",mg="polygonOffset.enable",Lm="polygonOffset.offset",pg="sample.alpha",vg="sample.enable",Rm="sample.coverage",gg="stencil.enable",yg="stencil.mask",Om="stencil.func",Pm="stencil.opFront",Us="stencil.opBack",xg="scissor.enable",uf="scissor.box",Ii="viewport",Vs="profile",aa="framebuffer",Hs="vert",Ws="frag",la="elements",sa="primitive",ua="count",cf="offset",ff="instances",Xs="vao",Nm="Width",km="Height",ml=aa+Nm,pl=aa+km,J_=Ii+Nm,eS=Ii+km,Eg="drawingBuffer",_g=Eg+Nm,Sg=Eg+km,tS=[Tm,wm,Om,Pm,Us,Rm,Ii,uf,Lm],vl=34962,Im=34963,nS=35632,rS=35633,wg=3553,iS=34067,oS=2884,aS=3042,lS=3024,sS=2960,uS=2929,cS=3089,fS=32823,dS=32926,hS=32928,Dm=5126,df=35664,hf=35665,mf=35666,Mm=5124,pf=35667,vf=35668,gf=35669,Fm=35670,yf=35671,xf=35672,Ef=35673,Ys=35674,Qs=35675,Ks=35676,qs=35678,Zs=35680,jm=4,Js=1028,ca=1029,Tg=2304,Bm=2305,mS=32775,pS=32776,vS=519,fo=7680,Ag=0,bg=1,Cg=32774,gS=513,Lg=36160,yS=36064,fi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],gl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ho={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Og={frag:nS,vert:rS},$m={cw:Tg,ccw:Bm};function _f(c){return Array.isArray(c)||n(c)||ar(c)}function Pg(c){return c.sort(function(y,R){return y===Ii?-1:R===Ii?1:y<R?-1:1})}function On(c,y,R,X){this.thisDep=c,this.contextDep=y,this.propDep=R,this.append=X}function mo(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function xn(c){return new On(!1,!1,!1,c)}function lr(c,y){var R=c.type;if(R===xm){var X=c.data.length;return new On(!0,X>=1,X>=2,y)}else if(R===sf){var ne=c.data;return new On(ne.thisDep,ne.contextDep,ne.propDep,y)}else{if(R===rg)return new On(!1,!1,!1,y);if(R===ig){for(var W=!1,K=!1,de=!1,fe=0;fe<c.data.length;++fe){var ye=c.data[fe];if(ye.type===Em)de=!0;else if(ye.type===_m)K=!0;else if(ye.type===Sm)W=!0;else if(ye.type===xm){W=!0;var Ee=ye.data;Ee>=1&&(K=!0),Ee>=2&&(de=!0)}else ye.type===sf&&(W=W||ye.data.thisDep,K=K||ye.data.contextDep,de=de||ye.data.propDep)}return new On(W,K,de,y)}else return new On(R===Sm,R===_m,R===Em,y)}}var Ng=new On(!1,!1,!1,function(){});function xS(c,y,R,X,ne,W,K,de,fe,ye,Ee,xe,Te,he,ve){var j=ye.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};R.ext_blend_minmax&&(Q.min=mS,Q.max=pS);var pe=R.angle_instanced_arrays,Me=R.webgl_draw_buffers,ce=R.oes_vertex_array_object,ke={dirty:!0,profile:ve.profile},Re={},Je=[],re={},te={};function ze(E){return E.replace(".","_")}function be(E,h,P){var F=ze(E);Je.push(E),Re[F]=ke[F]=!!P,re[F]=h}function me(E,h,P){var F=ze(E);Je.push(E),Array.isArray(P)?(ke[F]=P.slice(),Re[F]=P.slice()):ke[F]=Re[F]=P,te[F]=h}be(og,lS),be(ag,aS),me(lg,"blendColor",[0,0,0,0]),me(wm,"blendEquationSeparate",[Cg,Cg]),me(Tm,"blendFuncSeparate",[bg,Ag,bg,Ag]),be(sg,uS,!0),me(ug,"depthFunc",gS),me(cg,"depthRange",[0,1]),me(fg,"depthMask",!0),me(Am,Am,[!0,!0,!0,!0]),be(dg,oS),me(hg,"cullFace",ca),me(bm,bm,Bm),me(Cm,Cm,1),be(mg,fS),me(Lm,"polygonOffset",[0,0]),be(pg,dS),be(vg,hS),me(Rm,"sampleCoverage",[1,!1]),be(gg,sS),me(yg,"stencilMask",-1),me(Om,"stencilFunc",[vS,0,-1]),me(Pm,"stencilOpSeparate",[Js,fo,fo,fo]),me(Us,"stencilOpSeparate",[ca,fo,fo,fo]),be(xg,cS),me(uf,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),me(Ii,Ii,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ce={gl:c,context:Te,strings:y,next:Re,current:ke,draw:xe,elements:W,buffer:ne,shader:Ee,attributes:ye.state,vao:ye,uniforms:fe,framebuffer:de,extensions:R,timer:he,isBufferArgs:_f},Le={primTypes:si,compareFuncs:gl,blendFuncs:fi,blendEquations:Q,stencilOps:ho,glTypes:ro,orientationType:$m};v.optional(function(){Ce.isArrayLike=qt}),Me&&(Le.backBuffer=[ca],Le.drawBuffer=un(X.maxDrawbuffers,function(E){return E===0?[0]:un(E,function(h){return yS+h})}));var ct=0;function st(){var E=Z_(),h=E.link,P=E.global;E.id=ct++,E.batchId="0";var F=h(Ce),B=E.shared={props:"a0"};Object.keys(Ce).forEach(function(b){B[b]=P.def(F,".",b)}),v.optional(function(){E.CHECK=h(v),E.commandStr=v.guessCommand(),E.command=h(E.commandStr),E.assert=function(b,S,V){b("if(!(",S,"))",this.CHECK,".commandRaise(",h(V),",",this.command,");")},Le.invalidBlendCombinations=Rg});var k=E.next={},N=E.current={};Object.keys(te).forEach(function(b){Array.isArray(ke[b])&&(k[b]=P.def(B.next,".",b),N[b]=P.def(B.current,".",b))});var D=E.constants={};Object.keys(Le).forEach(function(b){D[b]=P.def(JSON.stringify(Le[b]))}),E.invoke=function(b,S){switch(S.type){case xm:var V=["this",B.context,B.props,E.batchId];return b.def(h(S.data),".call(",V.slice(0,Math.max(S.data.length+1,4)),")");case Em:return b.def(B.props,S.data);case _m:return b.def(B.context,S.data);case Sm:return b.def("this",S.data);case sf:return S.data.append(E,b),S.data.ref;case rg:return S.data.toString();case ig:return S.data.map(function($){return E.invoke(b,$)})}},E.attribCache={};var _={};return E.scopeAttrib=function(b){var S=y.id(b);if(S in _)return _[S];var V=ye.scope[S];V||(V=ye.scope[S]=new j);var $=_[S]=h(V);return $},E}function Oe(E){var h=E.static,P=E.dynamic,F;if(Vs in h){var B=!!h[Vs];F=xn(function(N,D){return B}),F.enable=B}else if(Vs in P){var k=P[Vs];F=lr(k,function(N,D){return N.invoke(D,k)})}return F}function Ie(E,h){var P=E.static,F=E.dynamic;if(aa in P){var B=P[aa];return B?(B=de.getFramebuffer(B),v.command(B,"invalid framebuffer object"),xn(function(N,D){var _=N.link(B),b=N.shared;D.set(b.framebuffer,".next",_);var S=b.context;return D.set(S,"."+ml,_+".width"),D.set(S,"."+pl,_+".height"),_})):xn(function(N,D){var _=N.shared;D.set(_.framebuffer,".next","null");var b=_.context;return D.set(b,"."+ml,b+"."+_g),D.set(b,"."+pl,b+"."+Sg),"null"})}else if(aa in F){var k=F[aa];return lr(k,function(N,D){var _=N.invoke(D,k),b=N.shared,S=b.framebuffer,V=D.def(S,".getFramebuffer(",_,")");v.optional(function(){N.assert(D,"!"+_+"||"+V,"invalid framebuffer object")}),D.set(S,".next",V);var $=b.context;return D.set($,"."+ml,V+"?"+V+".width:"+$+"."+_g),D.set($,"."+pl,V+"?"+V+".height:"+$+"."+Sg),V})}else return null}function ot(E,h,P){var F=E.static,B=E.dynamic;function k(_){if(_ in F){var b=F[_];v.commandType(b,"object","invalid "+_,P.commandStr);var S=!0,V=b.x|0,$=b.y|0,ee,ie;return"width"in b?(ee=b.width|0,v.command(ee>=0,"invalid "+_,P.commandStr)):S=!1,"height"in b?(ie=b.height|0,v.command(ie>=0,"invalid "+_,P.commandStr)):S=!1,new On(!S&&h&&h.thisDep,!S&&h&&h.contextDep,!S&&h&&h.propDep,function(Ze,$e){var se=Ze.shared.context,J=ee;"width"in b||(J=$e.def(se,".",ml,"-",V));var Ye=ie;return"height"in b||(Ye=$e.def(se,".",pl,"-",$)),[V,$,J,Ye]})}else if(_ in B){var Se=B[_],lt=lr(Se,function(Ze,$e){var se=Ze.invoke($e,Se);v.optional(function(){Ze.assert($e,se+"&&typeof "+se+'==="object"',"invalid "+_)});var J=Ze.shared.context,Ye=$e.def(se,".x|0"),Ve=$e.def(se,".y|0"),at=$e.def('"width" in ',se,"?",se,".width|0:","(",J,".",ml,"-",Ye,")"),Gt=$e.def('"height" in ',se,"?",se,".height|0:","(",J,".",pl,"-",Ve,")");return v.optional(function(){Ze.assert($e,at+">=0&&"+Gt+">=0","invalid "+_)}),[Ye,Ve,at,Gt]});return h&&(lt.thisDep=lt.thisDep||h.thisDep,lt.contextDep=lt.contextDep||h.contextDep,lt.propDep=lt.propDep||h.propDep),lt}else return h?new On(h.thisDep,h.contextDep,h.propDep,function(Ze,$e){var se=Ze.shared.context;return[0,0,$e.def(se,".",ml),$e.def(se,".",pl)]}):null}var N=k(Ii);if(N){var D=N;N=new On(N.thisDep,N.contextDep,N.propDep,function(_,b){var S=D.append(_,b),V=_.shared.context;return b.set(V,"."+J_,S[2]),b.set(V,"."+eS,S[3]),S})}return{viewport:N,scissor_box:k(uf)}}function ft(E,h){var P=E.static,F=typeof P[Ws]=="string"&&typeof P[Hs]=="string";if(F){if(Object.keys(h.dynamic).length>0)return null;var B=h.static,k=Object.keys(B);if(k.length>0&&typeof B[k[0]]=="number"){for(var N=[],D=0;D<k.length;++D)v(typeof B[k[D]]=="number","must specify all vertex attribute locations when using vaos"),N.push([B[k[D]]|0,k[D]]);return N}}return null}function wt(E,h,P){var F=E.static,B=E.dynamic;function k(S){if(S in F){var V=y.id(F[S]);v.optional(function(){Ee.shader(Og[S],V,v.guessCommand())});var $=xn(function(){return V});return $.id=V,$}else if(S in B){var ee=B[S];return lr(ee,function(ie,Se){var lt=ie.invoke(Se,ee),Ze=Se.def(ie.shared.strings,".id(",lt,")");return v.optional(function(){Se(ie.shared.shader,".shader(",Og[S],",",Ze,",",ie.command,");")}),Ze})}return null}var N=k(Ws),D=k(Hs),_=null,b;return mo(N)&&mo(D)?(_=Ee.program(D.id,N.id,null,P),b=xn(function(S,V){return S.link(_)})):b=new On(N&&N.thisDep||D&&D.thisDep,N&&N.contextDep||D&&D.contextDep,N&&N.propDep||D&&D.propDep,function(S,V){var $=S.shared.shader,ee;N?ee=N.append(S,V):ee=V.def($,".",Ws);var ie;D?ie=D.append(S,V):ie=V.def($,".",Hs);var Se=$+".program("+ie+","+ee;return v.optional(function(){Se+=","+S.command}),V.def(Se+")")}),{frag:N,vert:D,progVar:b,program:_}}function Jt(E,h){var P=E.static,F=E.dynamic,B={},k=!1;function N(){if(Xs in P){var $e=P[Xs];return $e!==null&&ye.getVAO($e)===null&&($e=ye.createVAO($e)),k=!0,B.vao=$e,xn(function(J){var Ye=ye.getVAO($e);return Ye?J.link(Ye):"null"})}else if(Xs in F){k=!0;var se=F[Xs];return lr(se,function(J,Ye){var Ve=J.invoke(Ye,se);return Ye.def(J.shared.vao+".getVAO("+Ve+")")})}return null}var D=N(),_=!1;function b(){if(la in P){var $e=P[la];if(B.elements=$e,_f($e)){var se=B.elements=W.create($e,!0);$e=W.getElements(se),_=!0}else $e&&($e=W.getElements($e),_=!0,v.command($e,"invalid elements",h.commandStr));var J=xn(function(Ve,at){if($e){var Gt=Ve.link($e);return Ve.ELEMENTS=Gt,Gt}return Ve.ELEMENTS=null,null});return J.value=$e,J}else if(la in F){_=!0;var Ye=F[la];return lr(Ye,function(Ve,at){var Gt=Ve.shared,zn=Gt.isBufferArgs,da=Gt.elements,Di=Ve.invoke(at,Ye),hi=at.def("null"),po=at.def(zn,"(",Di,")"),ha=Ve.cond(po).then(hi,"=",da,".createStream(",Di,");").else(hi,"=",da,".getElements(",Di,");");return v.optional(function(){Ve.assert(ha.else,"!"+Di+"||"+hi,"invalid elements")}),at.entry(ha),at.exit(Ve.cond(po).then(da,".destroyStream(",hi,");")),Ve.ELEMENTS=hi,hi})}else if(k)return new On(D.thisDep,D.contextDep,D.propDep,function(Ve,at){return at.def(Ve.shared.vao+".currentVAO?"+Ve.shared.elements+".getElements("+Ve.shared.vao+".currentVAO.elements):null")});return null}var S=b();function V(){if(sa in P){var $e=P[sa];return B.primitive=$e,v.commandParameter($e,si,"invalid primitve",h.commandStr),xn(function(J,Ye){return si[$e]})}else if(sa in F){var se=F[sa];return lr(se,function(J,Ye){var Ve=J.constants.primTypes,at=J.invoke(Ye,se);return v.optional(function(){J.assert(Ye,at+" in "+Ve,"invalid primitive, must be one of "+Object.keys(si))}),Ye.def(Ve,"[",at,"]")})}else{if(_)return mo(S)?S.value?xn(function(J,Ye){return Ye.def(J.ELEMENTS,".primType")}):xn(function(){return jm}):new On(S.thisDep,S.contextDep,S.propDep,function(J,Ye){var Ve=J.ELEMENTS;return Ye.def(Ve,"?",Ve,".primType:",jm)});if(k)return new On(D.thisDep,D.contextDep,D.propDep,function(J,Ye){return Ye.def(J.shared.vao+".currentVAO?"+J.shared.vao+".currentVAO.primitive:"+jm)})}return null}function $($e,se){if($e in P){var J=P[$e]|0;return se?B.offset=J:B.instances=J,v.command(!se||J>=0,"invalid "+$e,h.commandStr),xn(function(Ve,at){return se&&(Ve.OFFSET=J),J})}else if($e in F){var Ye=F[$e];return lr(Ye,function(Ve,at){var Gt=Ve.invoke(at,Ye);return se&&(Ve.OFFSET=Gt,v.optional(function(){Ve.assert(at,Gt+">=0","invalid "+$e)})),Gt})}else if(se){if(_)return xn(function(Ve,at){return Ve.OFFSET=0,0});if(k)return new On(D.thisDep,D.contextDep,D.propDep,function(Ve,at){return at.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.offset:0")})}else if(k)return new On(D.thisDep,D.contextDep,D.propDep,function(Ve,at){return at.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.instances:-1")});return null}var ee=$(cf,!0);function ie(){if(ua in P){var $e=P[ua]|0;return B.count=$e,v.command(typeof $e=="number"&&$e>=0,"invalid vertex count",h.commandStr),xn(function(){return $e})}else if(ua in F){var se=F[ua];return lr(se,function(at,Gt){var zn=at.invoke(Gt,se);return v.optional(function(){at.assert(Gt,"typeof "+zn+'==="number"&&'+zn+">=0&&"+zn+"===("+zn+"|0)","invalid vertex count")}),zn})}else if(_)if(mo(S)){if(S)return ee?new On(ee.thisDep,ee.contextDep,ee.propDep,function(at,Gt){var zn=Gt.def(at.ELEMENTS,".vertCount-",at.OFFSET);return v.optional(function(){at.assert(Gt,zn+">=0","invalid vertex offset/element buffer too small")}),zn}):xn(function(at,Gt){return Gt.def(at.ELEMENTS,".vertCount")});var J=xn(function(){return-1});return v.optional(function(){J.MISSING=!0}),J}else{var Ye=new On(S.thisDep||ee.thisDep,S.contextDep||ee.contextDep,S.propDep||ee.propDep,function(at,Gt){var zn=at.ELEMENTS;return at.OFFSET?Gt.def(zn,"?",zn,".vertCount-",at.OFFSET,":-1"):Gt.def(zn,"?",zn,".vertCount:-1")});return v.optional(function(){Ye.DYNAMIC=!0}),Ye}else if(k){var Ve=new On(D.thisDep,D.contextDep,D.propDep,function(at,Gt){return Gt.def(at.shared.vao,".currentVAO?",at.shared.vao,".currentVAO.count:-1")});return Ve}return null}var Se=V(),lt=ie(),Ze=$(ff,!1);return{elements:S,primitive:Se,count:lt,instances:Ze,offset:ee,vao:D,vaoActive:k,elementsActive:_,static:B}}function nn(E,h){var P=E.static,F=E.dynamic,B={};return Je.forEach(function(k){var N=ze(k);function D(_,b){if(k in P){var S=_(P[k]);B[N]=xn(function(){return S})}else if(k in F){var V=F[k];B[N]=lr(V,function($,ee){return b($,ee,$.invoke(ee,V))})}}switch(k){case dg:case ag:case og:case gg:case sg:case xg:case mg:case pg:case vg:case fg:return D(function(_){return v.commandType(_,"boolean",k,h.commandStr),_},function(_,b,S){return v.optional(function(){_.assert(b,"typeof "+S+'==="boolean"',"invalid flag "+k,_.commandStr)}),S});case ug:return D(function(_){return v.commandParameter(_,gl,"invalid "+k,h.commandStr),gl[_]},function(_,b,S){var V=_.constants.compareFuncs;return v.optional(function(){_.assert(b,S+" in "+V,"invalid "+k+", must be one of "+Object.keys(gl))}),b.def(V,"[",S,"]")});case cg:return D(function(_){return v.command(qt(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"&&_[0]<=_[1],"depth range is 2d array",h.commandStr),_},function(_,b,S){v.optional(function(){_.assert(b,_.shared.isArrayLike+"("+S+")&&"+S+".length===2&&typeof "+S+'[0]==="number"&&typeof '+S+'[1]==="number"&&'+S+"[0]<="+S+"[1]","depth range must be a 2d array")});var V=b.def("+",S,"[0]"),$=b.def("+",S,"[1]");return[V,$]});case Tm:return D(function(_){v.commandType(_,"object","blend.func",h.commandStr);var b="srcRGB"in _?_.srcRGB:_.src,S="srcAlpha"in _?_.srcAlpha:_.src,V="dstRGB"in _?_.dstRGB:_.dst,$="dstAlpha"in _?_.dstAlpha:_.dst;return v.commandParameter(b,fi,N+".srcRGB",h.commandStr),v.commandParameter(S,fi,N+".srcAlpha",h.commandStr),v.commandParameter(V,fi,N+".dstRGB",h.commandStr),v.commandParameter($,fi,N+".dstAlpha",h.commandStr),v.command(Rg.indexOf(b+", "+V)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+V+")",h.commandStr),[fi[b],fi[V],fi[S],fi[$]]},function(_,b,S){var V=_.constants.blendFuncs;v.optional(function(){_.assert(b,S+"&&typeof "+S+'==="object"',"invalid blend func, must be an object")});function $(se,J){var Ye=b.def('"',se,J,'" in ',S,"?",S,".",se,J,":",S,".",se);return v.optional(function(){_.assert(b,Ye+" in "+V,"invalid "+k+"."+se+J+", must be one of "+Object.keys(fi))}),Ye}var ee=$("src","RGB"),ie=$("dst","RGB");v.optional(function(){var se=_.constants.invalidBlendCombinations;_.assert(b,se+".indexOf("+ee+'+", "+'+ie+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Se=b.def(V,"[",ee,"]"),lt=b.def(V,"[",$("src","Alpha"),"]"),Ze=b.def(V,"[",ie,"]"),$e=b.def(V,"[",$("dst","Alpha"),"]");return[Se,Ze,lt,$e]});case wm:return D(function(_){if(typeof _=="string")return v.commandParameter(_,Q,"invalid "+k,h.commandStr),[Q[_],Q[_]];if(typeof _=="object")return v.commandParameter(_.rgb,Q,k+".rgb",h.commandStr),v.commandParameter(_.alpha,Q,k+".alpha",h.commandStr),[Q[_.rgb],Q[_.alpha]];v.commandRaise("invalid blend.equation",h.commandStr)},function(_,b,S){var V=_.constants.blendEquations,$=b.def(),ee=b.def(),ie=_.cond("typeof ",S,'==="string"');return v.optional(function(){function Se(lt,Ze,$e){_.assert(lt,$e+" in "+V,"invalid "+Ze+", must be one of "+Object.keys(Q))}Se(ie.then,k,S),_.assert(ie.else,S+"&&typeof "+S+'==="object"',"invalid "+k),Se(ie.else,k+".rgb",S+".rgb"),Se(ie.else,k+".alpha",S+".alpha")}),ie.then($,"=",ee,"=",V,"[",S,"];"),ie.else($,"=",V,"[",S,".rgb];",ee,"=",V,"[",S,".alpha];"),b(ie),[$,ee]});case lg:return D(function(_){return v.command(qt(_)&&_.length===4,"blend.color must be a 4d array",h.commandStr),un(4,function(b){return+_[b]})},function(_,b,S){return v.optional(function(){_.assert(b,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","blend.color must be a 4d array")}),un(4,function(V){return b.def("+",S,"[",V,"]")})});case yg:return D(function(_){return v.commandType(_,"number",N,h.commandStr),_|0},function(_,b,S){return v.optional(function(){_.assert(b,"typeof "+S+'==="number"',"invalid stencil.mask")}),b.def(S,"|0")});case Om:return D(function(_){v.commandType(_,"object",N,h.commandStr);var b=_.cmp||"keep",S=_.ref||0,V="mask"in _?_.mask:-1;return v.commandParameter(b,gl,k+".cmp",h.commandStr),v.commandType(S,"number",k+".ref",h.commandStr),v.commandType(V,"number",k+".mask",h.commandStr),[gl[b],S,V]},function(_,b,S){var V=_.constants.compareFuncs;v.optional(function(){function Se(){_.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Se(S+"&&typeof ",S,'==="object"'),Se('!("cmp" in ',S,")||(",S,".cmp in ",V,")")});var $=b.def('"cmp" in ',S,"?",V,"[",S,".cmp]",":",fo),ee=b.def(S,".ref|0"),ie=b.def('"mask" in ',S,"?",S,".mask|0:-1");return[$,ee,ie]});case Pm:case Us:return D(function(_){v.commandType(_,"object",N,h.commandStr);var b=_.fail||"keep",S=_.zfail||"keep",V=_.zpass||"keep";return v.commandParameter(b,ho,k+".fail",h.commandStr),v.commandParameter(S,ho,k+".zfail",h.commandStr),v.commandParameter(V,ho,k+".zpass",h.commandStr),[k===Us?ca:Js,ho[b],ho[S],ho[V]]},function(_,b,S){var V=_.constants.stencilOps;v.optional(function(){_.assert(b,S+"&&typeof "+S+'==="object"',"invalid "+k)});function $(ee){return v.optional(function(){_.assert(b,'!("'+ee+'" in '+S+")||("+S+"."+ee+" in "+V+")","invalid "+k+"."+ee+", must be one of "+Object.keys(ho))}),b.def('"',ee,'" in ',S,"?",V,"[",S,".",ee,"]:",fo)}return[k===Us?ca:Js,$("fail"),$("zfail"),$("zpass")]});case Lm:return D(function(_){v.commandType(_,"object",N,h.commandStr);var b=_.factor|0,S=_.units|0;return v.commandType(b,"number",N+".factor",h.commandStr),v.commandType(S,"number",N+".units",h.commandStr),[b,S]},function(_,b,S){v.optional(function(){_.assert(b,S+"&&typeof "+S+'==="object"',"invalid "+k)});var V=b.def(S,".factor|0"),$=b.def(S,".units|0");return[V,$]});case hg:return D(function(_){var b=0;return _==="front"?b=Js:_==="back"&&(b=ca),v.command(!!b,N,h.commandStr),b},function(_,b,S){return v.optional(function(){_.assert(b,S+'==="front"||'+S+'==="back"',"invalid cull.face")}),b.def(S,'==="front"?',Js,":",ca)});case Cm:return D(function(_){return v.command(typeof _=="number"&&_>=X.lineWidthDims[0]&&_<=X.lineWidthDims[1],"invalid line width, must be a positive number between "+X.lineWidthDims[0]+" and "+X.lineWidthDims[1],h.commandStr),_},function(_,b,S){return v.optional(function(){_.assert(b,"typeof "+S+'==="number"&&'+S+">="+X.lineWidthDims[0]+"&&"+S+"<="+X.lineWidthDims[1],"invalid line width")}),S});case bm:return D(function(_){return v.commandParameter(_,$m,N,h.commandStr),$m[_]},function(_,b,S){return v.optional(function(){_.assert(b,S+'==="cw"||'+S+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),b.def(S+'==="cw"?'+Tg+":"+Bm)});case Am:return D(function(_){return v.command(qt(_)&&_.length===4,"color.mask must be length 4 array",h.commandStr),_.map(function(b){return!!b})},function(_,b,S){return v.optional(function(){_.assert(b,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","invalid color.mask")}),un(4,function(V){return"!!"+S+"["+V+"]"})});case Rm:return D(function(_){v.command(typeof _=="object"&&_,N,h.commandStr);var b="value"in _?_.value:1,S=!!_.invert;return v.command(typeof b=="number"&&b>=0&&b<=1,"sample.coverage.value must be a number between 0 and 1",h.commandStr),[b,S]},function(_,b,S){v.optional(function(){_.assert(b,S+"&&typeof "+S+'==="object"',"invalid sample.coverage")});var V=b.def('"value" in ',S,"?+",S,".value:1"),$=b.def("!!",S,".invert");return[V,$]})}}),B}function bt(E,h){var P=E.static,F=E.dynamic,B={};return Object.keys(P).forEach(function(k){var N=P[k],D;if(typeof N=="number"||typeof N=="boolean")D=xn(function(){return N});else if(typeof N=="function"){var _=N._reglType;_==="texture2d"||_==="textureCube"?D=xn(function(b){return b.link(N)}):_==="framebuffer"||_==="framebufferCube"?(v.command(N.color.length>0,'missing color attachment for framebuffer sent to uniform "'+k+'"',h.commandStr),D=xn(function(b){return b.link(N.color[0])})):v.commandRaise('invalid data for uniform "'+k+'"',h.commandStr)}else qt(N)?D=xn(function(b){var S=b.global.def("[",un(N.length,function(V){return v.command(typeof N[V]=="number"||typeof N[V]=="boolean","invalid uniform "+k,b.commandStr),N[V]}),"]");return S}):v.commandRaise('invalid or missing data for uniform "'+k+'"',h.commandStr);D.value=N,B[k]=D}),Object.keys(F).forEach(function(k){var N=F[k];B[k]=lr(N,function(D,_){return D.invoke(_,N)})}),B}function Tn(E,h){var P=E.static,F=E.dynamic,B={};return Object.keys(P).forEach(function(k){var N=P[k],D=y.id(k),_=new j;if(_f(N))_.state=hl,_.buffer=ne.getBuffer(ne.create(N,vl,!1,!0)),_.type=0;else{var b=ne.getBuffer(N);if(b)_.state=hl,_.buffer=b,_.type=0;else if(v.command(typeof N=="object"&&N,"invalid data for attribute "+k,h.commandStr),"constant"in N){var S=N.constant;_.buffer="null",_.state=ym,typeof S=="number"?_.x=S:(v.command(qt(S)&&S.length>0&&S.length<=4,"invalid constant for attribute "+k,h.commandStr),dl.forEach(function(Ze,$e){$e<S.length&&(_[Ze]=S[$e])}))}else{_f(N.buffer)?b=ne.getBuffer(ne.create(N.buffer,vl,!1,!0)):b=ne.getBuffer(N.buffer),v.command(!!b,'missing buffer for attribute "'+k+'"',h.commandStr);var V=N.offset|0;v.command(V>=0,'invalid offset for attribute "'+k+'"',h.commandStr);var $=N.stride|0;v.command($>=0&&$<256,'invalid stride for attribute "'+k+'", must be integer betweeen [0, 255]',h.commandStr);var ee=N.size|0;v.command(!("size"in N)||ee>0&&ee<=4,'invalid size for attribute "'+k+'", must be 1,2,3,4',h.commandStr);var ie=!!N.normalized,Se=0;"type"in N&&(v.commandParameter(N.type,ro,"invalid type for attribute "+k,h.commandStr),Se=ro[N.type]);var lt=N.divisor|0;v.optional(function(){"divisor"in N&&(v.command(lt===0||pe,'cannot specify divisor for attribute "'+k+'", instancing not supported',h.commandStr),v.command(lt>=0,'invalid divisor for attribute "'+k+'"',h.commandStr));var Ze=h.commandStr,$e=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(N).forEach(function(se){v.command($e.indexOf(se)>=0,'unknown parameter "'+se+'" for attribute pointer "'+k+'" (valid parameters are '+$e+")",Ze)})}),_.buffer=b,_.state=hl,_.size=ee,_.normalized=ie,_.type=Se||b.dtype,_.offset=V,_.stride=$,_.divisor=lt}}B[k]=xn(function(Ze,$e){var se=Ze.attribCache;if(D in se)return se[D];var J={isStream:!1};return Object.keys(_).forEach(function(Ye){J[Ye]=_[Ye]}),_.buffer&&(J.buffer=Ze.link(_.buffer),J.type=J.type||J.buffer+".dtype"),se[D]=J,J})}),Object.keys(F).forEach(function(k){var N=F[k];function D(_,b){var S=_.invoke(b,N),V=_.shared,$=_.constants,ee=V.isBufferArgs,ie=V.buffer;v.optional(function(){_.assert(b,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+ee+"("+S+")||"+ie+".getBuffer("+S+")||"+ie+".getBuffer("+S+".buffer)||"+ee+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+V.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+k+'"')});var Se={isStream:b.def(!1)},lt=new j;lt.state=hl,Object.keys(lt).forEach(function(J){Se[J]=b.def(""+lt[J])});var Ze=Se.buffer,$e=Se.type;b("if(",ee,"(",S,")){",Se.isStream,"=true;",Ze,"=",ie,".createStream(",vl,",",S,");",$e,"=",Ze,".dtype;","}else{",Ze,"=",ie,".getBuffer(",S,");","if(",Ze,"){",$e,"=",Ze,".dtype;",'}else if("constant" in ',S,"){",Se.state,"=",ym,";","if(typeof "+S+'.constant === "number"){',Se[dl[0]],"=",S,".constant;",dl.slice(1).map(function(J){return Se[J]}).join("="),"=0;","}else{",dl.map(function(J,Ye){return Se[J]+"="+S+".constant.length>"+Ye+"?"+S+".constant["+Ye+"]:0;"}).join(""),"}}else{","if(",ee,"(",S,".buffer)){",Ze,"=",ie,".createStream(",vl,",",S,".buffer);","}else{",Ze,"=",ie,".getBuffer(",S,".buffer);","}",$e,'="type" in ',S,"?",$.glTypes,"[",S,".type]:",Ze,".dtype;",Se.normalized,"=!!",S,".normalized;");function se(J){b(Se[J],"=",S,".",J,"|0;")}return se("size"),se("offset"),se("stride"),se("divisor"),b("}}"),b.exit("if(",Se.isStream,"){",ie,".destroyStream(",Ze,");","}"),Se}B[k]=lr(N,D)}),B}function Zt(E){var h=E.static,P=E.dynamic,F={};return Object.keys(h).forEach(function(B){var k=h[B];F[B]=xn(function(N,D){return typeof k=="number"||typeof k=="boolean"?""+k:N.link(k)})}),Object.keys(P).forEach(function(B){var k=P[B];F[B]=lr(k,function(N,D){return N.invoke(D,k)})}),F}function En(E,h,P,F,B){var k=E.static,N=E.dynamic;v.optional(function(){var se=[aa,Hs,Ws,la,sa,cf,ua,ff,Vs,Xs].concat(Je);function J(Ye){Object.keys(Ye).forEach(function(Ve){v.command(se.indexOf(Ve)>=0,'unknown parameter "'+Ve+'"',B.commandStr)})}J(k),J(N)});var D=ft(E,h),_=Ie(E),b=ot(E,_,B),S=Jt(E,B),V=nn(E,B),$=wt(E,B,D);function ee(se){var J=b[se];J&&(V[se]=J)}ee(Ii),ee(ze(uf));var ie=Object.keys(V).length>0,Se={framebuffer:_,draw:S,shader:$,state:V,dirty:ie,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Se.profile=Oe(E),Se.uniforms=bt(P,B),Se.drawVAO=Se.scopeVAO=S.vao,!Se.drawVAO&&$.program&&!D&&R.angle_instanced_arrays&&S.static.elements){var lt=!0,Ze=$.program.attributes.map(function(se){var J=h.static[se];return lt=lt&&!!J,J});if(lt&&Ze.length>0){var $e=ye.getVAO(ye.createVAO({attributes:Ze,elements:S.static.elements}));Se.drawVAO=new On(null,null,null,function(se,J){return se.link($e)}),Se.useVAO=!0}}return D?Se.useVAO=!0:Se.attributes=Tn(h,B),Se.context=Zt(F),Se}function An(E,h,P){var F=E.shared,B=F.context,k=E.scope();Object.keys(P).forEach(function(N){h.save(B,"."+N);var D=P[N],_=D.append(E,h);Array.isArray(_)?k(B,".",N,"=[",_.join(),"];"):k(B,".",N,"=",_,";")}),h(k)}function bn(E,h,P,F){var B=E.shared,k=B.gl,N=B.framebuffer,D;Me&&(D=h.def(B.extensions,".webgl_draw_buffers"));var _=E.constants,b=_.drawBuffer,S=_.backBuffer,V;P?V=P.append(E,h):V=h.def(N,".next"),F||h("if(",V,"!==",N,".cur){"),h("if(",V,"){",k,".bindFramebuffer(",Lg,",",V,".framebuffer);"),Me&&h(D,".drawBuffersWEBGL(",b,"[",V,".colorAttachments.length]);"),h("}else{",k,".bindFramebuffer(",Lg,",null);"),Me&&h(D,".drawBuffersWEBGL(",S,");"),h("}",N,".cur=",V,";"),F||h("}")}function Dn(E,h,P){var F=E.shared,B=F.gl,k=E.current,N=E.next,D=F.current,_=F.next,b=E.cond(D,".dirty");Je.forEach(function(S){var V=ze(S);if(!(V in P.state)){var $,ee;if(V in N){$=N[V],ee=k[V];var ie=un(ke[V].length,function(lt){return b.def($,"[",lt,"]")});b(E.cond(ie.map(function(lt,Ze){return lt+"!=="+ee+"["+Ze+"]"}).join("||")).then(B,".",te[V],"(",ie,");",ie.map(function(lt,Ze){return ee+"["+Ze+"]="+lt}).join(";"),";"))}else{$=b.def(_,".",V);var Se=E.cond($,"!==",D,".",V);b(Se),V in re?Se(E.cond($).then(B,".enable(",re[V],");").else(B,".disable(",re[V],");"),D,".",V,"=",$,";"):Se(B,".",te[V],"(",$,");",D,".",V,"=",$,";")}}}),Object.keys(P.state).length===0&&b(D,".dirty=false;"),h(b)}function $n(E,h,P,F){var B=E.shared,k=E.current,N=B.current,D=B.gl;Pg(Object.keys(P)).forEach(function(_){var b=P[_];if(!(F&&!F(b))){var S=b.append(E,h);if(re[_]){var V=re[_];mo(b)?S?h(D,".enable(",V,");"):h(D,".disable(",V,");"):h(E.cond(S).then(D,".enable(",V,");").else(D,".disable(",V,");")),h(N,".",_,"=",S,";")}else if(qt(S)){var $=k[_];h(D,".",te[_],"(",S,");",S.map(function(ee,ie){return $+"["+ie+"]="+ee}).join(";"),";")}else h(D,".",te[_],"(",S,");",N,".",_,"=",S,";")}})}function cn(E,h){pe&&(E.instancing=h.def(E.shared.extensions,".angle_instanced_arrays"))}function mt(E,h,P,F,B){var k=E.shared,N=E.stats,D=k.current,_=k.timer,b=P.profile;function S(){return typeof performance>"u"?"Date.now()":"performance.now()"}var V,$;function ee(se){V=h.def(),se(V,"=",S(),";"),typeof B=="string"?se(N,".count+=",B,";"):se(N,".count++;"),he&&(F?($=h.def(),se($,"=",_,".getNumPendingQueries();")):se(_,".beginQuery(",N,");"))}function ie(se){se(N,".cpuTime+=",S(),"-",V,";"),he&&(F?se(_,".pushScopeStats(",$,",",_,".getNumPendingQueries(),",N,");"):se(_,".endQuery();"))}function Se(se){var J=h.def(D,".profile");h(D,".profile=",se,";"),h.exit(D,".profile=",J,";")}var lt;if(b){if(mo(b)){b.enable?(ee(h),ie(h.exit),Se("true")):Se("false");return}lt=b.append(E,h),Se(lt)}else lt=h.def(D,".profile");var Ze=E.block();ee(Ze),h("if(",lt,"){",Ze,"}");var $e=E.block();ie($e),h.exit("if(",lt,"){",$e,"}")}function Gn(E,h,P,F,B){var k=E.shared;function N(_){switch(_){case df:case pf:case yf:return 2;case hf:case vf:case xf:return 3;case mf:case gf:case Ef:return 4;default:return 1}}function D(_,b,S){var V=k.gl,$=h.def(_,".location"),ee=h.def(k.attributes,"[",$,"]"),ie=S.state,Se=S.buffer,lt=[S.x,S.y,S.z,S.w],Ze=["buffer","normalized","offset","stride"];function $e(){h("if(!",ee,".buffer){",V,".enableVertexAttribArray(",$,");}");var J=S.type,Ye;if(S.size?Ye=h.def(S.size,"||",b):Ye=b,h("if(",ee,".type!==",J,"||",ee,".size!==",Ye,"||",Ze.map(function(at){return ee+"."+at+"!=="+S[at]}).join("||"),"){",V,".bindBuffer(",vl,",",Se,".buffer);",V,".vertexAttribPointer(",[$,Ye,J,S.normalized,S.stride,S.offset],");",ee,".type=",J,";",ee,".size=",Ye,";",Ze.map(function(at){return ee+"."+at+"="+S[at]+";"}).join(""),"}"),pe){var Ve=S.divisor;h("if(",ee,".divisor!==",Ve,"){",E.instancing,".vertexAttribDivisorANGLE(",[$,Ve],");",ee,".divisor=",Ve,";}")}}function se(){h("if(",ee,".buffer){",V,".disableVertexAttribArray(",$,");",ee,".buffer=null;","}if(",dl.map(function(J,Ye){return ee+"."+J+"!=="+lt[Ye]}).join("||"),"){",V,".vertexAttrib4f(",$,",",lt,");",dl.map(function(J,Ye){return ee+"."+J+"="+lt[Ye]+";"}).join(""),"}")}ie===hl?$e():ie===ym?se():(h("if(",ie,"===",hl,"){"),$e(),h("}else{"),se(),h("}"))}F.forEach(function(_){var b=_.name,S=P.attributes[b],V;if(S){if(!B(S))return;V=S.append(E,h)}else{if(!B(Ng))return;var $=E.scopeAttrib(b);v.optional(function(){E.assert(h,$+".state","missing attribute "+b)}),V={},Object.keys(new j).forEach(function(ee){V[ee]=h.def($,".",ee)})}D(E.link(_),N(_.info.type),V)})}function Bt(E,h,P,F,B,k){for(var N=E.shared,D=N.gl,_={},b,S=0;S<F.length;++S){var V=F[S],$=V.name,ee=V.info.type,ie=V.info.size,Se=P.uniforms[$];if(ie>1){if(!Se)continue;var lt=$.replace("[0]","");if(_[lt])continue;_[lt]=1}var Ze=E.link(V),$e=Ze+".location",se;if(Se){if(!B(Se))continue;if(mo(Se)){var J=Se.value;if(v.command(J!==null&&typeof J<"u",'missing uniform "'+$+'"',E.commandStr),ee===qs||ee===Zs){v.command(typeof J=="function"&&(ee===qs&&(J._reglType==="texture2d"||J._reglType==="framebuffer")||ee===Zs&&(J._reglType==="textureCube"||J._reglType==="framebufferCube")),"invalid texture for uniform "+$,E.commandStr);var Ye=E.link(J._texture||J.color[0]._texture);h(D,".uniform1i(",$e,",",Ye+".bind());"),h.exit(Ye,".unbind();")}else if(ee===Ys||ee===Qs||ee===Ks){v.optional(function(){v.command(qt(J),"invalid matrix for uniform "+$,E.commandStr),v.command(ee===Ys&&J.length===4||ee===Qs&&J.length===9||ee===Ks&&J.length===16,"invalid length for matrix uniform "+$,E.commandStr)});var Ve=E.global.def("new Float32Array(["+Array.prototype.slice.call(J)+"])"),at=2;ee===Qs?at=3:ee===Ks&&(at=4),h(D,".uniformMatrix",at,"fv(",$e,",false,",Ve,");")}else{switch(ee){case Dm:ie===1?v.commandType(J,"number","uniform "+$,E.commandStr):v.command(qt(J)&&J.length===ie,"uniform "+$,E.commandStr),b="1f";break;case df:v.command(qt(J)&&J.length&&J.length%2===0&&J.length<=ie*2,"uniform "+$,E.commandStr),b="2f";break;case hf:v.command(qt(J)&&J.length&&J.length%3===0&&J.length<=ie*3,"uniform "+$,E.commandStr),b="3f";break;case mf:v.command(qt(J)&&J.length&&J.length%4===0&&J.length<=ie*4,"uniform "+$,E.commandStr),b="4f";break;case Fm:ie===1?v.commandType(J,"boolean","uniform "+$,E.commandStr):v.command(qt(J)&&J.length===ie,"uniform "+$,E.commandStr),b="1i";break;case Mm:ie===1?v.commandType(J,"number","uniform "+$,E.commandStr):v.command(qt(J)&&J.length===ie,"uniform "+$,E.commandStr),b="1i";break;case yf:v.command(qt(J)&&J.length&&J.length%2===0&&J.length<=ie*2,"uniform "+$,E.commandStr),b="2i";break;case pf:v.command(qt(J)&&J.length&&J.length%2===0&&J.length<=ie*2,"uniform "+$,E.commandStr),b="2i";break;case xf:v.command(qt(J)&&J.length&&J.length%3===0&&J.length<=ie*3,"uniform "+$,E.commandStr),b="3i";break;case vf:v.command(qt(J)&&J.length&&J.length%3===0&&J.length<=ie*3,"uniform "+$,E.commandStr),b="3i";break;case Ef:v.command(qt(J)&&J.length&&J.length%4===0&&J.length<=ie*4,"uniform "+$,E.commandStr),b="4i";break;case gf:v.command(qt(J)&&J.length&&J.length%4===0&&J.length<=ie*4,"uniform "+$,E.commandStr),b="4i";break}ie>1?(b+="v",J=E.global.def("["+Array.prototype.slice.call(J)+"]")):J=qt(J)?Array.prototype.slice.call(J):J,h(D,".uniform",b,"(",$e,",",J,");")}continue}else se=Se.append(E,h)}else{if(!B(Ng))continue;se=h.def(N.uniforms,"[",y.id($),"]")}ee===qs?(v(!Array.isArray(se),"must specify a scalar prop for textures"),h("if(",se,"&&",se,'._reglType==="framebuffer"){',se,"=",se,".color[0];","}")):ee===Zs&&(v(!Array.isArray(se),"must specify a scalar prop for cube maps"),h("if(",se,"&&",se,'._reglType==="framebufferCube"){',se,"=",se,".color[0];","}")),v.optional(function(){function Sr(sr,Sf){E.assert(h,sr,'bad data or missing for uniform "'+$+'".  '+Sf)}function ma(sr,Sf){Sf===1&&v(!Array.isArray(se),"must not specify an array type for uniform"),Sr("Array.isArray("+se+") && typeof "+se+'[0]===" '+sr+'" || typeof '+se+'==="'+sr+'"',"invalid type, expected "+sr)}function kr(sr,Sf,wf){Array.isArray(se)?v(se.length&&se.length%sr===0&&se.length<=sr*wf,"must have length of "+(wf===1?"":"n * ")+sr):Sr(N.isArrayLike+"("+se+")&&"+se+".length && "+se+".length % "+sr+" === 0 && "+se+".length<="+sr*wf,"invalid vector, should have length of "+(wf===1?"":"n * ")+sr,E.commandStr)}function Bg(sr){v(!Array.isArray(se),"must not specify a value type"),Sr("typeof "+se+'==="function"&&'+se+'._reglType==="texture'+(sr===wg?"2d":"Cube")+'"',"invalid texture type",E.commandStr)}switch(ee){case Mm:ma("number",ie);break;case pf:kr(2,"number",ie);break;case vf:kr(3,"number",ie);break;case gf:kr(4,"number",ie);break;case Dm:ma("number",ie);break;case df:kr(2,"number",ie);break;case hf:kr(3,"number",ie);break;case mf:kr(4,"number",ie);break;case Fm:ma("boolean",ie);break;case yf:kr(2,"boolean",ie);break;case xf:kr(3,"boolean",ie);break;case Ef:kr(4,"boolean",ie);break;case Ys:kr(4,"number",ie);break;case Qs:kr(9,"number",ie);break;case Ks:kr(16,"number",ie);break;case qs:Bg(wg);break;case Zs:Bg(iS);break}});var Gt=1;switch(ee){case qs:case Zs:var zn=h.def(se,"._texture");h(D,".uniform1i(",$e,",",zn,".bind());"),h.exit(zn,".unbind();");continue;case Mm:case Fm:b="1i";break;case pf:case yf:b="2i",Gt=2;break;case vf:case xf:b="3i",Gt=3;break;case gf:case Ef:b="4i",Gt=4;break;case Dm:b="1f";break;case df:b="2f",Gt=2;break;case hf:b="3f",Gt=3;break;case mf:b="4f",Gt=4;break;case Ys:b="Matrix2fv";break;case Qs:b="Matrix3fv";break;case Ks:b="Matrix4fv";break}if(b.indexOf("Matrix")===-1&&ie>1&&(b+="v",Gt=1),b.charAt(0)==="M"){h(D,".uniform",b,"(",$e,",");var da=Math.pow(ee-Ys+2,2),Di=E.global.def("new Float32Array(",da,")");Array.isArray(se)?h("false,(",un(da,function(Sr){return Di+"["+Sr+"]="+se[Sr]}),",",Di,")"):h("false,(Array.isArray(",se,")||",se," instanceof Float32Array)?",se,":(",un(da,function(Sr){return Di+"["+Sr+"]="+se+"["+Sr+"]"}),",",Di,")"),h(");")}else if(Gt>1){for(var hi=[],po=[],ha=0;ha<Gt;++ha)Array.isArray(se)?po.push(se[ha]):po.push(h.def(se+"["+ha+"]")),k&&hi.push(h.def());k&&h("if(!",E.batchId,"||",hi.map(function(Sr,ma){return Sr+"!=="+po[ma]}).join("||"),"){",hi.map(function(Sr,ma){return Sr+"="+po[ma]+";"}).join("")),h(D,".uniform",b,"(",$e,",",po.join(","),");"),k&&h("}")}else{if(v(!Array.isArray(se),"uniform value must not be an array"),k){var jg=h.def();h("if(!",E.batchId,"||",jg,"!==",se,"){",jg,"=",se,";")}h(D,".uniform",b,"(",$e,",",se,");"),k&&h("}")}}}function rt(E,h,P,F){var B=E.shared,k=B.gl,N=B.draw,D=F.draw;function _(){var Ye=D.elements,Ve,at=h;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(at=P),Ve=Ye.append(E,at),D.elementsActive&&at("if("+Ve+")"+k+".bindBuffer("+Im+","+Ve+".buffer.buffer);")):(Ve=at.def(),at(Ve,"=",N,".",la,";","if(",Ve,"){",k,".bindBuffer(",Im,",",Ve,".buffer.buffer);}","else if(",B.vao,".currentVAO){",Ve,"=",E.shared.elements+".getElements("+B.vao,".currentVAO.elements);",ce?"":"if("+Ve+")"+k+".bindBuffer("+Im+","+Ve+".buffer.buffer);","}")),Ve}function b(){var Ye=D.count,Ve,at=h;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(at=P),Ve=Ye.append(E,at),v.optional(function(){Ye.MISSING&&E.assert(h,"false","missing vertex count"),Ye.DYNAMIC&&E.assert(at,Ve+">=0","missing vertex count")})):(Ve=at.def(N,".",ua),v.optional(function(){E.assert(at,Ve+">=0","missing vertex count")})),Ve}var S=_();function V(Ye){var Ve=D[Ye];return Ve?Ve.contextDep&&F.contextDynamic||Ve.propDep?Ve.append(E,P):Ve.append(E,h):h.def(N,".",Ye)}var $=V(sa),ee=V(cf),ie=b();if(typeof ie=="number"){if(ie===0)return}else P("if(",ie,"){"),P.exit("}");var Se,lt;pe&&(Se=V(ff),lt=E.instancing);var Ze=S+".type",$e=D.elements&&mo(D.elements)&&!D.vaoActive;function se(){function Ye(){P(lt,".drawElementsInstancedANGLE(",[$,ie,Ze,ee+"<<(("+Ze+"-"+ng+")>>1)",Se],");")}function Ve(){P(lt,".drawArraysInstancedANGLE(",[$,ee,ie,Se],");")}S&&S!=="null"?$e?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}function J(){function Ye(){P(k+".drawElements("+[$,ie,Ze,ee+"<<(("+Ze+"-"+ng+")>>1)"]+");")}function Ve(){P(k+".drawArrays("+[$,ee,ie]+");")}S&&S!=="null"?$e?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}pe&&(typeof Se!="number"||Se>=0)?typeof Se=="string"?(P("if(",Se,">0){"),se(),P("}else if(",Se,"<0){"),J(),P("}")):se():J()}function Tt(E,h,P,F,B){var k=st(),N=k.proc("body",B);return v.optional(function(){k.commandStr=h.commandStr,k.command=k.link(h.commandStr)}),pe&&(k.instancing=N.def(k.shared.extensions,".angle_instanced_arrays")),E(k,N,P,F),k.compile().body}function Ot(E,h,P,F){cn(E,h),P.useVAO?P.drawVAO?h(E.shared.vao,".setVAO(",P.drawVAO.append(E,h),");"):h(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(h(E.shared.vao,".setVAO(null);"),Gn(E,h,P,F.attributes,function(){return!0})),Bt(E,h,P,F.uniforms,function(){return!0},!1),rt(E,h,h,P)}function fn(E,h){var P=E.proc("draw",1);cn(E,P),An(E,P,h.context),bn(E,P,h.framebuffer),Dn(E,P,h),$n(E,P,h.state),mt(E,P,h,!1,!0);var F=h.shader.progVar.append(E,P);if(P(E.shared.gl,".useProgram(",F,".program);"),h.shader.program)Ot(E,P,h,h.shader.program);else{P(E.shared.vao,".setVAO(null);");var B=E.global.def("{}"),k=P.def(F,".id"),N=P.def(B,"[",k,"]");P(E.cond(N).then(N,".call(this,a0);").else(N,"=",B,"[",k,"]=",E.link(function(D){return Tt(Ot,E,h,D,1)}),"(",F,");",N,".call(this,a0);"))}Object.keys(h.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function di(E,h,P,F){E.batchId="a1",cn(E,h);function B(){return!0}Gn(E,h,P,F.attributes,B),Bt(E,h,P,F.uniforms,B,!1),rt(E,h,h,P)}function fa(E,h,P,F){cn(E,h);var B=P.contextDep,k=h.def(),N="a0",D="a1",_=h.def();E.shared.props=_,E.batchId=k;var b=E.scope(),S=E.scope();h(b.entry,"for(",k,"=0;",k,"<",D,";++",k,"){",_,"=",N,"[",k,"];",S,"}",b.exit);function V(Ze){return Ze.contextDep&&B||Ze.propDep}function $(Ze){return!V(Ze)}if(P.needsContext&&An(E,S,P.context),P.needsFramebuffer&&bn(E,S,P.framebuffer),$n(E,S,P.state,V),P.profile&&V(P.profile)&&mt(E,S,P,!1,!0),F)P.useVAO?P.drawVAO?V(P.drawVAO)?S(E.shared.vao,".setVAO(",P.drawVAO.append(E,S),");"):b(E.shared.vao,".setVAO(",P.drawVAO.append(E,b),");"):b(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(b(E.shared.vao,".setVAO(null);"),Gn(E,b,P,F.attributes,$),Gn(E,S,P,F.attributes,V)),Bt(E,b,P,F.uniforms,$,!1),Bt(E,S,P,F.uniforms,V,!0),rt(E,b,S,P);else{var ee=E.global.def("{}"),ie=P.shader.progVar.append(E,S),Se=S.def(ie,".id"),lt=S.def(ee,"[",Se,"]");S(E.shared.gl,".useProgram(",ie,".program);","if(!",lt,"){",lt,"=",ee,"[",Se,"]=",E.link(function(Ze){return Tt(di,E,P,Ze,2)}),"(",ie,");}",lt,".call(this,a0[",k,"],",k,");")}}function A(E,h){var P=E.proc("batch",2);E.batchId="0",cn(E,P);var F=!1,B=!0;Object.keys(h.context).forEach(function(ee){F=F||h.context[ee].propDep}),F||(An(E,P,h.context),B=!1);var k=h.framebuffer,N=!1;k?(k.propDep?F=N=!0:k.contextDep&&F&&(N=!0),N||bn(E,P,k)):bn(E,P,null),h.state.viewport&&h.state.viewport.propDep&&(F=!0);function D(ee){return ee.contextDep&&F||ee.propDep}Dn(E,P,h),$n(E,P,h.state,function(ee){return!D(ee)}),(!h.profile||!D(h.profile))&&mt(E,P,h,!1,"a1"),h.contextDep=F,h.needsContext=B,h.needsFramebuffer=N;var _=h.shader.progVar;if(_.contextDep&&F||_.propDep)fa(E,P,h,null);else{var b=_.append(E,P);if(P(E.shared.gl,".useProgram(",b,".program);"),h.shader.program)fa(E,P,h,h.shader.program);else{P(E.shared.vao,".setVAO(null);");var S=E.global.def("{}"),V=P.def(b,".id"),$=P.def(S,"[",V,"]");P(E.cond($).then($,".call(this,a0,a1);").else($,"=",S,"[",V,"]=",E.link(function(ee){return Tt(fa,E,h,ee,2)}),"(",b,");",$,".call(this,a0,a1);"))}}Object.keys(h.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Y(E,h){var P=E.proc("scope",3);E.batchId="a2";var F=E.shared,B=F.current;An(E,P,h.context),h.framebuffer&&h.framebuffer.append(E,P),Pg(Object.keys(h.state)).forEach(function(N){var D=h.state[N],_=D.append(E,P);qt(_)?_.forEach(function(b,S){P.set(E.next[N],"["+S+"]",b)}):P.set(F.next,"."+N,_)}),mt(E,P,h,!0,!0),[la,cf,ua,ff,sa].forEach(function(N){var D=h.draw[N];D&&P.set(F.draw,"."+N,""+D.append(E,P))}),Object.keys(h.uniforms).forEach(function(N){var D=h.uniforms[N].append(E,P);Array.isArray(D)&&(D="["+D.join()+"]"),P.set(F.uniforms,"["+y.id(N)+"]",D)}),Object.keys(h.attributes).forEach(function(N){var D=h.attributes[N].append(E,P),_=E.scopeAttrib(N);Object.keys(new j).forEach(function(b){P.set(_,"."+b,D[b])})}),h.scopeVAO&&P.set(F.vao,".targetVAO",h.scopeVAO.append(E,P));function k(N){var D=h.shader[N];D&&P.set(F.shader,"."+N,D.append(E,P))}k(Hs),k(Ws),Object.keys(h.state).length>0&&(P(B,".dirty=true;"),P.exit(B,".dirty=true;")),P("a1(",E.shared.context,",a0,",E.batchId,");")}function H(E){if(!(typeof E!="object"||qt(E))){for(var h=Object.keys(E),P=0;P<h.length;++P)if(Rt.isDynamic(E[h[P]]))return!0;return!1}}function Ge(E,h,P){var F=h.static[P];if(!F||!H(F))return;var B=E.global,k=Object.keys(F),N=!1,D=!1,_=!1,b=E.global.def("{}");k.forEach(function(V){var $=F[V];if(Rt.isDynamic($)){typeof $=="function"&&($=F[V]=Rt.unbox($));var ee=lr($,null);N=N||ee.thisDep,_=_||ee.propDep,D=D||ee.contextDep}else{switch(B(b,".",V,"="),typeof $){case"number":B($);break;case"string":B('"',$,'"');break;case"object":Array.isArray($)&&B("[",$.join(),"]");break;default:B(E.link($));break}B(";")}});function S(V,$){k.forEach(function(ee){var ie=F[ee];if(Rt.isDynamic(ie)){var Se=V.invoke($,ie);$(b,".",ee,"=",Se,";")}})}h.dynamic[P]=new Rt.DynamicVariable(sf,{thisDep:N,contextDep:D,propDep:_,ref:b,append:S}),delete h.static[P]}function Et(E,h,P,F,B){var k=st();k.stats=k.link(B),Object.keys(h.static).forEach(function(D){Ge(k,h,D)}),tS.forEach(function(D){Ge(k,E,D)});var N=En(E,h,P,F,k);return fn(k,N),Y(k,N),A(k,N),r(k.compile(),{destroy:function(){N.shader.program.destroy()}})}return{next:Re,current:ke,procs:function(){var E=st(),h=E.proc("poll"),P=E.proc("refresh"),F=E.block();h(F),P(F);var B=E.shared,k=B.gl,N=B.next,D=B.current;F(D,".dirty=false;"),bn(E,h),bn(E,P,null,!0);var _;pe&&(_=E.link(pe)),R.oes_vertex_array_object&&P(E.link(R.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var b=0;b<X.maxAttributes;++b){var S=P.def(B.attributes,"[",b,"]"),V=E.cond(S,".buffer");V.then(k,".enableVertexAttribArray(",b,");",k,".bindBuffer(",vl,",",S,".buffer.buffer);",k,".vertexAttribPointer(",b,",",S,".size,",S,".type,",S,".normalized,",S,".stride,",S,".offset);").else(k,".disableVertexAttribArray(",b,");",k,".vertexAttrib4f(",b,",",S,".x,",S,".y,",S,".z,",S,".w);",S,".buffer=null;"),P(V),pe&&P(_,".vertexAttribDivisorANGLE(",b,",",S,".divisor);")}return P(E.shared.vao,".currentVAO=null;",E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"),Object.keys(re).forEach(function($){var ee=re[$],ie=F.def(N,".",$),Se=E.block();Se("if(",ie,"){",k,".enable(",ee,")}else{",k,".disable(",ee,")}",D,".",$,"=",ie,";"),P(Se),h("if(",ie,"!==",D,".",$,"){",Se,"}")}),Object.keys(te).forEach(function($){var ee=te[$],ie=ke[$],Se,lt,Ze=E.block();if(Ze(k,".",ee,"("),qt(ie)){var $e=ie.length;Se=E.global.def(N,".",$),lt=E.global.def(D,".",$),Ze(un($e,function(se){return Se+"["+se+"]"}),");",un($e,function(se){return lt+"["+se+"]="+Se+"["+se+"];"}).join("")),h("if(",un($e,function(se){return Se+"["+se+"]!=="+lt+"["+se+"]"}).join("||"),"){",Ze,"}")}else Se=F.def(N,".",$),lt=F.def(D,".",$),Ze(Se,");",D,".",$,"=",Se,";"),h("if(",Se,"!==",lt,"){",Ze,"}");P(Ze)}),E.compile()}(),compile:Et}}function ES(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var _S=34918,SS=34919,kg=35007,wS=function(c,y){if(!y.ext_disjoint_timer_query)return null;var R=[];function X(){return R.pop()||y.ext_disjoint_timer_query.createQueryEXT()}function ne(pe){R.push(pe)}var W=[];function K(pe){var Me=X();y.ext_disjoint_timer_query.beginQueryEXT(kg,Me),W.push(Me),he(W.length-1,W.length,pe)}function de(){y.ext_disjoint_timer_query.endQueryEXT(kg)}function fe(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ye=[];function Ee(){return ye.pop()||new fe}function xe(pe){ye.push(pe)}var Te=[];function he(pe,Me,ce){var ke=Ee();ke.startQueryIndex=pe,ke.endQueryIndex=Me,ke.sum=0,ke.stats=ce,Te.push(ke)}var ve=[],j=[];function Q(){var pe,Me,ce=W.length;if(ce!==0){j.length=Math.max(j.length,ce+1),ve.length=Math.max(ve.length,ce+1),ve[0]=0,j[0]=0;var ke=0;for(pe=0,Me=0;Me<W.length;++Me){var Re=W[Me];y.ext_disjoint_timer_query.getQueryObjectEXT(Re,SS)?(ke+=y.ext_disjoint_timer_query.getQueryObjectEXT(Re,_S),ne(Re)):W[pe++]=Re,ve[Me+1]=ke,j[Me+1]=pe}for(W.length=pe,pe=0,Me=0;Me<Te.length;++Me){var Je=Te[Me],re=Je.startQueryIndex,te=Je.endQueryIndex;Je.sum+=ve[te]-ve[re];var ze=j[re],be=j[te];be===ze?(Je.stats.gpuTime+=Je.sum/1e6,xe(Je)):(Je.startQueryIndex=ze,Je.endQueryIndex=be,Te[pe++]=Je)}Te.length=pe}}return{beginQuery:K,endQuery:de,pushScopeStats:he,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){R.push.apply(R,W);for(var pe=0;pe<R.length;pe++)y.ext_disjoint_timer_query.deleteQueryEXT(R[pe]);W.length=0,R.length=0},restore:function(){W.length=0,R.length=0}}},TS=16384,AS=256,bS=1024,CS=34962,Ig="webglcontextlost",Dg="webglcontextrestored",Mg=1,LS=2,RS=3;function Fg(c,y){for(var R=0;R<c.length;++R)if(c[R]===y)return R;return-1}function OS(c){var y=Xi(c);if(!y)return null;var R=y.gl,X=R.getContextAttributes(),ne=R.isContextLost(),W=Yi(R,y);if(!W)return null;var K=Vr(),de=ES(),fe=W.extensions,ye=wS(R,fe),Ee=kn(),xe=R.drawingBufferWidth,Te=R.drawingBufferHeight,he={tick:0,time:0,viewportWidth:xe,viewportHeight:Te,framebufferWidth:xe,framebufferHeight:Te,drawingBufferWidth:xe,drawingBufferHeight:Te,pixelRatio:y.pixelRatio},ve={},j={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=ac(R,fe),pe=gs(R,de,y,ke),Me=Ss(R,fe,pe,de),ce=Ae(R,fe,Q,de,pe,Me,j);function ke(rt){return ce.destroyBuffer(rt)}var Re=kt(R,K,de,y),Je=em(R,fe,Q,function(){ze.procs.poll()},he,de,y),re=tm(R,fe,Q,de,y),te=vm(R,fe,Q,Je,re,de),ze=xS(R,K,fe,Q,pe,Me,Je,te,ve,ce,Re,j,he,ye,y),be=q_(R,te,ze.procs.poll,he,X,fe,Q),me=ze.next,Ce=R.canvas,Le=[],ct=[],st=[],Oe=[y.onDestroy],Ie=null;function ot(){if(Le.length===0){ye&&ye.update(),Ie=null;return}Ie=vn.next(ot),$n();for(var rt=Le.length-1;rt>=0;--rt){var Tt=Le[rt];Tt&&Tt(he,null,0)}R.flush(),ye&&ye.update()}function ft(){!Ie&&Le.length>0&&(Ie=vn.next(ot))}function wt(){Ie&&(vn.cancel(ot),Ie=null)}function Jt(rt){rt.preventDefault(),ne=!0,wt(),ct.forEach(function(Tt){Tt()})}function nn(rt){R.getError(),ne=!1,W.restore(),Re.restore(),pe.restore(),Je.restore(),re.restore(),te.restore(),ce.restore(),ye&&ye.restore(),ze.procs.refresh(),ft(),st.forEach(function(Tt){Tt()})}Ce&&(Ce.addEventListener(Ig,Jt,!1),Ce.addEventListener(Dg,nn,!1));function bt(){Le.length=0,wt(),Ce&&(Ce.removeEventListener(Ig,Jt),Ce.removeEventListener(Dg,nn)),Re.clear(),te.clear(),re.clear(),ce.clear(),Je.clear(),Me.clear(),pe.clear(),ye&&ye.clear(),Oe.forEach(function(rt){rt()})}function Tn(rt){v(!!rt,"invalid args to regl({...})"),v.type(rt,"object","invalid args to regl({...})");function Tt(B){var k=r({},B);delete k.uniforms,delete k.attributes,delete k.context,delete k.vao,"stencil"in k&&k.stencil.op&&(k.stencil.opBack=k.stencil.opFront=k.stencil.op,delete k.stencil.op);function N(D){if(D in k){var _=k[D];delete k[D],Object.keys(_).forEach(function(b){k[D+"."+b]=_[b]})}}return N("blend"),N("depth"),N("cull"),N("stencil"),N("polygonOffset"),N("scissor"),N("sample"),"vao"in B&&(k.vao=B.vao),k}function Ot(B,k){var N={},D={};return Object.keys(B).forEach(function(_){var b=B[_];if(Rt.isDynamic(b)){D[_]=Rt.unbox(b,_);return}else if(k&&Array.isArray(b)){for(var S=0;S<b.length;++S)if(Rt.isDynamic(b[S])){D[_]=Rt.unbox(b,_);return}}N[_]=b}),{dynamic:D,static:N}}var fn=Ot(rt.context||{},!0),di=Ot(rt.uniforms||{},!0),fa=Ot(rt.attributes||{},!1),A=Ot(Tt(rt),!1),Y={gpuTime:0,cpuTime:0,count:0},H=ze.compile(A,fa,di,fn,Y),Ge=H.draw,Et=H.batch,E=H.scope,h=[];function P(B){for(;h.length<B;)h.push(null);return h}function F(B,k){var N;if(ne&&v.raise("context lost"),typeof B=="function")return E.call(this,null,B,0);if(typeof k=="function")if(typeof B=="number")for(N=0;N<B;++N)E.call(this,null,k,N);else if(Array.isArray(B))for(N=0;N<B.length;++N)E.call(this,B[N],k,N);else return E.call(this,B,k,0);else if(typeof B=="number"){if(B>0)return Et.call(this,P(B|0),B|0)}else if(Array.isArray(B)){if(B.length)return Et.call(this,B,B.length)}else return Ge.call(this,B)}return r(F,{stats:Y,destroy:function(){H.destroy()}})}var Zt=te.setFBO=Tn({framebuffer:Rt.define.call(null,Mg,"framebuffer")});function En(rt,Tt){var Ot=0;ze.procs.poll();var fn=Tt.color;fn&&(R.clearColor(+fn[0]||0,+fn[1]||0,+fn[2]||0,+fn[3]||0),Ot|=TS),"depth"in Tt&&(R.clearDepth(+Tt.depth),Ot|=AS),"stencil"in Tt&&(R.clearStencil(Tt.stencil|0),Ot|=bS),v(!!Ot,"called regl.clear with no buffer specified"),R.clear(Ot)}function An(rt){if(v(typeof rt=="object"&&rt,"regl.clear() takes an object as input"),"framebuffer"in rt)if(rt.framebuffer&&rt.framebuffer_reglType==="framebufferCube")for(var Tt=0;Tt<6;++Tt)Zt(r({framebuffer:rt.framebuffer.faces[Tt]},rt),En);else Zt(rt,En);else En(null,rt)}function bn(rt){v.type(rt,"function","regl.frame() callback must be a function"),Le.push(rt);function Tt(){var Ot=Fg(Le,rt);v(Ot>=0,"cannot cancel a frame twice");function fn(){var di=Fg(Le,fn);Le[di]=Le[Le.length-1],Le.length-=1,Le.length<=0&&wt()}Le[Ot]=fn}return ft(),{cancel:Tt}}function Dn(){var rt=me.viewport,Tt=me.scissor_box;rt[0]=rt[1]=Tt[0]=Tt[1]=0,he.viewportWidth=he.framebufferWidth=he.drawingBufferWidth=rt[2]=Tt[2]=R.drawingBufferWidth,he.viewportHeight=he.framebufferHeight=he.drawingBufferHeight=rt[3]=Tt[3]=R.drawingBufferHeight}function $n(){he.tick+=1,he.time=mt(),Dn(),ze.procs.poll()}function cn(){Je.refresh(),Dn(),ze.procs.refresh(),ye&&ye.update()}function mt(){return(kn()-Ee)/1e3}cn();function Gn(rt,Tt){v.type(Tt,"function","listener callback must be a function");var Ot;switch(rt){case"frame":return bn(Tt);case"lost":Ot=ct;break;case"restore":Ot=st;break;case"destroy":Ot=Oe;break;default:v.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ot.push(Tt),{cancel:function(){for(var fn=0;fn<Ot.length;++fn)if(Ot[fn]===Tt){Ot[fn]=Ot[Ot.length-1],Ot.pop();return}}}}var Bt=r(Tn,{clear:An,prop:Rt.define.bind(null,Mg),context:Rt.define.bind(null,LS),this:Rt.define.bind(null,RS),draw:Tn({}),buffer:function(rt){return pe.create(rt,CS,!1,!1)},elements:function(rt){return Me.create(rt,!1)},texture:Je.create2D,cube:Je.createCube,renderbuffer:re.create,framebuffer:te.create,framebufferCube:te.createCube,vao:ce.createVAO,attributes:X,frame:bn,on:Gn,limits:Q,hasExtension:function(rt){return Q.extensions.indexOf(rt.toLowerCase())>=0},read:be,destroy:bt,_gl:R,_refresh:cn,poll:function(){$n(),ye&&ye.update()},now:mt,stats:de});return y.onDone(null,Bt),Bt}return OS})})(S_);var hb=S_.exports;const mb=$0(hb);var pb=1e-6,Oa=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function mp(){var e=new Oa(16);return Oa!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function i1(e){var t=new Oa(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function P0(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],u=t[6],f=t[7],m=t[8],g=t[9],d=t[10],T=t[11],x=t[12],O=t[13],M=t[14],p=t[15],w=n*l-r*a,C=n*u-i*a,G=n*f-o*a,q=r*u-i*l,oe=r*f-o*l,we=i*f-o*u,ue=m*O-g*x,ut=m*M-d*x,Ue=m*p-T*x,ge=g*M-d*O,Xe=g*p-T*O,Ke=d*p-T*M,We=w*Ke-C*Xe+G*ge+q*Ue-oe*ut+we*ue;return We?(We=1/We,e[0]=(l*Ke-u*Xe+f*ge)*We,e[1]=(i*Xe-r*Ke-o*ge)*We,e[2]=(O*we-M*oe+p*q)*We,e[3]=(d*oe-g*we-T*q)*We,e[4]=(u*Ue-a*Ke-f*ut)*We,e[5]=(n*Ke-i*Ue+o*ut)*We,e[6]=(M*G-x*we-p*C)*We,e[7]=(m*we-d*G+T*C)*We,e[8]=(a*Xe-l*Ue+f*ue)*We,e[9]=(r*Ue-n*Xe-o*ue)*We,e[10]=(x*oe-O*G+p*w)*We,e[11]=(g*G-m*oe-T*w)*We,e[12]=(l*ut-a*ge-u*ue)*We,e[13]=(n*ge-r*ut+i*ue)*We,e[14]=(O*C-x*q-M*w)*We,e[15]=(m*q-g*C+d*w)*We,e):null}function tr(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5],f=t[6],m=t[7],g=t[8],d=t[9],T=t[10],x=t[11],O=t[12],M=t[13],p=t[14],w=t[15],C=n[0],G=n[1],q=n[2],oe=n[3];return e[0]=C*r+G*l+q*g+oe*O,e[1]=C*i+G*u+q*d+oe*M,e[2]=C*o+G*f+q*T+oe*p,e[3]=C*a+G*m+q*x+oe*w,C=n[4],G=n[5],q=n[6],oe=n[7],e[4]=C*r+G*l+q*g+oe*O,e[5]=C*i+G*u+q*d+oe*M,e[6]=C*o+G*f+q*T+oe*p,e[7]=C*a+G*m+q*x+oe*w,C=n[8],G=n[9],q=n[10],oe=n[11],e[8]=C*r+G*l+q*g+oe*O,e[9]=C*i+G*u+q*d+oe*M,e[10]=C*o+G*f+q*T+oe*p,e[11]=C*a+G*m+q*x+oe*w,C=n[12],G=n[13],q=n[14],oe=n[15],e[12]=C*r+G*l+q*g+oe*O,e[13]=C*i+G*u+q*d+oe*M,e[14]=C*o+G*f+q*T+oe*p,e[15]=C*a+G*m+q*x+oe*w,e}function o1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function hd(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vb(e,t,n){var r=n[0],i=n[1],o=n[2],a=Math.hypot(r,i,o),l,u,f;return a<pb?null:(a=1/a,r*=a,i*=a,o*=a,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+o*l,e[2]=o*r*f-i*l,e[3]=0,e[4]=r*i*f-o*l,e[5]=i*i*f+u,e[6]=o*i*f+r*l,e[7]=0,e[8]=r*o*f+i*l,e[9]=i*o*f-r*l,e[10]=o*o*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function gb(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function yb(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],l=t[6],u=t[8],f=t[9],m=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,f,m),e}function xb(){var e=new Oa(4);return Oa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function md(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}(function(){var e=xb();return function(t,n,r,i,o,a){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],o(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function Eb(){var e=new Oa(2);return Oa!=Float32Array&&(e[0]=0,e[1]=0),e}function _b(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),l=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=Eb();return function(t,n,r,i,o,a){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],o(e,e,a),t[l]=e[0],t[l+1]=e[1];return t}})();const Sb=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],o=[[-1/0,1/0],[-1/0,1/0]])=>{const a=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=mp(),m=[...r.slice(0,2),0,1];const g=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],T=Array.isArray(o[0])?[...o[0]]:[...o],x=Array.isArray(o[0])?[...o[1]]:[...o],O=()=>yb(a,f).slice(0,2),M=()=>{const ae=O();return Math.min(ae[0],ae[1])},p=()=>{const ae=O();return Math.max(ae[0],ae[1])},w=()=>Math.acos(f[0]/p()),C=()=>[[...g],[...d]],G=()=>[[...T],[...x]],q=()=>{const ae=O();return[1/ae[0],1/ae[1]]},oe=()=>1/M(),we=()=>1/p(),ue=()=>gb(a,f).slice(0,2),ut=()=>md(a,m,P0(u,f)).slice(0,2),Ue=()=>f,ge=()=>m.slice(0,2),Xe=([ae=0,Qe=0]=[],it=1,Dt=0)=>{f=mp(),Ke([-ae,-Qe]),Lt(Dt),We(1/it)},Ke=([ae=0,Qe=0]=[])=>{a[0]=ae,a[1]=Qe,a[2]=0;const it=o1(l,a);tr(f,it,f)},We=(ae,Qe)=>{const it=Array.isArray(ae);let Dt=it?ae[0]:ae,Wt=it?ae[1]:ae;if(Dt<=0||Wt<=0||Dt===1&&Wt===1)return;const Xt=O(),Qt=Xt[0]*Dt,Pt=Xt[1]*Wt;if(Dt=Math.max(g[0],Math.min(Qt,g[1]))/Xt[0],Wt=Math.max(d[0],Math.min(Pt,d[1]))/Xt[1],Dt===1&&Wt===1)return;a[0]=Dt,a[1]=Wt,a[2]=1;const Ft=hd(l,a),pn=Qe?[...Qe,0]:m,Ln=o1(a,pn);tr(f,Ln,tr(f,Ft,tr(f,P0(u,Ln),f)))},Lt=ae=>{const Qe=mp();vb(Qe,ae,[0,0,1]),tr(f,Qe,f)},gt=ae=>{const Qe=Array.isArray(ae[0]);g[0]=Qe?ae[0][0]:ae[0],g[1]=Qe?ae[0][1]:ae[1],d[0]=Qe?ae[1][0]:ae[0],d[1]=Qe?ae[1][1]:ae[1]},dt=ae=>{const Qe=Array.isArray(ae[0]);T[0]=Qe?ae[0][0]:ae[0],T[1]=Qe?ae[0][1]:ae[1],x[0]=Qe?ae[1][0]:ae[0],x[1]=Qe?ae[1][1]:ae[1]},_e=ae=>{!ae||ae.length<16||(f=ae)},De=ae=>{m=[...ae.slice(0,2),0,1]},Fe=()=>{Xe(e,t,n)};return Xe(e,t,n),{get translation(){return ue()},get target(){return ut()},get scaling(){return O()},get minScaling(){return M()},get maxScaling(){return p()},get scaleBounds(){return C()},get translationBounds(){return G()},get distance(){return q()},get minDistance(){return oe()},get maxDistance(){return we()},get rotation(){return w()},get view(){return Ue()},get viewCenter(){return ge()},lookAt:Xe,translate:Ke,pan:Ke,rotate:Lt,scale:We,zoom:We,reset:Fe,set:(...ae)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),_e(...ae)),setScaleBounds:gt,setTranslationBounds:dt,setView:_e,setViewCenter:De}},wb=["pan","rotate"],a1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Tb=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:o=!1,isPan:a=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:m=1,defaultMouseDownMoveAction:g="pan",mouseDownMoveModKey:d="alt",isZoom:T=!0,zoomSpeed:x=1,viewCenter:O,scaleBounds:M,translationBounds:p,onKeyDown:w=()=>{},onKeyUp:C=()=>{},onMouseDown:G=()=>{},onMouseUp:q=()=>{},onMouseMove:oe=()=>{},onWheel:we=()=>{}}={})=>{let ue=Sb(n,t,r,O,M,p),ut=0,Ue=0,ge=0,Xe=0,Ke=0,We=0,Lt=!1,gt=0,dt=1,_e=1,De=1,Fe=!1,ae=!1,Qe=!1,it=g==="pan",Dt=a,Wt=a,Xt=l,Qt=l,Pt=T,Ft=T;const pn=()=>{Dt=Array.isArray(a)?!!a[0]:a,Wt=Array.isArray(a)?!!a[1]:a,Xt=Array.isArray(l)?!!l[0]:l,Qt=Array.isArray(l)?!!l[1]:l,Pt=Array.isArray(T)?!!T[0]:T,Ft=Array.isArray(T)?!!T[1]:T};pn();const Ln=i?je=>je/dt*2*De:je=>je,Nt=i?je=>je/_e*2:je=>-je,an=i?je=>(-1+je/dt*2)*De:je=>je,yt=i?je=>1-je/_e*2:je=>je,xt=()=>{if(o){const et=ae;return ae=!1,et}Fe=!1;const je=ut,Z=Ue;if((Dt||Wt)&&Lt&&(it&&!Qe||!it&&Qe)){const et=Xt?Ke-je:je-Ke,Yt=Dt?Ln(u*et):0,tn=Qt?We-Z:Z-We,Rt=Wt?Nt(u*tn):0;(Yt!==0||Rt!==0)&&(ue.pan([Yt,Rt]),Fe=!0)}if((Pt||Ft)&&gt){const et=x*Math.exp(gt/_e),Yt=an(ge),tn=yt(Xe);ue.scale([Pt?1/et:1,Ft?1/et:1],[Yt,tn]),Fe=!0}if(f&&Lt&&(it&&Qe||!it&&!Qe)&&Math.abs(Ke-je)+Math.abs(We-Z)>0){const et=dt/2,Yt=_e/2,tn=Ke-et,Rt=Yt-We,vn=je-et,kn=Yt-Z,Vr=_b([tn,Rt],[vn,kn]),Or=tn*kn-vn*Rt;ue.rotate(m*Vr*Math.sign(Or)),Fe=!0}gt=0,Ke=je,We=Z;const nt=Fe||ae;return ae=!1,nt},_t=({defaultMouseDownMoveAction:je=null,isFixed:Z=null,isPan:nt=null,isPanInverted:et=null,isRotate:Yt=null,isZoom:tn=null,panSpeed:Rt=null,rotateSpeed:vn=null,zoomSpeed:kn=null,mouseDownMoveModKey:Vr=null}={})=>{g=je!==null&&wb.includes(je)?je:g,it=g==="pan",o=Z!==null?Z:o,a=nt!==null?nt:a,l=et!==null?et:l,f=Yt!==null?Yt:f,T=tn!==null?tn:T,u=+Rt>0?Rt:u,m=+vn>0?vn:m,x=+kn>0?kn:x,pn(),d=Vr!==null&&Object.keys(a1).includes(Vr)?Vr:d},St=()=>{const je=e.getBoundingClientRect();dt=je.width,_e=je.height,De=dt/_e},Ct=je=>{Qe=!1,C(je)},zt=je=>{Qe=je[a1[d]],w(je)},sn=je=>{Lt=!1,q(je)},jn=je=>{Lt=je.buttons===1,G(je)},v=document.createEvent("MouseEvent").offsetX!==void 0?je=>{ge=je.offsetX,Xe=je.offsetY}:je=>{const Z=e.getBoundingClientRect();ge=je.clientX-Z.left,Xe=je.clientY-Z.top},At=je=>{ut=je.clientX,Ue=je.clientY},Mt=je=>{At(je),oe(je)},Ne=je=>{if(Pt||Ft){je.preventDefault(),At(je),v(je);const Z=je.deltaMode===1?12:1;gt+=Z*(je.deltaY||je.deltaX||0)}we(je)},Ht=()=>{ue=void 0,window.removeEventListener("keydown",zt),window.removeEventListener("keyup",Ct),e.removeEventListener("mousedown",jn),window.removeEventListener("mouseup",sn),window.removeEventListener("mousemove",Mt),e.removeEventListener("wheel",Ne)};window.addEventListener("keydown",zt,{passive:!0}),window.addEventListener("keyup",Ct,{passive:!0}),e.addEventListener("mousedown",jn,{passive:!0}),window.addEventListener("mouseup",sn,{passive:!0}),window.addEventListener("mousemove",Mt,{passive:!0}),e.addEventListener("wheel",Ne,{passive:!1}),ue.config=_t,ue.dispose=Ht,ue.refresh=St,ue.tick=xt;const pt=je=>function(){je.apply(null,arguments),ae=!0};return ue.lookAt=pt(ue.lookAt),ue.translate=pt(ue.translate),ue.pan=pt(ue.pan),ue.rotate=pt(ue.rotate),ue.scale=pt(ue.scale),ue.zoom=pt(ue.zoom),ue.reset=pt(ue.reset),ue.set=pt(ue.set),ue.setScaleBounds=pt(ue.setScaleBounds),ue.setTranslationBounds=pt(ue.setTranslationBounds),ue.setView=pt(ue.setView),ue.setViewCenter=pt(ue.setViewCenter),St(),ue};function N0(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;w_(e,t,a,r,i,o%2),N0(e,t,n,r,a-1,o+1),N0(e,t,n,a+1,i,o+1)}function w_(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const f=i-r+1,m=n-r+1,g=Math.log(f),d=.5*Math.exp(2*g/3),T=.5*Math.sqrt(g*d*(f-d)/f)*(m-f/2<0?-1:1),x=Math.max(r,Math.floor(n-m*d/f+T)),O=Math.min(i,Math.floor(n+(f-m)*d/f+T));w_(e,t,n,x,O,o)}const a=t[2*n+o];let l=r,u=i;for(su(e,t,r,n),t[2*i+o]>a&&su(e,t,r,i);l<u;){for(su(e,t,l,u),l++,u--;t[2*l+o]<a;)l++;for(;t[2*u+o]>a;)u--}t[2*r+o]===a?su(e,t,r,u):(u++,su(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function su(e,t,n,r){pp(e,n,r),pp(t,2*n,2*r),pp(t,2*n+1,2*r+1)}function pp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ab(e,t,n,r,i,o,a){const l=[0,e.length-1,0],u=[];let f,m;for(;l.length;){const g=l.pop(),d=l.pop(),T=l.pop();if(d-T<=a){for(let M=T;M<=d;M++)f=t[2*M],m=t[2*M+1],f>=n&&f<=i&&m>=r&&m<=o&&u.push(e[M]);continue}const x=Math.floor((T+d)/2);f=t[2*x],m=t[2*x+1],f>=n&&f<=i&&m>=r&&m<=o&&u.push(e[x]);const O=(g+1)%2;(g===0?n<=f:r<=m)&&(l.push(T),l.push(x-1),l.push(O)),(g===0?i>=f:o>=m)&&(l.push(x+1),l.push(d),l.push(O))}return u}function bb(e,t,n,r,i,o){const a=[0,e.length-1,0],l=[],u=i*i;for(;a.length;){const f=a.pop(),m=a.pop(),g=a.pop();if(m-g<=o){for(let M=g;M<=m;M++)l1(t[2*M],t[2*M+1],n,r)<=u&&l.push(e[M]);continue}const d=Math.floor((g+m)/2),T=t[2*d],x=t[2*d+1];l1(T,x,n,r)<=u&&l.push(e[d]);const O=(f+1)%2;(f===0?n-i<=T:r-i<=x)&&(a.push(g),a.push(d-1),a.push(O)),(f===0?n+i>=T:r+i>=x)&&(a.push(d+1),a.push(m),a.push(O))}return l}function l1(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}const Cb=e=>e[0],Lb=e=>e[1];class Rb{constructor(t,n=Cb,r=Lb,i=64,o=Float64Array){this.nodeSize=i,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new a(t.length),u=this.coords=new o(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);N0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return Ab(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return bb(this.ids,this.coords,t,n,r,this.nodeSize)}}const Ob=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var Pb=Ob;const Nb=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var kb=Nb;const{push:s1,splice:Ib}=Array.prototype,vp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Jn=Float32Array.BYTES_PER_ELEMENT,Db=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const o=n+i*2,a=o+1,l=o+2,u=o+3;t.push(o,a,l,l,a,u)}n+=(r+2)*2}),t},wr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let o=0,a=e.length/t;o<a;o++){const l=o*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}s1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,o=e.length/n;i<o;i++){const a=t+i*n;e[a]=r(e[a],a,i)}return e},copyElement(e,t,n,r){const i=new Array(r),o=t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return Ib.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],o=new Array(n).fill(r);for(let a=0,l=e.length/t;a<l;a++){const u=a*t;for(let f=0;f<t;f++)o[f]=e[u+f];s1.apply(i,o)}return i}},Mb=(e,{projection:t=vp,model:n=vp,view:r=vp,points:i=[],colorIndices:o=[],color:a=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:m=[],miter:g=1,is2d:d=!1,zPos2d:T=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const x=new Float32Array(16);let O,M,p,w,C,G,q,oe,we,ue,ut,Ue,ge,Xe,Ke,We,Lt,gt,dt=d?2:3;const _e=()=>+(u.length===M||l!==null),De=()=>{ue=e.buffer(),ut=e.buffer(),Ue=e.buffer(),Ke=e.buffer(),We={prevPosition:{buffer:()=>ue,offset:0,stride:Jn*3},currPosition:{buffer:()=>ue,offset:Jn*3*2,stride:Jn*3},nextPosition:{buffer:()=>ue,offset:Jn*3*4,stride:Jn*3},opacity:{buffer:()=>ut,offset:Jn*2,stride:Jn},offsetScale:{buffer:()=>Ue,offset:Jn*2,stride:Jn},colorIndex:{buffer:()=>Ke,offset:Jn*2,stride:Jn}},Lt=e.elements(),gt=e({attributes:We,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(yt,xt)=>{const _t=yt.projection||xt.projection,St=yt.model||xt.model,Ct=yt.view||xt.view;return tr(x,_t,tr(x,Ct,St))},aspectRatio:({viewportWidth:yt,viewportHeight:xt})=>yt/xt,colorTex:()=>ge,colorTexRes:()=>Xe,colorTexEps:()=>.5/Xe,pixelRatio:({pixelRatio:yt})=>yt,width:({pixelRatio:yt,viewportHeight:xt})=>f/xt*yt,useOpacity:_e,useColorOpacity:()=>+!_e(),miter:g},elements:()=>Lt,vert:kb,frag:Pb})},Fe=()=>{O===1&&i.length%dt>0&&console.warn(`The length of points (${M}) does not match the dimensions (${dt}). Incomplete points are ignored.`),w=i.flat().slice(0,M*dt),d&&(w=wr.increaseStride(w,2,3,T)),o.length!==M&&(o=new Array(M).fill(0)),m.length!==M&&(m=new Array(M).fill(1));let yt=o.slice(),xt=u.length===M?u.slice():new Array(M).fill(+l),_t=m.slice(),St=0;p.forEach(Ct=>{const zt=St+Ct-1;wr.copyElement(w,zt,zt,3),wr.copyElement(w,St,St,3),wr.copyElement(yt,zt,zt,1),wr.copyElement(yt,St,St,1),wr.copyElement(xt,zt,zt,1),wr.copyElement(xt,St,St,1),wr.copyElement(_t,zt,zt,1),wr.copyElement(_t,St,St,1),St+=Ct+2}),C=new Float32Array(wr.duplicate(w,3)),G=wr.duplicate(yt),q=wr.duplicate(xt),oe=wr.duplicate(_t,1,-1),we=Db(p),ue({usage:"dynamic",type:"float",length:C.length*Jn,data:C}),ut({usage:"dynamic",type:"float",length:q.length*Jn,data:q}),Ue({usage:"dynamic",type:"float",length:oe.length*Jn,data:oe}),Ke({usage:"dynamic",type:"float",length:G.length*Jn,data:G}),Lt({primitive:"triangles",usage:"dynamic",type:we.length>2**16?"uint32":"uint16",data:we})},ae=()=>{Qe(),De()},Qe=()=>{i=null,w=null,C=null,oe=null,we=null,ue.destroy(),Ue.destroy(),Lt.destroy()},it=({projection:yt,model:xt,view:_t}={})=>{yt&&(t=yt),xt&&(n=xt),_t&&(r=_t),i&&i.length>1&&gt({projection:t,model:n,view:r})},Dt=(yt,xt)=>{const _t=xt.flat(2);return _t.length===M?_t:_t.length===O?p.map((St,Ct)=>Array(St).fill(_t[Ct])).flat():yt},Wt=()=>i,Xt=(yt=[],{colorIndices:xt=o,opacities:_t=u,widths:St=m,is2d:Ct=d}={})=>{i=yt,d=Ct,dt=d?2:3,O=Array.isArray(i[0])?i.length:1,p=O>1?i.map(zt=>Math.floor(zt.length/dt)):[Math.floor(i.length/dt)],M=p.reduce((zt,sn)=>zt+sn,0),o=Dt(o,xt),u=Dt(u,_t),m=Dt(m,St),i&&M>1?Fe():ae()},Qt=(yt,xt=-1)=>Array.isArray(yt)?yt.length&&!Array.isArray(yt[0])?xt+1:Qt(yt[0],++xt):xt,Pt=()=>{const yt=Qt(a)===0?[a]:a;Xe=Math.max(2,Math.ceil(Math.sqrt(yt.length)));const xt=new Uint8Array(Xe**2*4);yt.forEach((_t,St)=>{xt[St*4]=Math.min(255,Math.max(0,Math.round(_t[0]*255))),xt[St*4+1]=Math.min(255,Math.max(0,Math.round(_t[1]*255))),xt[St*4+2]=Math.min(255,Math.max(0,Math.round(_t[2]*255))),xt[St*4+3]=Number.isNaN(+_t[3])?255:Math.min(255,Math.max(0,Math.round(_t[3]*255)))}),ge=e.texture({data:xt,shape:[Xe,Xe,4]})},Ft=(yt,xt=l)=>{a=yt,l=xt,ge&&ge.destroy(),Pt()},pn=()=>({color:a,miter:g,width:f}),Ln=({color:yt,opacity:xt,miter:_t,width:St}={})=>{yt&&Ft(yt,xt),_t&&(g=_t),+St>0&&(f=St)},Nt=()=>({points:ue,widths:Ue,opacities:ut,colorIndices:Ke}),an=()=>({points:C,widths:oe,opacities:q,colorIndices:G});return De(),Pt(),i&&i.length>1&&Xt(i),{clear:ae,destroy:Qe,draw:it,getPoints:Wt,setPoints:Xt,getData:an,getBuffer:Nt,getStyle:pn,setStyle:Ln}};var Uf=Mb;const Fb=e=>e*e*e,T_=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,jb=e=>--e*e*e+1,Bb=e=>e,$b=e=>e*e,Gb=e=>e<.5?2*e*e:-1+(4-2*e)*e,zb=e=>e*(2-e),Ml=e=>e,Ub=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},Vb=e=>e.reduce((t,n)=>n>t?n:t,-1/0),u1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},Hb=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,o)=>(i&&r.push(o),r),[])},$v=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,o)=>(i[o]=Object.getOwnPropertyDescriptor(n,o),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const o=Object.getOwnPropertyDescriptor(n,i);o.enumerable&&(r[i]=o)}),Object.defineProperties(e,r)}),e),Wb=(...e)=>t=>e.reduce((n,r)=>r(n),t),Xb=e=>t=>$v({__proto__:{constructor:e}},t),c1=(e,t)=>n=>$v(n,{get[e](){return t}}),Yb=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),Qb=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),xl=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),A_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const o=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let a=!1;const l=(...u)=>{a?(i++,o(...u)):(e(...u),o(...u),a=!0,i=0,setTimeout(()=>{a=!1},t))};return l.reset=()=>{a=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},gi="auto",Kb=0,gp=1,qb=2,f1=3,Zb=4,Jb=Float32Array.BYTES_PER_ELEMENT,b_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],d1={color:[0,0,0,0],depth:1},Gv="panZoom",C_="lasso",L_="rotate",eC=[Gv,C_,L_],tC=Gv,nC={cubicIn:Fb,cubicInOut:T_,cubicOut:jb,linear:Bb,quadIn:$b,quadInOut:Gb,quadOut:zb},h1=T_,pi="continuous",Sl="categorical",m1=[pi,Sl],k0="deselect",zv="lassoEnd",rC=[k0,zv],iC=[0,.666666667,1,1],oC=2,aC=!1,lC=10,sC=3,uC=zv,cC=!1,Ud=750,Vd=500,Hd=100,Wd=250,Uv="lasso",Xd="rotate",Yd="merge",fC=[Uv,Xd,Yd],Vv="alt",Hv="cmd",R_="ctrl",O_="meta",Wv="shift",dC=[Vv,Hv,R_,O_,Wv],hC={[Vv]:Xd,[Wv]:Uv,[Hv]:Yd},mC=1,pC=gi,vC=gi,gC=1,yp=1,yC=6,xC=2,EC=2,xp=null,_C=2,SC=2,Ep=null,wC=null,_p=null,TC=.66,AC=1,Sp=null,bC=.15,CC=25,LC=1,RC=1,uu=null,OC=[.66,.66,.66,AC],PC=[0,.55,1,1],NC=[1,1,1,1],kC=[0,0,0,1],wp=null,IC=[.66,.66,.66,.2],DC=[0,.55,1,1],MC=[1,1,1,1],FC=[0,0],jC=1,BC=0,$C=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),GC="IMAGE_LOAD_ERROR",zC=null,UC=!1,VC=[1,1,1,.5],HC=!0,WC=!0,XC=!1,YC=100,QC=1/500,KC="auto",qC=!1,ZC=200,JC=500,P_=new Set(["z","valueZ","valueA","value1","category"]),N_=new Set(["w","valueW","valueB","value2","value"]),Xv=15e3,p1="Points have not been drawn",e2=(e,t)=>e?b_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,t2=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return b_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),mb({gl:t,extensions:n})},Tp=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),n2=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let o=0;o<e.length;o+=2)t=e[o]<t?e[o]:t,n=e[o]>n?e[o]:n,r=e[o+1]<r?e[o+1]:r,i=e[o+1]>i?e[o+1]:i;return[t,r,n,i]},r2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,i2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,o)=>`#${r}${r}${i}${i}${o}${o}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),go=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),yo=e=>!Number.isNaN(+e)&&+e>=0,Vf=e=>!Number.isNaN(+e)&&+e>0,v1=(e,t)=>n=>e.indexOf(n)>=0?n:t,o2=(e,t=!1,n=Xv)=>new Promise((r,i)=>{const o=new Image;t&&(o.crossOrigin="anonymous"),o.src=e,o.onload=()=>{r(o)};const a=()=>{i(new Error(GC))};o.onerror=a,setTimeout(a,n)}),g1=(e,t,n=Xv)=>new Promise((r,i)=>{o2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(o=>{r(e.texture(o))}).catch(o=>{i(o)})}),a2=(e,t=!1)=>[...i2(e,t),255**!t],l2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),s2=e=>e>=0&&e<=1,Qd=e=>Array.isArray(e)&&e.every(s2),u2=(e,[t,n]=[])=>{let r,i,o,a,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],o=e[f],a=e[f+1],i>n!=a>n&&t<(o-r)*(n-i)/(a-i)+r&&(l=!l),f=u;return l},I0=e=>typeof e=="string"||e instanceof String,c2=e=>Number.isInteger(e)&&e>=0&&e<=255,k_=e=>Array.isArray(e)&&e.every(c2),f2=e=>e.length===3&&(Qd(e)||k_(e)),d2=e=>e.length===4&&(Qd(e)||k_(e)),xo=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||I0(e[0])),Hf=(e,t)=>e>t?e:t,y1=(e,t)=>e<t?e:t,ur=(e,t)=>{if(d2(e)){const n=Qd(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(f2(e)){const n=255**!t,r=Qd(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return l2(e)?a2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},x1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),E1=e=>.21*e[0]+.72*e[1]+.07*e[2],h2=(e,t,n)=>Math.min(n,Math.max(t,e)),m2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=gC}=e;t||(t=t2(n));const i=e2(t),o=[n.width,n.height],a=t.framebuffer({width:o[0],height:o[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>a,srcRes:()=>o,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=M=>{const p=M.getContext("2d");p.clearRect(0,0,M.width,M.height),p.drawImage(n,(n.width-M.width)/2,(n.height-M.height)/2,M.width,M.height,0,0,M.width,M.height)},f=(M,p)=>{t.clear(d1),a.use(()=>{t.clear(d1),M()}),l(),u(p)},m=()=>{t.poll()},g=new Set,d=M=>(g.add(M),()=>{g.delete(M)}),T=t.frame(()=>{const M=g.values();let p=M.next();for(;!p.done;)p.value(),p=M.next()}),x=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,o[0]=n.width,o[1]=n.height,a.resize(...o)};return e.canvas||(window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(M){r=+M},get isSupported(){return i},render:f,onFrame:d,refresh:m,destroy:()=>{T.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}}},p2=!0,Ap=8,_1=2,v2=2500,g2=250,y2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const o=document.createElement("div");return o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.width="1.25rem",o.style.height="1.25rem",o.style.borderRadius="1.25rem",o.style.background="currentcolor",o.style.transform="scale(0)",o.style.opacity=0,e.appendChild(o),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:o}},x2=(e,t,n)=>(1-e)*t+n,E2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,_2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,S2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,w2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,T2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,A2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,b2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,C2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,L2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,R2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,O2=({time:e=Ud,extraTime:t=Vd,delay:n=Hd,currentColor:r,targetColor:i,effectOpacity:o,effectScale:a,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:m})=>{const g=l/360,d=x2(g,e,t),T=Math.round((1-g)*e/d*100),x=Math.round(T/2),O=T+(100-T)/4;return{rules:{main:A2(T,r,i),effect:b2(T,O,o,a),circleRight:R2(x,u),circleLeft:L2(T,l),circle:C2(x,f,m)},names:{main:E2(d,n),effect:_2(d,n),circleLeft:S2(d,n),circleRight:w2(d,n),circle:T2(d,n)}}},P2=e=>`${e}ms linear mainOut 0s 1 normal forwards`,N2=e=>`${e}ms linear effectOut 0s 1 normal forwards`,k2=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,I2=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,D2=e=>`${e}ms linear circleOut 0s 1 normal forwards`,M2=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,F2=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,j2=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,B2=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,$2=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,G2=({time:e=Wd,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:o,circleRightRotation:a,circleClipPath:l,circleOpacity:u})=>{const f=o/360,m=f*e,g=Math.min(100,f*100),d=g>50?Math.round((1-50/g)*100):0;return{rules:{main:M2(t,n),effect:F2(r,i),circleRight:j2(d,a),circleLeft:B2(o),circle:$2(d,l,u)},names:{main:P2(m),effect:N2(m),circleRight:k2(m),circleLeft:I2(m),circle:D2(m)}}},cu=(e,t=null)=>e===null?t:e;let bp;const I_=()=>{if(!bp){const e=document.createElement("style");document.head.appendChild(e),bp=e.sheet}return bp},Ir=e=>{const t=I_(),n=t.rules.length;return t.insertRule(e,n),n},Dr=e=>{I_().deleteRule(e)},z2=`${v2}ms ease scaleInFadeOut 0s 1 normal backwards`,U2=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let Cp=null;const V2=`${g2}ms ease fadeScaleOut 0s 1 normal backwards`,H2=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Lp=null;const D_=(e,{onDraw:t=Ml,onStart:n=Ml,onEnd:r=Ml,enableInitiator:i=p2,initiatorParentElement:o=document.body,longPressIndicatorParentElement:a=document.body,minDelay:l=Ap,minDist:u=_1,pointNorm:f=Ml}={})=>{let m=i,g=o,d=a,T=t,x=n,O=r,M=f;const p=document.createElement("div"),w=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);p.id=`lasso-initiator-${w}`,p.style.position="fixed",p.style.display="flex",p.style.justifyContent="center",p.style.alignItems="center",p.style.zIndex=99,p.style.width="4rem",p.style.height="4rem",p.style.borderRadius="4rem",p.style.opacity=.5,p.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:C,longPressCircle:G,longPressCircleLeft:q,longPressCircleRight:oe,longPressEffect:we}=y2();let ue=!1,ut=!1,Ue=[],ge=[],Xe,Ke=!1,We=null,Lt=null,gt=null,dt=null,_e=null,De=null,Fe=null,ae=null,Qe=null,it=null;const Dt=()=>{ue=!1},Wt=At=>{const{left:Mt,top:Ne}=e.getBoundingClientRect();return[At.clientX-Mt,At.clientY-Ne]};window.addEventListener("mouseup",Dt);const Xt=()=>{p.style.opacity=.5,p.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Qt=(At,Mt)=>{const Ne=getComputedStyle(At),Ht=+Ne.opacity,pt=Ne.transform.match(/([0-9.-]+)+/g),je=+pt[0],Z=+pt[1],nt=Math.sqrt(je*je+Z*Z);let et=Math.atan2(Z,je)*(180/Math.PI);return et=Mt&&et<=0?360+et:et,{opacity:Ht,scale:nt,rotate:et}},Pt=At=>{if(!m||ue)return;const Mt=At.clientX,Ne=At.clientY;p.style.top=`${Ne}px`,p.style.left=`${Mt}px`;const Ht=Qt(p),pt=Ht.opacity,je=Ht.scale,Z=Ht.rotate;p.style.opacity=pt,p.style.transform=`translate(-50%,-50%) scale(${je}) rotate(${Z}deg)`,p.style.animation="none",xl().then(()=>{Cp!==null&&Dr(Cp),Cp=Ir(U2(pt,je,Z)),p.style.animation=z2,xl().then(()=>{Xt()})})},Ft=()=>{const{opacity:At,scale:Mt,rotate:Ne}=Qt(p);p.style.opacity=At,p.style.transform=`translate(-50%,-50%) scale(${Mt}) rotate(${Ne}deg)`,p.style.animation="none",xl(2).then(()=>{Lp!==null&&Dr(Lp),Lp=Ir(H2(At,Mt,Ne)),p.style.animation=V2,xl().then(()=>{Xt()})})},pn=(At,Mt,{time:Ne=Ud,extraTime:Ht=Vd,delay:pt=Hd}={time:Ud,extraTime:Vd,delay:Hd})=>{Ke=!0;const je=getComputedStyle(C);C.style.color=je.color,C.style.top=`${Mt}px`,C.style.left=`${At}px`,C.style.animation="none";const Z=getComputedStyle(G);G.style.clipPath=Z.clipPath,G.style.opacity=Z.opacity,G.style.animation="none";const nt=Qt(we);we.style.opacity=nt.opacity,we.style.transform=`scale(${nt.scale})`,we.style.animation="none";const et=Qt(q);q.style.transform=`rotate(${et.rotate}deg)`,q.style.animation="none";const Yt=Qt(oe);oe.style.transform=`rotate(${Yt.rotate}deg)`,oe.style.animation="none",xl().then(()=>{if(!Ke)return;_e!==null&&Dr(_e),dt!==null&&Dr(dt),gt!==null&&Dr(gt),Lt!==null&&Dr(Lt),We!==null&&Dr(We);const{rules:tn,names:Rt}=O2({time:Ne,extraTime:Ht,delay:pt,currentColor:je.color||"currentcolor",targetColor:C.dataset.activeColor,effectOpacity:nt.opacity||0,effectScale:nt.scale||0,circleLeftRotation:et.rotate||0,circleRightRotation:Yt.rotate||0,circleClipPath:Z.clipPath||"inset(0 0 0 50%)",circleOpacity:Z.opacity||0});We=Ir(tn.main),Lt=Ir(tn.effect),gt=Ir(tn.circleLeft),dt=Ir(tn.circleRight),_e=Ir(tn.circle),C.style.animation=Rt.main,we.style.animation=Rt.effect,q.style.animation=Rt.circleLeft,oe.style.animation=Rt.circleRight,G.style.animation=Rt.circle})},Ln=({time:At=Wd}={time:Wd})=>{if(!Ke)return;Ke=!1;const Mt=getComputedStyle(C);C.style.color=Mt.color,C.style.animation="none";const Ne=getComputedStyle(G);G.style.clipPath=Ne.clipPath,G.style.opacity=Ne.opacity,G.style.animation="none";const Ht=Qt(we);we.style.opacity=Ht.opacity,we.style.transform=`scale(${Ht.scale})`,we.style.animation="none";const pt=Ne.clipPath.slice(-2,-1)==="x",je=Qt(q,pt);q.style.transform=`rotate(${je.rotate}deg)`,q.style.animation="none";const Z=Qt(oe);oe.style.transform=`rotate(${Z.rotate}deg)`,oe.style.animation="none",xl().then(()=>{it!==null&&Dr(it),Qe!==null&&Dr(Qe),ae!==null&&Dr(ae),Fe!==null&&Dr(Fe),De!==null&&Dr(De);const{rules:nt,names:et}=G2({time:At,currentColor:Mt.color||"currentcolor",targetColor:C.dataset.color,effectOpacity:Ht.opacity||0,effectScale:Ht.scale||0,circleLeftRotation:je.rotate||0,circleRightRotation:Z.rotate||0,circleClipPath:Ne.clipPath||"inset(0px)",circleOpacity:Ne.opacity||1});De=Ir(nt.main),Fe=Ir(nt.effect),ae=Ir(nt.circleLeft),Qe=Ir(nt.circleRight),it=Ir(nt.circle),C.style.animation=et.main,we.style.animation=et.effect,q.style.animation=et.circleLeft,oe.style.animation=et.circleRight,G.style.animation=et.circle})},Nt=()=>{T(Ue,ge)},an=At=>{if(Xe){if(Yb(At[0],At[1],Xe[0],Xe[1])>_1){Xe=At;const Ne=M(At);Ue.push(Ne),ge.push(Ne[0],Ne[1]),Ue.length>1&&Nt()}}else{ut||(ut=!0,x()),Xe=At;const Mt=M(At);Ue=[Mt],ge=[Mt[0],Mt[1]]}},yt=A_(an,Ap,Ap),xt=(At,Mt)=>{const Ne=Wt(At);return Mt?yt(Ne):an(Ne)},_t=()=>{Ue=[],ge=[],Xe=void 0,Nt()},St=At=>{Pt(At)},Ct=()=>{ue=!0,ut=!0,_t(),x()},zt=()=>{Ft()},sn=({merge:At=!1}={})=>{ut=!1;const Mt=[...Ue],Ne=[...ge];return yt.cancel(),_t(),Mt.length&&O(Mt,Ne,{merge:At}),Mt},jn=({onDraw:At=null,onStart:Mt=null,onEnd:Ne=null,enableInitiator:Ht=null,initiatorParentElement:pt=null,longPressIndicatorParentElement:je=null,minDelay:Z=null,minDist:nt=null,pointNorm:et=null}={})=>{T=cu(At,T),x=cu(Mt,x),O=cu(Ne,O),m=cu(Ht,m),M=cu(et,M),pt!==null&&pt!==g&&(g.removeChild(p),pt.appendChild(p),g=pt),je!==null&&je!==d&&(d.removeChild(C),je.appendChild(C),d=je),m?(p.addEventListener("click",St),p.addEventListener("mousedown",Ct),p.addEventListener("mouseleave",zt)):(p.removeEventListener("mousedown",Ct),p.removeEventListener("mouseleave",zt))},Ur=()=>{g.removeChild(p),d.removeChild(C),window.removeEventListener("mouseup",Dt),p.removeEventListener("click",St),p.removeEventListener("mousedown",Ct),p.removeEventListener("mouseleave",zt)},v=()=>At=>$v(At,{clear:_t,destroy:Ur,end:sn,extend:xt,set:jn,showInitiator:Pt,hideInitiator:Ft,showLongPressIndicator:pn,hideLongPressIndicator:Ln});return g.appendChild(p),d.appendChild(C),jn({onDraw:T,onStart:x,onEnd:O,enableInitiator:m,initiatorParentElement:g}),Wb(c1("initiator",p),c1("longPressIndicator",C),v(),Xb(D_))({})},W2=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,X2=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,Y2=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,Q2=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,K2=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,q2=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,Z2=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,J2=function(){const t=(f,m,g,d,T)=>{const x=(d-m)*.5,O=(T-g)*.5;return(2*g-2*d+x+O)*f*f*f+(-3*g+3*d-2*x-O)*f*f+x*f+g},n=(f,m,g)=>{const d=g*f,T=Math.floor(d),x=d-T,O=m[Math.max(0,T-1)],M=m[T],p=m[Math.min(g,T+1)],w=m[Math.min(g,T+2)];return[t(x,O[0],M[0],p[0],w[0]),t(x,O[1],M[1],p[1],w[1])]},r=(f,m,g,d)=>(f-g)**2+(m-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,m,g)=>{let d=m[0],T=m[1],x=g[0]-d,O=g[1]-T;if(x!==0||O!==0){const M=((f[0]-d)*x+(f[1]-T)*O)/(x*x+O*O);M>1?(d=g[0],T=g[1]):M>0&&(d+=x*M,T+=O*M)}return x=f[0]-d,O=f[1]-T,x*x+O*O};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const o=(f,m,g,d,T)=>{let x=d,O;for(let M=m+1;M<g;M++){const p=i(f[M],f[m],f[g]);p>x&&(O=M,x=p)}x>d&&(O-m>1&&o(f,m,O,d,T),T.push(f[O]),g-O>1&&o(f,O,g,d,T))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const a=(f,m)=>{const g=f.length-1,d=[f[0]];return o(f,0,g,m,d),d.push(f[g]),d},l=(f,{maxIntPointsPerSegment:m=100,tolerance:g=.002}={})=>{const d=f.length,T=d-1,x=T*m+1,O=g**2;let M=[],p;for(let w=0;w<d-1;w++){let C=[f[w].slice(0,2)];p=f[w];for(let G=1;G<m;G++){const q=(w*m+G)/x,oe=n(q,f,T);r(p[0],p[1],oe[0],oe[1])>O&&(C.push(oe),p=oe)}C.push(f[w+1]),C=a(C,O),M=M.concat(C.slice(0,C.length-1))}return M.push(f[f.length-1].slice(0,2)),M.flat()},u=f=>{const m={},g=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const T=d[4];m[T]||(m[T]=[]),g?m[T][d[5]]=d:m[T].push(d)}),Object.entries(m).forEach(d=>{m[d[0]]=d[1].filter(T=>T),m[d[0]].reference=d[1][0]}),m};self.onmessage=function(m){(m.data.points?+m.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),m.data.points;const d=u(m.data.points);self.postMessage({points:Object.entries(d).reduce((T,x)=>(T[x[0]]=l(x[1],m.data.options),T[x[0]].reference=x[1].reference,T),{})})}},eL=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=Qb(J2);i.onmessage=o=>{o.data.error?r(o.data.error):n(o.data.points),i.terminate()},i.postMessage({points:e,options:t})});var tL="1.8.5";const Rp={showRecticle:"showReticle",recticleColor:"reticleColor"},Op=e=>{Object.keys(e).filter(t=>Rp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${Rp[t]}" instead.`),e[Rp[t]]=e[t],delete e[t]})},Mr=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>P_.has(e)?"valueZ":N_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Pp=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},nL=(e={})=>{const t=fb({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Op(e);let{renderer:o,backgroundColor:a=kC,backgroundImage:l=zC,canvas:u=document.createElement("canvas"),colorBy:f=uu,deselectOnDblClick:m=HC,deselectOnEscape:g=WC,lassoColor:d=iC,lassoLineWidth:T=oC,lassoMinDelay:x=lC,lassoMinDist:O=sC,lassoClearEvent:M=uC,lassoInitiator:p=aC,lassoInitiatorParentElement:w=document.body,lassoOnLongPress:C=cC,lassoLongPressTime:G=Ud,lassoLongPressAfterEffectTime:q=Vd,lassoLongPressEffectDelay:oe=Hd,lassoLongPressRevertEffectTime:we=Wd,keyMap:ue=hC,mouseMode:ut=tC,showReticle:Ue=UC,reticleColor:ge=VC,pointColor:Xe=OC,pointColorActive:Ke=PC,pointColorHover:We=NC,showPointConnections:Lt=XC,pointConnectionColor:gt=IC,pointConnectionColorActive:dt=DC,pointConnectionColorHover:_e=MC,pointConnectionColorBy:De=wp,pointConnectionOpacity:Fe=wC,pointConnectionOpacityBy:ae=_p,pointConnectionOpacityActive:Qe=TC,pointConnectionSize:it=_C,pointConnectionSizeActive:Dt=SC,pointConnectionSizeBy:Wt=Ep,pointConnectionMaxIntPointsPerSegment:Xt=YC,pointConnectionTolerance:Qt=QC,pointSize:Pt=yC,pointSizeSelected:Ft=xC,pointSizeMouseDetection:pn=KC,pointOutlineWidth:Ln=EC,opacity:Nt=gi,opacityBy:an=Sp,opacityByDensityFill:yt=bC,opacityInactiveMax:xt=LC,opacityInactiveScale:_t=RC,sizeBy:St=xp,height:Ct=vC,width:zt=pC}=e,sn=zt===gi?1:zt,jn=Ct===gi?1:Ct;const{performanceMode:Ur=qC,opacityByDensityDebounceTime:v=CC}=e;o||(o=m2({regl:e.regl,gamma:e.gamma})),a=ur(a,!0),d=ur(d,!0),ge=ur(ge,!0);let At=!1,Mt=E1(a),Ne,Ht,pt=!1,je=null,Z=[0,0],nt=-1,et=[];const Yt=new Set,tn=new Set;let Rt=!1;const vn=new Set;let kn=0,Vr=0,Or=!1,Si=[],Bn,Wi,Ia=e.aspectRatio||mC,Da,Xi,Yi,un,vr,is,zo,Uo,os,Ma=x1(ue),Qi,Vo,Ki,Fa=!1,vt=!0,wi=!1,ja;Xe=xo(Xe)?[...Xe]:[Xe],Ke=xo(Ke)?[...Ke]:[Ke],We=xo(We)?[...We]:[We],Xe=Xe.map(s=>ur(s,!0)),Ke=Ke.map(s=>ur(s,!0)),We=We.map(s=>ur(s,!0)),Nt=!Array.isArray(Nt)&&Number.isNaN(+Nt)?Xe[0][3]:Nt,Nt=go(Nt,yo,{minLength:1})?[...Nt]:[Nt],Pt=go(Pt,yo,{minLength:1})?[...Pt]:[Pt];let rc=yp/Pt[0];gt==="inherit"?gt=[...Xe]:(gt=xo(gt)?[...gt]:[gt],gt=gt.map(s=>ur(s,!0))),dt==="inherit"?dt=[...Ke]:(dt=xo(dt)?[...dt]:[dt],dt=dt.map(s=>ur(s,!0))),_e==="inherit"?_e=[...We]:(_e=xo(_e)?[..._e]:[_e],_e=_e.map(s=>ur(s,!0))),Fe==="inherit"?Fe=[...Nt]:Fe=go(Fe,yo,{minLength:1})?[...Fe]:[Fe],it==="inherit"?it=[...Pt]:it=go(it,yo,{minLength:1})?[...it]:[it],f=Mr(f,uu),an=Mr(an,Sp,{allowDensity:!0}),St=Mr(St,xp),De=Mr(De,wp,{allowSegment:!0}),ae=Mr(ae,_p,{allowSegment:!0}),Wt=Mr(Wt,Ep,{allowSegment:!0});let ri,ii,oi,ic,gr=0,as=0,Ho,ls,Wo,Ba,$a,Ga,za,Ti=!1,Xo=null,ss,us,oc=Ue,qi,Zi=0,Ua,Ji=0,cs=!1,or=!1,ai=!1,li=Sl,Ai=Sl,Rn,Pr=!1,In=e.xScale||null,gn=e.yScale||null,eo=0,Va=0,Ha=0,Wa=0;In&&(eo=In.domain()[0],Va=In.domain()[1]-In.domain()[0],In.range([0,sn])),gn&&(Ha=gn.domain()[0],Wa=gn.domain()[1]-gn.domain()[0],gn.range([jn,0]));const ac=s=>-1+s/sn*2,ar=s=>1+s/jn*-2,Zn=()=>[ac(i[0]),ar(i[1])],yr=(s,I)=>{const U=[s,I,1,1],le=P0(n,tr(n,Da,tr(n,Ne.view,Yi)));return md(U,U,le),U.slice(0,2)},lc=(s=0)=>{const I=ea(),le=(Vo[1]-Ki[1])/u.height;return(os*I+s)*le},fs=()=>Rt?Bn.points.filter((s,I)=>vn.has(I)):Bn.points,Xa=(s,I,U,le)=>{const Ae=Bn.range(s,I,U,le);return Rt?Ae.filter(Be=>vn.has(Be)):Ae},ds=()=>{const[s,I]=Zn(),[U,le]=yr(s,I),Ae=lc(4),Be=Xa(U-Ae,le-Ae,U+Ae,le+Ae);let He=Ae,ht=-1;return Be.forEach(jt=>{const[kt,yn]=Bn.points[jt],Ut=Tp(kt,yn,U,le);Ut<He&&(He=Ut,ht=jt)}),ht},_h=(s,I)=>{Si=s,Ht.setPoints(I),t.publish("lassoExtend",{coordinates:s})},Sh=s=>{const I=n2(s);if(!r2(I))return[];const U=Xa(...I),le=[];return U.forEach(Ae=>{u2(s,Bn.points[Ae])&&le.push(Ae)}),le},to=()=>{Si=[],Ht&&Ht.clear()},Yo=s=>s&&s.length>4,bi=(s,I)=>{if(is||!Lt||!Yo(Bn.points[s[0]]))return;const U=I===0,le=I===1?He=>tn.add(He):Ml,Ae=Object.keys(s.reduce((He,ht)=>{const jt=Bn.points[ht],yn=Array.isArray(jt[4])?jt[4][0]:jt[4];return He[yn]=!0,He},{})),Be=un.getData().opacities;Ae.filter(He=>!tn.has(+He)).forEach(He=>{const ht=vr[He][0],jt=vr[He][2],kt=vr[He][3],yn=ht*4+kt*2,Ut=yn+jt*2+4;Be.__original__===void 0&&(Be.__original__=Be.slice());for(let It=yn;It<Ut;It++)Be[It]=U?Be.__original__[It]:Qe;le(He)}),un.getBuffer().opacities.subdata(Be,0)},Ya=s=>[s%gr/gr+as,Math.floor(s/gr)/gr+as],wh=s=>Rt&&!vn.has(s),Qa=({preventEvent:s=!1}={})=>{M===k0&&to(),et.length&&(s||t.publish("deselect"),tn.clear(),bi(et,0),et=[],Yt.clear(),vt=!0)},no=(s,{merge:I=!1,preventEvent:U=!1}={})=>{const le=Array.isArray(s)?s:[s],Ae=[...et];if(I){if(et=Hb(et,le),Ae.length===et.length){vt=!0;return}}else{if(et&&et.length&&bi(et,0),Ae.length>0&&le.length===0){Qa({preventEvent:U});return}et=le}if(Ub(Ae,et)){vt=!0;return}const Be=[];Yt.clear(),tn.clear();for(let He=et.length-1;He>=0;He--){const ht=et[He];if(ht<0||ht>=kn||wh(ht)){et.splice(He,1);continue}Yt.add(ht),Be.push.apply(Be,Ya(ht))}ls({usage:"dynamic",type:"float",data:Be}),bi(et,1),U||t.publish("select",{points:et}),vt=!0},Qo=(s,{showReticleOnce:I=!1,preventEvent:U=!1}={})=>{let le=!1;if(s>=0&&s<kn){le=!0;const Ae=Rn,Be=s!==Rn;+Ae>=0&&Be&&!Yt.has(Ae)&&bi([Ae],0),Rn=s,Wo.subdata(Ya(s)),Yt.has(s)||bi([s],2),Be&&!U&&t.publish("pointover",Rn)}else le=+Rn>=0,le&&(Yt.has(Rn)||bi([Rn],0),U||t.publish("pointout",Rn)),Rn=void 0;le&&(vt=!0,wi=I)},hs=s=>{const I=u.getBoundingClientRect();return i[0]=s.clientX-I.left,i[1]=s.clientY-I.top,[...i]},Sn=D_(u,{onStart:()=>{Ne.config({isFixed:!0}),pt=!0,Or=!0,to(),nt>=0&&(clearTimeout(nt),nt=-1),t.publish("lassoStart")},onDraw:_h,onEnd:(s,I,{merge:U=!1}={})=>{Ne.config({isFixed:!1}),Si=[...s];const le=Sh(I);no(le,{merge:U}),t.publish("lassoEnd",{coordinates:Si}),M===zv&&to()},enableInitiator:p,initiatorParentElement:w,pointNorm:([s,I])=>yr(ac(s),ar(I))}),Ka=()=>ut===C_,Ko=(s,I)=>{switch(Ma[I]){case Vv:return s.altKey;case Hv:return s.metaKey;case R_:return s.ctrlKey;case O_:return s.metaKey;case Wv:return s.shiftKey;default:return!1}},sc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(I=>I===u),ms=s=>{!or||s.buttons!==1||(pt=!0,je=performance.now(),Z=hs(s),Or=Ka()||Ko(s,Uv),!Or&&C&&(Sn.showLongPressIndicator(s.clientX,s.clientY,{time:G,extraTime:q,delay:oe}),nt=setTimeout(()=>{nt=-1,Or=!0},G)))},ps=s=>{or&&(pt=!1,nt>=0&&(clearTimeout(nt),nt=-1),Or&&(s.preventDefault(),Or=!1,Sn.end({merge:Ko(s,Yd)})),C&&Sn.hideLongPressIndicator({time:we}))},qa=s=>{if(!or)return;s.preventDefault();const I=hs(s);if(Tp(...I,...Z)>=O)return;const U=performance.now()-je;if(!p||U<JC){const le=ds();le>=0?(et.length&&M===k0&&to(),no([le],{merge:Ko(s,Yd)})):Qi||(Qi=setTimeout(()=>{Qi=null,Sn.showInitiator(s)},ZC))}},Za=s=>{Sn.hideInitiator(),Qi&&(clearTimeout(Qi),Qi=null),m&&(s.preventDefault(),Qa())},Hr=s=>{if(ai||(Pr=sc(s),ai=!0),!or||!Pr&&!pt)return;const I=hs(s),le=Tp(...I,...Z)>=O;Pr&&!Or&&Qo(ds()),Or?(s.preventDefault(),Sn.extend(s,!0)):pt&&C&&le&&Sn.hideLongPressIndicator({time:we}),nt>=0&&le&&(clearTimeout(nt),nt=-1),pt&&(vt=!0)},qo=()=>{Rn=void 0,Pr=!1,ai=!1,or&&(+Rn>=0&&!Yt.has(Rn)&&bi([Rn],0),ps(),vt=!0)},Ja=()=>{const s=Math.max(Pt.length,Nt.length);Ji=Math.max(2,Math.ceil(Math.sqrt(s)));const I=new Float32Array(Ji**2*4);for(let U=0;U<s;U++){I[U*4]=Pt[U]||0,I[U*4+1]=Math.min(1,Nt[U]||0);const le=Number((Ke[U]||Ke[0])[3]);I[U*4+2]=Math.min(1,Number.isNaN(le)?1:le);const Ae=Number((We[U]||We[0])[3]);I[U*4+3]=Math.min(1,Number.isNaN(Ae)?1:Ae)}return o.regl.texture({data:I,shape:[Ji,Ji,4],type:"float"})},vs=(s=Xe,I=Ke,U=We)=>{const le=s.length,Ae=I.length,Be=U.length,He=[];if(le===Ae&&Ae===Be)for(let ht=0;ht<le;ht++)He.push(s[ht],I[ht],U[ht],a);else for(let ht=0;ht<le;ht++){const jt=[s[ht][0],s[ht][1],s[ht][2],1],kt=f===uu?I[0]:jt,yn=f===uu?U[0]:jt;He.push(s[ht],kt,yn,a)}return He},gs=()=>{const s=vs(),I=s.length;Zi=Math.max(2,Math.ceil(Math.sqrt(I)));const U=new Float32Array(Zi**2*4);return s.forEach((le,Ae)=>{U[Ae*4]=le[0],U[Ae*4+1]=le[1],U[Ae*4+2]=le[2],U[Ae*4+3]=le[3]}),o.regl.texture({data:U,shape:[Zi,Zi,4],type:"float"})},Th=(s,I)=>{Xi[0]=s/Wi,Xi[5]=I},ys=()=>{Wi=sn/jn,Da=hd([],[1/Wi,1,1]),Xi=hd([],[1/Wi,1,1]),Yi=hd([],[Ia,1,1])},Ah=s=>{+s<=0||(Ia=s)},xs=(s,I)=>U=>{if(!U||!U.length)return;const Ae=[...s()];let Be=xo(U)?U:[U];Be=Be.map(He=>ur(He,!0)),qi&&qi.destroy();try{I(Be),qi=gs()}catch{console.error("Invalid colors. Switching back to default colors."),I(Ae),qi=gs()}},bh=xs(()=>Xe,s=>{Xe=s}),Ch=xs(()=>Ke,s=>{Ke=s}),si=xs(()=>We,s=>{We=s}),Lh=()=>{const s=yr(-1,-1),I=yr(1,1),U=(s[0]+1)/2,le=(I[0]+1)/2,Ae=(s[1]+1)/2,Be=(I[1]+1)/2,He=[eo+U*Va,eo+le*Va],ht=[Ha+Ae*Wa,Ha+Be*Wa];return[He,ht]},Ci=()=>{if(!In&&!gn)return;const[s,I]=Lh();In&&In.domain(s),gn&&gn.domain(I)},Li=s=>{jn=Math.max(1,s),u.height=Math.floor(jn*window.devicePixelRatio),gn&&(gn.range([jn,0]),Ci())},Rh=s=>{if(s===gi){Ct=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&Li(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Ct=+s,Li(Ct),u.style.height=`${Ct}px`)},ui=()=>{os=pn,pn===gi&&(os=Array.isArray(Pt)?Vb(Pt):Pt)},uc=s=>{go(s,yo,{minLength:1})&&(Pt=[...s]),Vf(+s)&&(Pt=[+s]),rc=yp/Pt[0],Ua=Ja(),ui()},io=s=>{!+s||+s<0||(Ft=+s)},cc=s=>{!+s||+s<0||(Ln=+s)},Wr=s=>{sn=Math.max(1,s),u.width=Math.floor(sn*window.devicePixelRatio),In&&(In.range([0,sn]),Ci())},Es=s=>{if(s===gi){zt=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&Wr(u.getBoundingClientRect().width)});return}!+s||+s<=0||(zt=+s,Wr(zt),u.style.width=`${sn}px`)},Oh=s=>{go(s,yo,{minLength:1})&&(Nt=[...s]),Vf(+s)&&(Nt=[+s]),Ua=Ja()},_s=s=>{switch(s){case"valueZ":return li;case"valueW":return Ai;default:return null}},Ss=(s,I)=>{switch(s){case pi:return U=>Math.round(U*(I.length-1));case Sl:default:return Ml}},fc=s=>{f=Mr(s,uu)},Ph=s=>{an=Mr(s,Sp,{allowDensity:!0})},Nh=s=>{St=Mr(s,xp)},dc=s=>{De=Mr(s,wp,{allowSegment:!0})},qt=s=>{ae=Mr(s,_p,{allowSegment:!0})},hc=s=>{Wt=Mr(s,Ep,{allowSegment:!0})},kh=()=>[u.width,u.height],Nr=()=>l,ws=()=>qi,el=()=>Zi,Ri=()=>.5/Zi,Ts=()=>window.devicePixelRatio,tl=()=>Ho,Oi=()=>ls,nl=()=>Ua,mc=()=>Ji,As=()=>.5/Ji,bs=()=>0,Ih=()=>oi||ri,Dh=()=>gr,Mh=()=>.5/gr,pc=()=>Xi,rl=()=>Ne.view,Zo=()=>Yi,Jo=()=>tr(r,Xi,tr(r,Ne.view,Yi)),ea=()=>Ne.scaling[0]>1?Math.asinh(Hf(1,Ne.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:Hf(rc,Ne.scaling[0])*window.devicePixelRatio,oo=()=>Rt?vn.size:kn,Pi=()=>et.length,Cs=()=>Pi()>0?xt:1,Ls=()=>Pi()>0?_t:1,Rs=()=>+(f==="valueZ"),vc=()=>+(f==="valueW"),gc=()=>+(an==="valueZ"),yc=()=>+(an==="valueW"),xc=()=>+(an==="density"),Ec=()=>+(St==="valueZ"),_c=()=>+(St==="valueW"),Sc=()=>f==="valueZ"?li===pi?Xe.length-1:1:Ai===pi?Xe.length-1:1,wc=()=>an==="valueZ"?li===pi?Nt.length-1:1:Ai===pi?Nt.length-1:1,ao=()=>St==="valueZ"?li===pi?Pt.length-1:1:Ai===pi?Pt.length-1:1,Os=s=>{if(an!=="density")return 1;const I=ea(),U=Pt[0]*I,le=2/(2/Ne.view[0])*(2/(2/Ne.view[5])),Ae=s.viewportHeight,Be=s.viewportWidth;let He=yt*Be*Ae/(Vr*U*U)*y1(1,le);He*=Ur?1:1/(.25*Math.PI);const ht=Hf(yp,U)+.5;return He*=(U/ht)**2,y1(1,Hf(0,He))},Ps=o.regl({framebuffer:()=>ic,vert:Z2,frag:q2,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>ii,endStateTex:()=>ri,t:(s,I)=>I.t},count:3}),xr=(s,I,U,le=Kb,Ae=Cs,Be=Ls)=>o.regl({frag:Ur?Q2:Y2,vert:K2(le),blend:{enable:!Ur,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:U,size:2}},uniforms:{resolution:kh,modelViewProjection:Jo,devicePixelRatio:Ts,pointScale:ea,encodingTex:nl,encodingTexRes:mc,encodingTexEps:As,pointOpacityMax:Ae,pointOpacityScale:Be,pointSizeExtra:s,globalState:le,colorTex:ws,colorTexRes:el,colorTexEps:Ri,stateTex:Ih,stateTexRes:Dh,stateTexEps:Mh,isColoredByZ:Rs,isColoredByW:vc,isOpacityByZ:gc,isOpacityByW:yc,isOpacityByDensity:xc,isSizedByZ:Ec,isSizedByW:_c,colorMultiplicator:Sc,opacityMultiplicator:wc,opacityDensity:Os,sizeMultiplicator:ao,numColorStates:Zb},count:I,primitive:"points"}),Fh=xr(bs,oo,tl),jh=xr(bs,()=>1,()=>Wo,qb,()=>1,()=>1),Bh=xr(()=>(Ft+Ln*2)*window.devicePixelRatio,Pi,Oi,gp,()=>1,()=>1),Ns=xr(()=>(Ft+Ln)*window.devicePixelRatio,Pi,Oi,f1,()=>1,()=>1),$h=xr(()=>Ft*window.devicePixelRatio,Pi,Oi,gp,()=>1,()=>1),Gh=()=>{Bh(),Ns(),$h()},zh=o.regl({frag:W2,vert:X2,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:Jo,texture:Nr},count:6}),ks=o.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>Si},uniforms:{modelViewProjection:Jo,color:()=>d},elements:()=>Array.from({length:Si.length-2},(s,I)=>[0,I+1,I+2])}),Uh=()=>{if(!(Rn>=0))return;const[s,I]=Bn.points[Rn].slice(0,2),U=[s,I,0,1];tr(n,Xi,tr(n,Ne.view,Yi)),md(U,U,n),zo.setPoints([-1,U[1],1,U[1]]),Uo.setPoints([U[0],1,U[0],-1]),zo.draw(),Uo.draw(),xr(()=>(Ft+Ln*2)*window.devicePixelRatio,()=>1,Wo,gp)(),xr(()=>(Ft+Ln)*window.devicePixelRatio,()=>1,Wo,f1)()},il=s=>{const I=new Float32Array(s*2);let U=0;for(let le=0;le<s;++le){const Ae=Ya(le);I[U]=Ae[0],I[U+1]=Ae[1],U+=2}return I},Is=(s,I={})=>{const U=s.length;gr=Math.max(2,Math.ceil(Math.sqrt(U))),as=.5/gr;const le=new Float32Array(gr**2*4);let Ae=!0,Be=!0,He=0,ht=0,jt=0;for(let kt=0;kt<U;++kt)He=kt*4,le[He]=s[kt][0],le[He+1]=s[kt][1],ht=s[kt][2]||0,jt=s[kt][3]||0,le[He+2]=ht,le[He+3]=jt,Ae&&(Ae=Number.isInteger(ht)),Be&&(Be=Number.isInteger(jt));return I.z&&m1.includes(I.z)?li=I.z:li=Ae?Sl:pi,I.w&&m1.includes(I.w)?Ai=I.w:Ai=Be?Sl:pi,o.regl.texture({data:le,shape:[gr,gr,4],type:"float"})},Tc=(s,I={})=>{if(!ri)return!1;if(Ti){const U=ii;ii=oi,U.destroy()}else ii=ri;return oi=Is(s,I),ic=o.regl.framebuffer({color:oi,depth:!1,stencil:!1}),ri=void 0,!0},Ds=()=>!!(ii&&oi),Vh=()=>{ii&&(ii.destroy(),ii=void 0),oi&&(oi.destroy(),oi=void 0)},ta=(s,I={})=>{or=!1,kn=s.length,Vr=kn,ri&&ri.destroy(),ri=Is(s,I),Ho({usage:"static",type:"float",data:il(kn)}),Bn=new Rb(s,U=>U[0],U=>U[1],16),or=!0},Ac=(s,I)=>{Ba=Ne.target,$a=s,Ga=Ne.distance[0],za=I},Hh=()=>Ba!==void 0&&$a!==void 0&&Ga!==void 0&&za!==void 0,Wh=()=>{Ba=void 0,$a=void 0,Ga=void 0,za=void 0},Xh=s=>{const I=De==="inherit"?f:De;if(I==="segment"){const U=gt.length-1;return U<1?[]:s.reduce((le,Ae,Be)=>{let He=0;const ht=[];for(let kt=2;kt<Ae.length;kt+=2){const yn=Math.sqrt((Ae[kt-2]-Ae[kt])**2+(Ae[kt-1]-Ae[kt+1])**2);ht.push(yn),He+=yn}le[Be]=[0];let jt=0;for(let kt=0;kt<Ae.length/2-1;kt++)jt+=ht[kt],le[Be].push(Math.floor(jt/He*U)*4);return le},[])}if(I){const U=Pp(I),le=Ss(_s(I),De==="inherit"?Xe:gt);return vr.reduce((Ae,[Be,He])=>(Ae[Be]=le(He[U])*4,Ae),[])}return Array(vr.length).fill(0)},Yh=()=>{const s=ae==="inherit"?an:ae;if(s==="segment"){const I=Fe.length-1;return I<1?[]:vr.reduce((U,[le,Ae,Be])=>(U[le]=u1(Be,He=>Fe[Math.floor(He/(Be-1)*I)]),U),[])}if(s){const I=Pp(s),U=ae==="inherit"?Nt:Fe,le=Ss(_s(s),U);return vr.reduce((Ae,[Be,He])=>(Ae[Be]=U[le(He[I])],Ae),[])}},Qh=()=>{const s=Wt==="inherit"?St:Wt;if(s==="segment"){const I=it.length-1;return I<1?[]:vr.reduce((U,[le,Ae,Be])=>(U[le]=u1(Be,He=>it[Math.floor(He/(Be-1)*I)]),U),[])}if(s){const I=Pp(s),U=Wt==="inherit"?Pt:it,le=Ss(_s(s),U);return vr.reduce((Ae,[Be,He])=>(Ae[Be]=U[le(He[I])],Ae),[])}},Kh=s=>{vr=[];let I=0;Object.keys(s).forEach((U,le)=>{vr[U]=[le,s[U].reference,s[U].length/2,I],I+=s[U].length/2})},lo=s=>new Promise(I=>{un.setPoints([]),!s||!s.length?I():(is=!0,eL(s,{maxIntPointsPerSegment:Xt,tolerance:Qt}).then(U=>{Kh(U);const le=Object.values(U);un.setPoints(le.length===1?le[0]:le,{colorIndices:Xh(le),opacities:Yh(),widths:Qh()}),is=!1,I()}))}),na=({preventEvent:s=!1}={})=>(Rt=!1,vn.clear(),Ho.subdata(il(kn)),new Promise(I=>{const U=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),I()},1),vt=!0};Lt||Yo(Bn.points[0])?lo(fs()).then(()=>{s||t.publish("pointConnectionsDraw"),U()}):U()})),bc=(s,{preventEvent:I=!1}={})=>{const U=Array.isArray(s)?s:[s];Rt=!0,vn.clear();const le=[],Ae=[];for(let Be=U.length-1;Be>=0;Be--){const He=U[Be];if(He<0||He>=kn){U.splice(Be,1);continue}vn.add(He),le.push.apply(le,Ya(He)),Yt.has(He)&&Ae.push(He)}return Ho.subdata(le),no(Ae,{preventEvent:I}),vn.has(Rn)||Qo(-1,{preventEvent:I}),new Promise(Be=>{const He=()=>{t.subscribe("draw",()=>{I||t.publish("filter",{points:U}),Be()},1),vt=!0};Lt||Yo(Bn.points[0])?lo(fs()).then(()=>{I||t.publish("pointConnectionsDraw"),no(Ae,{preventEvent:I}),He()}):He()})},ra=()=>Xa(Ki[0],Ki[1],Vo[0],Vo[1]),so=A_(()=>{Vr=ra().length},v),Cc=s=>{const[I,U]=Ba,[le,Ae]=$a,Be=1-s,He=I*Be+le*s,ht=U*Be+Ae*s,jt=Ga*Be+za*s;Ne.lookAt([He,ht],jt)},Lc=()=>Ds(),Rc=()=>Hh(),Oc=(s,I)=>{Xo||(Xo=performance.now());const U=performance.now()-Xo,le=h2(I(U/s),0,1);return Lc()&&Ps({t:le}),Rc()&&Cc(le),U<s},Pc=()=>{Ti=!1,Xo=null,ss=void 0,us=void 0,Ue=oc,Vh(),Wh(),t.publish("transitionEnd")},ol=({duration:s=500,easing:I=h1})=>{Ti&&t.publish("transitionEnd"),Ti=!0,Xo=null,ss=s,us=I0(I)?nC[I]||h1:I,oc=Ue,Ue=!1,t.publish("transitionStart")},qh=s=>new Promise((I,U)=>{if(!s||Array.isArray(s))I(s);else{const le=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,Ae=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Ut=>s.x[Ut]),Be=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Ut=>s.y[Ut]),He=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Ut=>s.line[Ut]),ht=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Ut=>s.lineOrder[Ut]),jt=Object.keys(s),kt=(()=>{const Ut=jt.find(It=>P_.has(It));return Ut&&(Array.isArray(s[Ut])||ArrayBuffer.isView(s[Ut]))&&(It=>s[Ut][It])})(),yn=(()=>{const Ut=jt.find(It=>N_.has(It));return Ut&&(Array.isArray(s[Ut])||ArrayBuffer.isView(s[Ut]))&&(It=>s[Ut][It])})();Ae&&Be&&kt&&yn&&He&&ht?I(s.x.map((Ut,It)=>[Ut,Be(It),kt(It),yn(It),He(It),ht(It)])):Ae&&Be&&kt&&yn&&He?I(Array.from({length:le},(Ut,It)=>[Ae(It),Be(It),kt(It),yn(It),He(It)])):Ae&&Be&&kt&&yn?I(Array.from({length:le},(Ut,It)=>[Ae(It),Be(It),kt(It),yn(It)])):Ae&&Be&&kt?I(Array.from({length:le},(Ut,It)=>[Ae(It),Be(It),kt(It)])):Ae&&Be?I(Array.from({length:le},(Ut,It)=>[Ae(It),Be(It)])):U(new Error("You need to specify at least x and y"))}}),uo=(s,I={})=>At?Promise.reject(new Error("The instance was already destroyed")):qh(s).then(U=>new Promise(le=>{if(At){le();return}let Ae=!1;(!I.preventFilterReset||(U==null?void 0:U.length)!==kn)&&(Rt=!1,vn.clear());const Be=U&&Yo(U[0])&&(Lt||I.showPointConnectionsOnce),{zDataType:He,wDataType:ht}=I;U&&(I.transition&&(U.length===kn?Ae=Tc(U,{z:He,w:ht}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),ta(U,{z:He,w:ht}),I.hover!==void 0&&Qo(I.hover,{preventEvent:!0}),I.select!==void 0&&no(I.select,{preventEvent:!0}),I.filter!==void 0&&bc(I.filter,{preventEvent:!0}),Be&&lo(U).then(()=>{t.publish("pointConnectionsDraw"),vt=!0,wi=I.showReticleOnce})),I.transition&&Ae?(Be?Promise.all([new Promise(jt=>{t.subscribe("transitionEnd",()=>{vt=!0,wi=I.showReticleOnce,jt()},1)}),new Promise(jt=>{t.subscribe("pointConnectionsDraw",jt,1)})]).then(le):t.subscribe("transitionEnd",()=>{vt=!0,wi=I.showReticleOnce,le()},1),ol({duration:I.transitionDuration,easing:I.transitionEasing})):(Be?Promise.all([new Promise(jt=>{t.subscribe("draw",jt,1)}),new Promise(jt=>{t.subscribe("pointConnectionsDraw",jt,1)})]).then(le):t.subscribe("draw",le,1),vt=!0,wi=I.showReticleOnce)})),wn=s=>(...I)=>{const U=s(...I);return vt=!0,U},Nc=s=>{let I=1/0,U=-1/0,le=1/0,Ae=-1/0;for(let Be=0;Be<s.length;Be++){const[He,ht]=Bn.points[s[Be]];I=Math.min(I,He),U=Math.max(U,He),le=Math.min(le,ht),Ae=Math.max(Ae,ht)}return{x:I,y:le,width:U-I,height:Ae-le}},Ms=(s,I={})=>new Promise(U=>{const le=[s.x+s.width/2,s.y+s.height/2],Ae=2*Math.atan(1),Be=s.height*Wi>s.width?s.height/2/Math.tan(Ae/2):s.width/2/Math.tan(Ae*Wi/2);I.transition?(Ne.config({isFixed:!0}),Ac(le,Be),t.subscribe("transitionEnd",()=>{U(),Ne.config({isFixed:!1})},1),ol({duration:I.transitionDuration,easing:I.transitionEasing})):(Ne.lookAt(le,Be),t.subscribe("draw",U,1),vt=!0)}),Ni=(s,I={})=>{if(!or)return Promise.reject(new Error(p1));const U=Nc(s),le=U.x+U.width/2,Ae=U.y+U.height/2,Be=lc(),He=1+(I.padding||0),ht=Math.max(U.width,Be)*He,jt=Math.max(U.height,Be)*He,kt=le-ht/2,yn=Ae-jt/2;return Ms({x:kt,y:yn,width:ht,height:jt},I)},Fs=(s,I,U={})=>new Promise(le=>{U.transition?(Ne.config({isFixed:!0}),Ac(s,I),t.subscribe("transitionEnd",()=>{le(),Ne.config({isFixed:!1})},1),ol({duration:U.transitionDuration,easing:U.transitionEasing})):(Ne.lookAt(s,I),t.subscribe("draw",le,1),vt=!0)}),kc=(s={})=>Fs([0,0],1,s),Zh=s=>{if(!or)throw new Error(p1);const I=Bn.points[s];if(!I)return;const U=[I[0],I[1],0,1];tr(n,Da,tr(n,Ne.view,Yi)),md(U,U,n);const le=sn*(U[0]+1)/2,Ae=jn*(.5-U[1]/2);return[le,Ae]},js=()=>{un.setStyle({color:vs(gt,dt,_e),opacity:Fe===null?null:Fe[0],width:it[0]})},Ic=()=>{const s=Math.round(Mt)>.5?0:255;Sn.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,Sn.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Dc=()=>{const s=Math.round(Mt)>.5?0:255;Sn.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,Sn.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const I=d.map(U=>Math.round(U*255));Sn.longPressIndicator.dataset.activeColor=`rgb(${I[0]}, ${I[1]}, ${I[2]})`},Bs=s=>{s&&(a=ur(s,!0),Mt=E1(a),Ic(),Dc())},Mc=s=>{s?I0(s)?g1(o.regl,s).then(I=>{l=I,vt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},Jh=s=>{s>0&&Ne.lookAt(Ne.target,s,Ne.rotation)},Fc=s=>{s!==null&&Ne.lookAt(Ne.target,Ne.distance[0],s)},jc=s=>{s&&Ne.lookAt(s,Ne.distance[0],Ne.rotation)},Bc=s=>{s&&Ne.setView(s)},al=s=>{if(!s)return;d=ur(s,!0),Ht.setStyle({color:d});const I=d.map(U=>Math.round(U*255));Sn.longPressIndicator.dataset.activeColor=`rgb(${I[0]}, ${I[1]}, ${I[2]})`},em=s=>{Number.isNaN(+s)||+s<1||(T=+s,Ht.setStyle({width:T}))},ci=s=>{+s&&(x=+s,Sn.set({minDelay:x}))},ll=s=>{+s&&(O=+s,Sn.set({minDist:O}))},$c=s=>{M=v1(rC,M)(s)},Gc=s=>{p=!!s,Sn.set({enableInitiator:p})},zc=s=>{w=s,Sn.set({startInitiatorParentElement:w})},Uc=s=>{C=!!s},Vc=s=>{G=Number(s)},Hc=s=>{q=Number(s)},Wc=s=>{oe=Number(s)},Xc=s=>{we=Number(s)},Yc=s=>{ue=Object.entries(s).reduce((I,[U,le])=>(dC.includes(U)&&fC.includes(le)&&(I[U]=le),I),{}),Ma=x1(ue),Ma[Xd]?Ne.config({isRotate:!0,mouseDownMoveModKey:Ma[Xd]}):Ne.config({isRotate:!1})},_r=s=>{ut=v1(eC,Gv)(s),Ne.config({defaultMouseDownMoveAction:ut===L_?"rotate":"pan"})},Qc=s=>{s!==null&&(Ue=s)},tm=s=>{s&&(ge=ur(s,!0),zo.setStyle({color:ge}),Uo.setStyle({color:ge}))},Xr=s=>{s&&(In=s,eo=s.domain()[0],Va=s?s.domain()[1]-s.domain()[0]:0,In.range([0,sn]),Ci())},$s=s=>{s&&(gn=s,Ha=gn.domain()[0],Wa=gn?gn.domain()[1]-gn.domain()[0]:0,gn.range([jn,0]),Ci())},ki=s=>{m=!!s},sl=s=>{g=!!s},Kc=s=>{Lt=!!s,Lt?Yo(Bn.points[0])&&lo(fs()).then(()=>{t.publish("pointConnectionsDraw"),vt=!0}):lo()},ul=(s,I)=>U=>{if(U==="inherit")s([...I()]);else{const le=xo(U)?U:[U];s(le.map(Ae=>ur(Ae,!0)))}js()},qc=ul(s=>{gt=s},()=>Xe),Zc=ul(s=>{dt=s},()=>Ke),Jc=ul(s=>{_e=s},()=>We),nm=s=>{go(s,yo,{minLength:1})&&(Fe=[...s]),Vf(+s)&&(Fe=[+s]),gt=gt.map(I=>(I[3]=Number.isNaN(+Fe[0])?I[3]:+Fe[0],I)),js()},rm=s=>{!Number.isNaN(+s)&&+s&&(Qe=+s)},im=s=>{go(s,yo,{minLength:1})&&(it=[...s]),Vf(+s)&&(it=[+s]),js()},om=s=>{!Number.isNaN(+s)&&+s&&(Dt=Math.max(0,s))},am=s=>{Xt=Math.max(0,s)},lm=s=>{Qt=Math.max(0,s)},sm=s=>{pn=s,ui()},ef=s=>{yt=+s},tf=s=>{xt=+s},um=s=>{_t=+s},cm=s=>{o.gamma=s},Gs=s=>{if(Op({property:!0}),s==="aspectRatio")return Ia;if(s==="background"||s==="backgroundColor")return a;if(s==="backgroundImage")return l;if(s==="camera")return Ne;if(s==="cameraTarget")return Ne.target;if(s==="cameraDistance")return Ne.distance[0];if(s==="cameraRotation")return Ne.rotation;if(s==="cameraView")return Ne.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return St;if(s==="deselectOnDblClick")return m;if(s==="deselectOnEscape")return g;if(s==="height")return Ct;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return T;if(s==="lassoMinDelay")return x;if(s==="lassoMinDist")return O;if(s==="lassoClearEvent")return M;if(s==="lassoInitiator")return p;if(s==="lassoInitiatorElement")return Sn.initiator;if(s==="lassoInitiatorParentElement")return w;if(s==="keyMap")return{...ue};if(s==="mouseMode")return ut;if(s==="opacity")return Nt.length===1?Nt[0]:Nt;if(s==="opacityBy")return an;if(s==="opacityByDensityFill")return yt;if(s==="opacityByDensityDebounceTime")return v;if(s==="opacityInactiveMax")return xt;if(s==="opacityInactiveScale")return _t;if(s==="points")return Bn.points;if(s==="hoveredPoint")return Rn;if(s==="selectedPoints")return[...et];if(s==="filteredPoints")return Rt?Array.from(vn):Array.from({length:Bn.points.length},(I,U)=>U);if(s==="pointsInView")return ra();if(s==="pointColor")return Xe.length===1?Xe[0]:Xe;if(s==="pointColorActive")return Ke.length===1?Ke[0]:Ke;if(s==="pointColorHover")return We.length===1?We[0]:We;if(s==="pointOutlineWidth")return Ln;if(s==="pointSize")return Pt.length===1?Pt[0]:Pt;if(s==="pointSizeSelected")return Ft;if(s==="pointSizeMouseDetection")return pn;if(s==="showPointConnections")return Lt;if(s==="pointConnectionColor")return gt.length===1?gt[0]:gt;if(s==="pointConnectionColorActive")return dt.length===1?dt[0]:dt;if(s==="pointConnectionColorHover")return _e.length===1?_e[0]:_e;if(s==="pointConnectionColorBy")return De;if(s==="pointConnectionOpacity")return Fe.length===1?Fe[0]:Fe;if(s==="pointConnectionOpacityBy")return ae;if(s==="pointConnectionOpacityActive")return Qe;if(s==="pointConnectionSize")return it.length===1?it[0]:it;if(s==="pointConnectionSizeActive")return Dt;if(s==="pointConnectionSizeBy")return Wt;if(s==="pointConnectionMaxIntPointsPerSegment")return Xt;if(s==="pointConnectionTolerance")return Qt;if(s==="reticleColor")return ge;if(s==="regl")return o.regl;if(s==="showReticle")return Ue;if(s==="version")return tL;if(s==="width")return zt;if(s==="xScale")return In;if(s==="yScale")return gn;if(s==="performanceMode")return Ur;if(s==="gamma")return o.gamma;if(s==="renderer")return o;if(s==="isDestroyed")return At;if(s==="isPointsDrawn")return or;if(s==="isPointsFiltered")return Rt;if(s==="zDataType")return li;if(s==="wDataType")return Ai},ia=(s={})=>(Op(s),(s.backgroundColor!==void 0||s.background!==void 0)&&Bs(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Mc(s.backgroundImage),s.cameraTarget!==void 0&&jc(s.cameraTarget),s.cameraDistance!==void 0&&Jh(s.cameraDistance),s.cameraRotation!==void 0&&Fc(s.cameraRotation),s.cameraView!==void 0&&Bc(s.cameraView),s.colorBy!==void 0&&fc(s.colorBy),s.pointColor!==void 0&&bh(s.pointColor),s.pointColorActive!==void 0&&Ch(s.pointColorActive),s.pointColorHover!==void 0&&si(s.pointColorHover),s.pointSize!==void 0&&uc(s.pointSize),s.pointSizeSelected!==void 0&&io(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&sm(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Nh(s.sizeBy),s.opacity!==void 0&&Oh(s.opacity),s.showPointConnections!==void 0&&Kc(s.showPointConnections),s.pointConnectionColor!==void 0&&qc(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&Zc(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&Jc(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&dc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&qt(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&nm(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&rm(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&im(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&om(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&hc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&am(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&lm(s.pointConnectionTolerance),s.opacityBy!==void 0&&Ph(s.opacityBy),s.lassoColor!==void 0&&al(s.lassoColor),s.lassoLineWidth!==void 0&&em(s.lassoLineWidth),s.lassoMinDelay!==void 0&&ci(s.lassoMinDelay),s.lassoMinDist!==void 0&&ll(s.lassoMinDist),s.lassoClearEvent!==void 0&&$c(s.lassoClearEvent),s.lassoInitiator!==void 0&&Gc(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&zc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&Uc(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&Vc(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&Hc(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&Wc(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&Xc(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&Yc(s.keyMap),s.mouseMode!==void 0&&_r(s.mouseMode),s.showReticle!==void 0&&Qc(s.showReticle),s.reticleColor!==void 0&&tm(s.reticleColor),s.pointOutlineWidth!==void 0&&cc(s.pointOutlineWidth),s.height!==void 0&&Rh(s.height),s.width!==void 0&&Es(s.width),s.aspectRatio!==void 0&&Ah(s.aspectRatio),s.xScale!==void 0&&Xr(s.xScale),s.yScale!==void 0&&$s(s.yScale),s.deselectOnDblClick!==void 0&&ki(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&sl(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&ef(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&tf(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&um(s.opacityInactiveScale),s.gamma!==void 0&&cm(s.gamma),new Promise(I=>{window.requestAnimationFrame(()=>{u&&(ys(),Ne.refresh(),o.refresh(),vt=!0,I())})})),fm=(s,{preventEvent:I=!1}={})=>{Bc(s),vt=!0,Fa=I},nf=()=>{Ne||(Ne=Tb(u,{isPanInverted:[!1,!0]})),e.cameraView?Ne.setView(i1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?Ne.lookAt([...e.cameraTarget||FC],e.cameraDistance||jC,e.cameraRotation||BC):Ne.setView(i1($C)),Vo=yr(1,1),Ki=yr(-1,-1)},dm=({preventEvent:s=!1}={})=>{nf(),Ci(),!s&&t.publish("view",{view:Ne.view,camera:Ne,xScale:In,yScale:gn})},rf=({key:s})=>{switch(s){case"Escape":g&&Qa();break}},of=()=>{Pr=!0,ai=!0},zs=()=>{Qo(),Pr=!1,ai=!0,vt=!0},af=()=>{vt=!0},hm=()=>{ta([]),un.clear()},oa=()=>{Ne.refresh();const s=zt===gi,I=Ct===gi;if(s||I){const{width:U,height:le}=u.getBoundingClientRect();s&&Wr(U),I&&Li(le),ys(),vt=!0}},mm=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),pm=()=>{ys(),nf(),Ci(),Ht=Uf(o.regl,{color:d,width:T,is2d:!0}),un=Uf(o.regl,{color:gt,colorHover:_e,colorActive:dt,opacity:Fe===null?null:Fe[0],width:it[0],widthActive:Dt,is2d:!0}),zo=Uf(o.regl,{color:ge,width:1,is2d:!0}),Uo=Uf(o.regl,{color:ge,width:1,is2d:!0}),ui(),u.addEventListener("wheel",af),Ho=o.regl.buffer(),ls=o.regl.buffer(),Wo=o.regl.buffer({usage:"dynamic",type:"float",length:Jb*2}),qi=gs(),Ua=Ja();const s=ia({backgroundImage:l,width:zt,height:Ct,keyMap:ue});Ic(),Dc(),window.addEventListener("keyup",rf,!1),window.addEventListener("blur",qo,!1),window.addEventListener("mouseup",ps,!1),window.addEventListener("mousemove",Hr,!1),u.addEventListener("mousedown",ms,!1),u.addEventListener("mouseenter",of,!1),u.addEventListener("mouseleave",zs,!1),u.addEventListener("click",qa,!1),u.addEventListener("dblclick",Za,!1),"ResizeObserver"in window?(ja=new ResizeObserver(oa),ja.observe(u)):(window.addEventListener("resize",oa),window.addEventListener("orientationchange",oa)),s.then(()=>{t.publish("init")})},co=o.onFrame(()=>{cs=Ne.tick(),!(!or||!(vt||Ti))&&(Ti&&!Oc(ss,us)&&Pc(),cs&&(Vo=yr(1,1),Ki=yr(-1,-1),an==="density"&&so()),o.render(()=>{const s=u.width/o.canvas.width,I=u.height/o.canvas.height;Th(s,I),l&&l._reglType&&zh(),Si.length>2&&ks(),Ti||un.draw({projection:pc(),model:Zo(),view:rl()}),Fh(),!pt&&(Ue||wi)&&Uh(),Rn>=0&&jh(),et.length&&Gh(),Ht.draw({projection:pc(),model:Zo(),view:rl()})},u),cs&&(Ci(),Fa?Fa=!1:t.publish("view",{view:Ne.view,camera:Ne,xScale:In,yScale:gn})),vt=!1,wi=!1,t.publish("draw"))}),vm=()=>{vt=!0},gm=()=>{or=!1,At=!0,co(),window.removeEventListener("keyup",rf,!1),window.removeEventListener("blur",qo,!1),window.removeEventListener("mouseup",ps,!1),window.removeEventListener("mousemove",Hr,!1),u.removeEventListener("mousedown",ms,!1),u.removeEventListener("mouseenter",of,!1),u.removeEventListener("mouseleave",zs,!1),u.removeEventListener("click",qa,!1),u.removeEventListener("dblclick",Za,!1),u.removeEventListener("wheel",af,!1),ja?ja.disconnect():(window.removeEventListener("resize",oa),window.removeEventListener("orientationchange",oa)),u=void 0,Ne.dispose(),Ne=void 0,Ht.destroy(),Sn.destroy(),un.destroy(),zo.destroy(),Uo.destroy(),e.renderer||o.destroy(),t.publish("destroy"),t.clear()};return pm(),{get isSupported(){return o.isSupported},clear:wn(hm),createTextureFromUrl:(s,I=Xv)=>g1(o.regl,s,I),deselect:Qa,destroy:gm,draw:uo,filter:bc,get:Gs,getScreenPosition:Zh,hover:Qo,redraw:vm,refresh:o.refresh,reset:wn(dm),select:no,set:ia,export:mm,subscribe:t.subscribe,unfilter:na,unsubscribe:t.unsubscribe,view:fm,zoomToLocation:Fs,zoomToArea:Ms,zoomToPoints:Ni,zoomToOrigin:kc}};function pd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M_(e){let t,n,r;e.length!==2?(t=pd,n=(l,u)=>pd(e(l),u),r=(l,u)=>e(l)-u):(t=e===pd||e===rL?e:iL,n=e,r=e);function i(l,u,f=0,m=l.length){if(f<m){if(t(u,u)!==0)return m;do{const g=f+m>>>1;n(l[g],u)<0?f=g+1:m=g}while(f<m)}return f}function o(l,u,f=0,m=l.length){if(f<m){if(t(u,u)!==0)return m;do{const g=f+m>>>1;n(l[g],u)<=0?f=g+1:m=g}while(f<m)}return f}function a(l,u,f=0,m=l.length){const g=i(l,u,f,m-1);return g>f&&r(l[g-1],u)>-r(l[g],u)?g-1:g}return{left:i,center:a,right:o}}function iL(){return 0}function oL(e){return e===null?NaN:+e}const aL=M_(pd),lL=aL.right;M_(oL).center;const sL=lL,uL=Math.sqrt(50),cL=Math.sqrt(10),fL=Math.sqrt(2);function Kd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=uL?10:o>=cL?5:o>=fL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/a,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*a,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?Kd(e,t,n*2):[l,u,f]}function D0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?Kd(t,e,n):Kd(e,t,n);if(!(o>=i))return[];const l=o-i+1,u=new Array(l);if(r)if(a<0)for(let f=0;f<l;++f)u[f]=(o-f)/-a;else for(let f=0;f<l;++f)u[f]=(o-f)*a;else if(a<0)for(let f=0;f<l;++f)u[f]=(i+f)/-a;else for(let f=0;f<l;++f)u[f]=(i+f)*a;return u}function M0(e,t,n){return t=+t,e=+e,n=+n,Kd(e,t,n)[2]}function dL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?M0(t,e,n):M0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function F_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Yv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function j_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nc(){}var Hu=.7,qd=1/Hu,Vl="\\s*([+-]?\\d+)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hL=/^#([0-9a-f]{3,8})$/,mL=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),pL=new RegExp(`^rgb\\(${_i},${_i},${_i}\\)$`),vL=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${Wu}\\)$`),gL=new RegExp(`^rgba\\(${_i},${_i},${_i},${Wu}\\)$`),yL=new RegExp(`^hsl\\(${Wu},${_i},${_i}\\)$`),xL=new RegExp(`^hsla\\(${Wu},${_i},${_i},${Wu}\\)$`),S1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yv(nc,Xu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:w1,formatHex:w1,formatHex8:EL,formatHsl:_L,formatRgb:T1,toString:T1});function w1(){return this.rgb().formatHex()}function EL(){return this.rgb().formatHex8()}function _L(){return B_(this).formatHsl()}function T1(){return this.rgb().formatRgb()}function Xu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?A1(t):n===3?new dr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mL.exec(e))?new dr(t[1],t[2],t[3],1):(t=pL.exec(e))?new dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vL.exec(e))?Wf(t[1],t[2],t[3],t[4]):(t=gL.exec(e))?Wf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yL.exec(e))?L1(t[1],t[2]/100,t[3]/100,1):(t=xL.exec(e))?L1(t[1],t[2]/100,t[3]/100,t[4]):S1.hasOwnProperty(e)?A1(S1[e]):e==="transparent"?new dr(NaN,NaN,NaN,0):null}function A1(e){return new dr(e>>16&255,e>>8&255,e&255,1)}function Wf(e,t,n,r){return r<=0&&(e=t=n=NaN),new dr(e,t,n,r)}function SL(e){return e instanceof nc||(e=Xu(e)),e?(e=e.rgb(),new dr(e.r,e.g,e.b,e.opacity)):new dr}function F0(e,t,n,r){return arguments.length===1?SL(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Yv(dr,F0,j_(nc,{brighter(e){return e=e==null?qd:Math.pow(qd,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new dr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dr(wa(this.r),wa(this.g),wa(this.b),Zd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b1,formatHex:b1,formatHex8:wL,formatRgb:C1,toString:C1}));function b1(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}`}function wL(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}${Ea((isNaN(this.opacity)?1:this.opacity)*255)}`}function C1(){const e=Zd(this.opacity);return`${e===1?"rgb(":"rgba("}${wa(this.r)}, ${wa(this.g)}, ${wa(this.b)}${e===1?")":`, ${e})`}`}function Zd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ea(e){return e=wa(e),(e<16?"0":"")+e.toString(16)}function L1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jr(e,t,n,r)}function B_(e){if(e instanceof Jr)return new Jr(e.h,e.s,e.l,e.opacity);if(e instanceof nc||(e=Xu(e)),!e)return new Jr;if(e instanceof Jr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,u=(o+i)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=u<.5?o+i:2-o-i,a*=60):l=u>0&&u<1?0:a,new Jr(a,l,u,e.opacity)}function TL(e,t,n,r){return arguments.length===1?B_(e):new Jr(e,t,n,r??1)}function Jr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yv(Jr,TL,j_(nc,{brighter(e){return e=e==null?qd:Math.pow(qd,e),new Jr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hu:Math.pow(Hu,e),new Jr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new dr(Np(e>=240?e-240:e+120,i,r),Np(e,i,r),Np(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Jr(R1(this.h),Xf(this.s),Xf(this.l),Zd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zd(this.opacity);return`${e===1?"hsl(":"hsla("}${R1(this.h)}, ${Xf(this.s)*100}%, ${Xf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function R1(e){return e=(e||0)%360,e<0?e+360:e}function Xf(e){return Math.max(0,Math.min(1,e||0))}function Np(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Qv=e=>()=>e;function AL(e,t){return function(n){return e+n*t}}function bL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function CL(e){return(e=+e)==1?$_:function(t,n){return n-t?bL(t,n,e):Qv(isNaN(t)?n:t)}}function $_(e,t){var n=t-e;return n?AL(e,n):Qv(isNaN(e)?t:e)}const O1=function e(t){var n=CL(t);function r(i,o){var a=n((i=F0(i)).r,(o=F0(o)).r),l=n(i.g,o.g),u=n(i.b,o.b),f=$_(i.opacity,o.opacity);return function(m){return i.r=a(m),i.g=l(m),i.b=u(m),i.opacity=f(m),i+""}}return r.gamma=e,r}(1);function LL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function RL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Kv(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(l){for(a=0;a<r;++a)o[a]=i[a](l);return o}}function PL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Jd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function NL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Kv(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var j0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kp=new RegExp(j0.source,"g");function kL(e){return function(){return e}}function IL(e){return function(t){return e(t)+""}}function DL(e,t){var n=j0.lastIndex=kp.lastIndex=0,r,i,o,a=-1,l=[],u=[];for(e=e+"",t=t+"";(r=j0.exec(e))&&(i=kp.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:Jd(r,i)})),n=kp.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?IL(u[0].x):kL(t):(t=u.length,function(f){for(var m=0,g;m<t;++m)l[(g=u[m]).i]=g.x(f);return l.join("")})}function Kv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Qv(t):(n==="number"?Jd:n==="string"?(r=Xu(t))?(t=r,O1):DL:t instanceof Xu?O1:t instanceof Date?PL:RL(t)?LL:Array.isArray(t)?OL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NL:Jd)(e,t)}function ML(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function FL(e){return function(){return e}}function jL(e){return+e}var P1=[0,1];function Fl(e){return e}function B0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:FL(isNaN(t)?NaN:.5)}function BL(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function $L(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=B0(i,r),o=n(a,o)):(r=B0(r,i),o=n(o,a)),function(l){return o(r(l))}}function GL(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=B0(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(l){var u=sL(e,l,1,r)-1;return o[u](i[u](l))}}function G_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function z_(){var e=P1,t=P1,n=Kv,r,i,o,a=Fl,l,u,f;function m(){var d=Math.min(e.length,t.length);return a!==Fl&&(a=BL(e[0],e[d-1])),l=d>2?GL:$L,u=f=null,g}function g(d){return d==null||isNaN(d=+d)?o:(u||(u=l(e.map(r),t,n)))(r(a(d)))}return g.invert=function(d){return a(i((f||(f=l(t,e.map(r),Jd)))(d)))},g.domain=function(d){return arguments.length?(e=Array.from(d,jL),m()):e.slice()},g.range=function(d){return arguments.length?(t=Array.from(d),m()):t.slice()},g.rangeRound=function(d){return t=Array.from(d),n=ML,m()},g.clamp=function(d){return arguments.length?(a=d?!0:Fl,m()):a!==Fl},g.interpolate=function(d){return arguments.length?(n=d,m()):n},g.unknown=function(d){return arguments.length?(o=d,g):o},function(d,T){return r=d,i=T,m()}}function zL(){return z_()(Fl,Fl)}function UL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function eh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Zl(e){return e=eh(Math.abs(e)),e?e[1]:NaN}function VL(e,t){return function(n,r){for(var i=n.length,o=[],a=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[a=(a+1)%e.length];return o.reverse().join(t)}}function HL(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var WL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yu(e){if(!(t=WL.exec(e)))throw new Error("invalid format: "+e);var t;return new qv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yu.prototype=qv.prototype;function qv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XL(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var U_;function YL(e,t){var n=eh(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(U_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+eh(e,Math.max(0,t+o-1))[0]}function N1(e,t){var n=eh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const k1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>N1(e*100,t),r:N1,s:YL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I1(e){return e}var D1=Array.prototype.map,M1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function QL(e){var t=e.grouping===void 0||e.thousands===void 0?I1:VL(D1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?I1:HL(D1.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Yu(g);var d=g.fill,T=g.align,x=g.sign,O=g.symbol,M=g.zero,p=g.width,w=g.comma,C=g.precision,G=g.trim,q=g.type;q==="n"?(w=!0,q="g"):k1[q]||(C===void 0&&(C=12),G=!0,q="g"),(M||d==="0"&&T==="=")&&(M=!0,d="0",T="=");var oe=O==="$"?n:O==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",we=O==="$"?r:/[%p]/.test(q)?a:"",ue=k1[q],ut=/[defgprs%]/.test(q);C=C===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Ue(ge){var Xe=oe,Ke=we,We,Lt,gt;if(q==="c")Ke=ue(ge)+Ke,ge="";else{ge=+ge;var dt=ge<0||1/ge<0;if(ge=isNaN(ge)?u:ue(Math.abs(ge),C),G&&(ge=XL(ge)),dt&&+ge==0&&x!=="+"&&(dt=!1),Xe=(dt?x==="("?x:l:x==="-"||x==="("?"":x)+Xe,Ke=(q==="s"?M1[8+U_/3]:"")+Ke+(dt&&x==="("?")":""),ut){for(We=-1,Lt=ge.length;++We<Lt;)if(gt=ge.charCodeAt(We),48>gt||gt>57){Ke=(gt===46?i+ge.slice(We+1):ge.slice(We))+Ke,ge=ge.slice(0,We);break}}}w&&!M&&(ge=t(ge,1/0));var _e=Xe.length+ge.length+Ke.length,De=_e<p?new Array(p-_e+1).join(d):"";switch(w&&M&&(ge=t(De+ge,De.length?p-Ke.length:1/0),De=""),T){case"<":ge=Xe+ge+Ke+De;break;case"=":ge=Xe+De+ge+Ke;break;case"^":ge=De.slice(0,_e=De.length>>1)+Xe+ge+Ke+De.slice(_e);break;default:ge=De+Xe+ge+Ke;break}return o(ge)}return Ue.toString=function(){return g+""},Ue}function m(g,d){var T=f((g=Yu(g),g.type="f",g)),x=Math.max(-8,Math.min(8,Math.floor(Zl(d)/3)))*3,O=Math.pow(10,-x),M=M1[8+x/3];return function(p){return T(O*p)+M}}return{format:f,formatPrefix:m}}var Yf,Zv,V_;KL({thousands:",",grouping:[3],currency:["$",""]});function KL(e){return Yf=QL(e),Zv=Yf.format,V_=Yf.formatPrefix,Yf}function qL(e){return Math.max(0,-Zl(Math.abs(e)))}function ZL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zl(t)/3)))*3-Zl(Math.abs(e)))}function JL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zl(t)-Zl(e))+1}function eR(e,t,n,r){var i=dL(e,t,n),o;switch(r=Yu(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=ZL(i,a))&&(r.precision=o),V_(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=JL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=qL(i))&&(r.precision=o-(r.type==="%")*2);break}}return Zv(r)}function tR(e){var t=e.domain;return e.ticks=function(n){var r=t();return D0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return eR(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],l=r[o],u,f,m=10;for(l<a&&(f=a,a=l,l=f,f=i,i=o,o=f);m-- >0;){if(f=M0(a,l,n),f===u)return r[i]=a,r[o]=l,t(r);if(f>0)a=Math.floor(a/f)*f,l=Math.ceil(l/f)*f;else if(f<0)a=Math.ceil(a*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Qu(){var e=zL();return e.copy=function(){return G_(e,Qu())},F_.apply(e,arguments),tR(e)}function nR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function F1(e){return Math.log(e)}function j1(e){return Math.exp(e)}function rR(e){return-Math.log(-e)}function iR(e){return-Math.exp(-e)}function oR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aR(e){return e===10?oR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function B1(e){return(t,n)=>-e(-t,n)}function sR(e){const t=e(F1,j1),n=t.domain;let r=10,i,o;function a(){return i=lR(r),o=aR(r),n()[0]<0?(i=B1(i),o=B1(o),e(rR,iR)):e(F1,j1),t}return t.base=function(l){return arguments.length?(r=+l,a()):r},t.domain=function(l){return arguments.length?(n(l),a()):n()},t.ticks=l=>{const u=n();let f=u[0],m=u[u.length-1];const g=m<f;g&&([f,m]=[m,f]);let d=i(f),T=i(m),x,O;const M=l==null?10:+l;let p=[];if(!(r%1)&&T-d<M){if(d=Math.floor(d),T=Math.ceil(T),f>0){for(;d<=T;++d)for(x=1;x<r;++x)if(O=d<0?x/o(-d):x*o(d),!(O<f)){if(O>m)break;p.push(O)}}else for(;d<=T;++d)for(x=r-1;x>=1;--x)if(O=d>0?x/o(-d):x*o(d),!(O<f)){if(O>m)break;p.push(O)}p.length*2<M&&(p=D0(f,m,M))}else p=D0(d,T,Math.min(T-d,M)).map(o);return g?p.reverse():p},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Yu(u)).precision==null&&(u.trim=!0),u=Zv(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return m=>{let g=m/o(Math.round(i(m)));return g*r<r-.5&&(g*=r),g<=f?u(m):""}},t.nice=()=>n(nR(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),t}function Jv(){const e=sR(z_()).domain([1,10]);return e.copy=()=>G_(e,Jv()).base(e.base()),F_.apply(e,arguments),e}const uR="_scatter_10z4g_2",cR={scatter:uR};eg.propTypes={points:qe.array.isRequired,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onView:qe.func,onSelect:qe.func,onHover:qe.func};const fR=e=>Jv().domain([100,1e6]).range([6,1]).clamp(!0)(e),dR=e=>Jv().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function eg({points:e,width:t,height:n,onScatter:r,onView:i,onSelect:o,onHover:a}){const l=z.useRef(),u=z.useRef([-1,1]),f=z.useRef([-1,1]),m=Qu().domain(u.current),g=Qu().domain(f.current);return z.useEffect(()=>{const d=fR(e.length),T=dR(e.length);console.log("point size",d,T);const x=nL({canvas:l.current,width:t,height:n,pointSize:d,opacity:T,pointColor:[250/255,128/255,114/255,1],pointColorHover:[.1,.1,.1,.5],xScale:m,yScale:g});return x.draw(e),i&&i(m,g),x.subscribe("view",({camera:O,view:M,xScale:p,yScale:w})=>{u.current=p.domain(),f.current=w.domain(),i&&i(u.current,f.current)}),x.subscribe("select",({points:O})=>{o&&o(O)}),x.subscribe("deselect",()=>{o&&o([])}),x.subscribe("pointOver",O=>{a&&a(O)}),x.subscribe("pointOut",()=>{a&&a(null)}),r&&r(x),()=>{x.destroy()}},[e]),L.jsx("canvas",{className:cR.scatter,ref:l})}const Qf=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:o,yDomain:a,width:l,height:u})=>{const f=z.useRef();return z.useEffect(()=>{if(o&&a){const m=Qu().domain(o).range([0,l]),g=Qu().domain(a).range([u,0]),d=M=>M/(.1+o[1]-o[0]),x=f.current.getContext("2d");x.clearRect(0,0,l,u),x.fillStyle=t,x.strokeStyle=n,x.font=`${d(r)}px monospace`,x.globalAlpha=.75;let O=d(r);if(!e.length)return;e.map(M=>{t&&x.fillRect(m(M[0])-O/2,g(M[1])-O/2,O,O),n&&x.strokeRect(m(M[0])-O/2,g(M[1])-O/2,O,O),i&&x.fillText(i,m(M[0])-O/3.2,g(M[1])+O/3.2)})}},[e,t,n,r,o,a,l,u]),L.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})},El=500,_l=500,Qr="https://api.latentscope.com/api";function hR(){var je;const[e,t]=z.useState(null),{dataset:n,scope:r}=c_(),i=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Clusters"},{id:3,name:"Tags"}],[o,a]=z.useState(2);z.useEffect(()=>{fetch(`${Qr}/datasets/${n}/meta`).then(Z=>Z.json()).then(Z=>{console.log("dataset",Z),t(Z)})},[n,t]);const[l,u]=z.useState(null);z.useEffect(()=>{fetch(`${Qr}/datasets/${n}/scopes/${r}`).then(Z=>Z.json()).then(Z=>{console.log("scope",Z),u(Z)})},[n,r,u]);const[f,m]=z.useState(null),[g,d]=z.useState(null),[T,x]=z.useState([]),[O,M]=z.useState([]),[p,w]=z.useState(f);z.useEffect(()=>{l&&(m(l.embedding_id),w(l.embedding_id),fetch(`${Qr}/datasets/${n}/umaps/${l.umap_id}`).then(Z=>Z.json()).then(Z=>{console.log("umap",Z),d(Z)}),fetch(`${Qr}/datasets/${n}/clusters/${l.cluster_id}/labels/${l.cluster_labels_id||"default"}`).then(Z=>Z.json()).then(Z=>{console.log("labels",Z),M(Z)}),fetch(`${Qr}/datasets/${n}/clusters/${l.cluster_id}/indices`).then(Z=>Z.json()).then(Z=>{console.log("cluster indices",Z),x(Z)}))},[n,l,d,M,m,w]);const[C,G]=z.useState([]);z.useEffect(()=>{fetch(`${Qr}/datasets/${n}/embeddings`).then(Z=>Z.json()).then(Z=>{G(Z)})},[n,G]);const q=Z=>{console.log("selected",Z),w(Z)},[oe,we]=z.useState([]),[ue,ut]=z.useState(!1);z.useEffect(()=>{g&&fetch(`${Qr}/datasets/${e.id}/umaps/${g.id}/points`).then(Z=>Z.json()).then(Z=>{console.log("umap points",Z),we(Z.map(nt=>[nt.x,nt.y]))})},[e,g]);const Ue=z.useCallback((Z,nt,et=[])=>{fetch(`${Qr}/indexed?dataset=${n}&indices=${JSON.stringify(Z)}`).then(Yt=>Yt.json()).then(Yt=>{if(!e)return;let tn=Yt.map((Rt,vn)=>({index:Z[vn],...Rt}));nt(tn)})},[e,n]),[ge,Xe]=z.useState({}),[Ke,We]=z.useState([-1,1]),[Lt,gt]=z.useState([-1,1]),dt=z.useCallback((Z,nt)=>{We(Z),gt(nt)},[We,gt]),[_e,De]=z.useState([]),Fe=z.useCallback(Z=>{De(Z),a(0)},[De,a]),[ae,Qe]=z.useState(null),[it,Dt]=z.useState(null);z.useEffect(()=>{ae!=null?Ue([ae],Z=>{Dt(Z[0])}):Dt(null)},[ae,Dt,Ue]);const[Wt,Xt]=z.useState(null);z.useEffect(()=>{var Z;if(it&&T.length&&O.length){const nt=it.index,et=T[nt],Yt=(Z=O[et==null?void 0:et.cluster])==null?void 0:Z.label;Xt({label:Yt,cluster:et.cluster})}else Xt(null)},[it,T,O,Xt]);const[Qt,Pt]=z.useState([]);z.useEffect(()=>{ae!=null?Pt([oe[ae]]):Pt([])},[ae,oe]);const[Ft,pn]=z.useState({});z.useEffect(()=>{fetch(`${Qr}/tags?dataset=${n}`).then(Z=>Z.json()).then(Z=>pn(Z))},[n]);const Ln=z.useMemo(()=>{const Z=[];for(const nt in Ft)Z.push(nt);return Z},[Ft]),[Nt,an]=z.useState(Ln[0]),[yt,xt]=z.useState([]);z.useEffect(()=>{if(Ft[Nt]){const Z=Ft[Nt].map(nt=>oe[nt]);xt(Z)}else xt([]),ge&&ge.config&&(ge==null||ge.zoomToOrigin({transition:!0,transitionDuration:1500}))},[Ft,Nt,oe,ge,xt]);const[_t,St]=z.useState([]),[Ct,zt]=z.useState([]),sn=z.useCallback(Z=>{fetch(`${Qr}/search/nn?dataset=${n}&query=${Z}&model=${p}`).then(nt=>nt.json()).then(nt=>{zt(nt.distances),St(nt.indices),ge==null||ge.zoomToPoints(nt.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[p,n,ge,zt,St]),[jn,Ur]=z.useState([]);z.useEffect(()=>{const Z=_t.map(nt=>oe[nt]);Ur(Z)},[_t,oe]);const[v,At]=z.useState(null),[Mt,Ne]=z.useState([]);z.useEffect(()=>{if(v){const Z=v.indices.map(nt=>oe[nt]);Ne(Z)}else Ne([]),ge&&ge.config&&(ge==null||ge.zoomToOrigin({transition:!0,transitionDuration:1500}))},[v,oe,ge,Ne]);const Ht=z.useCallback(Z=>{ge==null||ge.zoomToPoints([Z],{transition:!0,padding:.9,transitionDuration:1500})},[ge]),pt=z.useCallback(Z=>{Qe(Z)},[Qe]);return e?L.jsxs("div",{className:"dataset--explore",children:[L.jsxs("div",{className:"column",children:[L.jsxs("div",{className:"first-row summary",children:[L.jsxs("h3",{children:[" ",n,"  [",l==null?void 0:l.id,"]",L.jsx(Vu,{to:`/datasets/${e==null?void 0:e.id}/setup/${l==null?void 0:l.id}`,children:"Configure"})]}),e==null?void 0:e.length," rows",L.jsx("br",{}),"Embedding model:",L.jsx("br",{})," ",f,L.jsx("br",{})]}),L.jsxs("div",{className:"second-row",children:[L.jsx("div",{className:"umap-container",children:L.jsxs("div",{className:"scatters",style:{width:El,height:_l},children:[L.jsx(eg,{points:oe,loading:ue,width:El,height:_l,onScatter:Xe,onView:dt,onSelect:Fe,onHover:pt}),L.jsx(Qf,{points:jn,fill:"black",size:"8",xDomain:Ke,yDomain:Lt,width:El,height:_l}),L.jsx(Qf,{points:Mt,fill:"darkred",size:"8",xDomain:Ke,yDomain:Lt,width:El,height:_l}),L.jsx(Qf,{points:yt,symbol:Nt,size:"20",xDomain:Ke,yDomain:Lt,width:El,height:_l}),L.jsx(Qf,{points:Qt,stroke:"black",fill:"orange",size:"16",xDomain:Ke,yDomain:Lt,width:El,height:_l})]})}),L.jsxs("div",{className:"hovered-point",children:[it&&Object.keys(it).map(Z=>L.jsxs("span",{children:[L.jsxs("span",{className:"key",children:[Z,":"]}),L.jsx("span",{className:"value",children:it[Z]})]},Z)),Wt?L.jsxs("span",{children:[L.jsx("span",{className:"key",children:"Cluster:"}),L.jsx("span",{className:"value",children:Wt.label})]}):null]})]})]}),L.jsx("div",{className:"column",children:L.jsxs("div",{className:"second-row tab-tables",children:[L.jsx("div",{className:"tab-header",children:i.map(Z=>L.jsx("button",{onClick:()=>a(Z.id),className:Z.id===o?"tab-active":"tab-inactive",children:Z.name},Z.id))}),o===0?L.jsxs("div",{className:"tab-content tab-selected",children:[L.jsxs("span",{children:["Selected: ",selected.length,selected.length>0?L.jsx("button",{className:"deselect",onClick:()=>{De([]),ge==null||ge.select([]),ge==null||ge.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),selected.length>0?L.jsx(Dl,{indices:_e,clusterIndices:T,clusterLabels:O,tagset:Ft,dataset:e,maxRows:150,onTagset:Z=>pn(Z),onHover:pt,onClick:Ht}):null]}):null,o===1?L.jsxs("div",{className:"tab-content tab-neighbors",children:[L.jsx("div",{className:"search-box",children:L.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),sn(Z.target.elements.searchBox.value),a(1)},children:[L.jsx("input",{type:"text",id:"searchBox"}),L.jsx("button",{type:"submit",children:"Similarity Search"}),L.jsx("br",{}),L.jsx("label",{htmlFor:"embeddingModel"}),L.jsx("select",{id:"embeddingModel",onChange:Z=>q(Z.target.value),value:p,children:C.map((Z,nt)=>L.jsx("option",{value:Z,children:Z},nt))})]})}),L.jsxs("span",{children:[_t.length?L.jsxs("span",{children:["Nearest Neighbors: ",_t.length," (capped at 150) "]}):null,_t.length>0?L.jsx("button",{className:"deselect",onClick:()=>{St([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),_t.length>0?L.jsx(Dl,{indices:_t,distances:Ct,clusterIndices:T,clusterLabels:O,tagset:Ft,dataset:e,onTagset:Z=>pn(Z),onHover:pt,onClick:Ht}):null]}):null,o===2?L.jsxs("div",{className:"tab-content tab-cluster",children:[L.jsx("div",{className:"clusters-select",children:L.jsxs("select",{onChange:Z=>{const nt=O.find(et=>et.label===Z.target.value);nt&&At(nt)},value:v==null?void 0:v.label,children:[L.jsx("option",{value:"",children:"Select a cluster"}),O.map((Z,nt)=>L.jsx("option",{value:Z.label,children:Z.label},nt))]})}),L.jsx("div",{className:"cluster-selected",children:L.jsxs("span",{children:[v==null?void 0:v.indices.length," ",v!=null&&v.indices.length?"Rows":"",v?L.jsx("button",{className:"deselect",onClick:()=>{At(null)},children:"X"}):null]})}),L.jsx("div",{className:"cluster-table",children:v!=null&&v.indices?L.jsx(Dl,{indices:v==null?void 0:v.indices,clusterIndices:T,clusterLabels:O,dataset:e,tagset:Ft,onTagset:Z=>pn(Z),onHover:pt,onClick:Ht}):null})]}):null,o===3?L.jsxs("div",{className:"tab-content tab-tag",children:[L.jsxs("div",{className:"tags-box",children:[L.jsxs("div",{className:"tags-select",children:["Tags: ",Ln.map(Z=>L.jsxs("button",{className:"dataset--tag-link",onClick:()=>{an(Z),a(3),ge==null||ge.zoomToPoints(Ft[Z],{transition:!0,padding:.2,transitionDuration:1500})},children:[Z,"(",Ft[Z].length,")"]},Z))]}),L.jsx("div",{className:"new-tag",children:L.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const nt=Z.target.elements.newTag.value;fetch(`${Qr}/tags/new?dataset=${n}&tag=${nt}`).then(et=>et.json()).then(et=>{console.log("new tag",et),pn(et)})},children:[L.jsx("input",{type:"text",id:"newTag"}),L.jsx("button",{type:"submit",children:"New Tag"})]})})]}),L.jsxs("span",{children:[Nt," ",(je=Ft[Nt])==null?void 0:je.length,Nt?L.jsx("button",{className:"deselect",onClick:()=>{an(null)},children:"X"}):null]}),Ft[Nt]?L.jsx(Dl,{indices:Ft[Nt],clusterIndices:T,clusterLabels:O,tagset:Ft,dataset:e,onTagset:Z=>pn(Z),onHover:pt,onClick:Ht}):null]}):null]})})]}):L.jsx("div",{children:"Loading..."})}const Kf="https://api.latentscope.com/api";H_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,textColumn:qe.string.isRequired,embedding:qe.object,umaps:qe.array,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function H_({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:o,onChange:a}){const[l,u]=z.useState([]),[f,m]=z.useState(null),{startJob:g}=Ra(e,m,`${Kf}/jobs/embed`),{startJob:d}=Ra(e,m,`${Kf}/jobs/delete/embedding`),[T,x]=z.useState([]);z.useEffect(()=>{fetch(`${Kf}/embedding_models`).then(p=>p.json()).then(x).catch(console.error)},[]);const O=(p,w)=>{fetch(`${Kf}/datasets/${p}/embeddings`).then(C=>C.json()).then(C=>{w(C)})};z.useEffect(()=>{O(e==null?void 0:e.id,p=>{u(p),o(p)})},[e,u,o]),z.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&O(e.id,p=>{u(p),o(p)})},[f,e,u,o]);const M=p=>{p.preventDefault();const w=p.target,C=new FormData(w),G=T.find(we=>we.id===C.get("modelName")),q=C.get("prefix");let oe={text_column:t,model_id:G.id,prefix:q};g(oe)};return L.jsxs("div",{children:[L.jsxs("div",{children:["Embedding on column: ",L.jsx("b",{children:t})]}),L.jsxs("form",{onSubmit:M,children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"modelName",children:"Model:"}),L.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:T.map((p,w)=>L.jsxs("option",{value:p.id,children:[p.provider,": ",p.name]},w))}),L.jsx("textarea",{name:"prefix",placeholder:"Optional prefix to prepend to each sentence",disabled:!!f})]}),L.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]}),L.jsx(rs,{job:f,clearJob:()=>{m(null)}}),L.jsx("div",{className:"embeddings-list",children:l.map((p,w)=>L.jsxs("div",{children:[L.jsx("input",{type:"radio",id:`embedding${w}`,name:"embedding",value:p.id,checked:p.id===(n==null?void 0:n.id),onChange:()=>a(p)}),L.jsx("label",{htmlFor:`embedding${w}`,children:L.jsxs("span",{children:[p==null?void 0:p.id," - ",p==null?void 0:p.model_id," [",r.filter(C=>C.embedding_id==p).length," umaps,",i.filter(C=>r.filter(G=>G.embedding_id==p).map(G=>G.id).indexOf(C.umap_id)>=0).length," clusters ]",L.jsx("button",{onClick:()=>d({embedding_id:p.id}),disabled:f&&f.status!=="completed",children:""})]})})]},w))})]})}const $1={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},qf="https://api.latentscope.com/api";W_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,umap:qe.object,embedding:qe.object,clusters:qe.array.isRequired,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function W_({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:o}){const[a,l]=z.useState(null),{startJob:u}=Ra(e,l,`${qf}/jobs/umap`),{startJob:f}=Ra(e,l,`${qf}/jobs/delete/umap`),[m,g]=z.useState([]);function d(x,O){fetch(`${qf}/datasets/${x}/umaps`).then(M=>M.json()).then(M=>{const p=M.map(w=>({...w,url:`${qf}/files/${x}/umaps/${w.id}.png`}));O(p.reverse())})}z.useEffect(()=>{d(e.id,x=>{g(x),i(x)})},[e,i]),z.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&d(e.id,x=>{g(x),i(x)})},[a,e,g,i]);const T=z.useCallback(x=>{x.preventDefault();const O=x.target,M=new FormData(O),p=M.get("neighbors"),w=M.get("min_dist");u({embedding_id:n==null?void 0:n.id,neighbors:p,min_dist:w})},[u,n]);return L.jsxs("div",{className:"dataset--umaps-new",children:[L.jsxs("form",{onSubmit:T,children:[L.jsxs("label",{children:["Neighbors:",L.jsx("input",{type:"number",name:"neighbors",defaultValue:"25",disabled:!!a})]}),L.jsxs("label",{children:["Min Dist:",L.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!a})]}),L.jsx("button",{type:"submit",disabled:!!a,children:"New UMAP"})]}),L.jsx(rs,{job:a,clearJob:()=>l(null)}),L.jsx("div",{className:$1["umaps-list"],children:m.filter(x=>x.embedding_id==(n==null?void 0:n.id)).map((x,O)=>L.jsxs("div",{className:$1["umaps-item"],children:[L.jsx("input",{type:"radio",id:`umap${O}`,name:"umap",value:x,checked:x.id===(t==null?void 0:t.id),onChange:()=>o(x)}),L.jsxs("label",{htmlFor:`umap${O}`,children:[x.id,L.jsx("br",{}),"Neighbors: ",x.neighbors,L.jsx("br",{}),"Min Dist: ",x.min_dist,L.jsx("br",{}),"[",r.filter(M=>M.umap_id==x.id).length," clusters]",L.jsx("br",{}),L.jsx("img",{src:x.url,alt:x.id}),L.jsx("button",{onClick:()=>f({umap_id:x.id}),disabled:a&&a.status!=="completed",children:""})]})]},O))})]})}const Zf="https://api.latentscope.com/api";X_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,umap:qe.object,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function X_({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[o,a]=z.useState(null),{startJob:l}=Ra(e,a,`${Zf}/jobs/cluster`),{startJob:u}=Ra(e,a,`${Zf}/jobs/delete/cluster`),[f,m]=z.useState([]);function g(T,x){fetch(`${Zf}/datasets/${T}/clusters`).then(O=>O.json()).then(O=>{const M=O.map(p=>({...p,url:`${Zf}/files/${T}/clusters/${p.id}.png`}));x(M.reverse())})}z.useEffect(()=>{g(e.id,T=>{m(T),r(T)})},[e,r]),z.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&g(e.id,T=>{m(T),r(T)})},[o,e,m,r]);const d=z.useCallback(T=>{T.preventDefault();const x=T.target,O=new FormData(x),M=O.get("samples"),p=O.get("min_samples");l({umap_id:n.id,samples:M,min_samples:p})},[l,n]);return L.jsxs("div",{className:"dataset--clusters-new",children:[L.jsxs("form",{onSubmit:T=>d(T,n),children:[L.jsxs("label",{children:["Samples:",L.jsx("input",{type:"number",name:"samples",defaultValue:"5",disabled:!!o||!n})]}),L.jsx("br",{}),L.jsxs("label",{children:["Min Samples:",L.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!o||!n})]}),L.jsx("button",{type:"submit",disabled:!!o||!n,children:"New Clusters"})]}),L.jsx(rs,{job:o,clearJob:()=>a(null)}),L.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(T=>T.umap_id==n.id).map((T,x)=>L.jsxs("div",{className:"dataset--setup-clusters-item",children:[L.jsx("input",{type:"radio",id:`cluster${x}`,name:"cluster",value:t,checked:T.id===(t==null?void 0:t.id),onChange:()=>i(T)}),L.jsxs("label",{htmlFor:`cluster${x}`,children:[T.id,L.jsx("br",{}),"Clusters: ",T.n_clusters,L.jsx("br",{}),"Noise points: ",T.n_noise,L.jsx("br",{}),"Samples: ",T.samples,L.jsx("br",{}),"Min Samples: ",T.min_samples,L.jsx("br",{}),L.jsx("img",{src:T.url,alt:T.id}),L.jsx("br",{}),L.jsx("button",{onClick:()=>u({cluster_id:T.id}),children:""})]})]},x))})]})}const Jf="https://api.latentscope.com/api";Y_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,selectedModel:qe.string,onChange:qe.func.isRequired};function Y_({dataset:e,cluster:t,selectedModel:n,onChange:r}){const[i,o]=z.useState(null),{startJob:a}=Ra(e,o,`${Jf}/jobs/cluster_label`),[l,u]=z.useState([]);z.useEffect(()=>{fetch(`${Jf}/chat_models`).then(x=>x.json()).then(x=>{u(x)}).catch(x=>{console.log(x),u([])})},[]);const[f,m]=z.useState([]),[g,d]=z.useState([]);z.useEffect(()=>{e&&t?fetch(`${Jf}/datasets/${e.id}/clusters/${t.id}/labels/${n}`).then(x=>x.json()).then(x=>{d(x)}).catch(x=>{console.log(x),d([])}):d([])},[n,d,e,t,f]),z.useEffect(()=>{t?fetch(`${Jf}/datasets/${e.id}/clusters/${t.id}/labels_available`).then(x=>x.json()).then(x=>{console.log("cluster changed, set label models fetched",t.id,x),m(x)}).catch(x=>{console.log(x),m([])}):m([])},[e,t,i,m]);const T=z.useCallback(x=>{x.preventDefault();const O=x.target,M=new FormData(O),p=M.get("chatModel"),w=e.text_column,C=t==null?void 0:t.id,G=M.get("context");a({chat_id:p,cluster_id:C,text_column:w,context:G})},[e,t,a]);return L.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[L.jsxs("div",{className:"dataset--slides-new",children:[L.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_id}`:""," using a chat model. "]}),L.jsxs("form",{onSubmit:T,children:[L.jsxs("label",{children:["Chat Models:",L.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!i,children:l.filter(x=>(f==null?void 0:f.indexOf(x.id))<0).map((x,O)=>L.jsxs("option",{value:x.id,children:[x.provider," - ",x.name]},O))}),L.jsx("br",{}),L.jsx("textarea",{name:"context",disabled:!!i||!t})]}),L.jsx("button",{type:"submit",disabled:!!i||!t,children:"Auto Label"})]}),L.jsx(rs,{job:i,clearJob:()=>o(null)})]}),t?L.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[L.jsxs("label",{children:["View Labels:",L.jsx("select",{name:"model",value:n,onChange:x=>r(x.target.value),children:f.map((x,O)=>L.jsx("option",{value:x,children:x},O))})]}),L.jsx("div",{className:"dataset--setup-labels-list",children:L.jsx(Fv,{data:g.map((x,O)=>({cluster:O,label:x.label,items:x.indices.length}))})})]}):null]})}const Ip="https://api.latentscope.com/api";Q_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,scope:qe.object,umap:qe.object,embedding:qe.object,cluster:qe.object,clusterLabelModel:qe.string,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function Q_({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelModel:o,onNew:a,onChange:l}){const u=Eh();z.useEffect(()=>{e&&fetch(`${Ip}/datasets/${e.id}/scopes`).then(m=>m.json()).then(m=>{const g=m.sort((d,T)=>d.id.localeCompare(T.id));a(g)})},[e,a]);const f=z.useCallback(m=>{if(m.preventDefault(),!n||!i)return;const g=m.target,d=new FormData(g),T={embedding_id:r.id,umap_id:n.id,cluster_id:i.id,cluster_labels_id:o,label:d.get("label"),description:d.get("description")},x=d.get("action");console.log("action",x),x=="save"&&(T.id=t.id),fetch(`${Ip}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}).then(O=>O.json()).then(O=>{const M=O;fetch(`${Ip}/datasets/${e.id}/scopes`).then(p=>p.json()).then(p=>{a(p),l(p.find(w=>w.id==M.id))}),u(`/datasets/${e.id}/setup/${O.id}`)}).catch(O=>{console.error("Error saving scope:",O)})},[e,t,i,o,n,r,u,a,l]);return L.jsxs("div",{className:"setup-scope",children:[L.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r==null?void 0:r.id," - ",r==null?void 0:r.model_id,L.jsx("br",{}),"Labels: ",o||"Default"]}),L.jsxs("div",{className:"dataset--setup-save-box-boxes",children:[n?L.jsxs("div",{className:"box-item",children:[n.id,L.jsx("img",{src:n.url,alt:n.id})]}):L.jsx("div",{className:"empty-box"}),i?L.jsxs("div",{className:"box-item",children:[i.id,L.jsx("img",{src:i.url,alt:i.id})]}):L.jsx("div",{className:"empty-box"})]}),L.jsx("div",{className:"dataset--setup-save-box-nav",children:L.jsxs("form",{onSubmit:f,children:[L.jsxs("label",{children:["Label:",L.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),L.jsxs("label",{children:["Description:",L.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),L.jsx("input",{type:"hidden",name:"action",value:""}),t?L.jsxs("div",{className:"previous-scope",children:[L.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embedding_id,L.jsx("br",{}),"Umap: ",t.umap_id,L.jsx("br",{}),"Cluster: ",t.cluster_id,L.jsx("br",{}),"Labels: ",t.cluster_labels_id||"Default",L.jsx("br",{})]}):null,t?L.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,L.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const mR="_stage_lm7gt_1",pR="_content_lm7gt_13",vR="_complete_lm7gt_17",gR="_active_lm7gt_28",ed={stage:mR,content:pR,complete:vR,active:gR};function fu({active:e,complete:t,title:n,children:r}){return L.jsxs("div",{className:`${ed.stage} ${e?ed.active:""} ${t?ed.complete:""}`,children:[L.jsx("h3",{children:n}),L.jsx("div",{className:ed.content,children:r})]})}const yR="https://api.latentscope.com/api";K_.propTypes={dataset:qe.object.isRequired,umap:qe.object,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onSelect:qe.func};function K_({dataset:e,umap:t,width:n,height:r,onScatter:i,onView:o,onSelect:a,onHover:l}){const[u,f]=z.useState([]);return z.useEffect(()=>{t?fetch(`${yR}/datasets/${e.id}/umaps/${t.id}/points`).then(m=>m.json()).then(m=>{f(m.map(g=>[g.x,g.y]))}):f([])},[e,t]),L.jsx("div",{style:{width:`${n}px`,height:`${r}px`},children:L.jsx(eg,{points:u,width:n,height:r,onScatter:i,onView:o,onSelect:a,onHover:l})})}const G1="https://api.latentscope.com/api";function z1(){const[e,t]=z.useState(null),{dataset:n,scope:r}=c_();Eh();const i=500,o=500;z.useEffect(()=>{fetch(`${G1}/datasets/${n}/meta`).then(ae=>ae.json()).then(ae=>t(ae))},[n]);const a=z.useMemo(()=>e?e.text_column||e.columns[0]:"",[e]),l=z.useCallback(ae=>{const Qe=ae.target.value;console.log("setting column",Qe),fetch(`${G1}/datasets/${n}/meta/update?key=text_column&value=${Qe}`).then(it=>it.json()).then(it=>{t(it)})},[n]),[u,f]=z.useState([]),[m,g]=z.useState(u[0]);z.useEffect(()=>{u!=null&&u.length&&!m&&g(u[0])},[u,m]);const[d,T]=z.useState([]),[x,O]=z.useState(null),[M,p]=z.useState(null);z.useEffect(()=>{if(d.length&&m){const ae=d.filter(it=>it.embedding_id==m.id),Qe=ae.find(it=>it.id==M);O(M&&Qe?Qe:ae[0])}},[M,d,m]);const[w,C]=z.useState([]),[G,q]=z.useState(null),[oe,we]=z.useState(null);z.useEffect(()=>{if(w.length&&x){const ae=w.filter(it=>it.umap_id==x.id),Qe=ae.find(it=>it.cluster_id==oe);q(oe&&Qe?Qe:ae[0])}else q(null)},[oe,w,x]);const[ue,ut]=z.useState("default"),[Ue,ge]=z.useState([]),[Xe,Ke]=z.useState(null);z.useEffect(()=>{if(r&&(Ue!=null&&Ue.length)){const ae=Ue.find(Qe=>Qe.id==r);console.log("finding the scope",ae),ae&&(Ke(ae),g(ae.embedding_id),p(ae.umap_id),we(ae.cluster_id),ut(ae.cluster_labels_id))}else Ke(null)},[r,Ue]);const[We,Lt]=z.useState([]),gt=z.useCallback(ae=>{Lt(ae)},[Lt]),[dt,_e]=z.useState({}),[De,Fe]=z.useState(1);return z.useEffect(()=>{Fe(m?x?G?ue?Xe?6:5:4:3:2:1),console.log("SCOPE",Xe,m,x,G,ue)},[m,x,G,ue,Xe]),e?L.jsxs("div",{className:"dataset--setup",children:[L.jsx("div",{className:"dataset--setup-summary",children:L.jsxs("div",{className:"dataset--setup-info",children:[L.jsx("h3",{children:n}),L.jsxs("div",{className:"dataset--setup-info-content",children:[Xe?L.jsxs(Vu,{to:`/datasets/${e==null?void 0:e.id}/explore/${Xe==null?void 0:Xe.id}`,children:[" Explore ",Xe.label," (",Xe.id,")"]}):null,L.jsx("br",{}),e.length," rows ",L.jsx("br",{}),"Columns: ",e.columns.join(", "),L.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",L.jsx("select",{value:a,onChange:l,children:e.columns.map((ae,Qe)=>L.jsx("option",{value:ae,children:ae},Qe))})]})]})]})}),L.jsxs("div",{className:"dataset--setup-layout",children:[L.jsxs("div",{className:"dataset--setup-left-column",children:[L.jsx(fu,{active:De==1,complete:De>1,title:"1. Embeddings",children:L.jsx(H_,{dataset:e,textColumn:a,embedding:m,umaps:d,clusters:w,onNew:f,onChange:g})}),L.jsx(fu,{active:De==2,complete:De>2,title:"2. UMAP",children:L.jsx(W_,{dataset:e,umap:x,embedding:m,clusters:w,onNew:T,onChange:O})}),L.jsx(fu,{active:De==3,complete:De>3,title:"3. Clusters",children:L.jsx(X_,{dataset:e,cluster:G,umap:x,onNew:C,onChange:q})}),L.jsx(fu,{active:De==4,complete:De>4,title:"4. Auto-Label Clusters",children:L.jsx(Y_,{dataset:e,cluster:G,selectedModel:ue,onChange:ut})}),L.jsx(fu,{active:De==5,complete:De>5,title:"5. Save Scope",children:L.jsx(Q_,{dataset:e,scope:Xe,embedding:m,umap:x,cluster:G,clusterLabelModel:ue,onNew:ge,onChange:Ke})})]}),L.jsxs("div",{className:"dataset--setup-right-column",children:[L.jsx("div",{className:"dataset--setup-umap",children:L.jsx(K_,{dataset:e,umap:x,width:i,height:o,onScatter:_e,onSelect:gt})}),L.jsxs("div",{className:"dataset--selected",children:[L.jsxs("span",{children:["Points Selected: ",We.length," ",We.length?null:"(Hold shift and drag an area of the map to select)",We.length>0?L.jsx("button",{className:"deselect",onClick:()=>{Lt([]),dt==null||dt.select([]),dt==null||dt.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),We.length>0?L.jsx("div",{className:"dataset--selected-table",children:L.jsx(Dl,{dataset:e,indices:We,datasetId:n,maxRows:150})}):null]})]})]})]}):L.jsx("div",{children:"Loading..."})}const xR=()=>L.jsx("nav",{children:L.jsx("ul",{children:L.jsx("li",{children:L.jsx(Vu,{to:"/",children:"Latent Scope"})})})});var ER={VITE_API_URL:"https://api.latentscope.com/api",BASE_URL:"/latent-scope/",MODE:"read_only",DEV:!1,PROD:!0,SSR:!1};function _R(){const e=ER;return console.log("ENV",e),L.jsxs(ZA,{basename:e.BASE_NAME,children:[L.jsx(xR,{}),L.jsx("div",{className:"page",children:L.jsxs(WA,{children:[L.jsx(vu,{path:"/",element:L.jsx(sb,{})}),L.jsx(vu,{path:"/datasets/:dataset/setup",element:L.jsx(z1,{})}),L.jsx(vu,{path:"/datasets/:dataset/setup/:scope",element:L.jsx(z1,{})}),L.jsx(vu,{path:"/datasets/:dataset/explore/:scope",element:L.jsx(hR,{})})]})})]})}Dp.createRoot(document.getElementById("root")).render(L.jsx(Z1.StrictMode,{children:L.jsx(_R,{})}));
