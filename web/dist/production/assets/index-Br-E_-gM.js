function OS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var PS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},qd={},G1={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),kS=Symbol.for("react.portal"),NS=Symbol.for("react.fragment"),IS=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),MS=Symbol.for("react.provider"),FS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),$S=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),Fg=Symbol.iterator;function zS(e){return e===null||typeof e!="object"?null:(e=Fg&&e[Fg]||e["@@iterator"],typeof e=="function"?e:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U1=Object.assign,V1={};function Jl(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}Jl.prototype.isReactComponent={};Jl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function H1(){}H1.prototype=Jl.prototype;function j0(e,t,n){this.props=e,this.context=t,this.refs=V1,this.updater=n||z1}var B0=j0.prototype=new H1;B0.constructor=j0;U1(B0,Jl.prototype);B0.isPureReactComponent=!0;var jg=Array.isArray,W1=Object.prototype.hasOwnProperty,$0={current:null},X1={key:!0,ref:!0,__self:!0,__source:!0};function Y1(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)W1.call(t,r)&&!X1.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qu,type:e,key:a,ref:o,props:i,_owner:$0.current}}function US(e,t){return{$$typeof:Qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function G0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qu}function VS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bg=/\/+/g;function Mh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?VS(""+e.key):t.toString(36)}function qf(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qu:case kS:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Mh(o,0):r,jg(i)?(n="",e!=null&&(n=e.replace(Bg,"$&/")+"/"),qf(i,t,n,"",function(f){return f})):i!=null&&(G0(i)&&(i=US(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bg,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",jg(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+Mh(a,l);o+=qf(a,t,n,u,i)}else if(u=zS(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+Mh(a,l++),o+=qf(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wf(e,t,n){if(e==null)return e;var r=[],i=0;return qf(e,r,"","",function(a){return t.call(n,a,i++)}),r}function HS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},Zf={transition:null},WS={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Zf,ReactCurrentOwner:$0};Gt.Children={map:wf,forEach:function(e,t,n){wf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wf(e,function(){t++}),t},toArray:function(e){return wf(e,function(t){return t})||[]},only:function(e){if(!G0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=Jl;Gt.Fragment=NS;Gt.Profiler=DS;Gt.PureComponent=j0;Gt.StrictMode=IS;Gt.Suspense=BS;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=U1({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=$0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)W1.call(t,u)&&!X1.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Qu,type:e.type,key:i,ref:a,props:r,_owner:o}};Gt.createContext=function(e){return e={$$typeof:FS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MS,_context:e},e.Consumer=e};Gt.createElement=Y1;Gt.createFactory=function(e){var t=Y1.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:jS,render:e}};Gt.isValidElement=G0;Gt.lazy=function(e){return{$$typeof:GS,_payload:{_status:-1,_result:e},_init:HS}};Gt.memo=function(e,t){return{$$typeof:$S,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=Zf.transition;Zf.transition={};try{e()}finally{Zf.transition=t}};Gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Gt.useCallback=function(e,t){return ur.current.useCallback(e,t)};Gt.useContext=function(e){return ur.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return ur.current.useEffect(e,t)};Gt.useId=function(){return ur.current.useId()};Gt.useImperativeHandle=function(e,t,n){return ur.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return ur.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return ur.current.useReducer(e,t,n)};Gt.useRef=function(e){return ur.current.useRef(e)};Gt.useState=function(e){return ur.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return ur.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return ur.current.useTransition()};Gt.version="18.2.0";G1.exports=Gt;var j=G1.exports;const Q1=F0(j),XS=OS({__proto__:null,default:Q1},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS=j,QS=Symbol.for("react.element"),KS=Symbol.for("react.fragment"),qS=Object.prototype.hasOwnProperty,ZS=YS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function K1(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qS.call(t,r)&&!JS.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:QS,type:e,key:a,ref:o,props:i,_owner:ZS.current}}qd.Fragment=KS;qd.jsx=K1;qd.jsxs=K1;$1.exports=qd;var O=$1.exports,Pp={},q1={exports:{}},Mr={},Z1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(pe,We){var Le=pe.length;pe.push(We);e:for(;0<Le;){var Ee=Le-1>>>1,$e=pe[Ee];if(0<i($e,We))pe[Ee]=We,pe[Le]=$e,Le=Ee;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var We=pe[0],Le=pe.pop();if(Le!==We){pe[0]=Le;e:for(var Ee=0,$e=pe.length,lt=$e>>>1;Ee<lt;){var xt=2*(Ee+1)-1,Wt=pe[xt],Yt=xt+1,Qt=pe[Yt];if(0>i(Wt,Le))Yt<$e&&0>i(Qt,Wt)?(pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt):(pe[Ee]=Wt,pe[xt]=Le,Ee=xt);else if(Yt<$e&&0>i(Qt,Le))pe[Ee]=Qt,pe[Yt]=Le,Ee=Yt;else break e}}return We}function i(pe,We){var Le=pe.sortIndex-We.sortIndex;return Le!==0?Le:pe.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,d=3,w=!1,x=!1,L=!1,I=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(pe){for(var We=n(f);We!==null;){if(We.callback===null)r(f);else if(We.startTime<=pe)r(f),We.sortIndex=We.expirationTime,t(u,We);else break;We=n(f)}}function H(pe){if(L=!1,C(pe),!x)if(n(u)!==null)x=!0,mt(q);else{var We=n(f);We!==null&&ht(H,We.startTime-pe)}}function q(pe,We){x=!1,L&&(L=!1,v(ue),ue=-1),w=!0;var Le=d;try{for(C(We),h=n(u);h!==null&&(!(h.expirationTime>We)||pe&&!Se());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,d=h.priorityLevel;var $e=Ee(h.expirationTime<=We);We=e.unstable_now(),typeof $e=="function"?h.callback=$e:h===n(u)&&r(u),C(We)}else r(u);h=n(u)}if(h!==null)var lt=!0;else{var xt=n(f);xt!==null&&ht(H,xt.startTime-We),lt=!1}return lt}finally{h=null,d=Le,w=!1}}var ie=!1,we=null,ue=-1,at=5,He=-1;function Se(){return!(e.unstable_now()-He<at)}function Ke(){if(we!==null){var pe=e.unstable_now();He=pe;var We=!0;try{We=we(!0,pe)}finally{We?Qe():(ie=!1,we=null)}}else ie=!1}var Qe;if(typeof b=="function")Qe=function(){b(Ke)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Pt=Ge.port2;Ge.port1.onmessage=Ke,Qe=function(){Pt.postMessage(null)}}else Qe=function(){I(Ke,0)};function mt(pe){we=pe,ie||(ie=!0,Qe())}function ht(pe,We){ue=I(function(){pe(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,mt(q))},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(pe){switch(d){case 1:case 2:case 3:var We=3;break;default:We=d}var Le=d;d=We;try{return pe()}finally{d=Le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,We){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Le=d;d=pe;try{return We()}finally{d=Le}},e.unstable_scheduleCallback=function(pe,We,Le){var Ee=e.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ee+Le:Ee):Le=Ee,pe){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Le+$e,pe={id:p++,callback:We,priorityLevel:pe,startTime:Le,expirationTime:$e,sortIndex:-1},Le>Ee?(pe.sortIndex=Le,t(f,pe),n(u)===null&&pe===n(f)&&(L?(v(ue),ue=-1):L=!0,ht(H,Le-Ee))):(pe.sortIndex=$e,t(u,pe),x||w||(x=!0,mt(q))),pe},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(pe){var We=d;return function(){var Le=d;d=We;try{return pe.apply(this,arguments)}finally{d=Le}}}})(J1);Z1.exports=J1;var ew=Z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=j,Dr=ew;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tx=new Set,Au={};function Fo(e,t){Vl(e,t),Vl(e+"Capture",t)}function Vl(e,t){for(Au[e]=t,e=0;e<t.length;e++)tx.add(t[e])}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$g={},Gg={};function nw(e){return kp.call(Gg,e)?!0:kp.call($g,e)?!1:tw.test(e)?Gg[e]=!0:($g[e]=!0,!1)}function rw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iw(e,t,n,r){if(t===null||typeof t>"u"||rw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cr(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qn[e]=new cr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qn[t]=new cr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qn[e]=new cr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qn[e]=new cr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qn[e]=new cr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qn[e]=new cr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qn[e]=new cr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qn[e]=new cr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qn[e]=new cr(e,5,!1,e.toLowerCase(),null,!1,!1)});var z0=/[\-:]([a-z])/g;function U0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(z0,U0);qn[t]=new cr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(z0,U0);qn[t]=new cr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(z0,U0);qn[t]=new cr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qn[e]=new cr(e,1,!1,e.toLowerCase(),null,!1,!1)});qn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qn[e]=new cr(e,1,!1,e.toLowerCase(),null,!0,!0)});function V0(e,t,n,r){var i=qn.hasOwnProperty(t)?qn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iw(t,n,i,r)&&(n=null),r||i===null?nw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ta=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tf=Symbol.for("react.element"),wl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),H0=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),nx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),W0=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),X0=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),ix=Symbol.for("react.offscreen"),zg=Symbol.iterator;function Js(e){return e===null||typeof e!="object"?null:(e=zg&&e[zg]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,Fh;function du(e){if(Fh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fh=t&&t[1]||""}return`
`+Fh+e}var jh=!1;function Bh(e,t){if(!e||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?du(e):""}function aw(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=Bh(e.type,!1),e;case 11:return e=Bh(e.type.render,!1),e;case 1:return e=Bh(e.type,!0),e;default:return""}}function Mp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case wl:return"Portal";case Np:return"Profiler";case H0:return"StrictMode";case Ip:return"Suspense";case Dp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rx:return(e.displayName||"Context")+".Consumer";case nx:return(e._context.displayName||"Context")+".Provider";case W0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X0:return t=e.displayName||null,t!==null?t:Mp(e.type)||"Memo";case Aa:t=e._payload,e=e._init;try{return Mp(e(t))}catch{}}return null}function ow(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mp(t);case 8:return t===H0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function za(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ax(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lw(e){var t=ax(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bf(e){e._valueTracker||(e._valueTracker=lw(e))}function ox(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ax(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function dd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fp(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ug(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=za(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lx(e,t){t=t.checked,t!=null&&V0(e,"checked",t,!1)}function jp(e,t){lx(e,t);var n=za(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bp(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bp(e,t.type,za(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bp(e,t,n){(t!=="number"||dd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mu=Array.isArray;function Fl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+za(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $p(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(mu(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:za(n)}}function sx(e,t){var n=za(t.value),r=za(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Af,cx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Af=Af||document.createElement("div"),Af.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Af.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sw=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(e){sw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gu[t]=gu[e]})});function fx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gu.hasOwnProperty(e)&&gu[e]?(""+t).trim():t+"px"}function dx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var uw=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(e,t){if(t){if(uw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Up(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vp=null;function Y0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hp=null,jl=null,Bl=null;function Xg(e){if(e=Zu(e)){if(typeof Hp!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=nm(t),Hp(e.stateNode,e.type,t))}}function mx(e){jl?Bl?Bl.push(e):Bl=[e]:jl=e}function hx(){if(jl){var e=jl,t=Bl;if(Bl=jl=null,Xg(e),t)for(e=0;e<t.length;e++)Xg(t[e])}}function px(e,t){return e(t)}function vx(){}var $h=!1;function gx(e,t,n){if($h)return e(t,n);$h=!0;try{return px(e,t,n)}finally{$h=!1,(jl!==null||Bl!==null)&&(vx(),hx())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=nm(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var Wp=!1;if(qi)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Wp=!1}function cw(e,t,n,r,i,a,o,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var yu=!1,md=null,hd=!1,Xp=null,fw={onError:function(e){yu=!0,md=e}};function dw(e,t,n,r,i,a,o,l,u){yu=!1,md=null,cw.apply(fw,arguments)}function mw(e,t,n,r,i,a,o,l,u){if(dw.apply(this,arguments),yu){if(yu){var f=md;yu=!1,md=null}else throw Error(ke(198));hd||(hd=!0,Xp=f)}}function jo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yg(e){if(jo(e)!==e)throw Error(ke(188))}function hw(e){var t=e.alternate;if(!t){if(t=jo(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Yg(i),e;if(a===r)return Yg(i),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function xx(e){return e=hw(e),e!==null?Ex(e):null}function Ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ex(e);if(t!==null)return t;e=e.sibling}return null}var _x=Dr.unstable_scheduleCallback,Qg=Dr.unstable_cancelCallback,pw=Dr.unstable_shouldYield,vw=Dr.unstable_requestPaint,In=Dr.unstable_now,gw=Dr.unstable_getCurrentPriorityLevel,Q0=Dr.unstable_ImmediatePriority,Sx=Dr.unstable_UserBlockingPriority,pd=Dr.unstable_NormalPriority,yw=Dr.unstable_LowPriority,wx=Dr.unstable_IdlePriority,Zd=null,Ri=null;function xw(e){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(Zd,e,void 0,(e.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:Sw,Ew=Math.log,_w=Math.LN2;function Sw(e){return e>>>=0,e===0?32:31-(Ew(e)/_w|0)|0}var Cf=64,Lf=4194304;function hu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=hu(l):(a&=o,a!==0&&(r=hu(a)))}else o=n&~i,o!==0?r=hu(o):a!==0&&(r=hu(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ui(t),i=1<<n,r|=e[n],t&=~i;return r}function ww(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ui(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=ww(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function Yp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tx(){var e=Cf;return Cf<<=1,!(Cf&4194240)&&(Cf=64),e}function Gh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ui(t),e[t]=n}function bw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ui(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function K0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ui(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qt=0;function bx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ax,q0,Cx,Lx,Rx,Qp=!1,Rf=[],Na=null,Ia=null,Da=null,Ru=new Map,Ou=new Map,La=[],Aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kg(e,t){switch(e){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Ru.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(t.pointerId)}}function tu(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Zu(t),t!==null&&q0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Cw(e,t,n,r,i){switch(t){case"focusin":return Na=tu(Na,e,t,n,r,i),!0;case"dragenter":return Ia=tu(Ia,e,t,n,r,i),!0;case"mouseover":return Da=tu(Da,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ru.set(a,tu(Ru.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ou.set(a,tu(Ou.get(a)||null,e,t,n,r,i)),!0}return!1}function Ox(e){var t=wo(e.target);if(t!==null){var n=jo(t);if(n!==null){if(t=n.tag,t===13){if(t=yx(n),t!==null){e.blockedOn=t,Rx(e.priority,function(){Cx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vp=r,n.target.dispatchEvent(r),Vp=null}else return t=Zu(n),t!==null&&q0(t),e.blockedOn=n,!1;t.shift()}return!0}function qg(e,t,n){Jf(e)&&n.delete(t)}function Lw(){Qp=!1,Na!==null&&Jf(Na)&&(Na=null),Ia!==null&&Jf(Ia)&&(Ia=null),Da!==null&&Jf(Da)&&(Da=null),Ru.forEach(qg),Ou.forEach(qg)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,Qp||(Qp=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,Lw)))}function Pu(e){function t(i){return nu(i,e)}if(0<Rf.length){nu(Rf[0],e);for(var n=1;n<Rf.length;n++){var r=Rf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Na!==null&&nu(Na,e),Ia!==null&&nu(Ia,e),Da!==null&&nu(Da,e),Ru.forEach(t),Ou.forEach(t),n=0;n<La.length;n++)r=La[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<La.length&&(n=La[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&La.shift()}var $l=ta.ReactCurrentBatchConfig,gd=!0;function Rw(e,t,n,r){var i=qt,a=$l.transition;$l.transition=null;try{qt=1,Z0(e,t,n,r)}finally{qt=i,$l.transition=a}}function Ow(e,t,n,r){var i=qt,a=$l.transition;$l.transition=null;try{qt=4,Z0(e,t,n,r)}finally{qt=i,$l.transition=a}}function Z0(e,t,n,r){if(gd){var i=Kp(e,t,n,r);if(i===null)qh(e,t,r,yd,n),Kg(e,r);else if(Cw(i,e,t,n,r))r.stopPropagation();else if(Kg(e,r),t&4&&-1<Aw.indexOf(e)){for(;i!==null;){var a=Zu(i);if(a!==null&&Ax(a),a=Kp(e,t,n,r),a===null&&qh(e,t,r,yd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else qh(e,t,r,null,n)}}var yd=null;function Kp(e,t,n,r){if(yd=null,e=Y0(r),e=wo(e),e!==null)if(t=jo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yd=e,null}function Px(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gw()){case Q0:return 1;case Sx:return 4;case pd:case yw:return 16;case wx:return 536870912;default:return 16}default:return 16}}var Oa=null,J0=null,ed=null;function kx(){if(ed)return ed;var e,t=J0,n=t.length,r,i="value"in Oa?Oa.value:Oa.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return ed=i.slice(e,1<r?1-r:void 0)}function td(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Of(){return!0}function Zg(){return!1}function Fr(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Of:Zg,this.isPropagationStopped=Zg,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Of)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Of)},persist:function(){},isPersistent:Of}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ev=Fr(es),qu=_n({},es,{view:0,detail:0}),Pw=Fr(qu),zh,Uh,ru,Jd=_n({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(zh=e.screenX-ru.screenX,Uh=e.screenY-ru.screenY):Uh=zh=0,ru=e),zh)},movementY:function(e){return"movementY"in e?e.movementY:Uh}}),Jg=Fr(Jd),kw=_n({},Jd,{dataTransfer:0}),Nw=Fr(kw),Iw=_n({},qu,{relatedTarget:0}),Vh=Fr(Iw),Dw=_n({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=Fr(Dw),Fw=_n({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jw=Fr(Fw),Bw=_n({},es,{data:0}),ey=Fr(Bw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zw[e])?!!t[e]:!1}function tv(){return Uw}var Vw=_n({},qu,{key:function(e){if(e.key){var t=$w[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=td(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tv,charCode:function(e){return e.type==="keypress"?td(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?td(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hw=Fr(Vw),Ww=_n({},Jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ty=Fr(Ww),Xw=_n({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tv}),Yw=Fr(Xw),Qw=_n({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kw=Fr(Qw),qw=_n({},Jd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zw=Fr(qw),Jw=[9,13,27,32],nv=qi&&"CompositionEvent"in window,xu=null;qi&&"documentMode"in document&&(xu=document.documentMode);var eT=qi&&"TextEvent"in window&&!xu,Nx=qi&&(!nv||xu&&8<xu&&11>=xu),ny=" ",ry=!1;function Ix(e,t){switch(e){case"keyup":return Jw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bl=!1;function tT(e,t){switch(e){case"compositionend":return Dx(t);case"keypress":return t.which!==32?null:(ry=!0,ny);case"textInput":return e=t.data,e===ny&&ry?null:e;default:return null}}function nT(e,t){if(bl)return e==="compositionend"||!nv&&Ix(e,t)?(e=kx(),ed=J0=Oa=null,bl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nx&&t.locale!=="ko"?null:t.data;default:return null}}var rT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rT[e.type]:t==="textarea"}function Mx(e,t,n,r){mx(r),t=xd(t,"onChange"),0<t.length&&(n=new ev("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eu=null,ku=null;function iT(e){Xx(e,0)}function em(e){var t=Ll(e);if(ox(t))return e}function aT(e,t){if(e==="change")return t}var Fx=!1;if(qi){var Hh;if(qi){var Wh="oninput"in document;if(!Wh){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),Wh=typeof ay.oninput=="function"}Hh=Wh}else Hh=!1;Fx=Hh&&(!document.documentMode||9<document.documentMode)}function oy(){Eu&&(Eu.detachEvent("onpropertychange",jx),ku=Eu=null)}function jx(e){if(e.propertyName==="value"&&em(ku)){var t=[];Mx(t,ku,e,Y0(e)),gx(iT,t)}}function oT(e,t,n){e==="focusin"?(oy(),Eu=t,ku=n,Eu.attachEvent("onpropertychange",jx)):e==="focusout"&&oy()}function lT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return em(ku)}function sT(e,t){if(e==="click")return em(t)}function uT(e,t){if(e==="input"||e==="change")return em(t)}function cT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fi=typeof Object.is=="function"?Object.is:cT;function Nu(e,t){if(fi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kp.call(t,i)||!fi(e[i],t[i]))return!1}return!0}function ly(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sy(e,t){var n=ly(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ly(n)}}function Bx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $x(){for(var e=window,t=dd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dd(e.document)}return t}function rv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fT(e){var t=$x(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bx(n.ownerDocument.documentElement,n)){if(r!==null&&rv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sy(n,a);var o=sy(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dT=qi&&"documentMode"in document&&11>=document.documentMode,Al=null,qp=null,_u=null,Zp=!1;function uy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zp||Al==null||Al!==dd(r)||(r=Al,"selectionStart"in r&&rv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&Nu(_u,r)||(_u=r,r=xd(qp,"onSelect"),0<r.length&&(t=new ev("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Al)))}function Pf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cl={animationend:Pf("Animation","AnimationEnd"),animationiteration:Pf("Animation","AnimationIteration"),animationstart:Pf("Animation","AnimationStart"),transitionend:Pf("Transition","TransitionEnd")},Xh={},Gx={};qi&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function tm(e){if(Xh[e])return Xh[e];if(!Cl[e])return e;var t=Cl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gx)return Xh[e]=t[n];return e}var zx=tm("animationend"),Ux=tm("animationiteration"),Vx=tm("animationstart"),Hx=tm("transitionend"),Wx=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Va(e,t){Wx.set(e,t),Fo(t,[e])}for(var Yh=0;Yh<cy.length;Yh++){var Qh=cy[Yh],mT=Qh.toLowerCase(),hT=Qh[0].toUpperCase()+Qh.slice(1);Va(mT,"on"+hT)}Va(zx,"onAnimationEnd");Va(Ux,"onAnimationIteration");Va(Vx,"onAnimationStart");Va("dblclick","onDoubleClick");Va("focusin","onFocus");Va("focusout","onBlur");Va(Hx,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function fy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mw(r,t,void 0,e),e.currentTarget=null}function Xx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;fy(i,l,f),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,f=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;fy(i,l,f),a=u}}}if(hd)throw e=Xp,hd=!1,Xp=null,e}function un(e,t){var n=t[r0];n===void 0&&(n=t[r0]=new Set);var r=e+"__bubble";n.has(r)||(Yx(t,e,2,!1),n.add(r))}function Kh(e,t,n){var r=0;t&&(r|=4),Yx(n,e,r,t)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[kf]){e[kf]=!0,tx.forEach(function(n){n!=="selectionchange"&&(pT.has(n)||Kh(n,!1,e),Kh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kf]||(t[kf]=!0,Kh("selectionchange",!1,t))}}function Yx(e,t,n,r){switch(Px(t)){case 1:var i=Rw;break;case 4:i=Ow;break;default:i=Z0}n=i.bind(null,t,n,e),i=void 0,!Wp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qh(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wo(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}gx(function(){var f=a,p=Y0(n),h=[];e:{var d=Wx.get(e);if(d!==void 0){var w=ev,x=e;switch(e){case"keypress":if(td(n)===0)break e;case"keydown":case"keyup":w=Hw;break;case"focusin":x="focus",w=Vh;break;case"focusout":x="blur",w=Vh;break;case"beforeblur":case"afterblur":w=Vh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Yw;break;case zx:case Ux:case Vx:w=Mw;break;case Hx:w=Kw;break;case"scroll":w=Pw;break;case"wheel":w=Zw;break;case"copy":case"cut":case"paste":w=jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ty}var L=(t&4)!==0,I=!L&&e==="scroll",v=L?d!==null?d+"Capture":null:d;L=[];for(var b=f,C;b!==null;){C=b;var H=C.stateNode;if(C.tag===5&&H!==null&&(C=H,v!==null&&(H=Lu(b,v),H!=null&&L.push(Du(b,H,C)))),I)break;b=b.return}0<L.length&&(d=new w(d,x,null,n,p),h.push({event:d,listeners:L}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&n!==Vp&&(x=n.relatedTarget||n.fromElement)&&(wo(x)||x[Zi]))break e;if((w||d)&&(d=p.window===p?p:(d=p.ownerDocument)?d.defaultView||d.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=f,x=x?wo(x):null,x!==null&&(I=jo(x),x!==I||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=f),w!==x)){if(L=Jg,H="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(L=ty,H="onPointerLeave",v="onPointerEnter",b="pointer"),I=w==null?d:Ll(w),C=x==null?d:Ll(x),d=new L(H,b+"leave",w,n,p),d.target=I,d.relatedTarget=C,H=null,wo(p)===f&&(L=new L(v,b+"enter",x,n,p),L.target=C,L.relatedTarget=I,H=L),I=H,w&&x)t:{for(L=w,v=x,b=0,C=L;C;C=El(C))b++;for(C=0,H=v;H;H=El(H))C++;for(;0<b-C;)L=El(L),b--;for(;0<C-b;)v=El(v),C--;for(;b--;){if(L===v||v!==null&&L===v.alternate)break t;L=El(L),v=El(v)}L=null}else L=null;w!==null&&dy(h,d,w,L,!1),x!==null&&I!==null&&dy(h,I,x,L,!0)}}e:{if(d=f?Ll(f):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var q=aT;else if(iy(d))if(Fx)q=uT;else{q=lT;var ie=oT}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(q=sT);if(q&&(q=q(e,f))){Mx(h,q,n,p);break e}ie&&ie(e,d,f),e==="focusout"&&(ie=d._wrapperState)&&ie.controlled&&d.type==="number"&&Bp(d,"number",d.value)}switch(ie=f?Ll(f):window,e){case"focusin":(iy(ie)||ie.contentEditable==="true")&&(Al=ie,qp=f,_u=null);break;case"focusout":_u=qp=Al=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,uy(h,n,p);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":uy(h,n,p)}var we;if(nv)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else bl?Ix(e,n)&&(ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ue="onCompositionStart");ue&&(Nx&&n.locale!=="ko"&&(bl||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&bl&&(we=kx()):(Oa=p,J0="value"in Oa?Oa.value:Oa.textContent,bl=!0)),ie=xd(f,ue),0<ie.length&&(ue=new ey(ue,e,null,n,p),h.push({event:ue,listeners:ie}),we?ue.data=we:(we=Dx(n),we!==null&&(ue.data=we)))),(we=eT?tT(e,n):nT(e,n))&&(f=xd(f,"onBeforeInput"),0<f.length&&(p=new ey("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:f}),p.data=we))}Xx(h,t)})}function Du(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Lu(e,n),a!=null&&r.unshift(Du(e,a,i)),a=Lu(e,t),a!=null&&r.push(Du(e,a,i))),e=e.return}return r}function El(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dy(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=Lu(n,a),u!=null&&o.unshift(Du(n,u,l))):i||(u=Lu(n,a),u!=null&&o.push(Du(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var vT=/\r\n?/g,gT=/\u0000|\uFFFD/g;function my(e){return(typeof e=="string"?e:""+e).replace(vT,`
`).replace(gT,"")}function Nf(e,t,n){if(t=my(t),my(e)!==t&&n)throw Error(ke(425))}function Ed(){}var Jp=null,e0=null;function t0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var n0=typeof setTimeout=="function"?setTimeout:void 0,yT=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(e){return hy.resolve(null).then(e).catch(ET)}:n0;function ET(e){setTimeout(function(){throw e})}function Zh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(t)}function Ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function py(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),Li="__reactFiber$"+ts,Mu="__reactProps$"+ts,Zi="__reactContainer$"+ts,r0="__reactEvents$"+ts,_T="__reactListeners$"+ts,ST="__reactHandles$"+ts;function wo(e){var t=e[Li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zi]||n[Li]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=py(e);e!==null;){if(n=e[Li])return n;e=py(e)}return t}e=n,n=e.parentNode}return null}function Zu(e){return e=e[Li]||e[Zi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function nm(e){return e[Mu]||null}var i0=[],Rl=-1;function Ha(e){return{current:e}}function cn(e){0>Rl||(e.current=i0[Rl],i0[Rl]=null,Rl--)}function on(e,t){Rl++,i0[Rl]=e.current,e.current=t}var Ua={},tr=Ha(Ua),_r=Ha(!1),Po=Ua;function Hl(e,t){var n=e.type.contextTypes;if(!n)return Ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(e){return e=e.childContextTypes,e!=null}function _d(){cn(_r),cn(tr)}function vy(e,t,n){if(tr.current!==Ua)throw Error(ke(168));on(tr,t),on(_r,n)}function Qx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ke(108,ow(e)||"Unknown",i));return _n({},n,r)}function Sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ua,Po=tr.current,on(tr,e),on(_r,_r.current),!0}function gy(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=Qx(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,cn(_r),cn(tr),on(tr,e)):cn(_r),on(_r,n)}var Xi=null,rm=!1,Jh=!1;function Kx(e){Xi===null?Xi=[e]:Xi.push(e)}function wT(e){rm=!0,Kx(e)}function Wa(){if(!Jh&&Xi!==null){Jh=!0;var e=0,t=qt;try{var n=Xi;for(qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xi=null,rm=!1}catch(i){throw Xi!==null&&(Xi=Xi.slice(e+1)),_x(Q0,Wa),i}finally{qt=t,Jh=!1}}return null}var Ol=[],Pl=0,wd=null,Td=0,Hr=[],Wr=0,ko=null,Yi=1,Qi="";function _o(e,t){Ol[Pl++]=Td,Ol[Pl++]=wd,wd=e,Td=t}function qx(e,t,n){Hr[Wr++]=Yi,Hr[Wr++]=Qi,Hr[Wr++]=ko,ko=e;var r=Yi;e=Qi;var i=32-ui(r)-1;r&=~(1<<i),n+=1;var a=32-ui(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ui(t)+i|n<<i|r,Qi=a+e}else Yi=1<<a|n<<i|r,Qi=e}function iv(e){e.return!==null&&(_o(e,1),qx(e,1,0))}function av(e){for(;e===wd;)wd=Ol[--Pl],Ol[Pl]=null,Td=Ol[--Pl],Ol[Pl]=null;for(;e===ko;)ko=Hr[--Wr],Hr[Wr]=null,Qi=Hr[--Wr],Hr[Wr]=null,Yi=Hr[--Wr],Hr[Wr]=null}var Ir=null,Nr=null,dn=!1,li=null;function Zx(e,t){var n=Xr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ir=e,Nr=Ma(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ir=e,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ko!==null?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ir=e,Nr=null,!0):!1;default:return!1}}function a0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function o0(e){if(dn){var t=Nr;if(t){var n=t;if(!yy(e,t)){if(a0(e))throw Error(ke(418));t=Ma(n.nextSibling);var r=Ir;t&&yy(e,t)?Zx(r,n):(e.flags=e.flags&-4097|2,dn=!1,Ir=e)}}else{if(a0(e))throw Error(ke(418));e.flags=e.flags&-4097|2,dn=!1,Ir=e}}}function xy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ir=e}function If(e){if(e!==Ir)return!1;if(!dn)return xy(e),dn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!t0(e.type,e.memoizedProps)),t&&(t=Nr)){if(a0(e))throw Jx(),Error(ke(418));for(;t;)Zx(e,t),t=Ma(t.nextSibling)}if(xy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nr=Ma(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nr=null}}else Nr=Ir?Ma(e.stateNode.nextSibling):null;return!0}function Jx(){for(var e=Nr;e;)e=Ma(e.nextSibling)}function Wl(){Nr=Ir=null,dn=!1}function ov(e){li===null?li=[e]:li.push(e)}var TT=ta.ReactCurrentBatchConfig;function ai(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var bd=Ha(null),Ad=null,kl=null,lv=null;function sv(){lv=kl=Ad=null}function uv(e){var t=bd.current;cn(bd),e._currentValue=t}function l0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gl(e,t){Ad=e,lv=kl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xr=!0),e.firstContext=null)}function Qr(e){var t=e._currentValue;if(lv!==e)if(e={context:e,memoizedValue:t,next:null},kl===null){if(Ad===null)throw Error(ke(308));kl=e,Ad.dependencies={lanes:0,firstContext:e}}else kl=kl.next=e;return t}var To=null;function cv(e){To===null?To=[e]:To.push(e)}function eE(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,cv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ji(e,r)}function Ji(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ca=!1;function fv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ki(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ji(e,n)}return i=r.interleaved,i===null?(t.next=t,cv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ji(e,n)}function nd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,K0(e,n)}}function Ey(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cd(e,t,n,r){var i=e.updateQueue;Ca=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,o===null?a=f:o.next=f,o=u;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=f:l.next=f,p.lastBaseUpdate=u))}if(a!==null){var h=i.baseState;o=0,p=f=u=null,l=a;do{var d=l.lane,w=l.eventTime;if((r&d)===d){p!==null&&(p=p.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,L=l;switch(d=t,w=n,L.tag){case 1:if(x=L.payload,typeof x=="function"){h=x.call(w,h,d);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=L.payload,d=typeof x=="function"?x.call(w,h,d):x,d==null)break e;h=_n({},h,d);break e;case 2:Ca=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else w={eventTime:w,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(f=p=w,u=h):p=p.next=w,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(p===null&&(u=h),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Io|=o,e.lanes=o,e.memoizedState=h}}function _y(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var nE=new ex.Component().refs;function s0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var im={isMounted:function(e){return(e=e._reactInternals)?jo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sr(),i=Ba(e),a=Ki(r,i);a.payload=t,n!=null&&(a.callback=n),t=Fa(e,a,i),t!==null&&(ci(t,e,i,r),nd(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sr(),i=Ba(e),a=Ki(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Fa(e,a,i),t!==null&&(ci(t,e,i,r),nd(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sr(),r=Ba(e),i=Ki(n,r);i.tag=2,t!=null&&(i.callback=t),t=Fa(e,i,r),t!==null&&(ci(t,e,r,n),nd(t,e,r))}};function Sy(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Nu(n,r)||!Nu(i,a):!0}function rE(e,t,n){var r=!1,i=Ua,a=t.contextType;return typeof a=="object"&&a!==null?a=Qr(a):(i=Sr(t)?Po:tr.current,r=t.contextTypes,a=(r=r!=null)?Hl(e,i):Ua),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=im,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&im.enqueueReplaceState(t,t.state,null)}function u0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=nE,fv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Qr(a):(a=Sr(t)?Po:tr.current,i.context=Hl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(s0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&im.enqueueReplaceState(i,i.state,null),Cd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;l===nE&&(l=i.refs={}),o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function Df(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ty(e){var t=e._init;return t(e._payload)}function iE(e){function t(v,b){if(e){var C=v.deletions;C===null?(v.deletions=[b],v.flags|=16):C.push(b)}}function n(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=$a(v,b),v.index=0,v.sibling=null,v}function a(v,b,C){return v.index=C,e?(C=v.alternate,C!==null?(C=C.index,C<b?(v.flags|=2,b):C):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,C,H){return b===null||b.tag!==6?(b=op(C,v.mode,H),b.return=v,b):(b=i(b,C),b.return=v,b)}function u(v,b,C,H){var q=C.type;return q===Tl?p(v,b,C.props.children,H,C.key):b!==null&&(b.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Aa&&Ty(q)===b.type)?(H=i(b,C.props),H.ref=iu(v,b,C),H.return=v,H):(H=sd(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,H)}function f(v,b,C,H){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=lp(C,v.mode,H),b.return=v,b):(b=i(b,C.children||[]),b.return=v,b)}function p(v,b,C,H,q){return b===null||b.tag!==7?(b=Ro(C,v.mode,H,q),b.return=v,b):(b=i(b,C),b.return=v,b)}function h(v,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=op(""+b,v.mode,C),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tf:return C=sd(b.type,b.key,b.props,null,v.mode,C),C.ref=iu(v,null,b),C.return=v,C;case wl:return b=lp(b,v.mode,C),b.return=v,b;case Aa:var H=b._init;return h(v,H(b._payload),C)}if(mu(b)||Js(b))return b=Ro(b,v.mode,C,null),b.return=v,b;Df(v,b)}return null}function d(v,b,C,H){var q=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return q!==null?null:l(v,b,""+C,H);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Tf:return C.key===q?u(v,b,C,H):null;case wl:return C.key===q?f(v,b,C,H):null;case Aa:return q=C._init,d(v,b,q(C._payload),H)}if(mu(C)||Js(C))return q!==null?null:p(v,b,C,H,null);Df(v,C)}return null}function w(v,b,C,H,q){if(typeof H=="string"&&H!==""||typeof H=="number")return v=v.get(C)||null,l(b,v,""+H,q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Tf:return v=v.get(H.key===null?C:H.key)||null,u(b,v,H,q);case wl:return v=v.get(H.key===null?C:H.key)||null,f(b,v,H,q);case Aa:var ie=H._init;return w(v,b,C,ie(H._payload),q)}if(mu(H)||Js(H))return v=v.get(C)||null,p(b,v,H,q,null);Df(b,H)}return null}function x(v,b,C,H){for(var q=null,ie=null,we=b,ue=b=0,at=null;we!==null&&ue<C.length;ue++){we.index>ue?(at=we,we=null):at=we.sibling;var He=d(v,we,C[ue],H);if(He===null){we===null&&(we=at);break}e&&we&&He.alternate===null&&t(v,we),b=a(He,b,ue),ie===null?q=He:ie.sibling=He,ie=He,we=at}if(ue===C.length)return n(v,we),dn&&_o(v,ue),q;if(we===null){for(;ue<C.length;ue++)we=h(v,C[ue],H),we!==null&&(b=a(we,b,ue),ie===null?q=we:ie.sibling=we,ie=we);return dn&&_o(v,ue),q}for(we=r(v,we);ue<C.length;ue++)at=w(we,v,ue,C[ue],H),at!==null&&(e&&at.alternate!==null&&we.delete(at.key===null?ue:at.key),b=a(at,b,ue),ie===null?q=at:ie.sibling=at,ie=at);return e&&we.forEach(function(Se){return t(v,Se)}),dn&&_o(v,ue),q}function L(v,b,C,H){var q=Js(C);if(typeof q!="function")throw Error(ke(150));if(C=q.call(C),C==null)throw Error(ke(151));for(var ie=q=null,we=b,ue=b=0,at=null,He=C.next();we!==null&&!He.done;ue++,He=C.next()){we.index>ue?(at=we,we=null):at=we.sibling;var Se=d(v,we,He.value,H);if(Se===null){we===null&&(we=at);break}e&&we&&Se.alternate===null&&t(v,we),b=a(Se,b,ue),ie===null?q=Se:ie.sibling=Se,ie=Se,we=at}if(He.done)return n(v,we),dn&&_o(v,ue),q;if(we===null){for(;!He.done;ue++,He=C.next())He=h(v,He.value,H),He!==null&&(b=a(He,b,ue),ie===null?q=He:ie.sibling=He,ie=He);return dn&&_o(v,ue),q}for(we=r(v,we);!He.done;ue++,He=C.next())He=w(we,v,ue,He.value,H),He!==null&&(e&&He.alternate!==null&&we.delete(He.key===null?ue:He.key),b=a(He,b,ue),ie===null?q=He:ie.sibling=He,ie=He);return e&&we.forEach(function(Ke){return t(v,Ke)}),dn&&_o(v,ue),q}function I(v,b,C,H){if(typeof C=="object"&&C!==null&&C.type===Tl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Tf:e:{for(var q=C.key,ie=b;ie!==null;){if(ie.key===q){if(q=C.type,q===Tl){if(ie.tag===7){n(v,ie.sibling),b=i(ie,C.props.children),b.return=v,v=b;break e}}else if(ie.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Aa&&Ty(q)===ie.type){n(v,ie.sibling),b=i(ie,C.props),b.ref=iu(v,ie,C),b.return=v,v=b;break e}n(v,ie);break}else t(v,ie);ie=ie.sibling}C.type===Tl?(b=Ro(C.props.children,v.mode,H,C.key),b.return=v,v=b):(H=sd(C.type,C.key,C.props,null,v.mode,H),H.ref=iu(v,b,C),H.return=v,v=H)}return o(v);case wl:e:{for(ie=C.key;b!==null;){if(b.key===ie)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){n(v,b.sibling),b=i(b,C.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else t(v,b);b=b.sibling}b=lp(C,v.mode,H),b.return=v,v=b}return o(v);case Aa:return ie=C._init,I(v,b,ie(C._payload),H)}if(mu(C))return x(v,b,C,H);if(Js(C))return L(v,b,C,H);Df(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,C),b.return=v,v=b):(n(v,b),b=op(C,v.mode,H),b.return=v,v=b),o(v)):n(v,b)}return I}var Xl=iE(!0),aE=iE(!1),Ju={},Oi=Ha(Ju),Fu=Ha(Ju),ju=Ha(Ju);function bo(e){if(e===Ju)throw Error(ke(174));return e}function dv(e,t){switch(on(ju,t),on(Fu,e),on(Oi,Ju),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gp(t,e)}cn(Oi),on(Oi,t)}function Yl(){cn(Oi),cn(Fu),cn(ju)}function oE(e){bo(ju.current);var t=bo(Oi.current),n=Gp(t,e.type);t!==n&&(on(Fu,e),on(Oi,n))}function mv(e){Fu.current===e&&(cn(Oi),cn(Fu))}var xn=Ha(0);function Ld(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ep=[];function hv(){for(var e=0;e<ep.length;e++)ep[e]._workInProgressVersionPrimary=null;ep.length=0}var rd=ta.ReactCurrentDispatcher,tp=ta.ReactCurrentBatchConfig,No=0,En=null,Gn=null,Wn=null,Rd=!1,Su=!1,Bu=0,bT=0;function Zn(){throw Error(ke(321))}function pv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fi(e[n],t[n]))return!1;return!0}function vv(e,t,n,r,i,a){if(No=a,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rd.current=e===null||e.memoizedState===null?RT:OT,e=n(r,i),Su){a=0;do{if(Su=!1,Bu=0,25<=a)throw Error(ke(301));a+=1,Wn=Gn=null,t.updateQueue=null,rd.current=PT,e=n(r,i)}while(Su)}if(rd.current=Od,t=Gn!==null&&Gn.next!==null,No=0,Wn=Gn=En=null,Rd=!1,t)throw Error(ke(300));return e}function gv(){var e=Bu!==0;return Bu=0,e}function Ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?En.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Kr(){if(Gn===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=Wn===null?En.memoizedState:Wn.next;if(t!==null)Wn=t,Gn=e;else{if(e===null)throw Error(ke(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Wn===null?En.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function $u(e,t){return typeof t=="function"?t(e):t}function np(e){var t=Kr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Gn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,f=a;do{var p=f.lane;if((No&p)===p)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,En.lanes|=p,Io|=p}f=f.next}while(f!==null&&f!==a);u===null?o=r:u.next=l,fi(r,t.memoizedState)||(xr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,En.lanes|=a,Io|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rp(e){var t=Kr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);fi(a,t.memoizedState)||(xr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function lE(){}function sE(e,t){var n=En,r=Kr(),i=t(),a=!fi(r.memoizedState,i);if(a&&(r.memoizedState=i,xr=!0),r=r.queue,yv(fE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,Gu(9,cE.bind(null,n,r,i,t),void 0,null),Xn===null)throw Error(ke(349));No&30||uE(n,t,i)}return i}function uE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cE(e,t,n,r){t.value=n,t.getSnapshot=r,dE(t)&&mE(e)}function fE(e,t,n){return n(function(){dE(t)&&mE(e)})}function dE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fi(e,n)}catch{return!0}}function mE(e){var t=Ji(e,1);t!==null&&ci(t,e,1,-1)}function by(e){var t=Ai();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:e},t.queue=e,e=e.dispatch=LT.bind(null,En,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hE(){return Kr().memoizedState}function id(e,t,n,r){var i=Ai();En.flags|=e,i.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function am(e,t,n,r){var i=Kr();r=r===void 0?null:r;var a=void 0;if(Gn!==null){var o=Gn.memoizedState;if(a=o.destroy,r!==null&&pv(r,o.deps)){i.memoizedState=Gu(t,n,a,r);return}}En.flags|=e,i.memoizedState=Gu(1|t,n,a,r)}function Ay(e,t){return id(8390656,8,e,t)}function yv(e,t){return am(2048,8,e,t)}function pE(e,t){return am(4,2,e,t)}function vE(e,t){return am(4,4,e,t)}function gE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yE(e,t,n){return n=n!=null?n.concat([e]):null,am(4,4,gE.bind(null,t,e),n)}function xv(){}function xE(e,t){var n=Kr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function EE(e,t){var n=Kr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _E(e,t,n){return No&21?(fi(n,t)||(n=Tx(),En.lanes|=n,Io|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xr=!0),e.memoizedState=n)}function AT(e,t){var n=qt;qt=n!==0&&4>n?n:4,e(!0);var r=tp.transition;tp.transition={};try{e(!1),t()}finally{qt=n,tp.transition=r}}function SE(){return Kr().memoizedState}function CT(e,t,n){var r=Ba(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wE(e))TE(t,n);else if(n=eE(e,t,n,r),n!==null){var i=sr();ci(n,e,r,i),bE(n,t,r)}}function LT(e,t,n){var r=Ba(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wE(e))TE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,fi(l,o)){var u=t.interleaved;u===null?(i.next=i,cv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=eE(e,t,i,r),n!==null&&(i=sr(),ci(n,e,r,i),bE(n,t,r))}}function wE(e){var t=e.alternate;return e===En||t!==null&&t===En}function TE(e,t){Su=Rd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,K0(e,n)}}var Od={readContext:Qr,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},RT={readContext:Qr,useCallback:function(e,t){return Ai().memoizedState=[e,t===void 0?null:t],e},useContext:Qr,useEffect:Ay,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,id(4194308,4,gE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return id(4194308,4,e,t)},useInsertionEffect:function(e,t){return id(4,2,e,t)},useMemo:function(e,t){var n=Ai();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ai();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=CT.bind(null,En,e),[r.memoizedState,e]},useRef:function(e){var t=Ai();return e={current:e},t.memoizedState=e},useState:by,useDebugValue:xv,useDeferredValue:function(e){return Ai().memoizedState=e},useTransition:function(){var e=by(!1),t=e[0];return e=AT.bind(null,e[1]),Ai().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=En,i=Ai();if(dn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),Xn===null)throw Error(ke(349));No&30||uE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ay(fE.bind(null,r,a,e),[e]),r.flags|=2048,Gu(9,cE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ai(),t=Xn.identifierPrefix;if(dn){var n=Qi,r=Yi;n=(r&~(1<<32-ui(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OT={readContext:Qr,useCallback:xE,useContext:Qr,useEffect:yv,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:np,useRef:hE,useState:function(){return np($u)},useDebugValue:xv,useDeferredValue:function(e){var t=Kr();return _E(t,Gn.memoizedState,e)},useTransition:function(){var e=np($u)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1},PT={readContext:Qr,useCallback:xE,useContext:Qr,useEffect:yv,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:vE,useMemo:EE,useReducer:rp,useRef:hE,useState:function(){return rp($u)},useDebugValue:xv,useDeferredValue:function(e){var t=Kr();return Gn===null?t.memoizedState=e:_E(t,Gn.memoizedState,e)},useTransition:function(){var e=rp($u)[0],t=Kr().memoizedState;return[e,t]},useMutableSource:lE,useSyncExternalStore:sE,useId:SE,unstable_isNewReconciler:!1};function Ql(e,t){try{var n="",r=t;do n+=aw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ip(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function c0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kT=typeof WeakMap=="function"?WeakMap:Map;function AE(e,t,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){kd||(kd=!0,E0=r),c0(e,t)},n}function CE(e,t,n){n=Ki(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){c0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){c0(e,t),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Cy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kT;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=WT.bind(null,e,t,n),t.then(e,e))}function Ly(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ry(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ki(-1,1),t.tag=2,Fa(n,t,1))),n.lanes|=1),e)}var NT=ta.ReactCurrentOwner,xr=!1;function or(e,t,n,r){t.child=e===null?aE(t,null,n,r):Xl(t,e.child,n,r)}function Oy(e,t,n,r,i){n=n.render;var a=t.ref;return Gl(t,i),r=vv(e,t,n,r,a,i),n=gv(),e!==null&&!xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ea(e,t,i)):(dn&&n&&iv(t),t.flags|=1,or(e,t,r,i),t.child)}function Py(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Cv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,LE(e,t,a,r,i)):(e=sd(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Nu,n(o,r)&&e.ref===t.ref)return ea(e,t,i)}return t.flags|=1,e=$a(a,r),e.ref=t.ref,e.return=t,t.child=e}function LE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Nu(a,r)&&e.ref===t.ref)if(xr=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(xr=!0);else return t.lanes=e.lanes,ea(e,t,i)}return f0(e,t,n,r,i)}function RE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Il,kr),kr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,on(Il,kr),kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,on(Il,kr),kr|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,on(Il,kr),kr|=r;return or(e,t,i,n),t.child}function OE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function f0(e,t,n,r,i){var a=Sr(n)?Po:tr.current;return a=Hl(t,a),Gl(t,i),n=vv(e,t,n,r,a,i),r=gv(),e!==null&&!xr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ea(e,t,i)):(dn&&r&&iv(t),t.flags|=1,or(e,t,n,i),t.child)}function ky(e,t,n,r,i){if(Sr(n)){var a=!0;Sd(t)}else a=!1;if(Gl(t,i),t.stateNode===null)ad(e,t),rE(t,n,r),u0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Qr(f):(f=Sr(n)?Po:tr.current,f=Hl(t,f));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==f)&&wy(t,o,r,f),Ca=!1;var d=t.memoizedState;o.state=d,Cd(t,r,o,i),u=t.memoizedState,l!==r||d!==u||_r.current||Ca?(typeof p=="function"&&(s0(t,n,p,r),u=t.memoizedState),(l=Ca||Sy(t,n,l,r,d,u,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,tE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:ai(t.type,l),o.props=f,h=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=Sr(n)?Po:tr.current,u=Hl(t,u));var w=n.getDerivedStateFromProps;(p=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==u)&&wy(t,o,r,u),Ca=!1,d=t.memoizedState,o.state=d,Cd(t,r,o,i);var x=t.memoizedState;l!==h||d!==x||_r.current||Ca?(typeof w=="function"&&(s0(t,n,w,r),x=t.memoizedState),(f=Ca||Sy(t,n,f,r,d,x,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return d0(e,t,n,r,a,i)}function d0(e,t,n,r,i,a){OE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&gy(t,n,!1),ea(e,t,a);r=t.stateNode,NT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Xl(t,e.child,null,a),t.child=Xl(t,null,l,a)):or(e,t,l,a),t.memoizedState=r.state,i&&gy(t,n,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?vy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vy(e,t.context,!1),dv(e,t.containerInfo)}function Ny(e,t,n,r,i){return Wl(),ov(i),t.flags|=256,or(e,t,n,r),t.child}var m0={dehydrated:null,treeContext:null,retryLane:0};function h0(e){return{baseLanes:e,cachePool:null,transitions:null}}function kE(e,t,n){var r=t.pendingProps,i=xn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),on(xn,i&1),e===null)return o0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=sm(o,r,0,null),e=Ro(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=h0(n),t.memoizedState=m0,e):Ev(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return IT(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=$a(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=$a(l,a):(a=Ro(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?h0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=m0,r}return a=e.child,e=a.sibling,r=$a(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ev(e,t){return t=sm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mf(e,t,n,r){return r!==null&&ov(r),Xl(t,e.child,null,n),e=Ev(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IT(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=ip(Error(ke(422))),Mf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=sm({mode:"visible",children:r.children},i,0,null),a=Ro(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Xl(t,e.child,null,o),t.child.memoizedState=h0(o),t.memoizedState=m0,a);if(!(t.mode&1))return Mf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=ip(a,r,void 0),Mf(e,t,o,r)}if(l=(o&e.childLanes)!==0,xr||l){if(r=Xn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ji(e,i),ci(r,e,i,-1))}return Av(),r=ip(Error(ke(421))),Mf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=XT.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Nr=Ma(i.nextSibling),Ir=t,dn=!0,li=null,e!==null&&(Hr[Wr++]=Yi,Hr[Wr++]=Qi,Hr[Wr++]=ko,Yi=e.id,Qi=e.overflow,ko=t),t=Ev(t,r.children),t.flags|=4096,t)}function Iy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),l0(e.return,t,n)}function ap(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function NE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(or(e,t,r.children,n),r=xn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iy(e,n,t);else if(e.tag===19)Iy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(on(xn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ld(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ap(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ld(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ap(t,!0,n,null,a);break;case"together":ap(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ad(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ea(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Io|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=$a(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$a(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function DT(e,t,n){switch(t.tag){case 3:PE(t),Wl();break;case 5:oE(t);break;case 1:Sr(t.type)&&Sd(t);break;case 4:dv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;on(bd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(on(xn,xn.current&1),t.flags|=128,null):n&t.child.childLanes?kE(e,t,n):(on(xn,xn.current&1),e=ea(e,t,n),e!==null?e.sibling:null);on(xn,xn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return NE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),on(xn,xn.current),r)break;return null;case 22:case 23:return t.lanes=0,RE(e,t,n)}return ea(e,t,n)}var IE,p0,DE,ME;IE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};p0=function(){};DE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bo(Oi.current);var a=null;switch(n){case"input":i=Fp(e,i),r=Fp(e,r),a=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),a=[];break;case"textarea":i=$p(e,i),r=$p(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ed)}zp(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Au.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Au.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&un("scroll",e),a||l===u||(a=[])):(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};ME=function(e,t,n,r){n!==r&&(t.flags|=4)};function au(e,t){if(!dn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MT(e,t,n){var r=t.pendingProps;switch(av(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return Sr(t.type)&&_d(),Jn(t),null;case 3:return r=t.stateNode,Yl(),cn(_r),cn(tr),hv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(If(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,li!==null&&(w0(li),li=null))),p0(e,t),Jn(t),null;case 5:mv(t);var i=bo(ju.current);if(n=t.type,e!==null&&t.stateNode!=null)DE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return Jn(t),null}if(e=bo(Oi.current),If(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Li]=t,r[Mu]=a,e=(t.mode&1)!==0,n){case"dialog":un("cancel",r),un("close",r);break;case"iframe":case"object":case"embed":un("load",r);break;case"video":case"audio":for(i=0;i<pu.length;i++)un(pu[i],r);break;case"source":un("error",r);break;case"img":case"image":case"link":un("error",r),un("load",r);break;case"details":un("toggle",r);break;case"input":Ug(r,a),un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},un("invalid",r);break;case"textarea":Hg(r,a),un("invalid",r)}zp(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Nf(r.textContent,l,e),i=["children",""+l]):Au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&un("scroll",r)}switch(n){case"input":bf(r),Vg(r,a,!0);break;case"textarea":bf(r),Wg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ed)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ux(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Li]=t,e[Mu]=r,IE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Up(n,r),n){case"dialog":un("cancel",e),un("close",e),i=r;break;case"iframe":case"object":case"embed":un("load",e),i=r;break;case"video":case"audio":for(i=0;i<pu.length;i++)un(pu[i],e);i=r;break;case"source":un("error",e),i=r;break;case"img":case"image":case"link":un("error",e),un("load",e),i=r;break;case"details":un("toggle",e),i=r;break;case"input":Ug(e,r),i=Fp(e,r),un("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),un("invalid",e);break;case"textarea":Hg(e,r),i=$p(e,r),un("invalid",e);break;default:i=r}zp(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?dx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cx(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cu(e,u):typeof u=="number"&&Cu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Au.hasOwnProperty(a)?u!=null&&a==="onScroll"&&un("scroll",e):u!=null&&V0(e,a,u,o))}switch(n){case"input":bf(e),Vg(e,r,!1);break;case"textarea":bf(e),Wg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+za(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fl(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)ME(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=bo(ju.current),bo(Oi.current),If(t)){if(r=t.stateNode,n=t.memoizedProps,r[Li]=t,(a=r.nodeValue!==n)&&(e=Ir,e!==null))switch(e.tag){case 3:Nf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nf(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Li]=t,t.stateNode=r}return Jn(t),null;case 13:if(cn(xn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dn&&Nr!==null&&t.mode&1&&!(t.flags&128))Jx(),Wl(),t.flags|=98560,a=!1;else if(a=If(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Li]=t}else Wl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),a=!1}else li!==null&&(w0(li),li=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xn.current&1?zn===0&&(zn=3):Av())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return Yl(),p0(e,t),e===null&&Iu(t.stateNode.containerInfo),Jn(t),null;case 10:return uv(t.type._context),Jn(t),null;case 17:return Sr(t.type)&&_d(),Jn(t),null;case 19:if(cn(xn),a=t.memoizedState,a===null)return Jn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)au(a,!1);else{if(zn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ld(e),o!==null){for(t.flags|=128,au(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return on(xn,xn.current&1|2),t.child}e=e.sibling}a.tail!==null&&In()>Kl&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ld(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),au(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!dn)return Jn(t),null}else 2*In()-a.renderingStartTime>Kl&&n!==1073741824&&(t.flags|=128,r=!0,au(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=In(),t.sibling=null,n=xn.current,on(xn,r?n&1|2:n&1),t):(Jn(t),null);case 22:case 23:return bv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kr&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function FT(e,t){switch(av(t),t.tag){case 1:return Sr(t.type)&&_d(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yl(),cn(_r),cn(tr),hv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mv(t),null;case 13:if(cn(xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Wl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(xn),null;case 4:return Yl(),null;case 10:return uv(t.type._context),null;case 22:case 23:return bv(),null;case 24:return null;default:return null}}var Ff=!1,er=!1,jT=typeof WeakSet=="function"?WeakSet:Set,et=null;function Nl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Cn(e,t,r)}else n.current=null}function v0(e,t,n){try{n()}catch(r){Cn(e,t,r)}}var Dy=!1;function BT(e,t){if(Jp=gd,e=$x(),rv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,f=0,p=0,h=e,d=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)d=h,h=w;for(;;){if(h===e)break t;if(d===n&&++f===i&&(l=o),d===a&&++p===r&&(u=o),(w=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(e0={focusedElem:e,selectionRange:n},gd=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){t=et;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var L=x.memoizedProps,I=x.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?L:ai(t.type,L),I);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(H){Cn(t,t.return,H)}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}return x=Dy,Dy=!1,x}function wu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&v0(t,n,a)}i=i.next}while(i!==r)}}function om(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function g0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FE(e){var t=e.alternate;t!==null&&(e.alternate=null,FE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Li],delete t[Mu],delete t[r0],delete t[_T],delete t[ST])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jE(e){return e.tag===5||e.tag===3||e.tag===4}function My(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function y0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ed));else if(r!==4&&(e=e.child,e!==null))for(y0(e,t,n),e=e.sibling;e!==null;)y0(e,t,n),e=e.sibling}function x0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(x0(e,t,n),e=e.sibling;e!==null;)x0(e,t,n),e=e.sibling}var Qn=null,oi=!1;function Sa(e,t,n){for(n=n.child;n!==null;)BE(e,t,n),n=n.sibling}function BE(e,t,n){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:er||Nl(n,t);case 6:var r=Qn,i=oi;Qn=null,Sa(e,t,n),Qn=r,oi=i,Qn!==null&&(oi?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(oi?(e=Qn,n=n.stateNode,e.nodeType===8?Zh(e.parentNode,n):e.nodeType===1&&Zh(e,n),Pu(e)):Zh(Qn,n.stateNode));break;case 4:r=Qn,i=oi,Qn=n.stateNode.containerInfo,oi=!0,Sa(e,t,n),Qn=r,oi=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&v0(n,t,o),i=i.next}while(i!==r)}Sa(e,t,n);break;case 1:if(!er&&(Nl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Cn(n,t,l)}Sa(e,t,n);break;case 21:Sa(e,t,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,Sa(e,t,n),er=r):Sa(e,t,n);break;default:Sa(e,t,n)}}function Fy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jT),t.forEach(function(r){var i=YT.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ii(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,oi=!1;break e;case 3:Qn=l.stateNode.containerInfo,oi=!0;break e;case 4:Qn=l.stateNode.containerInfo,oi=!0;break e}l=l.return}if(Qn===null)throw Error(ke(160));BE(a,o,i),Qn=null,oi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Cn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$E(t,e),t=t.sibling}function $E(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ii(t,e),Ti(e),r&4){try{wu(3,e,e.return),om(3,e)}catch(L){Cn(e,e.return,L)}try{wu(5,e,e.return)}catch(L){Cn(e,e.return,L)}}break;case 1:ii(t,e),Ti(e),r&512&&n!==null&&Nl(n,n.return);break;case 5:if(ii(t,e),Ti(e),r&512&&n!==null&&Nl(n,n.return),e.flags&32){var i=e.stateNode;try{Cu(i,"")}catch(L){Cn(e,e.return,L)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lx(i,a),Up(l,o);var f=Up(l,a);for(o=0;o<u.length;o+=2){var p=u[o],h=u[o+1];p==="style"?dx(i,h):p==="dangerouslySetInnerHTML"?cx(i,h):p==="children"?Cu(i,h):V0(i,p,h,f)}switch(l){case"input":jp(i,a);break;case"textarea":sx(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Fl(i,!!a.multiple,w,!1):d!==!!a.multiple&&(a.defaultValue!=null?Fl(i,!!a.multiple,a.defaultValue,!0):Fl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Mu]=a}catch(L){Cn(e,e.return,L)}}break;case 6:if(ii(t,e),Ti(e),r&4){if(e.stateNode===null)throw Error(ke(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(L){Cn(e,e.return,L)}}break;case 3:if(ii(t,e),Ti(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(L){Cn(e,e.return,L)}break;case 4:ii(t,e),Ti(e);break;case 13:ii(t,e),Ti(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(wv=In())),r&4&&Fy(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(er=(f=er)||p,ii(t,e),er=f):ii(t,e),Ti(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(et=e,p=e.child;p!==null;){for(h=et=p;et!==null;){switch(d=et,w=d.child,d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return);break;case 1:Nl(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(L){Cn(r,n,L)}}break;case 5:Nl(d,d.return);break;case 22:if(d.memoizedState!==null){By(h);continue}}w!==null?(w.return=d,et=w):By(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fx("display",o))}catch(L){Cn(e,e.return,L)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(L){Cn(e,e.return,L)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ii(t,e),Ti(e),r&4&&Fy(e);break;case 21:break;default:ii(t,e),Ti(e)}}function Ti(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jE(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var a=My(e);x0(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=My(e);y0(e,l,o);break;default:throw Error(ke(161))}}catch(u){Cn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $T(e,t,n){et=e,GE(e)}function GE(e,t,n){for(var r=(e.mode&1)!==0;et!==null;){var i=et,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ff;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||er;l=Ff;var f=er;if(Ff=o,(er=u)&&!f)for(et=i;et!==null;)o=et,u=o.child,o.tag===22&&o.memoizedState!==null?$y(i):u!==null?(u.return=o,et=u):$y(i);for(;a!==null;)et=a,GE(a),a=a.sibling;et=i,Ff=l,er=f}jy(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,et=a):jy(e)}}function jy(e){for(;et!==null;){var t=et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:er||om(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ai(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&_y(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_y(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Pu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}er||t.flags&512&&g0(t)}catch(d){Cn(t,t.return,d)}}if(t===e){et=null;break}if(n=t.sibling,n!==null){n.return=t.return,et=n;break}et=t.return}}function By(e){for(;et!==null;){var t=et;if(t===e){et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,et=n;break}et=t.return}}function $y(e){for(;et!==null;){var t=et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{om(4,t)}catch(u){Cn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Cn(t,i,u)}}var a=t.return;try{g0(t)}catch(u){Cn(t,a,u)}break;case 5:var o=t.return;try{g0(t)}catch(u){Cn(t,o,u)}}}catch(u){Cn(t,t.return,u)}if(t===e){et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,et=l;break}et=t.return}}var GT=Math.ceil,Pd=ta.ReactCurrentDispatcher,_v=ta.ReactCurrentOwner,Yr=ta.ReactCurrentBatchConfig,Ht=0,Xn=null,Fn=null,Kn=0,kr=0,Il=Ha(0),zn=0,zu=null,Io=0,lm=0,Sv=0,Tu=null,yr=null,wv=0,Kl=1/0,Wi=null,kd=!1,E0=null,ja=null,jf=!1,Pa=null,Nd=0,bu=0,_0=null,od=-1,ld=0;function sr(){return Ht&6?In():od!==-1?od:od=In()}function Ba(e){return e.mode&1?Ht&2&&Kn!==0?Kn&-Kn:TT.transition!==null?(ld===0&&(ld=Tx()),ld):(e=qt,e!==0||(e=window.event,e=e===void 0?16:Px(e.type)),e):1}function ci(e,t,n,r){if(50<bu)throw bu=0,_0=null,Error(ke(185));Ku(e,n,r),(!(Ht&2)||e!==Xn)&&(e===Xn&&(!(Ht&2)&&(lm|=n),zn===4&&Ra(e,Kn)),wr(e,r),n===1&&Ht===0&&!(t.mode&1)&&(Kl=In()+500,rm&&Wa()))}function wr(e,t){var n=e.callbackNode;Tw(e,t);var r=vd(e,e===Xn?Kn:0);if(r===0)n!==null&&Qg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Qg(n),t===1)e.tag===0?wT(Gy.bind(null,e)):Kx(Gy.bind(null,e)),xT(function(){!(Ht&6)&&Wa()}),n=null;else{switch(bx(r)){case 1:n=Q0;break;case 4:n=Sx;break;case 16:n=pd;break;case 536870912:n=wx;break;default:n=pd}n=QE(n,zE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zE(e,t){if(od=-1,ld=0,Ht&6)throw Error(ke(327));var n=e.callbackNode;if(zl()&&e.callbackNode!==n)return null;var r=vd(e,e===Xn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Id(e,r);else{t=r;var i=Ht;Ht|=2;var a=VE();(Xn!==e||Kn!==t)&&(Wi=null,Kl=In()+500,Lo(e,t));do try{VT();break}catch(l){UE(e,l)}while(!0);sv(),Pd.current=a,Ht=i,Fn!==null?t=0:(Xn=null,Kn=0,t=zn)}if(t!==0){if(t===2&&(i=Yp(e),i!==0&&(r=i,t=S0(e,i))),t===1)throw n=zu,Lo(e,0),Ra(e,r),wr(e,In()),n;if(t===6)Ra(e,r);else{if(i=e.current.alternate,!(r&30)&&!zT(i)&&(t=Id(e,r),t===2&&(a=Yp(e),a!==0&&(r=a,t=S0(e,a))),t===1))throw n=zu,Lo(e,0),Ra(e,r),wr(e,In()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:So(e,yr,Wi);break;case 3:if(Ra(e,r),(r&130023424)===r&&(t=wv+500-In(),10<t)){if(vd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){sr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=n0(So.bind(null,e,yr,Wi),t);break}So(e,yr,Wi);break;case 4:if(Ra(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ui(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GT(r/1960))-r,10<r){e.timeoutHandle=n0(So.bind(null,e,yr,Wi),r);break}So(e,yr,Wi);break;case 5:So(e,yr,Wi);break;default:throw Error(ke(329))}}}return wr(e,In()),e.callbackNode===n?zE.bind(null,e):null}function S0(e,t){var n=Tu;return e.current.memoizedState.isDehydrated&&(Lo(e,t).flags|=256),e=Id(e,t),e!==2&&(t=yr,yr=n,t!==null&&w0(t)),e}function w0(e){yr===null?yr=e:yr.push.apply(yr,e)}function zT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!fi(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ra(e,t){for(t&=~Sv,t&=~lm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ui(t),r=1<<n;e[n]=-1,t&=~r}}function Gy(e){if(Ht&6)throw Error(ke(327));zl();var t=vd(e,0);if(!(t&1))return wr(e,In()),null;var n=Id(e,t);if(e.tag!==0&&n===2){var r=Yp(e);r!==0&&(t=r,n=S0(e,r))}if(n===1)throw n=zu,Lo(e,0),Ra(e,t),wr(e,In()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,So(e,yr,Wi),wr(e,In()),null}function Tv(e,t){var n=Ht;Ht|=1;try{return e(t)}finally{Ht=n,Ht===0&&(Kl=In()+500,rm&&Wa())}}function Do(e){Pa!==null&&Pa.tag===0&&!(Ht&6)&&zl();var t=Ht;Ht|=1;var n=Yr.transition,r=qt;try{if(Yr.transition=null,qt=1,e)return e()}finally{qt=r,Yr.transition=n,Ht=t,!(Ht&6)&&Wa()}}function bv(){kr=Il.current,cn(Il)}function Lo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yT(n)),Fn!==null)for(n=Fn.return;n!==null;){var r=n;switch(av(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_d();break;case 3:Yl(),cn(_r),cn(tr),hv();break;case 5:mv(r);break;case 4:Yl();break;case 13:cn(xn);break;case 19:cn(xn);break;case 10:uv(r.type._context);break;case 22:case 23:bv()}n=n.return}if(Xn=e,Fn=e=$a(e.current,null),Kn=kr=t,zn=0,zu=null,Sv=lm=Io=0,yr=Tu=null,To!==null){for(t=0;t<To.length;t++)if(n=To[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}To=null}return e}function UE(e,t){do{var n=Fn;try{if(sv(),rd.current=Od,Rd){for(var r=En.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rd=!1}if(No=0,Wn=Gn=En=null,Su=!1,Bu=0,_v.current=null,n===null||n.return===null){zn=1,zu=t,Fn=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Kn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,p=l,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var d=p.alternate;d?(p.updateQueue=d.updateQueue,p.memoizedState=d.memoizedState,p.lanes=d.lanes):(p.updateQueue=null,p.memoizedState=null)}var w=Ly(o);if(w!==null){w.flags&=-257,Ry(w,o,l,a,t),w.mode&1&&Cy(a,f,t),t=w,u=f;var x=t.updateQueue;if(x===null){var L=new Set;L.add(u),t.updateQueue=L}else x.add(u);break e}else{if(!(t&1)){Cy(a,f,t),Av();break e}u=Error(ke(426))}}else if(dn&&l.mode&1){var I=Ly(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Ry(I,o,l,a,t),ov(Ql(u,l));break e}}a=u=Ql(u,l),zn!==4&&(zn=2),Tu===null?Tu=[a]:Tu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=AE(a,u,t);Ey(a,v);break e;case 1:l=u;var b=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ja===null||!ja.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var H=CE(a,l,t);Ey(a,H);break e}}a=a.return}while(a!==null)}WE(n)}catch(q){t=q,Fn===n&&n!==null&&(Fn=n=n.return);continue}break}while(!0)}function VE(){var e=Pd.current;return Pd.current=Od,e===null?Od:e}function Av(){(zn===0||zn===3||zn===2)&&(zn=4),Xn===null||!(Io&268435455)&&!(lm&268435455)||Ra(Xn,Kn)}function Id(e,t){var n=Ht;Ht|=2;var r=VE();(Xn!==e||Kn!==t)&&(Wi=null,Lo(e,t));do try{UT();break}catch(i){UE(e,i)}while(!0);if(sv(),Ht=n,Pd.current=r,Fn!==null)throw Error(ke(261));return Xn=null,Kn=0,zn}function UT(){for(;Fn!==null;)HE(Fn)}function VT(){for(;Fn!==null&&!pw();)HE(Fn)}function HE(e){var t=YE(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?WE(e):Fn=t,_v.current=null}function WE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FT(n,t),n!==null){n.flags&=32767,Fn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zn=6,Fn=null;return}}else if(n=MT(n,t,kr),n!==null){Fn=n;return}if(t=t.sibling,t!==null){Fn=t;return}Fn=t=e}while(t!==null);zn===0&&(zn=5)}function So(e,t,n){var r=qt,i=Yr.transition;try{Yr.transition=null,qt=1,HT(e,t,n,r)}finally{Yr.transition=i,qt=r}return null}function HT(e,t,n,r){do zl();while(Pa!==null);if(Ht&6)throw Error(ke(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(bw(e,a),e===Xn&&(Fn=Xn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jf||(jf=!0,QE(pd,function(){return zl(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Yr.transition,Yr.transition=null;var o=qt;qt=1;var l=Ht;Ht|=4,_v.current=null,BT(e,n),$E(n,e),fT(e0),gd=!!Jp,e0=Jp=null,e.current=n,$T(n),vw(),Ht=l,qt=o,Yr.transition=a}else e.current=n;if(jf&&(jf=!1,Pa=e,Nd=i),a=e.pendingLanes,a===0&&(ja=null),xw(n.stateNode),wr(e,In()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kd)throw kd=!1,e=E0,E0=null,e;return Nd&1&&e.tag!==0&&zl(),a=e.pendingLanes,a&1?e===_0?bu++:(bu=0,_0=e):bu=0,Wa(),null}function zl(){if(Pa!==null){var e=bx(Nd),t=Yr.transition,n=qt;try{if(Yr.transition=null,qt=16>e?16:e,Pa===null)var r=!1;else{if(e=Pa,Pa=null,Nd=0,Ht&6)throw Error(ke(331));var i=Ht;for(Ht|=4,et=e.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(et=f;et!==null;){var p=et;switch(p.tag){case 0:case 11:case 15:wu(8,p,a)}var h=p.child;if(h!==null)h.return=p,et=h;else for(;et!==null;){p=et;var d=p.sibling,w=p.return;if(FE(p),p===f){et=null;break}if(d!==null){d.return=w,et=d;break}et=w}}}var x=a.alternate;if(x!==null){var L=x.child;if(L!==null){x.child=null;do{var I=L.sibling;L.sibling=null,L=I}while(L!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,et=v;break e}et=a.return}}var b=e.current;for(et=b;et!==null;){o=et;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,et=C;else e:for(o=b;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:om(9,l)}}catch(q){Cn(l,l.return,q)}if(l===o){et=null;break e}var H=l.sibling;if(H!==null){H.return=l.return,et=H;break e}et=l.return}}if(Ht=i,Wa(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(Zd,e)}catch{}r=!0}return r}finally{qt=n,Yr.transition=t}}return!1}function zy(e,t,n){t=Ql(n,t),t=AE(e,t,1),e=Fa(e,t,1),t=sr(),e!==null&&(Ku(e,1,t),wr(e,t))}function Cn(e,t,n){if(e.tag===3)zy(e,e,n);else for(;t!==null;){if(t.tag===3){zy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){e=Ql(n,e),e=CE(t,e,1),t=Fa(t,e,1),e=sr(),t!==null&&(Ku(t,1,e),wr(t,e));break}}t=t.return}}function WT(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&n,Xn===e&&(Kn&n)===n&&(zn===4||zn===3&&(Kn&130023424)===Kn&&500>In()-wv?Lo(e,0):Sv|=n),wr(e,t)}function XE(e,t){t===0&&(e.mode&1?(t=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):t=1);var n=sr();e=Ji(e,t),e!==null&&(Ku(e,t,n),wr(e,n))}function XT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XE(e,n)}function YT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),XE(e,n)}var YE;YE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_r.current)xr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xr=!1,DT(e,t,n);xr=!!(e.flags&131072)}else xr=!1,dn&&t.flags&1048576&&qx(t,Td,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ad(e,t),e=t.pendingProps;var i=Hl(t,tr.current);Gl(t,n),i=vv(null,t,r,e,i,n);var a=gv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sr(r)?(a=!0,Sd(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fv(t),i.updater=im,t.stateNode=i,i._reactInternals=t,u0(t,r,e,n),t=d0(null,t,r,!0,a,n)):(t.tag=0,dn&&a&&iv(t),or(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ad(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=KT(r),e=ai(r,e),i){case 0:t=f0(null,t,r,e,n);break e;case 1:t=ky(null,t,r,e,n);break e;case 11:t=Oy(null,t,r,e,n);break e;case 14:t=Py(null,t,r,ai(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ai(r,i),f0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ai(r,i),ky(e,t,r,i,n);case 3:e:{if(PE(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,i=a.element,tE(e,t),Cd(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Ql(Error(ke(423)),t),t=Ny(e,t,r,n,i);break e}else if(r!==i){i=Ql(Error(ke(424)),t),t=Ny(e,t,r,n,i);break e}else for(Nr=Ma(t.stateNode.containerInfo.firstChild),Ir=t,dn=!0,li=null,n=aE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wl(),r===i){t=ea(e,t,n);break e}or(e,t,r,n)}t=t.child}return t;case 5:return oE(t),e===null&&o0(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,t0(r,i)?o=null:a!==null&&t0(r,a)&&(t.flags|=32),OE(e,t),or(e,t,o,n),t.child;case 6:return e===null&&o0(t),null;case 13:return kE(e,t,n);case 4:return dv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xl(t,null,r,n):or(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ai(r,i),Oy(e,t,r,i,n);case 7:return or(e,t,t.pendingProps,n),t.child;case 8:return or(e,t,t.pendingProps.children,n),t.child;case 12:return or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,on(bd,r._currentValue),r._currentValue=o,a!==null)if(fi(a.value,o)){if(a.children===i.children&&!_r.current){t=ea(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ki(-1,n&-n),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?u.next=u:(u.next=p.next,p.next=u),f.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),l0(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),l0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}or(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Gl(t,n),i=Qr(i),r=r(i),t.flags|=1,or(e,t,r,n),t.child;case 14:return r=t.type,i=ai(r,t.pendingProps),i=ai(r.type,i),Py(e,t,r,i,n);case 15:return LE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ai(r,i),ad(e,t),t.tag=1,Sr(r)?(e=!0,Sd(t)):e=!1,Gl(t,n),rE(t,r,i),u0(t,r,i,n),d0(null,t,r,!0,e,n);case 19:return NE(e,t,n);case 22:return RE(e,t,n)}throw Error(ke(156,t.tag))};function QE(e,t){return _x(e,t)}function QT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(e,t,n,r){return new QT(e,t,n,r)}function Cv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KT(e){if(typeof e=="function")return Cv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W0)return 11;if(e===X0)return 14}return 2}function $a(e,t){var n=e.alternate;return n===null?(n=Xr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function sd(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")Cv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tl:return Ro(n.children,i,a,t);case H0:o=8,i|=8;break;case Np:return e=Xr(12,n,t,i|2),e.elementType=Np,e.lanes=a,e;case Ip:return e=Xr(13,n,t,i),e.elementType=Ip,e.lanes=a,e;case Dp:return e=Xr(19,n,t,i),e.elementType=Dp,e.lanes=a,e;case ix:return sm(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nx:o=10;break e;case rx:o=9;break e;case W0:o=11;break e;case X0:o=14;break e;case Aa:o=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Xr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ro(e,t,n,r){return e=Xr(7,e,r,t),e.lanes=n,e}function sm(e,t,n,r){return e=Xr(22,e,r,t),e.elementType=ix,e.lanes=n,e.stateNode={isHidden:!1},e}function op(e,t,n){return e=Xr(6,e,null,t),e.lanes=n,e}function lp(e,t,n){return t=Xr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qT(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gh(0),this.expirationTimes=Gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lv(e,t,n,r,i,a,o,l,u){return e=new qT(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Xr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fv(a),e}function ZT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function KE(e){if(!e)return Ua;e=e._reactInternals;e:{if(jo(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(Sr(n))return Qx(e,n,t)}return t}function qE(e,t,n,r,i,a,o,l,u){return e=Lv(n,r,!0,e,i,a,o,l,u),e.context=KE(null),n=e.current,r=sr(),i=Ba(n),a=Ki(r,i),a.callback=t??null,Fa(n,a,i),e.current.lanes=i,Ku(e,i,r),wr(e,r),e}function um(e,t,n,r){var i=t.current,a=sr(),o=Ba(i);return n=KE(n),t.context===null?t.context=n:t.pendingContext=n,t=Ki(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fa(i,t,o),e!==null&&(ci(e,i,o,a),nd(e,i,o)),o}function Dd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rv(e,t){Uy(e,t),(e=e.alternate)&&Uy(e,t)}function JT(){return null}var ZE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ov(e){this._internalRoot=e}cm.prototype.render=Ov.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));um(e,t,null,null)};cm.prototype.unmount=Ov.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Do(function(){um(null,e,null,null)}),t[Zi]=null}};function cm(e){this._internalRoot=e}cm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<La.length&&t!==0&&t<La[n].priority;n++);La.splice(n,0,e),n===0&&Ox(e)}};function Pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function eb(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Dd(o);a.call(f)}}var o=qE(t,r,e,0,null,!1,!1,"",Vy);return e._reactRootContainer=o,e[Zi]=o.current,Iu(e.nodeType===8?e.parentNode:e),Do(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Dd(u);l.call(f)}}var u=Lv(e,0,!1,null,null,!1,!1,"",Vy);return e._reactRootContainer=u,e[Zi]=u.current,Iu(e.nodeType===8?e.parentNode:e),Do(function(){um(t,u,n,r)}),u}function dm(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Dd(o);l.call(u)}}um(t,o,e,i)}else o=eb(n,t,e,i,r);return Dd(o)}Ax=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hu(t.pendingLanes);n!==0&&(K0(t,n|1),wr(t,In()),!(Ht&6)&&(Kl=In()+500,Wa()))}break;case 13:Do(function(){var r=Ji(e,1);if(r!==null){var i=sr();ci(r,e,1,i)}}),Rv(e,1)}};q0=function(e){if(e.tag===13){var t=Ji(e,134217728);if(t!==null){var n=sr();ci(t,e,134217728,n)}Rv(e,134217728)}};Cx=function(e){if(e.tag===13){var t=Ba(e),n=Ji(e,t);if(n!==null){var r=sr();ci(n,e,t,r)}Rv(e,t)}};Lx=function(){return qt};Rx=function(e,t){var n=qt;try{return qt=e,t()}finally{qt=n}};Hp=function(e,t,n){switch(t){case"input":if(jp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=nm(r);if(!i)throw Error(ke(90));ox(r),jp(r,i)}}}break;case"textarea":sx(e,n);break;case"select":t=n.value,t!=null&&Fl(e,!!n.multiple,t,!1)}};px=Tv;vx=Do;var tb={usingClientEntryPoint:!1,Events:[Zu,Ll,nm,mx,hx,Tv]},ou={findFiberByHostInstance:wo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nb={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bf.isDisabled&&Bf.supportsFiber)try{Zd=Bf.inject(nb),Ri=Bf}catch{}}Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tb;Mr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pv(t))throw Error(ke(200));return ZT(e,t,null,n)};Mr.createRoot=function(e,t){if(!Pv(e))throw Error(ke(299));var n=!1,r="",i=ZE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lv(e,1,!1,null,null,n,!1,r,i),e[Zi]=t.current,Iu(e.nodeType===8?e.parentNode:e),new Ov(t)};Mr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};Mr.flushSync=function(e){return Do(e)};Mr.hydrate=function(e,t,n){if(!fm(t))throw Error(ke(200));return dm(null,e,t,!0,n)};Mr.hydrateRoot=function(e,t,n){if(!Pv(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=qE(t,null,e,1,n??null,i,!1,a,o),e[Zi]=t.current,Iu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new cm(t)};Mr.render=function(e,t,n){if(!fm(t))throw Error(ke(200));return dm(null,e,t,!1,n)};Mr.unmountComponentAtNode=function(e){if(!fm(e))throw Error(ke(40));return e._reactRootContainer?(Do(function(){dm(null,null,e,!1,function(){e._reactRootContainer=null,e[Zi]=null})}),!0):!1};Mr.unstable_batchedUpdates=Tv;Mr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fm(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return dm(e,t,n,!1,r)};Mr.version="18.2.0-next-9e3b772b8-20220608";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(e){console.error(e)}}JE(),q1.exports=Mr;var rb=q1.exports,Hy=rb;Pp.createRoot=Hy.createRoot,Pp.hydrateRoot=Hy.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uu.apply(this,arguments)}var ka;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ka||(ka={}));const Wy="popstate";function ib(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return T0("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Md(i)}return ob(t,n,null,e)}function jn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ab(){return Math.random().toString(36).substr(2,8)}function Xy(e,t){return{usr:e.state,key:e.key,idx:t}}function T0(e,t,n,r){return n===void 0&&(n=null),Uu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ns(t):t,{state:n,key:t&&t.key||r||ab()})}function Md(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ns(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ob(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=ka.Pop,u=null,f=p();f==null&&(f=0,o.replaceState(Uu({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function h(){l=ka.Pop;let I=p(),v=I==null?null:I-f;f=I,u&&u({action:l,location:L.location,delta:v})}function d(I,v){l=ka.Push;let b=T0(L.location,I,v);n&&n(b,I),f=p()+1;let C=Xy(b,f),H=L.createHref(b);try{o.pushState(C,"",H)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(H)}a&&u&&u({action:l,location:L.location,delta:1})}function w(I,v){l=ka.Replace;let b=T0(L.location,I,v);n&&n(b,I),f=p();let C=Xy(b,f),H=L.createHref(b);o.replaceState(C,"",H),a&&u&&u({action:l,location:L.location,delta:0})}function x(I){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof I=="string"?I:Md(I);return jn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let L={get action(){return l},get location(){return e(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Wy,h),u=I,()=>{i.removeEventListener(Wy,h),u=null}},createHref(I){return t(i,I)},createURL:x,encodeLocation(I){let v=x(I);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:w,go(I){return o.go(I)}};return L}var Yy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Yy||(Yy={}));function lb(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ns(t):t,i=Nv(r.pathname||"/",n);if(i==null)return null;let a=e_(e);sb(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=gb(a[l],Eb(i));return o}function e_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(jn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Ga([r,u.relativePath]),p=n.concat(u);a.children&&a.children.length>0&&(jn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),e_(a.children,t,p,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:pb(f,a.index),routesMeta:p})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of t_(a.path))i(a,o,u)}),t}function t_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=t_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function sb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vb(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ub=/^:\w+$/,cb=3,fb=2,db=1,mb=10,hb=-2,Qy=e=>e==="*";function pb(e,t){let n=e.split("/"),r=n.length;return n.some(Qy)&&(r+=hb),t&&(r+=fb),n.filter(i=>!Qy(i)).reduce((i,a)=>i+(ub.test(a)?cb:a===""?db:mb),r)}function vb(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function gb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=yb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!p)return null;Object.assign(r,p.params);let h=l.route;a.push({params:r,pathname:Ga([i,p.pathname]),pathnameBase:Tb(Ga([i,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(i=Ga([i,p.pathnameBase]))}return a}function yb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xb(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,p,h)=>{let{paramName:d,isOptional:w}=p;if(d==="*"){let L=l[h]||"";o=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const x=l[h];return w&&!x?f[d]=void 0:f[d]=_b(x||"",d),f},{}),pathname:a,pathnameBase:o,pattern:e}}function xb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),kv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Eb(e){try{return decodeURI(e)}catch(t){return kv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _b(e,t){try{return decodeURIComponent(e)}catch(n){return kv(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Nv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sb(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ns(e):e;return{pathname:n?n.startsWith("/")?n:wb(n,t):t,search:bb(r),hash:Ab(i)}}function wb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function r_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ns(e):(i=Uu({},e),jn(!i.pathname||!i.pathname.includes("?"),sp("?","pathname","search",i)),jn(!i.pathname||!i.pathname.includes("#"),sp("#","pathname","hash",i)),jn(!i.search||!i.search.includes("#"),sp("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else if(r){let h=t[t.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h.pop();i.pathname=d.join("/")}l="/"+h.join("/")}else{let h=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}l=h>=0?t[h]:"/"}let u=Sb(i,l),f=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||p)&&(u.pathname+="/"),u}const Ga=e=>e.join("/").replace(/\/\/+/g,"/"),Tb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ab=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Cb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const i_=["post","put","patch","delete"];new Set(i_);const Lb=["get",...i_];new Set(Lb);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fd.apply(this,arguments)}const Iv=j.createContext(null),Rb=j.createContext(null),rs=j.createContext(null),mm=j.createContext(null),Xa=j.createContext({outlet:null,matches:[],isDataRoute:!1}),a_=j.createContext(null);function Ob(e,t){let{relative:n}=t===void 0?{}:t;ec()||jn(!1);let{basename:r,navigator:i}=j.useContext(rs),{hash:a,pathname:o,search:l}=s_(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ga([r,o])),i.createHref({pathname:u,search:l,hash:a})}function ec(){return j.useContext(mm)!=null}function hm(){return ec()||jn(!1),j.useContext(mm).location}function o_(e){j.useContext(rs).static||j.useLayoutEffect(e)}function pm(){let{isDataRoute:e}=j.useContext(Xa);return e?Ub():Pb()}function Pb(){ec()||jn(!1);let e=j.useContext(Iv),{basename:t,navigator:n}=j.useContext(rs),{matches:r}=j.useContext(Xa),{pathname:i}=hm(),a=JSON.stringify(n_(r).map(u=>u.pathnameBase)),o=j.useRef(!1);return o_(()=>{o.current=!0}),j.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let p=r_(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ga([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,a,i,e])}function l_(){let{matches:e}=j.useContext(Xa),t=e[e.length-1];return t?t.params:{}}function s_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=j.useContext(Xa),{pathname:i}=hm(),a=JSON.stringify(n_(r).map(o=>o.pathnameBase));return j.useMemo(()=>r_(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function kb(e,t){return Nb(e,t)}function Nb(e,t,n){ec()||jn(!1);let{navigator:r}=j.useContext(rs),{matches:i}=j.useContext(Xa),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=hm(),f;if(t){var p;let L=typeof t=="string"?ns(t):t;l==="/"||(p=L.pathname)!=null&&p.startsWith(l)||jn(!1),f=L}else f=u;let h=f.pathname||"/",d=l==="/"?h:h.slice(l.length)||"/",w=lb(e,{pathname:d}),x=jb(w&&w.map(L=>Object.assign({},L,{params:Object.assign({},o,L.params),pathname:Ga([l,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?l:Ga([l,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),i,n);return t&&x?j.createElement(mm.Provider,{value:{location:Fd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ka.Pop}},x):x}function Ib(){let e=zb(),t=Cb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,a)}const Db=j.createElement(Ib,null);class Mb extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?j.createElement(Xa.Provider,{value:this.props.routeContext},j.createElement(a_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fb(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(Iv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Xa.Provider,{value:t},r)}function jb(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));l>=0||jn(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,u,f)=>{let p=u.route.id?o==null?void 0:o[u.route.id]:null,h=null;n&&(h=u.route.errorElement||Db);let d=t.concat(a.slice(0,f+1)),w=()=>{let x;return p?x=h:u.route.Component?x=j.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=l,j.createElement(Fb,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?j.createElement(Mb,{location:n.location,revalidation:n.revalidation,component:h,error:p,children:w(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):w()},null)}var u_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(u_||{}),jd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jd||{});function Bb(e){let t=j.useContext(Iv);return t||jn(!1),t}function $b(e){let t=j.useContext(Rb);return t||jn(!1),t}function Gb(e){let t=j.useContext(Xa);return t||jn(!1),t}function c_(e){let t=Gb(),n=t.matches[t.matches.length-1];return n.route.id||jn(!1),n.route.id}function zb(){var e;let t=j.useContext(a_),n=$b(jd.UseRouteError),r=c_(jd.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function Ub(){let{router:e}=Bb(u_.UseNavigateStable),t=c_(jd.UseNavigateStable),n=j.useRef(!1);return o_(()=>{n.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Fd({fromRouteId:t},a)))},[e,t])}function vu(e){jn(!1)}function Vb(e){let{basename:t="/",children:n=null,location:r,navigationType:i=ka.Pop,navigator:a,static:o=!1}=e;ec()&&jn(!1);let l=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=ns(r));let{pathname:f="/",search:p="",hash:h="",state:d=null,key:w="default"}=r,x=j.useMemo(()=>{let L=Nv(f,l);return L==null?null:{location:{pathname:L,search:p,hash:h,state:d,key:w},navigationType:i}},[l,f,p,h,d,w,i]);return x==null?null:j.createElement(rs.Provider,{value:u},j.createElement(mm.Provider,{children:n,value:x}))}function Hb(e){let{children:t,location:n}=e;return kb(b0(t),n)}new Promise(()=>{});function b0(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){n.push.apply(n,b0(r.props.children,a));return}r.type!==vu&&jn(!1),!r.props.index||!r.props.children||jn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=b0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A0.apply(this,arguments)}function Wb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Xb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yb(e,t){return e.button===0&&(!t||t==="_self")&&!Xb(e)}const Qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kb="startTransition",Ky=XS[Kb];function qb(e){let{basename:t,children:n,future:r,window:i}=e,a=j.useRef();a.current==null&&(a.current=ib({window:i,v5Compat:!0}));let o=a.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},p=j.useCallback(h=>{f&&Ky?Ky(()=>u(h)):u(h)},[u,f]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.createElement(Vb,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}const Zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C0=j.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:p,unstable_viewTransition:h}=t,d=Wb(t,Qb),{basename:w}=j.useContext(rs),x,L=!1;if(typeof f=="string"&&Jb.test(f)&&(x=f,Zb))try{let C=new URL(window.location.href),H=f.startsWith("//")?new URL(C.protocol+f):new URL(f),q=Nv(H.pathname,w);H.origin===C.origin&&q!=null?f=q+H.search+H.hash:L=!0}catch{}let I=Ob(f,{relative:i}),v=eA(f,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,unstable_viewTransition:h});function b(C){r&&r(C),C.defaultPrevented||v(C)}return j.createElement("a",A0({},d,{href:x||I,onClick:L||a?r:b,ref:n,target:u}))});var qy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(qy||(qy={}));var Zy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Zy||(Zy={}));function eA(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,u=pm(),f=hm(),p=s_(e,{relative:o});return j.useCallback(h=>{if(Yb(h,n)){h.preventDefault();let d=r!==void 0?r:Md(f)===Md(p);u(e,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[f,u,p,r,i,n,e,a,o,l])}const tA="/api";function f_(e,t,n){let r=null;return console.log("start polling",n),r=setInterval(()=>{fetch(`${tA}/jobs/job?dataset=${e.id}&job_id=${n}`).then(i=>{if(!i.ok)throw clearInterval(r),t(null),new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{console.log("polling job status",i),t(i),(i.status==="completed"||i.status==="error")&&(clearInterval(r),setTimeout(()=>{t(null),t(i)},200))}).catch(i=>{console.error("Error polling job status",i),clearInterval(r),t(null)})},200),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",r),r&&clearInterval(r)}}function ql(e,t,n){return{startJob:j.useCallback(i=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(i)}`).then(a=>a.json()).then(a=>{const o=a.job_id;f_(e,t,o)})},[e,t,n])}}var d_={exports:{}},nA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rA=nA,iA=rA;function m_(){}function h_(){}h_.resetWarningCache=m_;var aA=function(){function e(r,i,a,o,l,u){if(u!==iA){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:h_,resetWarningCache:m_};return n.PropTypes=n,n};d_.exports=aA();var oA=d_.exports;const qe=F0(oA);is.propTypes={job:qe.object,onlyLast:qe.bool,clearJob:qe.func.isRequired};function is({job:e,onlyLast:t,clearJob:n}){const r=j.useRef(null);return j.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e]),O.jsx(O.Fragment,{children:e?O.jsxs("div",{className:"job-progress",children:["Running ",O.jsx("b",{children:e.job_name}),O.jsx("br",{}),O.jsx("code",{children:e.command}),O.jsx("pre",{ref:r,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),e.status=="completed"?O.jsx("button",{onClick:n,children:""}):null,e.status=="error"?O.jsx("button",{onClick:n,children:""}):null]}):O.jsx(O.Fragment,{})})}var lA={VITE_API_URL:"/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const $f="/api";console.log("ENV",lA);function sA(){const[e,t]=j.useState([]);j.useEffect(()=>{fetch(`${$f}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=j.useState({});j.useEffect(()=>{e.forEach(d=>{fetch(`${$f}/datasets/${d.id}/scopes`).then(w=>w.json()).then(w=>r(x=>{const L={...x};return L[d.id]=w,L}))})},[e]),j.useEffect(()=>{console.log("scopes",n)},[n]);const[i,a]=j.useState(null),o=d=>{d.preventDefault();const w=d.target[1].value,L=d.target[0].files[0],I=new FormData;I.append("dataset",w),I.append("file",L),fetch(`${$f}/jobs/ingest`,{method:"POST",body:I}).then(v=>v.json()).then(v=>{console.log("Job ID:",v.job_id),f_({id:w},a,v.job_id)}).catch(v=>{console.error("Error:",v)})},l=d=>{d.preventDefault()};function u(d){let w=d.substring(0,d.lastIndexOf("."));return w=w.replace(/\s/g,"-"),w}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const w=d.dataTransfer.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},p=d=>{const w=d.target.files[0].name,x=u(w);document.getElementById("dataset-name").value=x},h=pm();return j.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){h(`/datasets/${i.dataset}/setup`)},1e3)},[i,h]),O.jsxs("div",{className:"home",children:[O.jsxs("div",{className:"new-dataset",children:[O.jsx("h3",{children:"Create new dataset"}),O.jsxs("form",{onSubmit:o,onDragOver:l,onDrop:f,children:[O.jsx("label",{htmlFor:"upload-button",children:O.jsx("span",{children:"Import a CSV to create a new dataset"})}),O.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:p}),O.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),O.jsx("button",{type:"submit",children:"Submit"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),O.jsx("h3",{children:"Datasets"}),O.jsx("ul",{children:e.map(d=>{var w;return O.jsxs("li",{children:[O.jsxs(C0,{to:`/datasets/${d.name}/setup`,children:["Setup ",d.name]}),O.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((w=n[d.id])==null?void 0:w.map((x,L)=>O.jsxs("div",{className:"scope-link",children:[O.jsxs(C0,{to:`/datasets/${d.name}/explore/${x.id}`,children:["Explore ",x.name," - ",x.label,O.jsx("br",{}),O.jsx("img",{width:"120px",src:`${$f}/files/${d.id}/clusters/${x.cluster}.png`})]}),O.jsx("br",{})]},L)))})]},d.id)})})]})}const Jy="/api";Ao.propTypes={data:qe.array.isRequired,tagset:qe.object,datasetId:qe.string,maxRows:qe.number,onTagset:qe.func,onHover:qe.func,onClick:qe.func};function Ao({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:a,onClick:o}){if(!e.length)return O.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(h,d){console.log("tag",h),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[h]),t[h].includes(d)?(console.log("removing"),fetch(`${Jy}/tags/remove?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("removed",w),i(w)})):(console.log("adding"),fetch(`${Jy}/tags/add?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("added",w),i(w)}))}t&&(u=Object.keys(t));const p=r?e.slice(0,r):e;return O.jsxs(O.Fragment,{children:[O.jsxs("table",{className:"datatable",children:[O.jsx("thead",{children:O.jsxs("tr",{children:[l.map((h,d)=>O.jsx("th",{children:h},d)),u?O.jsx("th",{children:"tags"}):null]})}),O.jsx("tbody",{children:p.map((h,d)=>O.jsxs("tr",{onMouseEnter:()=>a&&a(h.index),onMouseLeave:()=>a&&a(),onClick:()=>o&&o(h.index),children:[l.map((w,x)=>O.jsx("td",{children:h[w]},x)),u?O.jsx("td",{children:u.map((w,x)=>O.jsx("button",{onClick:L=>{f(w,h.index),L.preventDefault(),L.stopPropagation()},className:t[w].includes(h.index)?"tag-active":"tag-inactive",children:w},x))}):null]},d))})]}),r&&e.length>r?O.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const p_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Dv=(e,t)=>t?e.toLowerCase():e,v_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const a=Dv(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(r),e.__times__[a].push(+i||1/0),{event:a,handler:r}},Mv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=Dv(n,t);if(!e[i])return;const a=e[i].indexOf(r);a===-1||a>=e[i].length||(e[i].splice(a,1),e.__times__[i].splice(a,1))},e1=(e,t)=>()=>{e.forEach(n=>n(t))},g_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Mv(e);return(a,o,l={})=>{const u=Dv(a,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((p,h)=>{--e.__times__[u][h]<1&&i(u,p)}),r||l.async?setTimeout(e1(f,o),0):e1(f,o)(),t&&!l.isNoGlobalBroadcast)try{p_.postMessage({event:u,news:o})}catch(p){if(p instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw p}}},uA=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},y_=()=>({__times__:{}}),cA=({async:e=!1,caseInsensitive:t=!1,stack:n=y_()}={})=>(n.__times__||(n.__times__={}),{publish:g_(n,{async:e,caseInsensitive:t}),subscribe:v_(n,{caseInsensitive:t}),unsubscribe:Mv(n,{caseInsensitive:t}),clear:uA(n),stack:n}),Gf=y_(),fA={publish:g_(Gf,{isGlobal:!0}),subscribe:v_(Gf),unsubscribe:Mv(Gf),stack:Gf};p_.onmessage=({data:{event:e,news:t}})=>fA.publish(e,t,{isNoGlobalBroadcast:!0});var x_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(PS,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,g){for(var R=Object.keys(g),X=0;X<R.length;++X)c[R[X]]=g[R[X]];return c},i=`
`;function a(c){return typeof atob<"u"?atob(c):"base64:"+c}function o(c){var g=new Error("(regl) "+c);throw console.error(g),g}function l(c,g){c||o(g)}function u(c){return c?": "+c:""}function f(c,g,R){c in g||o("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join())}function p(c,g){n(c)||o("invalid parameter type"+u(g)+". must be a typed array")}function h(c,g){switch(g){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,g,R){h(c,g)||o("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c)}function w(c,g){c>=0&&(c|0)===c||o("invalid parameter type, ("+c+")"+u(g)+". must be a nonnegative integer")}function x(c,g,R){g.indexOf(c)<0&&o("invalid value"+u(R)+". must be one of: "+g)}var L=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(c){Object.keys(c).forEach(function(g){L.indexOf(g)<0&&o('invalid regl constructor argument "'+g+'". must be one of '+L)})}function v(c,g){for(c=c+"";c.length<g;)c=" "+c;return c}function b(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(c,g){this.number=c,this.line=g,this.errors=[]}function H(c,g,R){this.file=c,this.line=g,this.message=R}function q(){var c=new Error,g=(c.stack||c).toString(),R=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(g);return X?X[1]:"unknown"}function ie(){var c=new Error,g=(c.stack||c).toString(),R=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(g);if(R)return R[1];var X=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(g);return X?X[1]:"unknown"}function we(c,g){var R=c.split(`
`),X=1,te=0,W={unknown:new b,0:new b};W.unknown.name=W[0].name=g||q(),W.unknown.lines.push(new C(0,""));for(var K=0;K<R.length;++K){var fe=R[K],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(ce)switch(ce[1]){case"line":var ge=/(\d+)(\s+\d+)?/.exec(ce[2]);ge&&(X=ge[1]|0,ge[2]&&(te=ge[2]|0,te in W||(W[te]=new b)));break;case"define":var xe=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);xe&&(W[te].name=xe[1]?a(xe[2]):xe[2]);break}W[te].lines.push(new C(X++,fe))}return Object.keys(W).forEach(function(ye){var Te=W[ye];Te.lines.forEach(function(de){Te.index[de.number]=de})}),W}function ue(c){var g=[];return c.split(`
`).forEach(function(R){if(!(R.length<5)){var X=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(R);X?g.push(new H(X[1]|0,X[2]|0,X[3].trim())):R.length>0&&g.push(new H("unknown",0,R))}}),g}function at(c,g){g.forEach(function(R){var X=c[R.file];if(X){var te=X.index[R.line];if(te){te.errors.push(R),X.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(R)})}function He(c,g,R,X,te){if(!c.getShaderParameter(g,c.COMPILE_STATUS)){var W=c.getShaderInfoLog(g),K=X===c.FRAGMENT_SHADER?"fragment":"vertex";ht(R,"string",K+" shader source must be a string",te);var fe=we(R,te),ce=ue(W);at(fe,ce),Object.keys(fe).forEach(function(ge){var xe=fe[ge];if(!xe.hasErrors)return;var ye=[""],Te=[""];function de(ve,B){ye.push(ve),Te.push(B||"")}de("file number "+ge+": "+xe.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),xe.lines.forEach(function(ve){if(ve.errors.length>0){de(v(ve.number,4)+"|  ","background-color:yellow; font-weight:bold"),de(ve.line+i,"color:red; background-color:yellow; font-weight:bold");var B=0;ve.errors.forEach(function(Q){var he=Q.message,Fe=/^\s*'(.*)'\s*:\s*(.*)$/.exec(he);if(Fe){var se=Fe[1];switch(he=Fe[2],se){case"assign":se="=";break}B=Math.max(ve.line.indexOf(se,B),0)}else B=0;de(v("| ",6)),de(v("^^^",B+3)+i,"font-weight:bold"),de(v("| ",6)),de(he+i,"font-weight:bold")}),de(v("| ",6)+i)}else de(v(ve.number,4)+"|  "),de(ve.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(Te[0]=ye.join("%c"),console.log.apply(console,Te)):console.log(ye.join(""))}),l.raise("Error compiling "+K+" shader, "+fe[0].name)}}function Se(c,g,R,X,te){if(!c.getProgramParameter(g,c.LINK_STATUS)){var W=c.getProgramInfoLog(g),K=we(R,te),fe=we(X,te),ce='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+ce+i+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+i+W),l.raise(ce)}}function Ke(c){c._commandRef=q()}function Qe(c,g,R,X){Ke(c);function te(ce){return ce?X.id(ce):0}c._fragId=te(c.static.frag),c._vertId=te(c.static.vert);function W(ce,ge){Object.keys(ge).forEach(function(xe){ce[X.id(xe)]=!0})}var K=c._uniformSet={};W(K,g.static),W(K,g.dynamic);var fe=c._attributeSet={};W(fe,R.static),W(fe,R.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function Ge(c,g){var R=ie();o(c+" in command "+(g||q())+(R==="unknown"?"":" called from "+R))}function Pt(c,g,R){c||Ge(g,R||q())}function mt(c,g,R,X){c in g||Ge("unknown parameter ("+c+")"+u(R)+". possible values: "+Object.keys(g).join(),X||q())}function ht(c,g,R,X){h(c,g)||Ge("invalid parameter type"+u(R)+". expected "+g+", got "+typeof c,X||q())}function pe(c){c()}function We(c,g,R){c.texture?x(c.texture._texture.internalformat,g,"unsupported texture format for attachment"):x(c.renderbuffer._renderbuffer.format,R,"unsupported renderbuffer format for attachment")}var Le=33071,Ee=9728,$e=9984,lt=9985,xt=9986,Wt=9987,Yt=5120,Qt=5121,It=5122,pt=5123,Yn=5124,mn=5125,Xt=5126,en=32819,Et=32820,St=33635,kt=34042,At=36193,Ct={};Ct[Yt]=Ct[Qt]=1,Ct[It]=Ct[pt]=Ct[At]=Ct[St]=Ct[en]=Ct[Et]=2,Ct[Yn]=Ct[mn]=Ct[Xt]=Ct[kt]=4;function Ut(c,g){return c===Et||c===en||c===St?2:c===kt?4:Ct[c]*g}function hn(c){return!(c&c-1)&&!!c}function ln(c,g,R){var X,te=g.width,W=g.height,K=g.channels;l(te>0&&te<=R.maxTextureSize&&W>0&&W<=R.maxTextureSize,"invalid texture shape"),(c.wrapS!==Le||c.wrapT!==Le)&&l(hn(te)&&hn(W),"incompatible wrap mode for texture, both width and height must be power of 2"),g.mipmask===1?te!==1&&W!==1&&l(c.minFilter!==$e&&c.minFilter!==xt&&c.minFilter!==lt&&c.minFilter!==Wt,"min filter requires mipmap"):(l(hn(te)&&hn(W),"texture must be a square power of 2 to support mipmapping"),l(g.mipmask===(te<<1)-1,"missing or incomplete mipmap data")),g.type===Xt&&(R.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===Ee&&c.magFilter===Ee,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var fe=g.images;for(X=0;X<16;++X)if(fe[X]){var ce=te>>X,ge=W>>X;l(g.mipmask&1<<X,"missing mipmap data");var xe=fe[X];if(l(xe.width===ce&&xe.height===ge,"invalid shape for mip images"),l(xe.format===g.format&&xe.internalformat===g.internalformat&&xe.type===g.type,"incompatible type for mip image"),!xe.compressed)if(xe.data){var ye=Math.ceil(Ut(xe.type,K)*ce/xe.unpackAlignment)*xe.unpackAlignment;l(xe.data.byteLength===ye*ge,"invalid data for image, buffer size is inconsistent with image format")}else xe.element||xe.copy}else c.genMipmaps||l((g.mipmask&1<<X)===0,"extra mipmap data");g.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function qr(c,g,R,X){var te=c.width,W=c.height,K=c.channels;l(te>0&&te<=X.maxTextureSize&&W>0&&W<=X.maxTextureSize,"invalid texture shape"),l(te===W,"cube map must be square"),l(g.wrapS===Le&&g.wrapT===Le,"wrap mode not supported by cube map");for(var fe=0;fe<R.length;++fe){var ce=R[fe];l(ce.width===te&&ce.height===W,"inconsistent cube map face shape"),g.genMipmaps&&(l(!ce.compressed,"can not generate mipmap for compressed textures"),l(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ge=ce.images,xe=0;xe<16;++xe){var ye=ge[xe];if(ye){var Te=te>>xe,de=W>>xe;l(ce.mipmask&1<<xe,"missing mipmap data"),l(ye.width===Te&&ye.height===de,"invalid shape for mip images"),l(ye.format===c.format&&ye.internalformat===c.internalformat&&ye.type===c.type,"incompatible type for mip image"),ye.compressed||(ye.data?l(ye.data.byteLength===Te*de*Math.max(Ut(ye.type,K),ye.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ye.element||ye.copy)}}}}var y=r(l,{optional:pe,raise:o,commandRaise:Ge,command:Pt,parameter:f,commandParameter:mt,constructor:I,type:d,commandType:ht,isTypedArray:p,nni:w,oneOf:x,shaderError:He,linkError:Se,callSite:ie,saveCommandRef:Ke,saveDrawInfo:Qe,framebufferFormat:We,guessCommand:q,texture2D:ln,textureCube:qr}),wt=0,Ft=0,Ie=5,Kt=6;function gt(c,g){this.id=wt++,this.type=c,this.data=g}function De(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(c){if(c.length===0)return[];var g=c.charAt(0),R=c.charAt(c.length-1);if(c.length>1&&g===R&&(g==='"'||g==="'"))return['"'+De(c.substr(1,c.length-2))+'"'];var X=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(X)return ut(c.substr(0,X.index)).concat(ut(X[1])).concat(ut(c.substr(X.index+X[0].length)));var te=c.split(".");if(te.length===1)return['"'+De(c)+'"'];for(var W=[],K=0;K<te.length;++K)W=W.concat(ut(te[K]));return W}function jt(c){return"["+ut(c).join("][")+"]"}function st(c,g){return new gt(c,jt(g+""))}function tn(c){return typeof c=="function"&&!c._reglType||c instanceof gt}function nn(c,g){if(typeof c=="function")return new gt(Ft,c);if(typeof c=="number"||typeof c=="boolean")return new gt(Ie,c);if(Array.isArray(c))return new gt(Kt,c.map(function(R,X){return nn(R,g+"["+X+"]")}));if(c instanceof gt)return c;y(!1,"invalid option type in uniform "+g)}var Ot={DynamicVariable:gt,define:st,isDynamic:tn,unbox:nn,accessor:jt},Sn={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},pn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Tr(){var c={"":0},g=[""];return{id:function(R){var X=c[R];return X||(X=c[R]=g.length,g.push(R),X)},str:function(R){return g[R]}}}function nr(c,g,R){var X=document.createElement("canvas");r(X.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(X),c===document.body&&(X.style.position="absolute",r(c.style,{margin:0,padding:0}));function te(){var fe=window.innerWidth,ce=window.innerHeight;if(c!==document.body){var ge=X.getBoundingClientRect();fe=ge.right-ge.left,ce=ge.bottom-ge.top}X.width=R*fe,X.height=R*ce}var W;c!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(te)}),W.observe(c)):window.addEventListener("resize",te,!1);function K(){W?W.disconnect():window.removeEventListener("resize",te),c.removeChild(X)}return te(),{canvas:X,onDestroy:K}}function Zr(c,g){function R(X){try{return c.getContext(X,g)}catch{return null}}return R("webgl")||R("experimental-webgl")||R("webgl-experimental")}function Ln(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function di(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function na(c){return typeof c=="string"?c.split():(y(Array.isArray(c),"invalid extension array"),c)}function Jr(c){return typeof c=="string"?(y(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function fr(c){var g=c||{},R,X,te,W,K={},fe=[],ce=[],ge=typeof window>"u"?1:window.devicePixelRatio,xe=!1,ye=function(ve){ve&&y.raise(ve)},Te=function(){};if(typeof g=="string"?(y(typeof document<"u","selector queries only supported in DOM enviroments"),R=document.querySelector(g),y(R,"invalid query string for element")):typeof g=="object"?Ln(g)?R=g:di(g)?(W=g,te=W.canvas):(y.constructor(g),"gl"in g?W=g.gl:"canvas"in g?te=Jr(g.canvas):"container"in g&&(X=Jr(g.container)),"attributes"in g&&(K=g.attributes,y.type(K,"object","invalid context attributes")),"extensions"in g&&(fe=na(g.extensions)),"optionalExtensions"in g&&(ce=na(g.optionalExtensions)),"onDone"in g&&(y.type(g.onDone,"function","invalid or missing onDone callback"),ye=g.onDone),"profile"in g&&(xe=!!g.profile),"pixelRatio"in g&&(ge=+g.pixelRatio,y(ge>0,"invalid pixel ratio"))):y.raise("invalid arguments to regl"),R&&(R.nodeName.toLowerCase()==="canvas"?te=R:X=R),!W){if(!te){y(typeof document<"u","must manually specify webgl context outside of DOM environments");var de=nr(X||document.body,ye,ge);if(!de)return null;te=de.canvas,Te=de.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=Zr(te,K)}return W?{gl:W,canvas:te,container:X,extensions:fe,optionalExtensions:ce,pixelRatio:ge,profile:xe,onDone:ye,onDestroy:Te}:(Te(),ye("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ei(c,g){var R={};function X(K){y.type(K,"string","extension name must be string");var fe=K.toLowerCase(),ce;try{ce=R[fe]=c.getExtension(fe)}catch{}return!!ce}for(var te=0;te<g.extensions.length;++te){var W=g.extensions[te];if(!X(W))return g.onDestroy(),g.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return g.optionalExtensions.forEach(X),{extensions:R,restore:function(){Object.keys(R).forEach(function(K){if(R[K]&&!X(K))throw new Error("(regl): error restoring extension "+K)})}}}function rn(c,g){for(var R=Array(c),X=0;X<c;++X)R[X]=g(X);return R}var ae=5120,Rt=5121,fn=5122,vn=5123,rr=5124,ki=5125,dr=5126;function jr(c){for(var g=16;g<=1<<28;g*=16)if(c<=g)return g;return 0}function ra(c){var g,R;return g=(c>65535)<<4,c>>>=g,R=(c>255)<<3,c>>>=R,g|=R,R=(c>15)<<2,c>>>=R,g|=R,R=(c>3)<<1,c>>>=R,g|=R,g|c>>1}function Bo(){var c=rn(8,function(){return[]});function g(W){var K=jr(W),fe=c[ra(K)>>2];return fe.length>0?fe.pop():new ArrayBuffer(K)}function R(W){c[ra(W.byteLength)>>2].push(W)}function X(W,K){var fe=null;switch(W){case ae:fe=new Int8Array(g(K),0,K);break;case Rt:fe=new Uint8Array(g(K),0,K);break;case fn:fe=new Int16Array(g(2*K),0,K);break;case vn:fe=new Uint16Array(g(2*K),0,K);break;case rr:fe=new Int32Array(g(4*K),0,K);break;case ki:fe=new Uint32Array(g(4*K),0,K);break;case dr:fe=new Float32Array(g(4*K),0,K);break;default:return null}return fe.length!==K?fe.subarray(0,K):fe}function te(W){R(W.buffer)}return{alloc:g,free:R,allocType:X,freeType:te}}var yt=Bo();yt.zero=Bo();var Ni=3408,$o=3410,nc=3411,mi=3412,hi=3413,pi=3414,rc=3415,br=33901,as=33902,Ya=3379,os=3386,Qa=34921,Go=36347,zo=36348,Uo=35661,Vo=35660,Ii=34930,Ka=36349,ls=34076,ss=34024,ic=7936,ia=7937,aa=7938,Ho=35724,oa=34047,us=36063,mr=34852,vi=3553,gi=34067,Di=34069,Dn=33984,Br=6408,Bn=5126,wn=5121,la=36160,Wo=36053,Xo=36064,Yo=16384,ac=function(c,g){var R=1;g.ext_texture_filter_anisotropic&&(R=c.getParameter(oa));var X=1,te=1;g.webgl_draw_buffers&&(X=c.getParameter(mr),te=c.getParameter(us));var W=!!g.oes_texture_float;if(W){var K=c.createTexture();c.bindTexture(vi,K),c.texImage2D(vi,0,Br,1,1,0,Br,Bn,null);var fe=c.createFramebuffer();if(c.bindFramebuffer(la,fe),c.framebufferTexture2D(la,Xo,vi,K,0),c.bindTexture(vi,null),c.checkFramebufferStatus(la)!==Wo)W=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(Yo);var ce=yt.allocType(Bn,4);c.readPixels(0,0,1,1,Br,Bn,ce),c.getError()?W=!1:(c.deleteFramebuffer(fe),c.deleteTexture(K),W=ce[0]===1),yt.freeType(ce)}}var ge=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xe=!0;if(!ge){var ye=c.createTexture(),Te=yt.allocType(wn,36);c.activeTexture(Dn),c.bindTexture(gi,ye),c.texImage2D(Di,0,Br,3,3,0,Br,wn,Te),yt.freeType(Te),c.bindTexture(gi,null),c.deleteTexture(ye),xe=!c.getError()}return{colorBits:[c.getParameter($o),c.getParameter(nc),c.getParameter(mi),c.getParameter(hi)],depthBits:c.getParameter(pi),stencilBits:c.getParameter(rc),subpixelBits:c.getParameter(Ni),extensions:Object.keys(g).filter(function(de){return!!g[de]}),maxAnisotropic:R,maxDrawbuffers:X,maxColorAttachments:te,pointSizeDims:c.getParameter(br),lineWidthDims:c.getParameter(as),maxViewportDims:c.getParameter(os),maxCombinedTextureUnits:c.getParameter(Uo),maxCubeMapSize:c.getParameter(ls),maxRenderbufferSize:c.getParameter(ss),maxTextureUnits:c.getParameter(Ii),maxTextureSize:c.getParameter(Ya),maxAttributes:c.getParameter(Qa),maxVertexUniforms:c.getParameter(Go),maxVertexTextureUnits:c.getParameter(Vo),maxVaryingVectors:c.getParameter(zo),maxFragmentUniforms:c.getParameter(Ka),glsl:c.getParameter(Ho),renderer:c.getParameter(ia),vendor:c.getParameter(ic),version:c.getParameter(aa),readFloat:W,npotTextureCube:xe}};function hr(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var ir=function(c){return Object.keys(c).map(function(g){return c[g]})},Ar={shape:gm,flatten:vm};function oc(c,g,R){for(var X=0;X<g;++X)R[X]=c[X]}function cs(c,g,R,X){for(var te=0,W=0;W<g;++W)for(var K=c[W],fe=0;fe<R;++fe)X[te++]=K[fe]}function Qo(c,g,R,X,te,W){for(var K=W,fe=0;fe<g;++fe)for(var ce=c[fe],ge=0;ge<R;++ge)for(var xe=ce[ge],ye=0;ye<X;++ye)te[K++]=xe[ye]}function fs(c,g,R,X,te){for(var W=1,K=R+1;K<g.length;++K)W*=g[K];var fe=g[R];if(g.length-R===4){var ce=g[R+1],ge=g[R+2],xe=g[R+3];for(K=0;K<fe;++K)Qo(c[K],ce,ge,xe,X,te),te+=W}else for(K=0;K<fe;++K)fs(c[K],g,R+1,X,te),te+=W}function vm(c,g,R,X){var te=1;if(g.length)for(var W=0;W<g.length;++W)te*=g[W];else te=0;var K=X||yt.allocType(R,te);switch(g.length){case 0:break;case 1:oc(c,g[0],K);break;case 2:cs(c,g[0],g[1],K);break;case 3:Qo(c,g[0],g[1],g[2],K,0);break;default:fs(c,g,0,K,0)}return K}function gm(c){for(var g=[],R=c;R.length;R=R[0])g.push(R.length);return g}var sa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},qa=5120,Mi=5122,Ko=5124,ym=5121,qo=5123,ua=5125,Za=5126,ds=5126,ca={int8:qa,int16:Mi,int32:Ko,uint8:ym,uint16:qo,uint32:ua,float:Za,float32:ds},Zv=35048,Rn=35040,Zo={dynamic:Zv,stream:Rn,static:35044},Ja=Ar.flatten,lc=Ar.shape,ms=35044,hs=35040,Jo=5121,el=5126,ti=[];ti[5120]=1,ti[5122]=2,ti[5124]=4,ti[5121]=1,ti[5123]=2,ti[5125]=4,ti[5126]=4;function eo(c){return sa[Object.prototype.toString.call(c)]|0}function tl(c,g){for(var R=0;R<g.length;++R)c[R]=g[R]}function ps(c,g,R,X,te,W,K){for(var fe=0,ce=0;ce<R;++ce)for(var ge=0;ge<X;++ge)c[fe++]=g[te*ce+W*ge+K]}function vs(c,g,R,X){var te=0,W={};function K(B){this.id=te++,this.buffer=c.createBuffer(),this.type=B,this.usage=ms,this.byteLength=0,this.dimension=1,this.dtype=Jo,this.persistentData=null,R.profile&&(this.stats={size:0})}K.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){Te(this)};var fe=[];function ce(B,Q){var he=fe.pop();return he||(he=new K(B)),he.bind(),ye(he,Q,hs,0,1,!1),he}function ge(B){fe.push(B)}function xe(B,Q,he){B.byteLength=Q.byteLength,c.bufferData(B.type,Q,he)}function ye(B,Q,he,Fe,se,Ne){var Oe;if(B.usage=he,Array.isArray(Q)){if(B.dtype=Fe||el,Q.length>0){var Je;if(Array.isArray(Q[0])){Oe=lc(Q);for(var ne=1,ee=1;ee<Oe.length;++ee)ne*=Oe[ee];B.dimension=ne,Je=Ja(Q,Oe,B.dtype),xe(B,Je,he),Ne?B.persistentData=Je:yt.freeType(Je)}else if(typeof Q[0]=="number"){B.dimension=se;var Ue=yt.allocType(B.dtype,Q.length);tl(Ue,Q),xe(B,Ue,he),Ne?B.persistentData=Ue:yt.freeType(Ue)}else n(Q[0])?(B.dimension=Q[0].length,B.dtype=Fe||eo(Q[0])||el,Je=Ja(Q,[Q.length,Q[0].length],B.dtype),xe(B,Je,he),Ne?B.persistentData=Je:yt.freeType(Je)):y.raise("invalid buffer data")}}else if(n(Q))B.dtype=Fe||eo(Q),B.dimension=se,xe(B,Q,he),Ne&&(B.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(hr(Q)){Oe=Q.shape;var Ae=Q.stride,me=Q.offset,Ce=0,Re=0,ct=0,ot=0;Oe.length===1?(Ce=Oe[0],Re=1,ct=Ae[0],ot=0):Oe.length===2?(Ce=Oe[0],Re=Oe[1],ct=Ae[0],ot=Ae[1]):y.raise("invalid shape"),B.dtype=Fe||eo(Q.data)||el,B.dimension=Re;var Pe=yt.allocType(B.dtype,Ce*Re);ps(Pe,Q.data,Ce,Re,ct,ot,me),xe(B,Pe,he),Ne?B.persistentData=Pe:yt.freeType(Pe)}else Q instanceof ArrayBuffer?(B.dtype=Jo,B.dimension=se,xe(B,Q,he),Ne&&(B.persistentData=new Uint8Array(new Uint8Array(Q)))):y.raise("invalid buffer data")}function Te(B){g.bufferCount--,X(B);var Q=B.buffer;y(Q,"buffer must not be deleted already"),c.deleteBuffer(Q),B.buffer=null,delete W[B.id]}function de(B,Q,he,Fe){g.bufferCount++;var se=new K(Q);W[se.id]=se;function Ne(ne){var ee=ms,Ue=null,Ae=0,me=0,Ce=1;return Array.isArray(ne)||n(ne)||hr(ne)||ne instanceof ArrayBuffer?Ue=ne:typeof ne=="number"?Ae=ne|0:ne&&(y.type(ne,"object","buffer arguments must be an object, a number or an array"),"data"in ne&&(y(Ue===null||Array.isArray(Ue)||n(Ue)||hr(Ue),"invalid data for buffer"),Ue=ne.data),"usage"in ne&&(y.parameter(ne.usage,Zo,"invalid buffer usage"),ee=Zo[ne.usage]),"type"in ne&&(y.parameter(ne.type,ca,"invalid buffer type"),me=ca[ne.type]),"dimension"in ne&&(y.type(ne.dimension,"number","invalid dimension"),Ce=ne.dimension|0),"length"in ne&&(y.nni(Ae,"buffer length must be a nonnegative integer"),Ae=ne.length|0)),se.bind(),Ue?ye(se,Ue,ee,me,Ce,Fe):(Ae&&c.bufferData(se.type,Ae,ee),se.dtype=me||Jo,se.usage=ee,se.dimension=Ce,se.byteLength=Ae),R.profile&&(se.stats.size=se.byteLength*ti[se.dtype]),Ne}function Oe(ne,ee){y(ee+ne.byteLength<=se.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ne.byteLength+" starting from offset "+ee+" to a buffer of size "+se.byteLength),c.bufferSubData(se.type,ee,ne)}function Je(ne,ee){var Ue=(ee||0)|0,Ae;if(se.bind(),n(ne)||ne instanceof ArrayBuffer)Oe(ne,Ue);else if(Array.isArray(ne)){if(ne.length>0)if(typeof ne[0]=="number"){var me=yt.allocType(se.dtype,ne.length);tl(me,ne),Oe(me,Ue),yt.freeType(me)}else if(Array.isArray(ne[0])||n(ne[0])){Ae=lc(ne);var Ce=Ja(ne,Ae,se.dtype);Oe(Ce,Ue),yt.freeType(Ce)}else y.raise("invalid buffer data")}else if(hr(ne)){Ae=ne.shape;var Re=ne.stride,ct=0,ot=0,Pe=0,Me=0;Ae.length===1?(ct=Ae[0],ot=1,Pe=Re[0],Me=0):Ae.length===2?(ct=Ae[0],ot=Ae[1],Pe=Re[0],Me=Re[1]):y.raise("invalid shape");var nt=Array.isArray(ne.data)?se.dtype:eo(ne.data),ft=yt.allocType(nt,ct*ot);ps(ft,ne.data,ct,ot,Pe,Me,ne.offset),Oe(ft,Ue),yt.freeType(ft)}else y.raise("invalid data for buffer subdata");return Ne}return he||Ne(B),Ne._reglType="buffer",Ne._buffer=se,Ne.subdata=Je,R.profile&&(Ne.stats=se.stats),Ne.destroy=function(){Te(se)},Ne}function ve(){ir(W).forEach(function(B){B.buffer=c.createBuffer(),c.bindBuffer(B.type,B.buffer),c.bufferData(B.type,B.persistentData||B.byteLength,B.usage)})}return R.profile&&(g.getTotalBufferSize=function(){var B=0;return Object.keys(W).forEach(function(Q){B+=W[Q].stats.size}),B}),{create:de,createStream:ce,destroyStream:ge,clear:function(){ir(W).forEach(Te),fe.forEach(Te)},getBuffer:function(B){return B&&B._buffer instanceof K?B._buffer:null},restore:ve,_initBuffer:ye}}var xm=0,gs=0,Em=1,ys=1,_m=4,Sm=4,yi={points:xm,point:gs,lines:Em,line:ys,triangles:_m,triangle:Sm,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},wm=0,Fi=1,ji=4,Tm=5120,xi=5121,sc=5122,fa=5123,uc=5124,ni=5125,xs=34963,bm=35040,Es=35044;function _s(c,g,R,X){var te={},W=0,K={uint8:xi,uint16:fa};g.oes_element_index_uint&&(K.uint32=ni);function fe(ve){this.id=W++,te[this.id]=this,this.buffer=ve,this.primType=ji,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var ce=[];function ge(ve){var B=ce.pop();return B||(B=new fe(R.create(null,xs,!0,!1)._buffer)),ye(B,ve,bm,-1,-1,0,0),B}function xe(ve){ce.push(ve)}function ye(ve,B,Q,he,Fe,se,Ne){ve.buffer.bind();var Oe;if(B){var Je=Ne;!Ne&&(!n(B)||hr(B)&&!n(B.data))&&(Je=g.oes_element_index_uint?ni:fa),R._initBuffer(ve.buffer,B,Q,Je,3)}else c.bufferData(xs,se,Q),ve.buffer.dtype=Oe||xi,ve.buffer.usage=Q,ve.buffer.dimension=3,ve.buffer.byteLength=se;if(Oe=Ne,!Ne){switch(ve.buffer.dtype){case xi:case Tm:Oe=xi;break;case fa:case sc:Oe=fa;break;case ni:case uc:Oe=ni;break;default:y.raise("unsupported type for element array")}ve.buffer.dtype=Oe}ve.type=Oe,y(Oe!==ni||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ne=Fe;ne<0&&(ne=ve.buffer.byteLength,Oe===fa?ne>>=1:Oe===ni&&(ne>>=2)),ve.vertCount=ne;var ee=he;if(he<0){ee=ji;var Ue=ve.buffer.dimension;Ue===1&&(ee=wm),Ue===2&&(ee=Fi),Ue===3&&(ee=ji)}ve.primType=ee}function Te(ve){X.elementsCount--,y(ve.buffer!==null,"must not double destroy elements"),delete te[ve.id],ve.buffer.destroy(),ve.buffer=null}function de(ve,B){var Q=R.create(null,xs,!0),he=new fe(Q._buffer);X.elementsCount++;function Fe(se){if(!se)Q(),he.primType=ji,he.vertCount=0,he.type=xi;else if(typeof se=="number")Q(se),he.primType=ji,he.vertCount=se|0,he.type=xi;else{var Ne=null,Oe=Es,Je=-1,ne=-1,ee=0,Ue=0;Array.isArray(se)||n(se)||hr(se)?Ne=se:(y.type(se,"object","invalid arguments for elements"),"data"in se&&(Ne=se.data,y(Array.isArray(Ne)||n(Ne)||hr(Ne),"invalid data for element buffer")),"usage"in se&&(y.parameter(se.usage,Zo,"invalid element buffer usage"),Oe=Zo[se.usage]),"primitive"in se&&(y.parameter(se.primitive,yi,"invalid element buffer primitive"),Je=yi[se.primitive]),"count"in se&&(y(typeof se.count=="number"&&se.count>=0,"invalid vertex count for elements"),ne=se.count|0),"type"in se&&(y.parameter(se.type,K,"invalid buffer type"),Ue=K[se.type]),"length"in se?ee=se.length|0:(ee=ne,Ue===fa||Ue===sc?ee*=2:(Ue===ni||Ue===uc)&&(ee*=4))),ye(he,Ne,Oe,Je,ne,ee,Ue)}return Fe}return Fe(ve),Fe._reglType="elements",Fe._elements=he,Fe.subdata=function(se,Ne){return Q.subdata(se,Ne),Fe},Fe.destroy=function(){Te(he)},Fe}return{create:de,createStream:ge,destroyStream:xe,getElements:function(ve){return typeof ve=="function"&&ve._elements instanceof fe?ve._elements:null},clear:function(){ir(te).forEach(Te)}}}var cc=new Float32Array(1),Am=new Uint32Array(cc.buffer),Cm=5123;function fc(c){for(var g=yt.allocType(Cm,c.length),R=0;R<c.length;++R)if(isNaN(c[R]))g[R]=65535;else if(c[R]===1/0)g[R]=31744;else if(c[R]===-1/0)g[R]=64512;else{cc[0]=c[R];var X=Am[0],te=X>>>31<<15,W=(X<<1>>>24)-127,K=X>>13&1023;if(W<-24)g[R]=te;else if(W<-14){var fe=-14-W;g[R]=te+(K+1024>>fe)}else W>15?g[R]=te+31744:g[R]=te+(W+15<<10)+K}return g}function Zt(c){return Array.isArray(c)||n(c)}var dc=function(c){return!(c&c-1)&&!!c},Lm=34467,$r=3553,Ss=34067,nl=34069,Bi=6408,ws=6406,rl=6407,$i=6409,il=6410,mc=32854,Ts=32855,bs=36194,Rm=32819,Om=32820,Pm=33635,hc=34042,al=6402,to=34041,no=35904,ro=35906,da=36193,Gi=33776,As=33777,Cs=33778,Ls=33779,pc=35986,vc=35987,gc=34798,yc=35840,xc=35841,Ec=35842,_c=35843,Sc=36196,ma=5121,Rs=5123,Os=5125,Cr=5126,km=10242,Nm=10243,Im=10497,Ps=33071,Dm=33648,Mm=10240,Fm=10241,ks=9728,jm=9729,ol=9984,Ns=9985,wc=9986,Is=9987,Bm=33170,io=4352,Tc=4353,$m=4354,Gm=34046,zm=3317,Um=37440,Vm=37441,Hm=37443,ha=37444,ao=33984,bc=[ol,wc,Ns,Is],oo=[0,$i,il,rl,Bi],Lr={};Lr[$i]=Lr[ws]=Lr[al]=1,Lr[to]=Lr[il]=2,Lr[rl]=Lr[no]=3,Lr[Bi]=Lr[ro]=4;function pa(c){return"[object "+c+"]"}var Ac=pa("HTMLCanvasElement"),Cc=pa("OffscreenCanvas"),Lc=pa("CanvasRenderingContext2D"),Rc=pa("ImageBitmap"),Oc=pa("HTMLImageElement"),ll=pa("HTMLVideoElement"),Wm=Object.keys(sa).concat([Ac,Cc,Lc,Rc,Oc,ll]),va=[];va[ma]=1,va[Cr]=4,va[da]=2,va[Rs]=2,va[Os]=4;var On=[];On[mc]=2,On[Ts]=2,On[bs]=2,On[to]=4,On[Gi]=.5,On[As]=.5,On[Cs]=1,On[Ls]=1,On[pc]=.5,On[vc]=1,On[gc]=1,On[yc]=.5,On[xc]=.25,On[Ec]=.5,On[_c]=.25,On[Sc]=.5;function Pc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Ds(c){if(!Array.isArray(c))return!1;var g=c.length;return!(g===0||!Zt(c[0]))}function zi(c){return Object.prototype.toString.call(c)}function Ms(c){return zi(c)===Ac}function kc(c){return zi(c)===Cc}function Xm(c){return zi(c)===Lc}function Fs(c){return zi(c)===Rc}function Nc(c){return zi(c)===Oc}function Ic(c){return zi(c)===ll}function js(c){if(!c)return!1;var g=zi(c);return Wm.indexOf(g)>=0?!0:Pc(c)||Ds(c)||hr(c)}function Dc(c){return sa[Object.prototype.toString.call(c)]|0}function Ym(c,g){var R=g.length;switch(c.type){case ma:case Rs:case Os:case Cr:var X=yt.allocType(c.type,R);X.set(g),c.data=X;break;case da:c.data=fc(g);break;default:y.raise("unsupported texture type, must specify a typed array")}}function Mc(c,g){return yt.allocType(c.type===da?Cr:c.type,g)}function Fc(c,g){c.type===da?(c.data=fc(g),yt.freeType(g)):c.data=g}function jc(c,g,R,X,te,W){for(var K=c.width,fe=c.height,ce=c.channels,ge=K*fe*ce,xe=Mc(c,ge),ye=0,Te=0;Te<fe;++Te)for(var de=0;de<K;++de)for(var ve=0;ve<ce;++ve)xe[ye++]=g[R*de+X*Te+te*ve+W];Fc(c,xe)}function sl(c,g,R,X,te,W){var K;if(typeof On[c]<"u"?K=On[c]:K=Lr[c]*va[g],W&&(K*=6),te){for(var fe=0,ce=R;ce>=1;)fe+=K*ce*ce,ce/=2;return fe}else return K*R*X}function Qm(c,g,R,X,te,W,K){var fe={"don't care":io,"dont care":io,nice:$m,fast:Tc},ce={repeat:Im,clamp:Ps,mirror:Dm},ge={nearest:ks,linear:jm},xe=r({mipmap:Is,"nearest mipmap nearest":ol,"linear mipmap nearest":Ns,"nearest mipmap linear":wc,"linear mipmap linear":Is},ge),ye={none:0,browser:ha},Te={uint8:ma,rgba4:Rm,rgb565:Pm,"rgb5 a1":Om},de={alpha:ws,luminance:$i,"luminance alpha":il,rgb:rl,rgba:Bi,rgba4:mc,"rgb5 a1":Ts,rgb565:bs},ve={};g.ext_srgb&&(de.srgb=no,de.srgba=ro),g.oes_texture_float&&(Te.float32=Te.float=Cr),g.oes_texture_half_float&&(Te.float16=Te["half float"]=da),g.webgl_depth_texture&&(r(de,{depth:al,"depth stencil":to}),r(Te,{uint16:Rs,uint32:Os,"depth stencil":hc})),g.webgl_compressed_texture_s3tc&&r(ve,{"rgb s3tc dxt1":Gi,"rgba s3tc dxt1":As,"rgba s3tc dxt3":Cs,"rgba s3tc dxt5":Ls}),g.webgl_compressed_texture_atc&&r(ve,{"rgb atc":pc,"rgba atc explicit alpha":vc,"rgba atc interpolated alpha":gc}),g.webgl_compressed_texture_pvrtc&&r(ve,{"rgb pvrtc 4bppv1":yc,"rgb pvrtc 2bppv1":xc,"rgba pvrtc 4bppv1":Ec,"rgba pvrtc 2bppv1":_c}),g.webgl_compressed_texture_etc1&&(ve["rgb etc1"]=Sc);var B=Array.prototype.slice.call(c.getParameter(Lm));Object.keys(ve).forEach(function(T){var Y=ve[T];B.indexOf(Y)>=0&&(de[T]=Y)});var Q=Object.keys(de);R.textureFormats=Q;var he=[];Object.keys(de).forEach(function(T){var Y=de[T];he[Y]=T});var Fe=[];Object.keys(Te).forEach(function(T){var Y=Te[T];Fe[Y]=T});var se=[];Object.keys(ge).forEach(function(T){var Y=ge[T];se[Y]=T});var Ne=[];Object.keys(xe).forEach(function(T){var Y=xe[T];Ne[Y]=T});var Oe=[];Object.keys(ce).forEach(function(T){var Y=ce[T];Oe[Y]=T});var Je=Q.reduce(function(T,Y){var V=de[Y];return V===$i||V===ws||V===$i||V===il||V===al||V===to||g.ext_srgb&&(V===no||V===ro)?T[V]=V:V===Ts||Y.indexOf("rgba")>=0?T[V]=Bi:T[V]=rl,T},{});function ne(){this.internalformat=Bi,this.format=Bi,this.type=ma,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ha,this.width=0,this.height=0,this.channels=0}function ee(T,Y){T.internalformat=Y.internalformat,T.format=Y.format,T.type=Y.type,T.compressed=Y.compressed,T.premultiplyAlpha=Y.premultiplyAlpha,T.flipY=Y.flipY,T.unpackAlignment=Y.unpackAlignment,T.colorSpace=Y.colorSpace,T.width=Y.width,T.height=Y.height,T.channels=Y.channels}function Ue(T,Y){if(!(typeof Y!="object"||!Y)){if("premultiplyAlpha"in Y&&(y.type(Y.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),T.premultiplyAlpha=Y.premultiplyAlpha),"flipY"in Y&&(y.type(Y.flipY,"boolean","invalid texture flip"),T.flipY=Y.flipY),"alignment"in Y&&(y.oneOf(Y.alignment,[1,2,4,8],"invalid texture unpack alignment"),T.unpackAlignment=Y.alignment),"colorSpace"in Y&&(y.parameter(Y.colorSpace,ye,"invalid colorSpace"),T.colorSpace=ye[Y.colorSpace]),"type"in Y){var V=Y.type;y(g.oes_texture_float||!(V==="float"||V==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),y(g.oes_texture_half_float||!(V==="half float"||V==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),y(g.webgl_depth_texture||!(V==="uint16"||V==="uint32"||V==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(V,Te,"invalid texture type"),T.type=Te[V]}var ze=T.width,_t=T.height,E=T.channels,m=!1;"shape"in Y?(y(Array.isArray(Y.shape)&&Y.shape.length>=2,"shape must be an array"),ze=Y.shape[0],_t=Y.shape[1],Y.shape.length===3&&(E=Y.shape[2],y(E>0&&E<=4,"invalid number of channels"),m=!0),y(ze>=0&&ze<=R.maxTextureSize,"invalid width"),y(_t>=0&&_t<=R.maxTextureSize,"invalid height")):("radius"in Y&&(ze=_t=Y.radius,y(ze>=0&&ze<=R.maxTextureSize,"invalid radius")),"width"in Y&&(ze=Y.width,y(ze>=0&&ze<=R.maxTextureSize,"invalid width")),"height"in Y&&(_t=Y.height,y(_t>=0&&_t<=R.maxTextureSize,"invalid height")),"channels"in Y&&(E=Y.channels,y(E>0&&E<=4,"invalid number of channels"),m=!0)),T.width=ze|0,T.height=_t|0,T.channels=E|0;var P=!1;if("format"in Y){var F=Y.format;y(g.webgl_depth_texture||!(F==="depth"||F==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(F,de,"invalid texture format");var $=T.internalformat=de[F];T.format=Je[$],F in Te&&("type"in Y||(T.type=Te[F])),F in ve&&(T.compressed=!0),P=!0}!m&&P?T.channels=Lr[T.format]:m&&!P?T.channels!==oo[T.format]&&(T.format=T.internalformat=oo[T.channels]):P&&m&&y(T.channels===Lr[T.format],"number of channels inconsistent with specified format")}}function Ae(T){c.pixelStorei(Um,T.flipY),c.pixelStorei(Vm,T.premultiplyAlpha),c.pixelStorei(Hm,T.colorSpace),c.pixelStorei(zm,T.unpackAlignment)}function me(){ne.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ce(T,Y){var V=null;if(js(Y)?V=Y:Y&&(y.type(Y,"object","invalid pixel data type"),Ue(T,Y),"x"in Y&&(T.xOffset=Y.x|0),"y"in Y&&(T.yOffset=Y.y|0),js(Y.data)&&(V=Y.data)),y(!T.compressed||V instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Y.copy){y(!V,"can not specify copy and data field for the same texture");var ze=te.viewportWidth,_t=te.viewportHeight;T.width=T.width||ze-T.xOffset,T.height=T.height||_t-T.yOffset,T.needsCopy=!0,y(T.xOffset>=0&&T.xOffset<ze&&T.yOffset>=0&&T.yOffset<_t&&T.width>0&&T.width<=ze&&T.height>0&&T.height<=_t,"copy texture read out of bounds")}else if(!V)T.width=T.width||1,T.height=T.height||1,T.channels=T.channels||4;else if(n(V))T.channels=T.channels||4,T.data=V,!("type"in Y)&&T.type===ma&&(T.type=Dc(V));else if(Pc(V))T.channels=T.channels||4,Ym(T,V),T.alignment=1,T.needsFree=!0;else if(hr(V)){var E=V.data;!Array.isArray(E)&&T.type===ma&&(T.type=Dc(E));var m=V.shape,P=V.stride,F,$,N,k,M,_;m.length===3?(N=m[2],_=P[2]):(y(m.length===2,"invalid ndarray pixel data, must be 2 or 3D"),N=1,_=1),F=m[0],$=m[1],k=P[0],M=P[1],T.alignment=1,T.width=F,T.height=$,T.channels=N,T.format=T.internalformat=oo[N],T.needsFree=!0,jc(T,E,k,M,_,V.offset)}else if(Ms(V)||kc(V)||Xm(V))Ms(V)||kc(V)?T.element=V:T.element=V.canvas,T.width=T.element.width,T.height=T.element.height,T.channels=4;else if(Fs(V))T.element=V,T.width=V.width,T.height=V.height,T.channels=4;else if(Nc(V))T.element=V,T.width=V.naturalWidth,T.height=V.naturalHeight,T.channels=4;else if(Ic(V))T.element=V,T.width=V.videoWidth,T.height=V.videoHeight,T.channels=4;else if(Ds(V)){var A=T.width||V[0].length,S=T.height||V.length,U=T.channels;Zt(V[0][0])?U=U||V[0][0].length:U=U||1;for(var G=Ar.shape(V),J=1,re=0;re<G.length;++re)J*=G[re];var _e=Mc(T,J);Ar.flatten(V,G,"",_e),Fc(T,_e),T.alignment=1,T.width=A,T.height=S,T.channels=U,T.format=T.internalformat=oo[U],T.needsFree=!0}T.type===Cr?y(R.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):T.type===da&&y(R.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Re(T,Y,V){var ze=T.element,_t=T.data,E=T.internalformat,m=T.format,P=T.type,F=T.width,$=T.height;Ae(T),ze?c.texImage2D(Y,V,m,m,P,ze):T.compressed?c.compressedTexImage2D(Y,V,E,F,$,0,_t):T.needsCopy?(X(),c.copyTexImage2D(Y,V,m,T.xOffset,T.yOffset,F,$,0)):c.texImage2D(Y,V,m,F,$,0,m,P,_t||null)}function ct(T,Y,V,ze,_t){var E=T.element,m=T.data,P=T.internalformat,F=T.format,$=T.type,N=T.width,k=T.height;Ae(T),E?c.texSubImage2D(Y,_t,V,ze,F,$,E):T.compressed?c.compressedTexSubImage2D(Y,_t,V,ze,P,N,k,m):T.needsCopy?(X(),c.copyTexSubImage2D(Y,_t,V,ze,T.xOffset,T.yOffset,N,k)):c.texSubImage2D(Y,_t,V,ze,N,k,F,$,m)}var ot=[];function Pe(){return ot.pop()||new me}function Me(T){T.needsFree&&yt.freeType(T.data),me.call(T),ot.push(T)}function nt(){ne.call(this),this.genMipmaps=!1,this.mipmapHint=io,this.mipmask=0,this.images=Array(16)}function ft(T,Y,V){var ze=T.images[0]=Pe();T.mipmask=1,ze.width=T.width=Y,ze.height=T.height=V,ze.channels=T.channels=4}function Tt(T,Y){var V=null;if(js(Y))V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;else if(Ue(T,Y),Array.isArray(Y.mipmap))for(var ze=Y.mipmap,_t=0;_t<ze.length;++_t)V=T.images[_t]=Pe(),ee(V,T),V.width>>=_t,V.height>>=_t,Ce(V,ze[_t]),T.mipmask|=1<<_t;else V=T.images[0]=Pe(),ee(V,T),Ce(V,Y),T.mipmask=1;ee(T,T.images[0]),T.compressed&&(T.internalformat===Gi||T.internalformat===As||T.internalformat===Cs||T.internalformat===Ls)&&y(T.width%4===0&&T.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function an(T,Y){for(var V=T.images,ze=0;ze<V.length;++ze){if(!V[ze])return;Re(V[ze],Y,ze)}}var sn=[];function Lt(){var T=sn.pop()||new nt;ne.call(T),T.mipmask=0;for(var Y=0;Y<16;++Y)T.images[Y]=null;return T}function Pn(T){for(var Y=T.images,V=0;V<Y.length;++V)Y[V]&&Me(Y[V]),Y[V]=null;sn.push(T)}function Jt(){this.minFilter=ks,this.magFilter=ks,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=io}function An(T,Y){if("min"in Y){var V=Y.min;y.parameter(V,xe),T.minFilter=xe[V],bc.indexOf(T.minFilter)>=0&&!("faces"in Y)&&(T.genMipmaps=!0)}if("mag"in Y){var ze=Y.mag;y.parameter(ze,ge),T.magFilter=ge[ze]}var _t=T.wrapS,E=T.wrapT;if("wrap"in Y){var m=Y.wrap;typeof m=="string"?(y.parameter(m,ce),_t=E=ce[m]):Array.isArray(m)&&(y.parameter(m[0],ce),y.parameter(m[1],ce),_t=ce[m[0]],E=ce[m[1]])}else{if("wrapS"in Y){var P=Y.wrapS;y.parameter(P,ce),_t=ce[P]}if("wrapT"in Y){var F=Y.wrapT;y.parameter(F,ce),E=ce[F]}}if(T.wrapS=_t,T.wrapT=E,"anisotropic"in Y){var $=Y.anisotropic;y(typeof $=="number"&&$>=1&&$<=R.maxAnisotropic,"aniso samples must be between 1 and "),T.anisotropic=Y.anisotropic}if("mipmap"in Y){var N=!1;switch(typeof Y.mipmap){case"string":y.parameter(Y.mipmap,fe,"invalid mipmap hint"),T.mipmapHint=fe[Y.mipmap],T.genMipmaps=!0,N=!0;break;case"boolean":N=T.genMipmaps=Y.mipmap;break;case"object":y(Array.isArray(Y.mipmap),"invalid mipmap type"),T.genMipmaps=!1,N=!0;break;default:y.raise("invalid mipmap type")}N&&!("min"in Y)&&(T.minFilter=ol)}}function kn(T,Y){c.texParameteri(Y,Fm,T.minFilter),c.texParameteri(Y,Mm,T.magFilter),c.texParameteri(Y,km,T.wrapS),c.texParameteri(Y,Nm,T.wrapT),g.ext_texture_filter_anisotropic&&c.texParameteri(Y,Gm,T.anisotropic),T.genMipmaps&&(c.hint(Bm,T.mipmapHint),c.generateMipmap(Y))}var Nn=0,$n={},Un=R.maxTextureUnits,gn=Array(Un).map(function(){return null});function vt(T){ne.call(this),this.mipmask=0,this.internalformat=Bi,this.id=Nn++,this.refCount=1,this.target=T,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Jt,K.profile&&(this.stats={size:0})}function Vn(T){c.activeTexture(ao),c.bindTexture(T.target,T.texture)}function $t(){var T=gn[0];T?c.bindTexture(T.target,T.texture):c.bindTexture($r,null)}function tt(T){var Y=T.texture;y(Y,"must not double destroy texture");var V=T.unit,ze=T.target;V>=0&&(c.activeTexture(ao+V),c.bindTexture(ze,null),gn[V]=null),c.deleteTexture(Y),T.texture=null,T.params=null,T.pixels=null,T.refCount=0,delete $n[T.id],W.textureCount--}r(vt.prototype,{bind:function(){var T=this;T.bindCount+=1;var Y=T.unit;if(Y<0){for(var V=0;V<Un;++V){var ze=gn[V];if(ze){if(ze.bindCount>0)continue;ze.unit=-1}gn[V]=T,Y=V;break}Y>=Un&&y.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<Y+1&&(W.maxTextureUnits=Y+1),T.unit=Y,c.activeTexture(ao+Y),c.bindTexture(T.target,T.texture)}return Y},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}});function bt(T,Y){var V=new vt($r);$n[V.id]=V,W.textureCount++;function ze(m,P){var F=V.texInfo;Jt.call(F);var $=Lt();return typeof m=="number"?typeof P=="number"?ft($,m|0,P|0):ft($,m|0,m|0):m?(y.type(m,"object","invalid arguments to regl.texture"),An(F,m),Tt($,m)):ft($,1,1),F.genMipmaps&&($.mipmask=($.width<<1)-1),V.mipmask=$.mipmask,ee(V,$),y.texture2D(F,$,R),V.internalformat=$.internalformat,ze.width=$.width,ze.height=$.height,Vn(V),an($,$r),kn(F,$r),$t(),Pn($),K.profile&&(V.stats.size=sl(V.internalformat,V.type,$.width,$.height,F.genMipmaps,!1)),ze.format=he[V.internalformat],ze.type=Fe[V.type],ze.mag=se[F.magFilter],ze.min=Ne[F.minFilter],ze.wrapS=Oe[F.wrapS],ze.wrapT=Oe[F.wrapT],ze}function _t(m,P,F,$){y(!!m,"must specify image data");var N=P|0,k=F|0,M=$|0,_=Pe();return ee(_,V),_.width=0,_.height=0,Ce(_,m),_.width=_.width||(V.width>>M)-N,_.height=_.height||(V.height>>M)-k,y(V.type===_.type&&V.format===_.format&&V.internalformat===_.internalformat,"incompatible format for texture.subimage"),y(N>=0&&k>=0&&N+_.width<=V.width&&k+_.height<=V.height,"texture.subimage write out of bounds"),y(V.mipmask&1<<M,"missing mipmap data"),y(_.data||_.element||_.needsCopy,"missing image data"),Vn(V),ct(_,$r,N,k,M),$t(),Me(_),ze}function E(m,P){var F=m|0,$=P|0||F;if(F===V.width&&$===V.height)return ze;ze.width=V.width=F,ze.height=V.height=$,Vn(V);for(var N=0;V.mipmask>>N;++N){var k=F>>N,M=$>>N;if(!k||!M)break;c.texImage2D($r,N,V.format,k,M,0,V.format,V.type,null)}return $t(),K.profile&&(V.stats.size=sl(V.internalformat,V.type,F,$,!1,!1)),ze}return ze(T,Y),ze.subimage=_t,ze.resize=E,ze._reglType="texture2d",ze._texture=V,K.profile&&(ze.stats=V.stats),ze.destroy=function(){V.decRef()},ze}function Nt(T,Y,V,ze,_t,E){var m=new vt(Ss);$n[m.id]=m,W.cubeCount++;var P=new Array(6);function F(k,M,_,A,S,U){var G,J=m.texInfo;for(Jt.call(J),G=0;G<6;++G)P[G]=Lt();if(typeof k=="number"||!k){var re=k|0||1;for(G=0;G<6;++G)ft(P[G],re,re)}else if(typeof k=="object")if(M)Tt(P[0],k),Tt(P[1],M),Tt(P[2],_),Tt(P[3],A),Tt(P[4],S),Tt(P[5],U);else if(An(J,k),Ue(m,k),"faces"in k){var _e=k.faces;for(y(Array.isArray(_e)&&_e.length===6,"cube faces must be a length 6 array"),G=0;G<6;++G)y(typeof _e[G]=="object"&&!!_e[G],"invalid input for cube map face"),ee(P[G],m),Tt(P[G],_e[G])}else for(G=0;G<6;++G)Tt(P[G],k);else y.raise("invalid arguments to cube map");for(ee(m,P[0]),y.optional(function(){R.npotTextureCube||y(dc(m.width)&&dc(m.height),"your browser does not support non power or two texture dimensions")}),J.genMipmaps?m.mipmask=(P[0].width<<1)-1:m.mipmask=P[0].mipmask,y.textureCube(m,J,P,R),m.internalformat=P[0].internalformat,F.width=P[0].width,F.height=P[0].height,Vn(m),G=0;G<6;++G)an(P[G],nl+G);for(kn(J,Ss),$t(),K.profile&&(m.stats.size=sl(m.internalformat,m.type,F.width,F.height,J.genMipmaps,!0)),F.format=he[m.internalformat],F.type=Fe[m.type],F.mag=se[J.magFilter],F.min=Ne[J.minFilter],F.wrapS=Oe[J.wrapS],F.wrapT=Oe[J.wrapT],G=0;G<6;++G)Pn(P[G]);return F}function $(k,M,_,A,S){y(!!M,"must specify image data"),y(typeof k=="number"&&k===(k|0)&&k>=0&&k<6,"invalid face");var U=_|0,G=A|0,J=S|0,re=Pe();return ee(re,m),re.width=0,re.height=0,Ce(re,M),re.width=re.width||(m.width>>J)-U,re.height=re.height||(m.height>>J)-G,y(m.type===re.type&&m.format===re.format&&m.internalformat===re.internalformat,"incompatible format for texture.subimage"),y(U>=0&&G>=0&&U+re.width<=m.width&&G+re.height<=m.height,"texture.subimage write out of bounds"),y(m.mipmask&1<<J,"missing mipmap data"),y(re.data||re.element||re.needsCopy,"missing image data"),Vn(m),ct(re,nl+k,U,G,J),$t(),Me(re),F}function N(k){var M=k|0;if(M!==m.width){F.width=m.width=M,F.height=m.height=M,Vn(m);for(var _=0;_<6;++_)for(var A=0;m.mipmask>>A;++A)c.texImage2D(nl+_,A,m.format,M>>A,M>>A,0,m.format,m.type,null);return $t(),K.profile&&(m.stats.size=sl(m.internalformat,m.type,F.width,F.height,!1,!0)),F}}return F(T,Y,V,ze,_t,E),F.subimage=$,F.resize=N,F._reglType="textureCube",F._texture=m,K.profile&&(F.stats=m.stats),F.destroy=function(){m.decRef()},F}function yn(){for(var T=0;T<Un;++T)c.activeTexture(ao+T),c.bindTexture($r,null),gn[T]=null;ir($n).forEach(tt),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var T=0;return Object.keys($n).forEach(function(Y){T+=$n[Y].stats.size}),T});function Si(){for(var T=0;T<Un;++T){var Y=gn[T];Y&&(Y.bindCount=0,Y.unit=-1,gn[T]=null)}ir($n).forEach(function(V){V.texture=c.createTexture(),c.bindTexture(V.target,V.texture);for(var ze=0;ze<32;++ze)if(V.mipmask&1<<ze)if(V.target===$r)c.texImage2D($r,ze,V.internalformat,V.width>>ze,V.height>>ze,0,V.internalformat,V.type,null);else for(var _t=0;_t<6;++_t)c.texImage2D(nl+_t,ze,V.internalformat,V.width>>ze,V.height>>ze,0,V.internalformat,V.type,null);kn(V.texInfo,V.target)})}function po(){for(var T=0;T<Un;++T){var Y=gn[T];Y&&(Y.bindCount=0,Y.unit=-1,gn[T]=null),c.activeTexture(ao+T),c.bindTexture($r,null),c.bindTexture(Ss,null)}}return{create2D:bt,createCube:Nt,clear:yn,getTexture:function(T){return null},restore:Si,refresh:po}}var Ei=36161,ul=32854,Bc=32855,$c=36194,Gc=33189,zc=36168,Uc=34041,Vc=35907,Hc=34836,Wc=34842,Xc=34843,Rr=[];Rr[ul]=2,Rr[Bc]=2,Rr[$c]=2,Rr[Gc]=2,Rr[zc]=1,Rr[Uc]=4,Rr[Vc]=4,Rr[Hc]=16,Rr[Wc]=8,Rr[Xc]=6;function Yc(c,g,R){return Rr[c]*g*R}var Km=function(c,g,R,X,te){var W={rgba4:ul,rgb565:$c,"rgb5 a1":Bc,depth:Gc,stencil:zc,"depth stencil":Uc};g.ext_srgb&&(W.srgba=Vc),g.ext_color_buffer_half_float&&(W.rgba16f=Wc,W.rgb16f=Xc),g.webgl_color_buffer_float&&(W.rgba32f=Hc);var K=[];Object.keys(W).forEach(function(de){var ve=W[de];K[ve]=de});var fe=0,ce={};function ge(de){this.id=fe++,this.refCount=1,this.renderbuffer=de,this.format=ul,this.width=0,this.height=0,te.profile&&(this.stats={size:0})}ge.prototype.decRef=function(){--this.refCount<=0&&xe(this)};function xe(de){var ve=de.renderbuffer;y(ve,"must not double destroy renderbuffer"),c.bindRenderbuffer(Ei,null),c.deleteRenderbuffer(ve),de.renderbuffer=null,de.refCount=0,delete ce[de.id],X.renderbufferCount--}function ye(de,ve){var B=new ge(c.createRenderbuffer());ce[B.id]=B,X.renderbufferCount++;function Q(Fe,se){var Ne=0,Oe=0,Je=ul;if(typeof Fe=="object"&&Fe){var ne=Fe;if("shape"in ne){var ee=ne.shape;y(Array.isArray(ee)&&ee.length>=2,"invalid renderbuffer shape"),Ne=ee[0]|0,Oe=ee[1]|0}else"radius"in ne&&(Ne=Oe=ne.radius|0),"width"in ne&&(Ne=ne.width|0),"height"in ne&&(Oe=ne.height|0);"format"in ne&&(y.parameter(ne.format,W,"invalid renderbuffer format"),Je=W[ne.format])}else typeof Fe=="number"?(Ne=Fe|0,typeof se=="number"?Oe=se|0:Oe=Ne):Fe?y.raise("invalid arguments to renderbuffer constructor"):Ne=Oe=1;if(y(Ne>0&&Oe>0&&Ne<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),!(Ne===B.width&&Oe===B.height&&Je===B.format))return Q.width=B.width=Ne,Q.height=B.height=Oe,B.format=Je,c.bindRenderbuffer(Ei,B.renderbuffer),c.renderbufferStorage(Ei,Je,Ne,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Yc(B.format,B.width,B.height)),Q.format=K[B.format],Q}function he(Fe,se){var Ne=Fe|0,Oe=se|0||Ne;return Ne===B.width&&Oe===B.height||(y(Ne>0&&Oe>0&&Ne<=R.maxRenderbufferSize&&Oe<=R.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=B.width=Ne,Q.height=B.height=Oe,c.bindRenderbuffer(Ei,B.renderbuffer),c.renderbufferStorage(Ei,B.format,Ne,Oe),y(c.getError()===0,"invalid render buffer format"),te.profile&&(B.stats.size=Yc(B.format,B.width,B.height))),Q}return Q(de,ve),Q.resize=he,Q._reglType="renderbuffer",Q._renderbuffer=B,te.profile&&(Q.stats=B.stats),Q.destroy=function(){B.decRef()},Q}te.profile&&(X.getTotalRenderbufferSize=function(){var de=0;return Object.keys(ce).forEach(function(ve){de+=ce[ve].stats.size}),de});function Te(){ir(ce).forEach(function(de){de.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(Ei,de.renderbuffer),c.renderbufferStorage(Ei,de.format,de.width,de.height)}),c.bindRenderbuffer(Ei,null)}return{create:ye,clear:function(){ir(ce).forEach(xe)},restore:Te}},ri=36160,Bs=36161,Ui=3553,cl=34069,Qc=36064,fl=36096,Kc=36128,qc=33306,Zc=36053,qm=36054,Zm=36055,Jm=36057,eh=36061,th=36193,nh=5121,rh=5126,Jc=6407,ef=6408,ih=6402,ah=[Jc,ef],$s=[];$s[ef]=4,$s[Jc]=3;var lo=[];lo[nh]=1,lo[rh]=4,lo[th]=2;var oh=32854,tf=32855,lh=36194,nf=33189,rf=36168,Gs=34041,af=35907,sh=34836,so=34842,uh=34843,ch=[oh,tf,lh,af,so,uh,sh],ga={};ga[Zc]="complete",ga[qm]="incomplete attachment",ga[Jm]="incomplete dimensions",ga[Zm]="incomplete, missing attachment",ga[eh]="unsupported";function fh(c,g,R,X,te,W){var K={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];g.ext_srgb&&ce.push("srgba"),g.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),g.webgl_color_buffer_float&&ce.push("rgba32f");var ge=["uint8"];g.oes_texture_half_float&&ge.push("half float","float16"),g.oes_texture_float&&ge.push("float","float32");function xe(me,Ce,Re){this.target=me,this.texture=Ce,this.renderbuffer=Re;var ct=0,ot=0;Ce?(ct=Ce.width,ot=Ce.height):Re&&(ct=Re.width,ot=Re.height),this.width=ct,this.height=ot}function ye(me){me&&(me.texture&&me.texture._texture.decRef(),me.renderbuffer&&me.renderbuffer._renderbuffer.decRef())}function Te(me,Ce,Re){if(me)if(me.texture){var ct=me.texture._texture,ot=Math.max(1,ct.width),Pe=Math.max(1,ct.height);y(ot===Ce&&Pe===Re,"inconsistent width/height for supplied texture"),ct.refCount+=1}else{var Me=me.renderbuffer._renderbuffer;y(Me.width===Ce&&Me.height===Re,"inconsistent width/height for renderbuffer"),Me.refCount+=1}}function de(me,Ce){Ce&&(Ce.texture?c.framebufferTexture2D(ri,me,Ce.target,Ce.texture._texture.texture,0):c.framebufferRenderbuffer(ri,me,Bs,Ce.renderbuffer._renderbuffer.renderbuffer))}function ve(me){var Ce=Ui,Re=null,ct=null,ot=me;typeof me=="object"&&(ot=me.data,"target"in me&&(Ce=me.target|0)),y.type(ot,"function","invalid attachment data");var Pe=ot._reglType;return Pe==="texture2d"?(Re=ot,y(Ce===Ui)):Pe==="textureCube"?(Re=ot,y(Ce>=cl&&Ce<cl+6,"invalid cube map target")):Pe==="renderbuffer"?(ct=ot,Ce=Bs):y.raise("invalid regl object for attachment"),new xe(Ce,Re,ct)}function B(me,Ce,Re,ct,ot){if(Re){var Pe=X.create2D({width:me,height:Ce,format:ct,type:ot});return Pe._texture.refCount=0,new xe(Ui,Pe,null)}else{var Me=te.create({width:me,height:Ce,format:ct});return Me._renderbuffer.refCount=0,new xe(Bs,null,Me)}}function Q(me){return me&&(me.texture||me.renderbuffer)}function he(me,Ce,Re){me&&(me.texture?me.texture.resize(Ce,Re):me.renderbuffer&&me.renderbuffer.resize(Ce,Re),me.width=Ce,me.height=Re)}var Fe=0,se={};function Ne(){this.id=Fe++,se[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Oe(me){me.colorAttachments.forEach(ye),ye(me.depthAttachment),ye(me.stencilAttachment),ye(me.depthStencilAttachment)}function Je(me){var Ce=me.framebuffer;y(Ce,"must not double destroy framebuffer"),c.deleteFramebuffer(Ce),me.framebuffer=null,W.framebufferCount--,delete se[me.id]}function ne(me){var Ce;c.bindFramebuffer(ri,me.framebuffer);var Re=me.colorAttachments;for(Ce=0;Ce<Re.length;++Ce)de(Qc+Ce,Re[Ce]);for(Ce=Re.length;Ce<R.maxColorAttachments;++Ce)c.framebufferTexture2D(ri,Qc+Ce,Ui,null,0);c.framebufferTexture2D(ri,qc,Ui,null,0),c.framebufferTexture2D(ri,fl,Ui,null,0),c.framebufferTexture2D(ri,Kc,Ui,null,0),de(fl,me.depthAttachment),de(Kc,me.stencilAttachment),de(qc,me.depthStencilAttachment);var ct=c.checkFramebufferStatus(ri);!c.isContextLost()&&ct!==Zc&&y.raise("framebuffer configuration not supported, status = "+ga[ct]),c.bindFramebuffer(ri,K.next?K.next.framebuffer:null),K.cur=K.next,c.getError()}function ee(me,Ce){var Re=new Ne;W.framebufferCount++;function ct(Pe,Me){var nt;y(K.next!==Re,"can not update framebuffer which is currently in use");var ft=0,Tt=0,an=!0,sn=!0,Lt=null,Pn=!0,Jt="rgba",An="uint8",kn=1,Nn=null,$n=null,Un=null,gn=!1;if(typeof Pe=="number")ft=Pe|0,Tt=Me|0||ft;else if(!Pe)ft=Tt=1;else{y.type(Pe,"object","invalid arguments for framebuffer");var vt=Pe;if("shape"in vt){var Vn=vt.shape;y(Array.isArray(Vn)&&Vn.length>=2,"invalid shape for framebuffer"),ft=Vn[0],Tt=Vn[1]}else"radius"in vt&&(ft=Tt=vt.radius),"width"in vt&&(ft=vt.width),"height"in vt&&(Tt=vt.height);("color"in vt||"colors"in vt)&&(Lt=vt.color||vt.colors,Array.isArray(Lt)&&y(Lt.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),Lt||("colorCount"in vt&&(kn=vt.colorCount|0,y(kn>0,"invalid color buffer count")),"colorTexture"in vt&&(Pn=!!vt.colorTexture,Jt="rgba4"),"colorType"in vt&&(An=vt.colorType,Pn?(y(g.oes_texture_float||!(An==="float"||An==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),y(g.oes_texture_half_float||!(An==="half float"||An==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):An==="half float"||An==="float16"?(y(g.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Jt="rgba16f"):(An==="float"||An==="float32")&&(y(g.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Jt="rgba32f"),y.oneOf(An,ge,"invalid color type")),"colorFormat"in vt&&(Jt=vt.colorFormat,fe.indexOf(Jt)>=0?Pn=!0:ce.indexOf(Jt)>=0?Pn=!1:y.optional(function(){Pn?y.oneOf(vt.colorFormat,fe,"invalid color format for texture"):y.oneOf(vt.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in vt||"depthStencilTexture"in vt)&&(gn=!!(vt.depthTexture||vt.depthStencilTexture),y(!gn||g.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in vt&&(typeof vt.depth=="boolean"?an=vt.depth:(Nn=vt.depth,sn=!1)),"stencil"in vt&&(typeof vt.stencil=="boolean"?sn=vt.stencil:($n=vt.stencil,an=!1)),"depthStencil"in vt&&(typeof vt.depthStencil=="boolean"?an=sn=vt.depthStencil:(Un=vt.depthStencil,an=!1,sn=!1))}var $t=null,tt=null,bt=null,Nt=null;if(Array.isArray(Lt))$t=Lt.map(ve);else if(Lt)$t=[ve(Lt)];else for($t=new Array(kn),nt=0;nt<kn;++nt)$t[nt]=B(ft,Tt,Pn,Jt,An);y(g.webgl_draw_buffers||$t.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),y($t.length<=R.maxColorAttachments,"too many color attachments, not supported"),ft=ft||$t[0].width,Tt=Tt||$t[0].height,Nn?tt=ve(Nn):an&&!sn&&(tt=B(ft,Tt,gn,"depth","uint32")),$n?bt=ve($n):sn&&!an&&(bt=B(ft,Tt,!1,"stencil","uint8")),Un?Nt=ve(Un):!Nn&&!$n&&sn&&an&&(Nt=B(ft,Tt,gn,"depth stencil","depth stencil")),y(!!Nn+!!$n+!!Un<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var yn=null;for(nt=0;nt<$t.length;++nt)if(Te($t[nt],ft,Tt),y(!$t[nt]||$t[nt].texture&&ah.indexOf($t[nt].texture._texture.format)>=0||$t[nt].renderbuffer&&ch.indexOf($t[nt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+nt+" is invalid"),$t[nt]&&$t[nt].texture){var Si=$s[$t[nt].texture._texture.format]*lo[$t[nt].texture._texture.type];yn===null?yn=Si:y(yn===Si,"all color attachments much have the same number of bits per pixel.")}return Te(tt,ft,Tt),y(!tt||tt.texture&&tt.texture._texture.format===ih||tt.renderbuffer&&tt.renderbuffer._renderbuffer.format===nf,"invalid depth attachment for framebuffer object"),Te(bt,ft,Tt),y(!bt||bt.renderbuffer&&bt.renderbuffer._renderbuffer.format===rf,"invalid stencil attachment for framebuffer object"),Te(Nt,ft,Tt),y(!Nt||Nt.texture&&Nt.texture._texture.format===Gs||Nt.renderbuffer&&Nt.renderbuffer._renderbuffer.format===Gs,"invalid depth-stencil attachment for framebuffer object"),Oe(Re),Re.width=ft,Re.height=Tt,Re.colorAttachments=$t,Re.depthAttachment=tt,Re.stencilAttachment=bt,Re.depthStencilAttachment=Nt,ct.color=$t.map(Q),ct.depth=Q(tt),ct.stencil=Q(bt),ct.depthStencil=Q(Nt),ct.width=Re.width,ct.height=Re.height,ne(Re),ct}function ot(Pe,Me){y(K.next!==Re,"can not resize a framebuffer which is currently in use");var nt=Math.max(Pe|0,1),ft=Math.max(Me|0||nt,1);if(nt===Re.width&&ft===Re.height)return ct;for(var Tt=Re.colorAttachments,an=0;an<Tt.length;++an)he(Tt[an],nt,ft);return he(Re.depthAttachment,nt,ft),he(Re.stencilAttachment,nt,ft),he(Re.depthStencilAttachment,nt,ft),Re.width=ct.width=nt,Re.height=ct.height=ft,ne(Re),ct}return ct(me,Ce),r(ct,{resize:ot,_reglType:"framebuffer",_framebuffer:Re,destroy:function(){Je(Re),Oe(Re)},use:function(Pe){K.setFBO({framebuffer:ct},Pe)}})}function Ue(me){var Ce=Array(6);function Re(ot){var Pe;y(Ce.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Me={color:null},nt=0,ft=null,Tt="rgba",an="uint8",sn=1;if(typeof ot=="number")nt=ot|0;else if(!ot)nt=1;else{y.type(ot,"object","invalid arguments for framebuffer");var Lt=ot;if("shape"in Lt){var Pn=Lt.shape;y(Array.isArray(Pn)&&Pn.length>=2,"invalid shape for framebuffer"),y(Pn[0]===Pn[1],"cube framebuffer must be square"),nt=Pn[0]}else"radius"in Lt&&(nt=Lt.radius|0),"width"in Lt?(nt=Lt.width|0,"height"in Lt&&y(Lt.height===nt,"must be square")):"height"in Lt&&(nt=Lt.height|0);("color"in Lt||"colors"in Lt)&&(ft=Lt.color||Lt.colors,Array.isArray(ft)&&y(ft.length===1||g.webgl_draw_buffers,"multiple render targets not supported")),ft||("colorCount"in Lt&&(sn=Lt.colorCount|0,y(sn>0,"invalid color buffer count")),"colorType"in Lt&&(y.oneOf(Lt.colorType,ge,"invalid color type"),an=Lt.colorType),"colorFormat"in Lt&&(Tt=Lt.colorFormat,y.oneOf(Lt.colorFormat,fe,"invalid color format for texture"))),"depth"in Lt&&(Me.depth=Lt.depth),"stencil"in Lt&&(Me.stencil=Lt.stencil),"depthStencil"in Lt&&(Me.depthStencil=Lt.depthStencil)}var Jt;if(ft)if(Array.isArray(ft))for(Jt=[],Pe=0;Pe<ft.length;++Pe)Jt[Pe]=ft[Pe];else Jt=[ft];else{Jt=Array(sn);var An={radius:nt,format:Tt,type:an};for(Pe=0;Pe<sn;++Pe)Jt[Pe]=X.createCube(An)}for(Me.color=Array(Jt.length),Pe=0;Pe<Jt.length;++Pe){var kn=Jt[Pe];y(typeof kn=="function"&&kn._reglType==="textureCube","invalid cube map"),nt=nt||kn.width,y(kn.width===nt&&kn.height===nt,"invalid cube map shape"),Me.color[Pe]={target:cl,data:Jt[Pe]}}for(Pe=0;Pe<6;++Pe){for(var Nn=0;Nn<Jt.length;++Nn)Me.color[Nn].target=cl+Pe;Pe>0&&(Me.depth=Ce[0].depth,Me.stencil=Ce[0].stencil,Me.depthStencil=Ce[0].depthStencil),Ce[Pe]?Ce[Pe](Me):Ce[Pe]=ee(Me)}return r(Re,{width:nt,height:nt,color:Jt})}function ct(ot){var Pe,Me=ot|0;if(y(Me>0&&Me<=R.maxCubeMapSize,"invalid radius for cube fbo"),Me===Re.width)return Re;var nt=Re.color;for(Pe=0;Pe<nt.length;++Pe)nt[Pe].resize(Me);for(Pe=0;Pe<6;++Pe)Ce[Pe].resize(Me);return Re.width=Re.height=Me,Re}return Re(me),r(Re,{faces:Ce,resize:ct,_reglType:"framebufferCube",destroy:function(){Ce.forEach(function(ot){ot.destroy()})}})}function Ae(){K.cur=null,K.next=null,K.dirty=!0,ir(se).forEach(function(me){me.framebuffer=c.createFramebuffer(),ne(me)})}return r(K,{getFramebuffer:function(me){if(typeof me=="function"&&me._reglType==="framebuffer"){var Ce=me._framebuffer;if(Ce instanceof Ne)return Ce}return null},create:ee,createCube:Ue,clear:function(){ir(se).forEach(Je)},restore:Ae})}var dh=5126,s=34962,D=34963,z=["attributes","elements","offset","count","primitive","instances"];function oe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=dh,this.offset=0,this.stride=0,this.divisor=0}function be(c,g,R,X,te,W,K){for(var fe=R.maxAttributes,ce=new Array(fe),ge=0;ge<fe;++ge)ce[ge]=new oe;var xe=0,ye={},Te={Record:oe,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:ve()?Oe:function(){},createVAO:Je,getVAO:Q,destroyBuffer:de,setVAO:ve()?he:Fe,clear:ve()?se:function(){}};function de(ne){for(var ee=0;ee<ce.length;++ee){var Ue=ce[ee];Ue.buffer===ne&&(c.disableVertexAttribArray(ee),Ue.buffer=null)}}function ve(){return g.oes_vertex_array_object}function B(){return g.angle_instanced_arrays}function Q(ne){return typeof ne=="function"&&ne._vao?ne._vao:null}function he(ne){if(ne!==Te.currentVAO){var ee=ve();ne?ee.bindVertexArrayOES(ne.vao):ee.bindVertexArrayOES(null),Te.currentVAO=ne}}function Fe(ne){if(ne!==Te.currentVAO){if(ne)ne.bindAttrs();else{for(var ee=B(),Ue=0;Ue<ce.length;++Ue){var Ae=ce[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),Ae.buffer.bind(),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offfset),ee&&Ae.divisor&&ee.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}K.elements?c.bindBuffer(D,K.elements.buffer.buffer):c.bindBuffer(D,null)}Te.currentVAO=ne}}function se(){ir(ye).forEach(function(ne){ne.destroy()})}function Ne(){this.id=++xe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var ne=ve();ne?this.vao=ne.createVertexArrayOES():this.vao=null,ye[this.id]=this,this.buffers=[]}Ne.prototype.bindAttrs=function(){for(var ne=B(),ee=this.attributes,Ue=0;Ue<ee.length;++Ue){var Ae=ee[Ue];Ae.buffer?(c.enableVertexAttribArray(Ue),c.bindBuffer(s,Ae.buffer.buffer),c.vertexAttribPointer(Ue,Ae.size,Ae.type,Ae.normalized,Ae.stride,Ae.offset),ne&&Ae.divisor&&ne.vertexAttribDivisorANGLE(Ue,Ae.divisor)):(c.disableVertexAttribArray(Ue),c.vertexAttrib4f(Ue,Ae.x,Ae.y,Ae.z,Ae.w))}for(var me=ee.length;me<fe;++me)c.disableVertexAttribArray(me);var Ce=W.getElements(this.elements);Ce?c.bindBuffer(D,Ce.buffer.buffer):c.bindBuffer(D,null)},Ne.prototype.refresh=function(){var ne=ve();ne&&(ne.bindVertexArrayOES(this.vao),this.bindAttrs(),Te.currentVAO=null,ne.bindVertexArrayOES(null))},Ne.prototype.destroy=function(){if(this.vao){var ne=ve();this===Te.currentVAO&&(Te.currentVAO=null,ne.bindVertexArrayOES(null)),ne.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ye[this.id]&&(delete ye[this.id],X.vaoCount-=1)};function Oe(){var ne=ve();ne&&ir(ye).forEach(function(ee){ee.refresh()})}function Je(ne){var ee=new Ne;X.vaoCount+=1;function Ue(Ae){var me;if(Array.isArray(Ae))me=Ae,ee.elements&&ee.ownsElements&&ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1,ee.offset=0,ee.count=0,ee.instances=-1,ee.primitive=4;else{if(y(typeof Ae=="object","invalid arguments for create vao"),y("attributes"in Ae,"must specify attributes for vao"),Ae.elements){var Ce=Ae.elements;ee.ownsElements?typeof Ce=="function"&&Ce._reglType==="elements"?(ee.elements.destroy(),ee.ownsElements=!1):(ee.elements(Ce),ee.ownsElements=!1):W.getElements(Ae.elements)?(ee.elements=Ae.elements,ee.ownsElements=!1):(ee.elements=W.create(Ae.elements),ee.ownsElements=!0)}else ee.elements=null,ee.ownsElements=!1;me=Ae.attributes,ee.offset=0,ee.count=-1,ee.instances=-1,ee.primitive=4,ee.elements&&(ee.count=ee.elements._elements.vertCount,ee.primitive=ee.elements._elements.primType),"offset"in Ae&&(ee.offset=Ae.offset|0),"count"in Ae&&(ee.count=Ae.count|0),"instances"in Ae&&(ee.instances=Ae.instances|0),"primitive"in Ae&&(y(Ae.primitive in yi,"bad primitive type: "+Ae.primitive),ee.primitive=yi[Ae.primitive]),y.optional(()=>{for(var an=Object.keys(Ae),sn=0;sn<an.length;++sn)y(z.indexOf(an[sn])>=0,'invalid option for vao: "'+an[sn]+'" valid options are '+z)}),y(Array.isArray(me),"attributes must be an array")}y(me.length<fe,"too many attributes"),y(me.length>0,"must specify at least one attribute");var Re={},ct=ee.attributes;ct.length=me.length;for(var ot=0;ot<me.length;++ot){var Pe=me[ot],Me=ct[ot]=new oe,nt=Pe.data||Pe;if(Array.isArray(nt)||n(nt)||hr(nt)){var ft;ee.buffers[ot]&&(ft=ee.buffers[ot],n(nt)&&ft._buffer.byteLength>=nt.byteLength?ft.subdata(nt):(ft.destroy(),ee.buffers[ot]=null)),ee.buffers[ot]||(ft=ee.buffers[ot]=te.create(Pe,s,!1,!0)),Me.buffer=te.getBuffer(ft),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1,Re[ot]=1}else te.getBuffer(Pe)?(Me.buffer=te.getBuffer(Pe),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1):te.getBuffer(Pe.buffer)?(Me.buffer=te.getBuffer(Pe.buffer),Me.size=(+Pe.size||Me.buffer.dimension)|0,Me.normalized=!!Pe.normalized||!1,"type"in Pe?(y.parameter(Pe.type,ca,"invalid buffer type"),Me.type=ca[Pe.type]):Me.type=Me.buffer.dtype,Me.offset=(Pe.offset||0)|0,Me.stride=(Pe.stride||0)|0,Me.divisor=(Pe.divisor||0)|0,Me.state=1,y(Me.size>=1&&Me.size<=4,"size must be between 1 and 4"),y(Me.offset>=0,"invalid offset"),y(Me.stride>=0&&Me.stride<=255,"stride must be between 0 and 255"),y(Me.divisor>=0,"divisor must be positive"),y(!Me.divisor||!!g.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pe?(y(ot>0,"first attribute must not be a constant"),Me.x=+Pe.x||0,Me.y=+Pe.y||0,Me.z=+Pe.z||0,Me.w=+Pe.w||0,Me.state=2):y(!1,"invalid attribute spec for location "+ot)}for(var Tt=0;Tt<ee.buffers.length;++Tt)!Re[Tt]&&ee.buffers[Tt]&&(ee.buffers[Tt].destroy(),ee.buffers[Tt]=null);return ee.refresh(),Ue}return Ue.destroy=function(){for(var Ae=0;Ae<ee.buffers.length;++Ae)ee.buffers[Ae]&&ee.buffers[Ae].destroy();ee.buffers.length=0,ee.ownsElements&&(ee.elements.destroy(),ee.elements=null,ee.ownsElements=!1),ee.destroy()},Ue._vao=ee,Ue._reglType="vao",Ue(ne)}return Te}var je=35632,Xe=35633,dt=35718,Bt=35721;function Dt(c,g,R,X){var te={},W={};function K(B,Q,he,Fe){this.name=B,this.id=Q,this.location=he,this.info=Fe}function fe(B,Q){for(var he=0;he<B.length;++he)if(B[he].id===Q.id){B[he].location=Q.location;return}B.push(Q)}function ce(B,Q,he){var Fe=B===je?te:W,se=Fe[Q];if(!se){var Ne=g.str(Q);se=c.createShader(B),c.shaderSource(se,Ne),c.compileShader(se),y.shaderError(c,se,Ne,B,he),Fe[Q]=se}return se}var ge={},xe=[],ye=0;function Te(B,Q){this.id=ye++,this.fragId=B,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,X.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function de(B,Q,he){var Fe,se,Ne=ce(je,B.fragId),Oe=ce(Xe,B.vertId),Je=B.program=c.createProgram();if(c.attachShader(Je,Ne),c.attachShader(Je,Oe),he)for(Fe=0;Fe<he.length;++Fe){var ne=he[Fe];c.bindAttribLocation(Je,ne[0],ne[1])}c.linkProgram(Je),y.linkError(c,Je,g.str(B.fragId),g.str(B.vertId),Q);var ee=c.getProgramParameter(Je,dt);X.profile&&(B.stats.uniformsCount=ee);var Ue=B.uniforms;for(Fe=0;Fe<ee;++Fe)if(se=c.getActiveUniform(Je,Fe),se){if(se.size>1)for(var Ae=0;Ae<se.size;++Ae){var me=se.name.replace("[0]","["+Ae+"]");fe(Ue,new K(me,g.id(me),c.getUniformLocation(Je,me),se))}var Ce=se.name;se.size>1&&(Ce=Ce.replace("[0]","")),fe(Ue,new K(Ce,g.id(Ce),c.getUniformLocation(Je,Ce),se))}var Re=c.getProgramParameter(Je,Bt);X.profile&&(B.stats.attributesCount=Re);var ct=B.attributes;for(Fe=0;Fe<Re;++Fe)se=c.getActiveAttrib(Je,Fe),se&&fe(ct,new K(se.name,g.id(se.name),c.getAttribLocation(Je,se.name),se))}X.profile&&(R.getMaxUniformsCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.uniformsCount>B&&(B=Q.stats.uniformsCount)}),B},R.getMaxAttributesCount=function(){var B=0;return xe.forEach(function(Q){Q.stats.attributesCount>B&&(B=Q.stats.attributesCount)}),B});function ve(){te={},W={};for(var B=0;B<xe.length;++B)de(xe[B],null,xe[B].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var B=c.deleteShader.bind(c);ir(te).forEach(B),te={},ir(W).forEach(B),W={},xe.forEach(function(Q){c.deleteProgram(Q.program)}),xe.length=0,ge={},R.shaderCount=0},program:function(B,Q,he,Fe){y.command(B>=0,"missing vertex shader",he),y.command(Q>=0,"missing fragment shader",he);var se=ge[Q];se||(se=ge[Q]={});var Ne=se[B];if(Ne&&(Ne.refCount++,!Fe))return Ne;var Oe=new Te(Q,B);return R.shaderCount++,de(Oe,he,Fe),Ne||(se[B]=Oe),xe.push(Oe),r(Oe,{destroy:function(){if(Oe.refCount--,Oe.refCount<=0){c.deleteProgram(Oe.program);var Je=xe.indexOf(Oe);xe.splice(Je,1),R.shaderCount--}se[Oe.vertId].refCount<=0&&(c.deleteShader(W[Oe.vertId]),delete W[Oe.vertId],delete ge[Oe.fragId][Oe.vertId]),Object.keys(ge[Oe.fragId]).length||(c.deleteShader(te[Oe.fragId]),delete te[Oe.fragId],delete ge[Oe.fragId])}})},restore:ve,shader:ce,frag:-1,vert:-1}}var Tn=6408,Vt=5121,Mt=3333,of=5126;function K_(c,g,R,X,te,W,K){function fe(xe){var ye;g.next===null?(y(te.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ye=Vt):(y(g.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ye=g.next.colorAttachments[0].texture._texture.type,y.optional(function(){W.oes_texture_float?(y(ye===Vt||ye===of,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ye===of&&y(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):y(ye===Vt,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Te=0,de=0,ve=X.framebufferWidth,B=X.framebufferHeight,Q=null;n(xe)?Q=xe:xe&&(y.type(xe,"object","invalid arguments to regl.read()"),Te=xe.x|0,de=xe.y|0,y(Te>=0&&Te<X.framebufferWidth,"invalid x offset for regl.read"),y(de>=0&&de<X.framebufferHeight,"invalid y offset for regl.read"),ve=(xe.width||X.framebufferWidth-Te)|0,B=(xe.height||X.framebufferHeight-de)|0,Q=xe.data||null),Q&&(ye===Vt?y(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ye===of&&y(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),y(ve>0&&ve+Te<=X.framebufferWidth,"invalid width for read pixels"),y(B>0&&B+de<=X.framebufferHeight,"invalid height for read pixels"),R();var he=ve*B*4;return Q||(ye===Vt?Q=new Uint8Array(he):ye===of&&(Q=Q||new Float32Array(he))),y.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),y(Q.byteLength>=he,"data buffer for regl.read() too small"),c.pixelStorei(Mt,4),c.readPixels(Te,de,ve,B,Tn,ye,Q),Q}function ce(xe){var ye;return g.setFBO({framebuffer:xe.framebuffer},function(){ye=fe(xe)}),ye}function ge(xe){return!xe||!("framebuffer"in xe)?fe(xe):ce(xe)}return ge}function dl(c){return Array.prototype.slice.call(c)}function ml(c){return dl(c).join("")}function q_(){var c=0,g=[],R=[];function X(ye){for(var Te=0;Te<R.length;++Te)if(R[Te]===ye)return g[Te];var de="g"+c++;return g.push(de),R.push(ye),de}function te(){var ye=[];function Te(){ye.push.apply(ye,dl(arguments))}var de=[];function ve(){var B="v"+c++;return de.push(B),arguments.length>0&&(ye.push(B,"="),ye.push.apply(ye,dl(arguments)),ye.push(";")),B}return r(Te,{def:ve,toString:function(){return ml([de.length>0?"var "+de.join(",")+";":"",ml(ye)])}})}function W(){var ye=te(),Te=te(),de=ye.toString,ve=Te.toString;function B(Q,he){Te(Q,he,"=",ye.def(Q,he),";")}return r(function(){ye.apply(ye,dl(arguments))},{def:ye.def,entry:ye,exit:Te,save:B,set:function(Q,he,Fe){B(Q,he),ye(Q,he,"=",Fe,";")},toString:function(){return de()+ve()}})}function K(){var ye=ml(arguments),Te=W(),de=W(),ve=Te.toString,B=de.toString;return r(Te,{then:function(){return Te.apply(Te,dl(arguments)),this},else:function(){return de.apply(de,dl(arguments)),this},toString:function(){var Q=B();return Q&&(Q="else{"+Q+"}"),ml(["if(",ye,"){",ve(),"}",Q])}})}var fe=te(),ce={};function ge(ye,Te){var de=[];function ve(){var se="a"+de.length;return de.push(se),se}Te=Te||0;for(var B=0;B<Te;++B)ve();var Q=W(),he=Q.toString,Fe=ce[ye]=r(Q,{arg:ve,toString:function(){return ml(["function(",de.join(),"){",he(),"}"])}});return Fe}function xe(){var ye=['"use strict";',fe,"return {"];Object.keys(ce).forEach(function(ve){ye.push('"',ve,'":',ce[ve].toString(),",")}),ye.push("}");var Te=ml(ye).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),de=Function.apply(null,g.concat(Te));return de.apply(null,R)}return{global:fe,link:X,block:te,proc:ge,scope:W,cond:K,compile:xe}}var hl="xyzw".split(""),Jv=5121,pl=1,mh=2,hh=0,ph=1,vh=2,gh=3,lf=4,eg=5,tg=6,ng="dither",rg="blend.enable",ig="blend.color",yh="blend.equation",xh="blend.func",ag="depth.enable",og="depth.func",lg="depth.range",sg="depth.mask",Eh="colorMask",ug="cull.enable",cg="cull.face",_h="frontFace",Sh="lineWidth",fg="polygonOffset.enable",wh="polygonOffset.offset",dg="sample.alpha",mg="sample.enable",Th="sample.coverage",hg="stencil.enable",pg="stencil.mask",bh="stencil.func",Ah="stencil.opFront",zs="stencil.opBack",vg="scissor.enable",sf="scissor.box",Vi="viewport",Us="profile",uo="framebuffer",Vs="vert",Hs="frag",co="elements",fo="primitive",mo="count",uf="offset",cf="instances",Ws="vao",Ch="Width",Lh="Height",vl=uo+Ch,gl=uo+Lh,Z_=Vi+Ch,J_=Vi+Lh,gg="drawingBuffer",yg=gg+Ch,xg=gg+Lh,eS=[xh,yh,bh,Ah,zs,Th,Vi,sf,wh],yl=34962,Rh=34963,tS=35632,nS=35633,Eg=3553,rS=34067,iS=2884,aS=3042,oS=3024,lS=2960,sS=2929,uS=3089,cS=32823,fS=32926,dS=32928,Oh=5126,ff=35664,df=35665,mf=35666,Ph=5124,hf=35667,pf=35668,vf=35669,kh=35670,gf=35671,yf=35672,xf=35673,Xs=35674,Ys=35675,Qs=35676,Ks=35678,qs=35680,Nh=4,Zs=1028,ho=1029,_g=2304,Ih=2305,mS=32775,hS=32776,pS=519,ya=7680,Sg=0,wg=1,Tg=32774,vS=513,bg=36160,gS=36064,_i={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ag=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cg={frag:tS,vert:nS},Dh={cw:_g,ccw:Ih};function Ef(c){return Array.isArray(c)||n(c)||hr(c)}function Lg(c){return c.sort(function(g,R){return g===Vi?-1:R===Vi?1:g<R?-1:1})}function Mn(c,g,R,X){this.thisDep=c,this.contextDep=g,this.propDep=R,this.append=X}function Ea(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function bn(c){return new Mn(!1,!1,!1,c)}function pr(c,g){var R=c.type;if(R===hh){var X=c.data.length;return new Mn(!0,X>=1,X>=2,g)}else if(R===lf){var te=c.data;return new Mn(te.thisDep,te.contextDep,te.propDep,g)}else{if(R===eg)return new Mn(!1,!1,!1,g);if(R===tg){for(var W=!1,K=!1,fe=!1,ce=0;ce<c.data.length;++ce){var ge=c.data[ce];if(ge.type===ph)fe=!0;else if(ge.type===vh)K=!0;else if(ge.type===gh)W=!0;else if(ge.type===hh){W=!0;var xe=ge.data;xe>=1&&(K=!0),xe>=2&&(fe=!0)}else ge.type===lf&&(W=W||ge.data.thisDep,K=K||ge.data.contextDep,fe=fe||ge.data.propDep)}return new Mn(W,K,fe,g)}else return new Mn(R===gh,R===vh,R===ph,g)}}var Rg=new Mn(!1,!1,!1,function(){});function yS(c,g,R,X,te,W,K,fe,ce,ge,xe,ye,Te,de,ve){var B=ge.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};R.ext_blend_minmax&&(Q.min=mS,Q.max=hS);var he=R.angle_instanced_arrays,Fe=R.webgl_draw_buffers,se=R.oes_vertex_array_object,Ne={dirty:!0,profile:ve.profile},Oe={},Je=[],ne={},ee={};function Ue(E){return E.replace(".","_")}function Ae(E,m,P){var F=Ue(E);Je.push(E),Oe[F]=Ne[F]=!!P,ne[F]=m}function me(E,m,P){var F=Ue(E);Je.push(E),Array.isArray(P)?(Ne[F]=P.slice(),Oe[F]=P.slice()):Ne[F]=Oe[F]=P,ee[F]=m}Ae(ng,oS),Ae(rg,aS),me(ig,"blendColor",[0,0,0,0]),me(yh,"blendEquationSeparate",[Tg,Tg]),me(xh,"blendFuncSeparate",[wg,Sg,wg,Sg]),Ae(ag,sS,!0),me(og,"depthFunc",vS),me(lg,"depthRange",[0,1]),me(sg,"depthMask",!0),me(Eh,Eh,[!0,!0,!0,!0]),Ae(ug,iS),me(cg,"cullFace",ho),me(_h,_h,Ih),me(Sh,Sh,1),Ae(fg,cS),me(wh,"polygonOffset",[0,0]),Ae(dg,fS),Ae(mg,dS),me(Th,"sampleCoverage",[1,!1]),Ae(hg,lS),me(pg,"stencilMask",-1),me(bh,"stencilFunc",[pS,0,-1]),me(Ah,"stencilOpSeparate",[Zs,ya,ya,ya]),me(zs,"stencilOpSeparate",[ho,ya,ya,ya]),Ae(vg,uS),me(sf,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),me(Vi,Vi,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ce={gl:c,context:Te,strings:g,next:Oe,current:Ne,draw:ye,elements:W,buffer:te,shader:xe,attributes:ge.state,vao:ge,uniforms:ce,framebuffer:fe,extensions:R,timer:de,isBufferArgs:Ef},Re={primTypes:yi,compareFuncs:xl,blendFuncs:_i,blendEquations:Q,stencilOps:xa,glTypes:ca,orientationType:Dh};y.optional(function(){Ce.isArrayLike=Zt}),Fe&&(Re.backBuffer=[ho],Re.drawBuffer=rn(X.maxDrawbuffers,function(E){return E===0?[0]:rn(E,function(m){return gS+m})}));var ct=0;function ot(){var E=q_(),m=E.link,P=E.global;E.id=ct++,E.batchId="0";var F=m(Ce),$=E.shared={props:"a0"};Object.keys(Ce).forEach(function(A){$[A]=P.def(F,".",A)}),y.optional(function(){E.CHECK=m(y),E.commandStr=y.guessCommand(),E.command=m(E.commandStr),E.assert=function(A,S,U){A("if(!(",S,"))",this.CHECK,".commandRaise(",m(U),",",this.command,");")},Re.invalidBlendCombinations=Ag});var N=E.next={},k=E.current={};Object.keys(ee).forEach(function(A){Array.isArray(Ne[A])&&(N[A]=P.def($.next,".",A),k[A]=P.def($.current,".",A))});var M=E.constants={};Object.keys(Re).forEach(function(A){M[A]=P.def(JSON.stringify(Re[A]))}),E.invoke=function(A,S){switch(S.type){case hh:var U=["this",$.context,$.props,E.batchId];return A.def(m(S.data),".call(",U.slice(0,Math.max(S.data.length+1,4)),")");case ph:return A.def($.props,S.data);case vh:return A.def($.context,S.data);case gh:return A.def("this",S.data);case lf:return S.data.append(E,A),S.data.ref;case eg:return S.data.toString();case tg:return S.data.map(function(G){return E.invoke(A,G)})}},E.attribCache={};var _={};return E.scopeAttrib=function(A){var S=g.id(A);if(S in _)return _[S];var U=ge.scope[S];U||(U=ge.scope[S]=new B);var G=_[S]=m(U);return G},E}function Pe(E){var m=E.static,P=E.dynamic,F;if(Us in m){var $=!!m[Us];F=bn(function(k,M){return $}),F.enable=$}else if(Us in P){var N=P[Us];F=pr(N,function(k,M){return k.invoke(M,N)})}return F}function Me(E,m){var P=E.static,F=E.dynamic;if(uo in P){var $=P[uo];return $?($=fe.getFramebuffer($),y.command($,"invalid framebuffer object"),bn(function(k,M){var _=k.link($),A=k.shared;M.set(A.framebuffer,".next",_);var S=A.context;return M.set(S,"."+vl,_+".width"),M.set(S,"."+gl,_+".height"),_})):bn(function(k,M){var _=k.shared;M.set(_.framebuffer,".next","null");var A=_.context;return M.set(A,"."+vl,A+"."+yg),M.set(A,"."+gl,A+"."+xg),"null"})}else if(uo in F){var N=F[uo];return pr(N,function(k,M){var _=k.invoke(M,N),A=k.shared,S=A.framebuffer,U=M.def(S,".getFramebuffer(",_,")");y.optional(function(){k.assert(M,"!"+_+"||"+U,"invalid framebuffer object")}),M.set(S,".next",U);var G=A.context;return M.set(G,"."+vl,U+"?"+U+".width:"+G+"."+yg),M.set(G,"."+gl,U+"?"+U+".height:"+G+"."+xg),U})}else return null}function nt(E,m,P){var F=E.static,$=E.dynamic;function N(_){if(_ in F){var A=F[_];y.commandType(A,"object","invalid "+_,P.commandStr);var S=!0,U=A.x|0,G=A.y|0,J,re;return"width"in A?(J=A.width|0,y.command(J>=0,"invalid "+_,P.commandStr)):S=!1,"height"in A?(re=A.height|0,y.command(re>=0,"invalid "+_,P.commandStr)):S=!1,new Mn(!S&&m&&m.thisDep,!S&&m&&m.contextDep,!S&&m&&m.propDep,function(Ze,Be){var le=Ze.shared.context,Z=J;"width"in A||(Z=Be.def(le,".",vl,"-",U));var Ye=re;return"height"in A||(Ye=Be.def(le,".",gl,"-",G)),[U,G,Z,Ye]})}else if(_ in $){var _e=$[_],it=pr(_e,function(Ze,Be){var le=Ze.invoke(Be,_e);y.optional(function(){Ze.assert(Be,le+"&&typeof "+le+'==="object"',"invalid "+_)});var Z=Ze.shared.context,Ye=Be.def(le,".x|0"),Ve=Be.def(le,".y|0"),rt=Be.def('"width" in ',le,"?",le,".width|0:","(",Z,".",vl,"-",Ye,")"),zt=Be.def('"height" in ',le,"?",le,".height|0:","(",Z,".",gl,"-",Ve,")");return y.optional(function(){Ze.assert(Be,rt+">=0&&"+zt+">=0","invalid "+_)}),[Ye,Ve,rt,zt]});return m&&(it.thisDep=it.thisDep||m.thisDep,it.contextDep=it.contextDep||m.contextDep,it.propDep=it.propDep||m.propDep),it}else return m?new Mn(m.thisDep,m.contextDep,m.propDep,function(Ze,Be){var le=Ze.shared.context;return[0,0,Be.def(le,".",vl),Be.def(le,".",gl)]}):null}var k=N(Vi);if(k){var M=k;k=new Mn(k.thisDep,k.contextDep,k.propDep,function(_,A){var S=M.append(_,A),U=_.shared.context;return A.set(U,"."+Z_,S[2]),A.set(U,"."+J_,S[3]),S})}return{viewport:k,scissor_box:N(sf)}}function ft(E,m){var P=E.static,F=typeof P[Hs]=="string"&&typeof P[Vs]=="string";if(F){if(Object.keys(m.dynamic).length>0)return null;var $=m.static,N=Object.keys($);if(N.length>0&&typeof $[N[0]]=="number"){for(var k=[],M=0;M<N.length;++M)y(typeof $[N[M]]=="number","must specify all vertex attribute locations when using vaos"),k.push([$[N[M]]|0,N[M]]);return k}}return null}function Tt(E,m,P){var F=E.static,$=E.dynamic;function N(S){if(S in F){var U=g.id(F[S]);y.optional(function(){xe.shader(Cg[S],U,y.guessCommand())});var G=bn(function(){return U});return G.id=U,G}else if(S in $){var J=$[S];return pr(J,function(re,_e){var it=re.invoke(_e,J),Ze=_e.def(re.shared.strings,".id(",it,")");return y.optional(function(){_e(re.shared.shader,".shader(",Cg[S],",",Ze,",",re.command,");")}),Ze})}return null}var k=N(Hs),M=N(Vs),_=null,A;return Ea(k)&&Ea(M)?(_=xe.program(M.id,k.id,null,P),A=bn(function(S,U){return S.link(_)})):A=new Mn(k&&k.thisDep||M&&M.thisDep,k&&k.contextDep||M&&M.contextDep,k&&k.propDep||M&&M.propDep,function(S,U){var G=S.shared.shader,J;k?J=k.append(S,U):J=U.def(G,".",Hs);var re;M?re=M.append(S,U):re=U.def(G,".",Vs);var _e=G+".program("+re+","+J;return y.optional(function(){_e+=","+S.command}),U.def(_e+")")}),{frag:k,vert:M,progVar:A,program:_}}function an(E,m){var P=E.static,F=E.dynamic,$={},N=!1;function k(){if(Ws in P){var Be=P[Ws];return Be!==null&&ge.getVAO(Be)===null&&(Be=ge.createVAO(Be)),N=!0,$.vao=Be,bn(function(Z){var Ye=ge.getVAO(Be);return Ye?Z.link(Ye):"null"})}else if(Ws in F){N=!0;var le=F[Ws];return pr(le,function(Z,Ye){var Ve=Z.invoke(Ye,le);return Ye.def(Z.shared.vao+".getVAO("+Ve+")")})}return null}var M=k(),_=!1;function A(){if(co in P){var Be=P[co];if($.elements=Be,Ef(Be)){var le=$.elements=W.create(Be,!0);Be=W.getElements(le),_=!0}else Be&&(Be=W.getElements(Be),_=!0,y.command(Be,"invalid elements",m.commandStr));var Z=bn(function(Ve,rt){if(Be){var zt=Ve.link(Be);return Ve.ELEMENTS=zt,zt}return Ve.ELEMENTS=null,null});return Z.value=Be,Z}else if(co in F){_=!0;var Ye=F[co];return pr(Ye,function(Ve,rt){var zt=Ve.shared,Hn=zt.isBufferArgs,vo=zt.elements,Hi=Ve.invoke(rt,Ye),wi=rt.def("null"),_a=rt.def(Hn,"(",Hi,")"),go=Ve.cond(_a).then(wi,"=",vo,".createStream(",Hi,");").else(wi,"=",vo,".getElements(",Hi,");");return y.optional(function(){Ve.assert(go.else,"!"+Hi+"||"+wi,"invalid elements")}),rt.entry(go),rt.exit(Ve.cond(_a).then(vo,".destroyStream(",wi,");")),Ve.ELEMENTS=wi,wi})}else if(N)return new Mn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.elements+".getElements("+Ve.shared.vao+".currentVAO.elements):null")});return null}var S=A();function U(){if(fo in P){var Be=P[fo];return $.primitive=Be,y.commandParameter(Be,yi,"invalid primitve",m.commandStr),bn(function(Z,Ye){return yi[Be]})}else if(fo in F){var le=F[fo];return pr(le,function(Z,Ye){var Ve=Z.constants.primTypes,rt=Z.invoke(Ye,le);return y.optional(function(){Z.assert(Ye,rt+" in "+Ve,"invalid primitive, must be one of "+Object.keys(yi))}),Ye.def(Ve,"[",rt,"]")})}else{if(_)return Ea(S)?S.value?bn(function(Z,Ye){return Ye.def(Z.ELEMENTS,".primType")}):bn(function(){return Nh}):new Mn(S.thisDep,S.contextDep,S.propDep,function(Z,Ye){var Ve=Z.ELEMENTS;return Ye.def(Ve,"?",Ve,".primType:",Nh)});if(N)return new Mn(M.thisDep,M.contextDep,M.propDep,function(Z,Ye){return Ye.def(Z.shared.vao+".currentVAO?"+Z.shared.vao+".currentVAO.primitive:"+Nh)})}return null}function G(Be,le){if(Be in P){var Z=P[Be]|0;return le?$.offset=Z:$.instances=Z,y.command(!le||Z>=0,"invalid "+Be,m.commandStr),bn(function(Ve,rt){return le&&(Ve.OFFSET=Z),Z})}else if(Be in F){var Ye=F[Be];return pr(Ye,function(Ve,rt){var zt=Ve.invoke(rt,Ye);return le&&(Ve.OFFSET=zt,y.optional(function(){Ve.assert(rt,zt+">=0","invalid "+Be)})),zt})}else if(le){if(_)return bn(function(Ve,rt){return Ve.OFFSET=0,0});if(N)return new Mn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.offset:0")})}else if(N)return new Mn(M.thisDep,M.contextDep,M.propDep,function(Ve,rt){return rt.def(Ve.shared.vao+".currentVAO?"+Ve.shared.vao+".currentVAO.instances:-1")});return null}var J=G(uf,!0);function re(){if(mo in P){var Be=P[mo]|0;return $.count=Be,y.command(typeof Be=="number"&&Be>=0,"invalid vertex count",m.commandStr),bn(function(){return Be})}else if(mo in F){var le=F[mo];return pr(le,function(rt,zt){var Hn=rt.invoke(zt,le);return y.optional(function(){rt.assert(zt,"typeof "+Hn+'==="number"&&'+Hn+">=0&&"+Hn+"===("+Hn+"|0)","invalid vertex count")}),Hn})}else if(_)if(Ea(S)){if(S)return J?new Mn(J.thisDep,J.contextDep,J.propDep,function(rt,zt){var Hn=zt.def(rt.ELEMENTS,".vertCount-",rt.OFFSET);return y.optional(function(){rt.assert(zt,Hn+">=0","invalid vertex offset/element buffer too small")}),Hn}):bn(function(rt,zt){return zt.def(rt.ELEMENTS,".vertCount")});var Z=bn(function(){return-1});return y.optional(function(){Z.MISSING=!0}),Z}else{var Ye=new Mn(S.thisDep||J.thisDep,S.contextDep||J.contextDep,S.propDep||J.propDep,function(rt,zt){var Hn=rt.ELEMENTS;return rt.OFFSET?zt.def(Hn,"?",Hn,".vertCount-",rt.OFFSET,":-1"):zt.def(Hn,"?",Hn,".vertCount:-1")});return y.optional(function(){Ye.DYNAMIC=!0}),Ye}else if(N){var Ve=new Mn(M.thisDep,M.contextDep,M.propDep,function(rt,zt){return zt.def(rt.shared.vao,".currentVAO?",rt.shared.vao,".currentVAO.count:-1")});return Ve}return null}var _e=U(),it=re(),Ze=G(cf,!1);return{elements:S,primitive:_e,count:it,instances:Ze,offset:J,vao:M,vaoActive:N,elementsActive:_,static:$}}function sn(E,m){var P=E.static,F=E.dynamic,$={};return Je.forEach(function(N){var k=Ue(N);function M(_,A){if(N in P){var S=_(P[N]);$[k]=bn(function(){return S})}else if(N in F){var U=F[N];$[k]=pr(U,function(G,J){return A(G,J,G.invoke(J,U))})}}switch(N){case ug:case rg:case ng:case hg:case ag:case vg:case fg:case dg:case mg:case sg:return M(function(_){return y.commandType(_,"boolean",N,m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="boolean"',"invalid flag "+N,_.commandStr)}),S});case og:return M(function(_){return y.commandParameter(_,xl,"invalid "+N,m.commandStr),xl[_]},function(_,A,S){var U=_.constants.compareFuncs;return y.optional(function(){_.assert(A,S+" in "+U,"invalid "+N+", must be one of "+Object.keys(xl))}),A.def(U,"[",S,"]")});case lg:return M(function(_){return y.command(Zt(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"&&_[0]<=_[1],"depth range is 2d array",m.commandStr),_},function(_,A,S){y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===2&&typeof "+S+'[0]==="number"&&typeof '+S+'[1]==="number"&&'+S+"[0]<="+S+"[1]","depth range must be a 2d array")});var U=A.def("+",S,"[0]"),G=A.def("+",S,"[1]");return[U,G]});case xh:return M(function(_){y.commandType(_,"object","blend.func",m.commandStr);var A="srcRGB"in _?_.srcRGB:_.src,S="srcAlpha"in _?_.srcAlpha:_.src,U="dstRGB"in _?_.dstRGB:_.dst,G="dstAlpha"in _?_.dstAlpha:_.dst;return y.commandParameter(A,_i,k+".srcRGB",m.commandStr),y.commandParameter(S,_i,k+".srcAlpha",m.commandStr),y.commandParameter(U,_i,k+".dstRGB",m.commandStr),y.commandParameter(G,_i,k+".dstAlpha",m.commandStr),y.command(Ag.indexOf(A+", "+U)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+A+", "+U+")",m.commandStr),[_i[A],_i[U],_i[S],_i[G]]},function(_,A,S){var U=_.constants.blendFuncs;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid blend func, must be an object")});function G(le,Z){var Ye=A.def('"',le,Z,'" in ',S,"?",S,".",le,Z,":",S,".",le);return y.optional(function(){_.assert(A,Ye+" in "+U,"invalid "+N+"."+le+Z+", must be one of "+Object.keys(_i))}),Ye}var J=G("src","RGB"),re=G("dst","RGB");y.optional(function(){var le=_.constants.invalidBlendCombinations;_.assert(A,le+".indexOf("+J+'+", "+'+re+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _e=A.def(U,"[",J,"]"),it=A.def(U,"[",G("src","Alpha"),"]"),Ze=A.def(U,"[",re,"]"),Be=A.def(U,"[",G("dst","Alpha"),"]");return[_e,Ze,it,Be]});case yh:return M(function(_){if(typeof _=="string")return y.commandParameter(_,Q,"invalid "+N,m.commandStr),[Q[_],Q[_]];if(typeof _=="object")return y.commandParameter(_.rgb,Q,N+".rgb",m.commandStr),y.commandParameter(_.alpha,Q,N+".alpha",m.commandStr),[Q[_.rgb],Q[_.alpha]];y.commandRaise("invalid blend.equation",m.commandStr)},function(_,A,S){var U=_.constants.blendEquations,G=A.def(),J=A.def(),re=_.cond("typeof ",S,'==="string"');return y.optional(function(){function _e(it,Ze,Be){_.assert(it,Be+" in "+U,"invalid "+Ze+", must be one of "+Object.keys(Q))}_e(re.then,N,S),_.assert(re.else,S+"&&typeof "+S+'==="object"',"invalid "+N),_e(re.else,N+".rgb",S+".rgb"),_e(re.else,N+".alpha",S+".alpha")}),re.then(G,"=",J,"=",U,"[",S,"];"),re.else(G,"=",U,"[",S,".rgb];",J,"=",U,"[",S,".alpha];"),A(re),[G,J]});case ig:return M(function(_){return y.command(Zt(_)&&_.length===4,"blend.color must be a 4d array",m.commandStr),rn(4,function(A){return+_[A]})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","blend.color must be a 4d array")}),rn(4,function(U){return A.def("+",S,"[",U,"]")})});case pg:return M(function(_){return y.commandType(_,"number",k,m.commandStr),_|0},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"',"invalid stencil.mask")}),A.def(S,"|0")});case bh:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.cmp||"keep",S=_.ref||0,U="mask"in _?_.mask:-1;return y.commandParameter(A,xl,N+".cmp",m.commandStr),y.commandType(S,"number",N+".ref",m.commandStr),y.commandType(U,"number",N+".mask",m.commandStr),[xl[A],S,U]},function(_,A,S){var U=_.constants.compareFuncs;y.optional(function(){function _e(){_.assert(A,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_e(S+"&&typeof ",S,'==="object"'),_e('!("cmp" in ',S,")||(",S,".cmp in ",U,")")});var G=A.def('"cmp" in ',S,"?",U,"[",S,".cmp]",":",ya),J=A.def(S,".ref|0"),re=A.def('"mask" in ',S,"?",S,".mask|0:-1");return[G,J,re]});case Ah:case zs:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.fail||"keep",S=_.zfail||"keep",U=_.zpass||"keep";return y.commandParameter(A,xa,N+".fail",m.commandStr),y.commandParameter(S,xa,N+".zfail",m.commandStr),y.commandParameter(U,xa,N+".zpass",m.commandStr),[N===zs?ho:Zs,xa[A],xa[S],xa[U]]},function(_,A,S){var U=_.constants.stencilOps;y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+N)});function G(J){return y.optional(function(){_.assert(A,'!("'+J+'" in '+S+")||("+S+"."+J+" in "+U+")","invalid "+N+"."+J+", must be one of "+Object.keys(xa))}),A.def('"',J,'" in ',S,"?",U,"[",S,".",J,"]:",ya)}return[N===zs?ho:Zs,G("fail"),G("zfail"),G("zpass")]});case wh:return M(function(_){y.commandType(_,"object",k,m.commandStr);var A=_.factor|0,S=_.units|0;return y.commandType(A,"number",k+".factor",m.commandStr),y.commandType(S,"number",k+".units",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid "+N)});var U=A.def(S,".factor|0"),G=A.def(S,".units|0");return[U,G]});case cg:return M(function(_){var A=0;return _==="front"?A=Zs:_==="back"&&(A=ho),y.command(!!A,k,m.commandStr),A},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="front"||'+S+'==="back"',"invalid cull.face")}),A.def(S,'==="front"?',Zs,":",ho)});case Sh:return M(function(_){return y.command(typeof _=="number"&&_>=X.lineWidthDims[0]&&_<=X.lineWidthDims[1],"invalid line width, must be a positive number between "+X.lineWidthDims[0]+" and "+X.lineWidthDims[1],m.commandStr),_},function(_,A,S){return y.optional(function(){_.assert(A,"typeof "+S+'==="number"&&'+S+">="+X.lineWidthDims[0]+"&&"+S+"<="+X.lineWidthDims[1],"invalid line width")}),S});case _h:return M(function(_){return y.commandParameter(_,Dh,k,m.commandStr),Dh[_]},function(_,A,S){return y.optional(function(){_.assert(A,S+'==="cw"||'+S+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),A.def(S+'==="cw"?'+_g+":"+Ih)});case Eh:return M(function(_){return y.command(Zt(_)&&_.length===4,"color.mask must be length 4 array",m.commandStr),_.map(function(A){return!!A})},function(_,A,S){return y.optional(function(){_.assert(A,_.shared.isArrayLike+"("+S+")&&"+S+".length===4","invalid color.mask")}),rn(4,function(U){return"!!"+S+"["+U+"]"})});case Th:return M(function(_){y.command(typeof _=="object"&&_,k,m.commandStr);var A="value"in _?_.value:1,S=!!_.invert;return y.command(typeof A=="number"&&A>=0&&A<=1,"sample.coverage.value must be a number between 0 and 1",m.commandStr),[A,S]},function(_,A,S){y.optional(function(){_.assert(A,S+"&&typeof "+S+'==="object"',"invalid sample.coverage")});var U=A.def('"value" in ',S,"?+",S,".value:1"),G=A.def("!!",S,".invert");return[U,G]})}}),$}function Lt(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(N){var k=P[N],M;if(typeof k=="number"||typeof k=="boolean")M=bn(function(){return k});else if(typeof k=="function"){var _=k._reglType;_==="texture2d"||_==="textureCube"?M=bn(function(A){return A.link(k)}):_==="framebuffer"||_==="framebufferCube"?(y.command(k.color.length>0,'missing color attachment for framebuffer sent to uniform "'+N+'"',m.commandStr),M=bn(function(A){return A.link(k.color[0])})):y.commandRaise('invalid data for uniform "'+N+'"',m.commandStr)}else Zt(k)?M=bn(function(A){var S=A.global.def("[",rn(k.length,function(U){return y.command(typeof k[U]=="number"||typeof k[U]=="boolean","invalid uniform "+N,A.commandStr),k[U]}),"]");return S}):y.commandRaise('invalid or missing data for uniform "'+N+'"',m.commandStr);M.value=k,$[N]=M}),Object.keys(F).forEach(function(N){var k=F[N];$[N]=pr(k,function(M,_){return M.invoke(_,k)})}),$}function Pn(E,m){var P=E.static,F=E.dynamic,$={};return Object.keys(P).forEach(function(N){var k=P[N],M=g.id(N),_=new B;if(Ef(k))_.state=pl,_.buffer=te.getBuffer(te.create(k,yl,!1,!0)),_.type=0;else{var A=te.getBuffer(k);if(A)_.state=pl,_.buffer=A,_.type=0;else if(y.command(typeof k=="object"&&k,"invalid data for attribute "+N,m.commandStr),"constant"in k){var S=k.constant;_.buffer="null",_.state=mh,typeof S=="number"?_.x=S:(y.command(Zt(S)&&S.length>0&&S.length<=4,"invalid constant for attribute "+N,m.commandStr),hl.forEach(function(Ze,Be){Be<S.length&&(_[Ze]=S[Be])}))}else{Ef(k.buffer)?A=te.getBuffer(te.create(k.buffer,yl,!1,!0)):A=te.getBuffer(k.buffer),y.command(!!A,'missing buffer for attribute "'+N+'"',m.commandStr);var U=k.offset|0;y.command(U>=0,'invalid offset for attribute "'+N+'"',m.commandStr);var G=k.stride|0;y.command(G>=0&&G<256,'invalid stride for attribute "'+N+'", must be integer betweeen [0, 255]',m.commandStr);var J=k.size|0;y.command(!("size"in k)||J>0&&J<=4,'invalid size for attribute "'+N+'", must be 1,2,3,4',m.commandStr);var re=!!k.normalized,_e=0;"type"in k&&(y.commandParameter(k.type,ca,"invalid type for attribute "+N,m.commandStr),_e=ca[k.type]);var it=k.divisor|0;y.optional(function(){"divisor"in k&&(y.command(it===0||he,'cannot specify divisor for attribute "'+N+'", instancing not supported',m.commandStr),y.command(it>=0,'invalid divisor for attribute "'+N+'"',m.commandStr));var Ze=m.commandStr,Be=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(k).forEach(function(le){y.command(Be.indexOf(le)>=0,'unknown parameter "'+le+'" for attribute pointer "'+N+'" (valid parameters are '+Be+")",Ze)})}),_.buffer=A,_.state=pl,_.size=J,_.normalized=re,_.type=_e||A.dtype,_.offset=U,_.stride=G,_.divisor=it}}$[N]=bn(function(Ze,Be){var le=Ze.attribCache;if(M in le)return le[M];var Z={isStream:!1};return Object.keys(_).forEach(function(Ye){Z[Ye]=_[Ye]}),_.buffer&&(Z.buffer=Ze.link(_.buffer),Z.type=Z.type||Z.buffer+".dtype"),le[M]=Z,Z})}),Object.keys(F).forEach(function(N){var k=F[N];function M(_,A){var S=_.invoke(A,k),U=_.shared,G=_.constants,J=U.isBufferArgs,re=U.buffer;y.optional(function(){_.assert(A,S+"&&(typeof "+S+'==="object"||typeof '+S+'==="function")&&('+J+"("+S+")||"+re+".getBuffer("+S+")||"+re+".getBuffer("+S+".buffer)||"+J+"("+S+'.buffer)||("constant" in '+S+"&&(typeof "+S+'.constant==="number"||'+U.isArrayLike+"("+S+".constant))))",'invalid dynamic attribute "'+N+'"')});var _e={isStream:A.def(!1)},it=new B;it.state=pl,Object.keys(it).forEach(function(Z){_e[Z]=A.def(""+it[Z])});var Ze=_e.buffer,Be=_e.type;A("if(",J,"(",S,")){",_e.isStream,"=true;",Ze,"=",re,".createStream(",yl,",",S,");",Be,"=",Ze,".dtype;","}else{",Ze,"=",re,".getBuffer(",S,");","if(",Ze,"){",Be,"=",Ze,".dtype;",'}else if("constant" in ',S,"){",_e.state,"=",mh,";","if(typeof "+S+'.constant === "number"){',_e[hl[0]],"=",S,".constant;",hl.slice(1).map(function(Z){return _e[Z]}).join("="),"=0;","}else{",hl.map(function(Z,Ye){return _e[Z]+"="+S+".constant.length>"+Ye+"?"+S+".constant["+Ye+"]:0;"}).join(""),"}}else{","if(",J,"(",S,".buffer)){",Ze,"=",re,".createStream(",yl,",",S,".buffer);","}else{",Ze,"=",re,".getBuffer(",S,".buffer);","}",Be,'="type" in ',S,"?",G.glTypes,"[",S,".type]:",Ze,".dtype;",_e.normalized,"=!!",S,".normalized;");function le(Z){A(_e[Z],"=",S,".",Z,"|0;")}return le("size"),le("offset"),le("stride"),le("divisor"),A("}}"),A.exit("if(",_e.isStream,"){",re,".destroyStream(",Ze,");","}"),_e}$[N]=pr(k,M)}),$}function Jt(E){var m=E.static,P=E.dynamic,F={};return Object.keys(m).forEach(function($){var N=m[$];F[$]=bn(function(k,M){return typeof N=="number"||typeof N=="boolean"?""+N:k.link(N)})}),Object.keys(P).forEach(function($){var N=P[$];F[$]=pr(N,function(k,M){return k.invoke(M,N)})}),F}function An(E,m,P,F,$){var N=E.static,k=E.dynamic;y.optional(function(){var le=[uo,Vs,Hs,co,fo,uf,mo,cf,Us,Ws].concat(Je);function Z(Ye){Object.keys(Ye).forEach(function(Ve){y.command(le.indexOf(Ve)>=0,'unknown parameter "'+Ve+'"',$.commandStr)})}Z(N),Z(k)});var M=ft(E,m),_=Me(E),A=nt(E,_,$),S=an(E,$),U=sn(E,$),G=Tt(E,$,M);function J(le){var Z=A[le];Z&&(U[le]=Z)}J(Vi),J(Ue(sf));var re=Object.keys(U).length>0,_e={framebuffer:_,draw:S,shader:G,state:U,dirty:re,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_e.profile=Pe(E),_e.uniforms=Lt(P,$),_e.drawVAO=_e.scopeVAO=S.vao,!_e.drawVAO&&G.program&&!M&&R.angle_instanced_arrays&&S.static.elements){var it=!0,Ze=G.program.attributes.map(function(le){var Z=m.static[le];return it=it&&!!Z,Z});if(it&&Ze.length>0){var Be=ge.getVAO(ge.createVAO({attributes:Ze,elements:S.static.elements}));_e.drawVAO=new Mn(null,null,null,function(le,Z){return le.link(Be)}),_e.useVAO=!0}}return M?_e.useVAO=!0:_e.attributes=Pn(m,$),_e.context=Jt(F),_e}function kn(E,m,P){var F=E.shared,$=F.context,N=E.scope();Object.keys(P).forEach(function(k){m.save($,"."+k);var M=P[k],_=M.append(E,m);Array.isArray(_)?N($,".",k,"=[",_.join(),"];"):N($,".",k,"=",_,";")}),m(N)}function Nn(E,m,P,F){var $=E.shared,N=$.gl,k=$.framebuffer,M;Fe&&(M=m.def($.extensions,".webgl_draw_buffers"));var _=E.constants,A=_.drawBuffer,S=_.backBuffer,U;P?U=P.append(E,m):U=m.def(k,".next"),F||m("if(",U,"!==",k,".cur){"),m("if(",U,"){",N,".bindFramebuffer(",bg,",",U,".framebuffer);"),Fe&&m(M,".drawBuffersWEBGL(",A,"[",U,".colorAttachments.length]);"),m("}else{",N,".bindFramebuffer(",bg,",null);"),Fe&&m(M,".drawBuffersWEBGL(",S,");"),m("}",k,".cur=",U,";"),F||m("}")}function $n(E,m,P){var F=E.shared,$=F.gl,N=E.current,k=E.next,M=F.current,_=F.next,A=E.cond(M,".dirty");Je.forEach(function(S){var U=Ue(S);if(!(U in P.state)){var G,J;if(U in k){G=k[U],J=N[U];var re=rn(Ne[U].length,function(it){return A.def(G,"[",it,"]")});A(E.cond(re.map(function(it,Ze){return it+"!=="+J+"["+Ze+"]"}).join("||")).then($,".",ee[U],"(",re,");",re.map(function(it,Ze){return J+"["+Ze+"]="+it}).join(";"),";"))}else{G=A.def(_,".",U);var _e=E.cond(G,"!==",M,".",U);A(_e),U in ne?_e(E.cond(G).then($,".enable(",ne[U],");").else($,".disable(",ne[U],");"),M,".",U,"=",G,";"):_e($,".",ee[U],"(",G,");",M,".",U,"=",G,";")}}}),Object.keys(P.state).length===0&&A(M,".dirty=false;"),m(A)}function Un(E,m,P,F){var $=E.shared,N=E.current,k=$.current,M=$.gl;Lg(Object.keys(P)).forEach(function(_){var A=P[_];if(!(F&&!F(A))){var S=A.append(E,m);if(ne[_]){var U=ne[_];Ea(A)?S?m(M,".enable(",U,");"):m(M,".disable(",U,");"):m(E.cond(S).then(M,".enable(",U,");").else(M,".disable(",U,");")),m(k,".",_,"=",S,";")}else if(Zt(S)){var G=N[_];m(M,".",ee[_],"(",S,");",S.map(function(J,re){return G+"["+re+"]="+J}).join(";"),";")}else m(M,".",ee[_],"(",S,");",k,".",_,"=",S,";")}})}function gn(E,m){he&&(E.instancing=m.def(E.shared.extensions,".angle_instanced_arrays"))}function vt(E,m,P,F,$){var N=E.shared,k=E.stats,M=N.current,_=N.timer,A=P.profile;function S(){return typeof performance>"u"?"Date.now()":"performance.now()"}var U,G;function J(le){U=m.def(),le(U,"=",S(),";"),typeof $=="string"?le(k,".count+=",$,";"):le(k,".count++;"),de&&(F?(G=m.def(),le(G,"=",_,".getNumPendingQueries();")):le(_,".beginQuery(",k,");"))}function re(le){le(k,".cpuTime+=",S(),"-",U,";"),de&&(F?le(_,".pushScopeStats(",G,",",_,".getNumPendingQueries(),",k,");"):le(_,".endQuery();"))}function _e(le){var Z=m.def(M,".profile");m(M,".profile=",le,";"),m.exit(M,".profile=",Z,";")}var it;if(A){if(Ea(A)){A.enable?(J(m),re(m.exit),_e("true")):_e("false");return}it=A.append(E,m),_e(it)}else it=m.def(M,".profile");var Ze=E.block();J(Ze),m("if(",it,"){",Ze,"}");var Be=E.block();re(Be),m.exit("if(",it,"){",Be,"}")}function Vn(E,m,P,F,$){var N=E.shared;function k(_){switch(_){case ff:case hf:case gf:return 2;case df:case pf:case yf:return 3;case mf:case vf:case xf:return 4;default:return 1}}function M(_,A,S){var U=N.gl,G=m.def(_,".location"),J=m.def(N.attributes,"[",G,"]"),re=S.state,_e=S.buffer,it=[S.x,S.y,S.z,S.w],Ze=["buffer","normalized","offset","stride"];function Be(){m("if(!",J,".buffer){",U,".enableVertexAttribArray(",G,");}");var Z=S.type,Ye;if(S.size?Ye=m.def(S.size,"||",A):Ye=A,m("if(",J,".type!==",Z,"||",J,".size!==",Ye,"||",Ze.map(function(rt){return J+"."+rt+"!=="+S[rt]}).join("||"),"){",U,".bindBuffer(",yl,",",_e,".buffer);",U,".vertexAttribPointer(",[G,Ye,Z,S.normalized,S.stride,S.offset],");",J,".type=",Z,";",J,".size=",Ye,";",Ze.map(function(rt){return J+"."+rt+"="+S[rt]+";"}).join(""),"}"),he){var Ve=S.divisor;m("if(",J,".divisor!==",Ve,"){",E.instancing,".vertexAttribDivisorANGLE(",[G,Ve],");",J,".divisor=",Ve,";}")}}function le(){m("if(",J,".buffer){",U,".disableVertexAttribArray(",G,");",J,".buffer=null;","}if(",hl.map(function(Z,Ye){return J+"."+Z+"!=="+it[Ye]}).join("||"),"){",U,".vertexAttrib4f(",G,",",it,");",hl.map(function(Z,Ye){return J+"."+Z+"="+it[Ye]+";"}).join(""),"}")}re===pl?Be():re===mh?le():(m("if(",re,"===",pl,"){"),Be(),m("}else{"),le(),m("}"))}F.forEach(function(_){var A=_.name,S=P.attributes[A],U;if(S){if(!$(S))return;U=S.append(E,m)}else{if(!$(Rg))return;var G=E.scopeAttrib(A);y.optional(function(){E.assert(m,G+".state","missing attribute "+A)}),U={},Object.keys(new B).forEach(function(J){U[J]=m.def(G,".",J)})}M(E.link(_),k(_.info.type),U)})}function $t(E,m,P,F,$,N){for(var k=E.shared,M=k.gl,_={},A,S=0;S<F.length;++S){var U=F[S],G=U.name,J=U.info.type,re=U.info.size,_e=P.uniforms[G];if(re>1){if(!_e)continue;var it=G.replace("[0]","");if(_[it])continue;_[it]=1}var Ze=E.link(U),Be=Ze+".location",le;if(_e){if(!$(_e))continue;if(Ea(_e)){var Z=_e.value;if(y.command(Z!==null&&typeof Z<"u",'missing uniform "'+G+'"',E.commandStr),J===Ks||J===qs){y.command(typeof Z=="function"&&(J===Ks&&(Z._reglType==="texture2d"||Z._reglType==="framebuffer")||J===qs&&(Z._reglType==="textureCube"||Z._reglType==="framebufferCube")),"invalid texture for uniform "+G,E.commandStr);var Ye=E.link(Z._texture||Z.color[0]._texture);m(M,".uniform1i(",Be,",",Ye+".bind());"),m.exit(Ye,".unbind();")}else if(J===Xs||J===Ys||J===Qs){y.optional(function(){y.command(Zt(Z),"invalid matrix for uniform "+G,E.commandStr),y.command(J===Xs&&Z.length===4||J===Ys&&Z.length===9||J===Qs&&Z.length===16,"invalid length for matrix uniform "+G,E.commandStr)});var Ve=E.global.def("new Float32Array(["+Array.prototype.slice.call(Z)+"])"),rt=2;J===Ys?rt=3:J===Qs&&(rt=4),m(M,".uniformMatrix",rt,"fv(",Be,",false,",Ve,");")}else{switch(J){case Oh:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1f";break;case ff:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2f";break;case df:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3f";break;case mf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4f";break;case kh:re===1?y.commandType(Z,"boolean","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case Ph:re===1?y.commandType(Z,"number","uniform "+G,E.commandStr):y.command(Zt(Z)&&Z.length===re,"uniform "+G,E.commandStr),A="1i";break;case gf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case hf:y.command(Zt(Z)&&Z.length&&Z.length%2===0&&Z.length<=re*2,"uniform "+G,E.commandStr),A="2i";break;case yf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case pf:y.command(Zt(Z)&&Z.length&&Z.length%3===0&&Z.length<=re*3,"uniform "+G,E.commandStr),A="3i";break;case xf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break;case vf:y.command(Zt(Z)&&Z.length&&Z.length%4===0&&Z.length<=re*4,"uniform "+G,E.commandStr),A="4i";break}re>1?(A+="v",Z=E.global.def("["+Array.prototype.slice.call(Z)+"]")):Z=Zt(Z)?Array.prototype.slice.call(Z):Z,m(M,".uniform",A,"(",Be,",",Z,");")}continue}else le=_e.append(E,m)}else{if(!$(Rg))continue;le=m.def(k.uniforms,"[",g.id(G),"]")}J===Ks?(y(!Array.isArray(le),"must specify a scalar prop for textures"),m("if(",le,"&&",le,'._reglType==="framebuffer"){',le,"=",le,".color[0];","}")):J===qs&&(y(!Array.isArray(le),"must specify a scalar prop for cube maps"),m("if(",le,"&&",le,'._reglType==="framebufferCube"){',le,"=",le,".color[0];","}")),y.optional(function(){function Or(vr,_f){E.assert(m,vr,'bad data or missing for uniform "'+G+'".  '+_f)}function yo(vr,_f){_f===1&&y(!Array.isArray(le),"must not specify an array type for uniform"),Or("Array.isArray("+le+") && typeof "+le+'[0]===" '+vr+'" || typeof '+le+'==="'+vr+'"',"invalid type, expected "+vr)}function Gr(vr,_f,Sf){Array.isArray(le)?y(le.length&&le.length%vr===0&&le.length<=vr*Sf,"must have length of "+(Sf===1?"":"n * ")+vr):Or(k.isArrayLike+"("+le+")&&"+le+".length && "+le+".length % "+vr+" === 0 && "+le+".length<="+vr*Sf,"invalid vector, should have length of "+(Sf===1?"":"n * ")+vr,E.commandStr)}function Mg(vr){y(!Array.isArray(le),"must not specify a value type"),Or("typeof "+le+'==="function"&&'+le+'._reglType==="texture'+(vr===Eg?"2d":"Cube")+'"',"invalid texture type",E.commandStr)}switch(J){case Ph:yo("number",re);break;case hf:Gr(2,"number",re);break;case pf:Gr(3,"number",re);break;case vf:Gr(4,"number",re);break;case Oh:yo("number",re);break;case ff:Gr(2,"number",re);break;case df:Gr(3,"number",re);break;case mf:Gr(4,"number",re);break;case kh:yo("boolean",re);break;case gf:Gr(2,"boolean",re);break;case yf:Gr(3,"boolean",re);break;case xf:Gr(4,"boolean",re);break;case Xs:Gr(4,"number",re);break;case Ys:Gr(9,"number",re);break;case Qs:Gr(16,"number",re);break;case Ks:Mg(Eg);break;case qs:Mg(rS);break}});var zt=1;switch(J){case Ks:case qs:var Hn=m.def(le,"._texture");m(M,".uniform1i(",Be,",",Hn,".bind());"),m.exit(Hn,".unbind();");continue;case Ph:case kh:A="1i";break;case hf:case gf:A="2i",zt=2;break;case pf:case yf:A="3i",zt=3;break;case vf:case xf:A="4i",zt=4;break;case Oh:A="1f";break;case ff:A="2f",zt=2;break;case df:A="3f",zt=3;break;case mf:A="4f",zt=4;break;case Xs:A="Matrix2fv";break;case Ys:A="Matrix3fv";break;case Qs:A="Matrix4fv";break}if(A.indexOf("Matrix")===-1&&re>1&&(A+="v",zt=1),A.charAt(0)==="M"){m(M,".uniform",A,"(",Be,",");var vo=Math.pow(J-Xs+2,2),Hi=E.global.def("new Float32Array(",vo,")");Array.isArray(le)?m("false,(",rn(vo,function(Or){return Hi+"["+Or+"]="+le[Or]}),",",Hi,")"):m("false,(Array.isArray(",le,")||",le," instanceof Float32Array)?",le,":(",rn(vo,function(Or){return Hi+"["+Or+"]="+le+"["+Or+"]"}),",",Hi,")"),m(");")}else if(zt>1){for(var wi=[],_a=[],go=0;go<zt;++go)Array.isArray(le)?_a.push(le[go]):_a.push(m.def(le+"["+go+"]")),N&&wi.push(m.def());N&&m("if(!",E.batchId,"||",wi.map(function(Or,yo){return Or+"!=="+_a[yo]}).join("||"),"){",wi.map(function(Or,yo){return Or+"="+_a[yo]+";"}).join("")),m(M,".uniform",A,"(",Be,",",_a.join(","),");"),N&&m("}")}else{if(y(!Array.isArray(le),"uniform value must not be an array"),N){var Dg=m.def();m("if(!",E.batchId,"||",Dg,"!==",le,"){",Dg,"=",le,";")}m(M,".uniform",A,"(",Be,",",le,");"),N&&m("}")}}}function tt(E,m,P,F){var $=E.shared,N=$.gl,k=$.draw,M=F.draw;function _(){var Ye=M.elements,Ve,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),Ve=Ye.append(E,rt),M.elementsActive&&rt("if("+Ve+")"+N+".bindBuffer("+Rh+","+Ve+".buffer.buffer);")):(Ve=rt.def(),rt(Ve,"=",k,".",co,";","if(",Ve,"){",N,".bindBuffer(",Rh,",",Ve,".buffer.buffer);}","else if(",$.vao,".currentVAO){",Ve,"=",E.shared.elements+".getElements("+$.vao,".currentVAO.elements);",se?"":"if("+Ve+")"+N+".bindBuffer("+Rh+","+Ve+".buffer.buffer);","}")),Ve}function A(){var Ye=M.count,Ve,rt=m;return Ye?((Ye.contextDep&&F.contextDynamic||Ye.propDep)&&(rt=P),Ve=Ye.append(E,rt),y.optional(function(){Ye.MISSING&&E.assert(m,"false","missing vertex count"),Ye.DYNAMIC&&E.assert(rt,Ve+">=0","missing vertex count")})):(Ve=rt.def(k,".",mo),y.optional(function(){E.assert(rt,Ve+">=0","missing vertex count")})),Ve}var S=_();function U(Ye){var Ve=M[Ye];return Ve?Ve.contextDep&&F.contextDynamic||Ve.propDep?Ve.append(E,P):Ve.append(E,m):m.def(k,".",Ye)}var G=U(fo),J=U(uf),re=A();if(typeof re=="number"){if(re===0)return}else P("if(",re,"){"),P.exit("}");var _e,it;he&&(_e=U(cf),it=E.instancing);var Ze=S+".type",Be=M.elements&&Ea(M.elements)&&!M.vaoActive;function le(){function Ye(){P(it,".drawElementsInstancedANGLE(",[G,re,Ze,J+"<<(("+Ze+"-"+Jv+")>>1)",_e],");")}function Ve(){P(it,".drawArraysInstancedANGLE(",[G,J,re,_e],");")}S&&S!=="null"?Be?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}function Z(){function Ye(){P(N+".drawElements("+[G,re,Ze,J+"<<(("+Ze+"-"+Jv+")>>1)"]+");")}function Ve(){P(N+".drawArrays("+[G,J,re]+");")}S&&S!=="null"?Be?Ye():(P("if(",S,"){"),Ye(),P("}else{"),Ve(),P("}")):Ve()}he&&(typeof _e!="number"||_e>=0)?typeof _e=="string"?(P("if(",_e,">0){"),le(),P("}else if(",_e,"<0){"),Z(),P("}")):le():Z()}function bt(E,m,P,F,$){var N=ot(),k=N.proc("body",$);return y.optional(function(){N.commandStr=m.commandStr,N.command=N.link(m.commandStr)}),he&&(N.instancing=k.def(N.shared.extensions,".angle_instanced_arrays")),E(N,k,P,F),N.compile().body}function Nt(E,m,P,F){gn(E,m),P.useVAO?P.drawVAO?m(E.shared.vao,".setVAO(",P.drawVAO.append(E,m),");"):m(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(m(E.shared.vao,".setVAO(null);"),Vn(E,m,P,F.attributes,function(){return!0})),$t(E,m,P,F.uniforms,function(){return!0},!1),tt(E,m,m,P)}function yn(E,m){var P=E.proc("draw",1);gn(E,P),kn(E,P,m.context),Nn(E,P,m.framebuffer),$n(E,P,m),Un(E,P,m.state),vt(E,P,m,!1,!0);var F=m.shader.progVar.append(E,P);if(P(E.shared.gl,".useProgram(",F,".program);"),m.shader.program)Nt(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var $=E.global.def("{}"),N=P.def(F,".id"),k=P.def($,"[",N,"]");P(E.cond(k).then(k,".call(this,a0);").else(k,"=",$,"[",N,"]=",E.link(function(M){return bt(Nt,E,m,M,1)}),"(",F,");",k,".call(this,a0);"))}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Si(E,m,P,F){E.batchId="a1",gn(E,m);function $(){return!0}Vn(E,m,P,F.attributes,$),$t(E,m,P,F.uniforms,$,!1),tt(E,m,m,P)}function po(E,m,P,F){gn(E,m);var $=P.contextDep,N=m.def(),k="a0",M="a1",_=m.def();E.shared.props=_,E.batchId=N;var A=E.scope(),S=E.scope();m(A.entry,"for(",N,"=0;",N,"<",M,";++",N,"){",_,"=",k,"[",N,"];",S,"}",A.exit);function U(Ze){return Ze.contextDep&&$||Ze.propDep}function G(Ze){return!U(Ze)}if(P.needsContext&&kn(E,S,P.context),P.needsFramebuffer&&Nn(E,S,P.framebuffer),Un(E,S,P.state,U),P.profile&&U(P.profile)&&vt(E,S,P,!1,!0),F)P.useVAO?P.drawVAO?U(P.drawVAO)?S(E.shared.vao,".setVAO(",P.drawVAO.append(E,S),");"):A(E.shared.vao,".setVAO(",P.drawVAO.append(E,A),");"):A(E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"):(A(E.shared.vao,".setVAO(null);"),Vn(E,A,P,F.attributes,G),Vn(E,S,P,F.attributes,U)),$t(E,A,P,F.uniforms,G,!1),$t(E,S,P,F.uniforms,U,!0),tt(E,A,S,P);else{var J=E.global.def("{}"),re=P.shader.progVar.append(E,S),_e=S.def(re,".id"),it=S.def(J,"[",_e,"]");S(E.shared.gl,".useProgram(",re,".program);","if(!",it,"){",it,"=",J,"[",_e,"]=",E.link(function(Ze){return bt(Si,E,P,Ze,2)}),"(",re,");}",it,".call(this,a0[",N,"],",N,");")}}function T(E,m){var P=E.proc("batch",2);E.batchId="0",gn(E,P);var F=!1,$=!0;Object.keys(m.context).forEach(function(J){F=F||m.context[J].propDep}),F||(kn(E,P,m.context),$=!1);var N=m.framebuffer,k=!1;N?(N.propDep?F=k=!0:N.contextDep&&F&&(k=!0),k||Nn(E,P,N)):Nn(E,P,null),m.state.viewport&&m.state.viewport.propDep&&(F=!0);function M(J){return J.contextDep&&F||J.propDep}$n(E,P,m),Un(E,P,m.state,function(J){return!M(J)}),(!m.profile||!M(m.profile))&&vt(E,P,m,!1,"a1"),m.contextDep=F,m.needsContext=$,m.needsFramebuffer=k;var _=m.shader.progVar;if(_.contextDep&&F||_.propDep)po(E,P,m,null);else{var A=_.append(E,P);if(P(E.shared.gl,".useProgram(",A,".program);"),m.shader.program)po(E,P,m,m.shader.program);else{P(E.shared.vao,".setVAO(null);");var S=E.global.def("{}"),U=P.def(A,".id"),G=P.def(S,"[",U,"]");P(E.cond(G).then(G,".call(this,a0,a1);").else(G,"=",S,"[",U,"]=",E.link(function(J){return bt(po,E,m,J,2)}),"(",A,");",G,".call(this,a0,a1);"))}}Object.keys(m.state).length>0&&P(E.shared.current,".dirty=true;"),E.shared.vao&&P(E.shared.vao,".setVAO(null);")}function Y(E,m){var P=E.proc("scope",3);E.batchId="a2";var F=E.shared,$=F.current;kn(E,P,m.context),m.framebuffer&&m.framebuffer.append(E,P),Lg(Object.keys(m.state)).forEach(function(k){var M=m.state[k],_=M.append(E,P);Zt(_)?_.forEach(function(A,S){P.set(E.next[k],"["+S+"]",A)}):P.set(F.next,"."+k,_)}),vt(E,P,m,!0,!0),[co,uf,mo,cf,fo].forEach(function(k){var M=m.draw[k];M&&P.set(F.draw,"."+k,""+M.append(E,P))}),Object.keys(m.uniforms).forEach(function(k){var M=m.uniforms[k].append(E,P);Array.isArray(M)&&(M="["+M.join()+"]"),P.set(F.uniforms,"["+g.id(k)+"]",M)}),Object.keys(m.attributes).forEach(function(k){var M=m.attributes[k].append(E,P),_=E.scopeAttrib(k);Object.keys(new B).forEach(function(A){P.set(_,"."+A,M[A])})}),m.scopeVAO&&P.set(F.vao,".targetVAO",m.scopeVAO.append(E,P));function N(k){var M=m.shader[k];M&&P.set(F.shader,"."+k,M.append(E,P))}N(Vs),N(Hs),Object.keys(m.state).length>0&&(P($,".dirty=true;"),P.exit($,".dirty=true;")),P("a1(",E.shared.context,",a0,",E.batchId,");")}function V(E){if(!(typeof E!="object"||Zt(E))){for(var m=Object.keys(E),P=0;P<m.length;++P)if(Ot.isDynamic(E[m[P]]))return!0;return!1}}function ze(E,m,P){var F=m.static[P];if(!F||!V(F))return;var $=E.global,N=Object.keys(F),k=!1,M=!1,_=!1,A=E.global.def("{}");N.forEach(function(U){var G=F[U];if(Ot.isDynamic(G)){typeof G=="function"&&(G=F[U]=Ot.unbox(G));var J=pr(G,null);k=k||J.thisDep,_=_||J.propDep,M=M||J.contextDep}else{switch($(A,".",U,"="),typeof G){case"number":$(G);break;case"string":$('"',G,'"');break;case"object":Array.isArray(G)&&$("[",G.join(),"]");break;default:$(E.link(G));break}$(";")}});function S(U,G){N.forEach(function(J){var re=F[J];if(Ot.isDynamic(re)){var _e=U.invoke(G,re);G(A,".",J,"=",_e,";")}})}m.dynamic[P]=new Ot.DynamicVariable(lf,{thisDep:k,contextDep:M,propDep:_,ref:A,append:S}),delete m.static[P]}function _t(E,m,P,F,$){var N=ot();N.stats=N.link($),Object.keys(m.static).forEach(function(M){ze(N,m,M)}),eS.forEach(function(M){ze(N,E,M)});var k=An(E,m,P,F,N);return yn(N,k),Y(N,k),T(N,k),r(N.compile(),{destroy:function(){k.shader.program.destroy()}})}return{next:Oe,current:Ne,procs:function(){var E=ot(),m=E.proc("poll"),P=E.proc("refresh"),F=E.block();m(F),P(F);var $=E.shared,N=$.gl,k=$.next,M=$.current;F(M,".dirty=false;"),Nn(E,m),Nn(E,P,null,!0);var _;he&&(_=E.link(he)),R.oes_vertex_array_object&&P(E.link(R.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var A=0;A<X.maxAttributes;++A){var S=P.def($.attributes,"[",A,"]"),U=E.cond(S,".buffer");U.then(N,".enableVertexAttribArray(",A,");",N,".bindBuffer(",yl,",",S,".buffer.buffer);",N,".vertexAttribPointer(",A,",",S,".size,",S,".type,",S,".normalized,",S,".stride,",S,".offset);").else(N,".disableVertexAttribArray(",A,");",N,".vertexAttrib4f(",A,",",S,".x,",S,".y,",S,".z,",S,".w);",S,".buffer=null;"),P(U),he&&P(_,".vertexAttribDivisorANGLE(",A,",",S,".divisor);")}return P(E.shared.vao,".currentVAO=null;",E.shared.vao,".setVAO(",E.shared.vao,".targetVAO);"),Object.keys(ne).forEach(function(G){var J=ne[G],re=F.def(k,".",G),_e=E.block();_e("if(",re,"){",N,".enable(",J,")}else{",N,".disable(",J,")}",M,".",G,"=",re,";"),P(_e),m("if(",re,"!==",M,".",G,"){",_e,"}")}),Object.keys(ee).forEach(function(G){var J=ee[G],re=Ne[G],_e,it,Ze=E.block();if(Ze(N,".",J,"("),Zt(re)){var Be=re.length;_e=E.global.def(k,".",G),it=E.global.def(M,".",G),Ze(rn(Be,function(le){return _e+"["+le+"]"}),");",rn(Be,function(le){return it+"["+le+"]="+_e+"["+le+"];"}).join("")),m("if(",rn(Be,function(le){return _e+"["+le+"]!=="+it+"["+le+"]"}).join("||"),"){",Ze,"}")}else _e=F.def(k,".",G),it=F.def(M,".",G),Ze(_e,");",M,".",G,"=",_e,";"),m("if(",_e,"!==",it,"){",Ze,"}");P(Ze)}),E.compile()}(),compile:_t}}function xS(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ES=34918,_S=34919,Og=35007,SS=function(c,g){if(!g.ext_disjoint_timer_query)return null;var R=[];function X(){return R.pop()||g.ext_disjoint_timer_query.createQueryEXT()}function te(he){R.push(he)}var W=[];function K(he){var Fe=X();g.ext_disjoint_timer_query.beginQueryEXT(Og,Fe),W.push(Fe),de(W.length-1,W.length,he)}function fe(){g.ext_disjoint_timer_query.endQueryEXT(Og)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ge=[];function xe(){return ge.pop()||new ce}function ye(he){ge.push(he)}var Te=[];function de(he,Fe,se){var Ne=xe();Ne.startQueryIndex=he,Ne.endQueryIndex=Fe,Ne.sum=0,Ne.stats=se,Te.push(Ne)}var ve=[],B=[];function Q(){var he,Fe,se=W.length;if(se!==0){B.length=Math.max(B.length,se+1),ve.length=Math.max(ve.length,se+1),ve[0]=0,B[0]=0;var Ne=0;for(he=0,Fe=0;Fe<W.length;++Fe){var Oe=W[Fe];g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,_S)?(Ne+=g.ext_disjoint_timer_query.getQueryObjectEXT(Oe,ES),te(Oe)):W[he++]=Oe,ve[Fe+1]=Ne,B[Fe+1]=he}for(W.length=he,he=0,Fe=0;Fe<Te.length;++Fe){var Je=Te[Fe],ne=Je.startQueryIndex,ee=Je.endQueryIndex;Je.sum+=ve[ee]-ve[ne];var Ue=B[ne],Ae=B[ee];Ae===Ue?(Je.stats.gpuTime+=Je.sum/1e6,ye(Je)):(Je.startQueryIndex=Ue,Je.endQueryIndex=Ae,Te[he++]=Je)}Te.length=he}}return{beginQuery:K,endQuery:fe,pushScopeStats:de,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){R.push.apply(R,W);for(var he=0;he<R.length;he++)g.ext_disjoint_timer_query.deleteQueryEXT(R[he]);W.length=0,R.length=0},restore:function(){W.length=0,R.length=0}}},wS=16384,TS=256,bS=1024,AS=34962,Pg="webglcontextlost",kg="webglcontextrestored",Ng=1,CS=2,LS=3;function Ig(c,g){for(var R=0;R<c.length;++R)if(c[R]===g)return R;return-1}function RS(c){var g=fr(c);if(!g)return null;var R=g.gl,X=R.getContextAttributes(),te=R.isContextLost(),W=ei(R,g);if(!W)return null;var K=Tr(),fe=xS(),ce=W.extensions,ge=SS(R,ce),xe=pn(),ye=R.drawingBufferWidth,Te=R.drawingBufferHeight,de={tick:0,time:0,viewportWidth:ye,viewportHeight:Te,framebufferWidth:ye,framebufferHeight:Te,drawingBufferWidth:ye,drawingBufferHeight:Te,pixelRatio:g.pixelRatio},ve={},B={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=ac(R,ce),he=vs(R,fe,g,Ne),Fe=_s(R,ce,he,fe),se=be(R,ce,Q,fe,he,Fe,B);function Ne(tt){return se.destroyBuffer(tt)}var Oe=Dt(R,K,fe,g),Je=Qm(R,ce,Q,function(){Ue.procs.poll()},de,fe,g),ne=Km(R,ce,Q,fe,g),ee=fh(R,ce,Q,Je,ne,fe),Ue=yS(R,K,ce,Q,he,Fe,Je,ee,ve,se,Oe,B,de,ge,g),Ae=K_(R,ee,Ue.procs.poll,de,X,ce,Q),me=Ue.next,Ce=R.canvas,Re=[],ct=[],ot=[],Pe=[g.onDestroy],Me=null;function nt(){if(Re.length===0){ge&&ge.update(),Me=null;return}Me=Sn.next(nt),Un();for(var tt=Re.length-1;tt>=0;--tt){var bt=Re[tt];bt&&bt(de,null,0)}R.flush(),ge&&ge.update()}function ft(){!Me&&Re.length>0&&(Me=Sn.next(nt))}function Tt(){Me&&(Sn.cancel(nt),Me=null)}function an(tt){tt.preventDefault(),te=!0,Tt(),ct.forEach(function(bt){bt()})}function sn(tt){R.getError(),te=!1,W.restore(),Oe.restore(),he.restore(),Je.restore(),ne.restore(),ee.restore(),se.restore(),ge&&ge.restore(),Ue.procs.refresh(),ft(),ot.forEach(function(bt){bt()})}Ce&&(Ce.addEventListener(Pg,an,!1),Ce.addEventListener(kg,sn,!1));function Lt(){Re.length=0,Tt(),Ce&&(Ce.removeEventListener(Pg,an),Ce.removeEventListener(kg,sn)),Oe.clear(),ee.clear(),ne.clear(),se.clear(),Je.clear(),Fe.clear(),he.clear(),ge&&ge.clear(),Pe.forEach(function(tt){tt()})}function Pn(tt){y(!!tt,"invalid args to regl({...})"),y.type(tt,"object","invalid args to regl({...})");function bt($){var N=r({},$);delete N.uniforms,delete N.attributes,delete N.context,delete N.vao,"stencil"in N&&N.stencil.op&&(N.stencil.opBack=N.stencil.opFront=N.stencil.op,delete N.stencil.op);function k(M){if(M in N){var _=N[M];delete N[M],Object.keys(_).forEach(function(A){N[M+"."+A]=_[A]})}}return k("blend"),k("depth"),k("cull"),k("stencil"),k("polygonOffset"),k("scissor"),k("sample"),"vao"in $&&(N.vao=$.vao),N}function Nt($,N){var k={},M={};return Object.keys($).forEach(function(_){var A=$[_];if(Ot.isDynamic(A)){M[_]=Ot.unbox(A,_);return}else if(N&&Array.isArray(A)){for(var S=0;S<A.length;++S)if(Ot.isDynamic(A[S])){M[_]=Ot.unbox(A,_);return}}k[_]=A}),{dynamic:M,static:k}}var yn=Nt(tt.context||{},!0),Si=Nt(tt.uniforms||{},!0),po=Nt(tt.attributes||{},!1),T=Nt(bt(tt),!1),Y={gpuTime:0,cpuTime:0,count:0},V=Ue.compile(T,po,Si,yn,Y),ze=V.draw,_t=V.batch,E=V.scope,m=[];function P($){for(;m.length<$;)m.push(null);return m}function F($,N){var k;if(te&&y.raise("context lost"),typeof $=="function")return E.call(this,null,$,0);if(typeof N=="function")if(typeof $=="number")for(k=0;k<$;++k)E.call(this,null,N,k);else if(Array.isArray($))for(k=0;k<$.length;++k)E.call(this,$[k],N,k);else return E.call(this,$,N,0);else if(typeof $=="number"){if($>0)return _t.call(this,P($|0),$|0)}else if(Array.isArray($)){if($.length)return _t.call(this,$,$.length)}else return ze.call(this,$)}return r(F,{stats:Y,destroy:function(){V.destroy()}})}var Jt=ee.setFBO=Pn({framebuffer:Ot.define.call(null,Ng,"framebuffer")});function An(tt,bt){var Nt=0;Ue.procs.poll();var yn=bt.color;yn&&(R.clearColor(+yn[0]||0,+yn[1]||0,+yn[2]||0,+yn[3]||0),Nt|=wS),"depth"in bt&&(R.clearDepth(+bt.depth),Nt|=TS),"stencil"in bt&&(R.clearStencil(bt.stencil|0),Nt|=bS),y(!!Nt,"called regl.clear with no buffer specified"),R.clear(Nt)}function kn(tt){if(y(typeof tt=="object"&&tt,"regl.clear() takes an object as input"),"framebuffer"in tt)if(tt.framebuffer&&tt.framebuffer_reglType==="framebufferCube")for(var bt=0;bt<6;++bt)Jt(r({framebuffer:tt.framebuffer.faces[bt]},tt),An);else Jt(tt,An);else An(null,tt)}function Nn(tt){y.type(tt,"function","regl.frame() callback must be a function"),Re.push(tt);function bt(){var Nt=Ig(Re,tt);y(Nt>=0,"cannot cancel a frame twice");function yn(){var Si=Ig(Re,yn);Re[Si]=Re[Re.length-1],Re.length-=1,Re.length<=0&&Tt()}Re[Nt]=yn}return ft(),{cancel:bt}}function $n(){var tt=me.viewport,bt=me.scissor_box;tt[0]=tt[1]=bt[0]=bt[1]=0,de.viewportWidth=de.framebufferWidth=de.drawingBufferWidth=tt[2]=bt[2]=R.drawingBufferWidth,de.viewportHeight=de.framebufferHeight=de.drawingBufferHeight=tt[3]=bt[3]=R.drawingBufferHeight}function Un(){de.tick+=1,de.time=vt(),$n(),Ue.procs.poll()}function gn(){Je.refresh(),$n(),Ue.procs.refresh(),ge&&ge.update()}function vt(){return(pn()-xe)/1e3}gn();function Vn(tt,bt){y.type(bt,"function","listener callback must be a function");var Nt;switch(tt){case"frame":return Nn(bt);case"lost":Nt=ct;break;case"restore":Nt=ot;break;case"destroy":Nt=Pe;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}return Nt.push(bt),{cancel:function(){for(var yn=0;yn<Nt.length;++yn)if(Nt[yn]===bt){Nt[yn]=Nt[Nt.length-1],Nt.pop();return}}}}var $t=r(Pn,{clear:kn,prop:Ot.define.bind(null,Ng),context:Ot.define.bind(null,CS),this:Ot.define.bind(null,LS),draw:Pn({}),buffer:function(tt){return he.create(tt,AS,!1,!1)},elements:function(tt){return Fe.create(tt,!1)},texture:Je.create2D,cube:Je.createCube,renderbuffer:ne.create,framebuffer:ee.create,framebufferCube:ee.createCube,vao:se.createVAO,attributes:X,frame:Nn,on:Vn,limits:Q,hasExtension:function(tt){return Q.extensions.indexOf(tt.toLowerCase())>=0},read:Ae,destroy:Lt,_gl:R,_refresh:gn,poll:function(){Un(),ge&&ge.update()},now:vt,stats:fe});return g.onDone(null,$t),$t}return RS})})(x_);var dA=x_.exports;const mA=F0(dA);var hA=1e-6,Mo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function up(){var e=new Mo(16);return Mo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function t1(e){var t=new Mo(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function L0(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=t[7],p=t[8],h=t[9],d=t[10],w=t[11],x=t[12],L=t[13],I=t[14],v=t[15],b=n*l-r*o,C=n*u-i*o,H=n*f-a*o,q=r*u-i*l,ie=r*f-a*l,we=i*f-a*u,ue=p*L-h*x,at=p*I-d*x,He=p*v-w*x,Se=h*I-d*L,Ke=h*v-w*L,Qe=d*v-w*I,Ge=b*Qe-C*Ke+H*Se+q*He-ie*at+we*ue;return Ge?(Ge=1/Ge,e[0]=(l*Qe-u*Ke+f*Se)*Ge,e[1]=(i*Ke-r*Qe-a*Se)*Ge,e[2]=(L*we-I*ie+v*q)*Ge,e[3]=(d*ie-h*we-w*q)*Ge,e[4]=(u*He-o*Qe-f*at)*Ge,e[5]=(n*Qe-i*He+a*at)*Ge,e[6]=(I*H-x*we-v*C)*Ge,e[7]=(p*we-d*H+w*C)*Ge,e[8]=(o*Ke-l*He+f*ue)*Ge,e[9]=(r*He-n*Ke-a*ue)*Ge,e[10]=(x*ie-L*H+v*b)*Ge,e[11]=(h*H-p*ie-w*b)*Ge,e[12]=(l*at-o*Se-u*ue)*Ge,e[13]=(n*Se-r*at+i*ue)*Ge,e[14]=(L*C-x*q-I*b)*Ge,e[15]=(p*q-h*C+d*b)*Ge,e):null}function lr(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],p=t[7],h=t[8],d=t[9],w=t[10],x=t[11],L=t[12],I=t[13],v=t[14],b=t[15],C=n[0],H=n[1],q=n[2],ie=n[3];return e[0]=C*r+H*l+q*h+ie*L,e[1]=C*i+H*u+q*d+ie*I,e[2]=C*a+H*f+q*w+ie*v,e[3]=C*o+H*p+q*x+ie*b,C=n[4],H=n[5],q=n[6],ie=n[7],e[4]=C*r+H*l+q*h+ie*L,e[5]=C*i+H*u+q*d+ie*I,e[6]=C*a+H*f+q*w+ie*v,e[7]=C*o+H*p+q*x+ie*b,C=n[8],H=n[9],q=n[10],ie=n[11],e[8]=C*r+H*l+q*h+ie*L,e[9]=C*i+H*u+q*d+ie*I,e[10]=C*a+H*f+q*w+ie*v,e[11]=C*o+H*p+q*x+ie*b,C=n[12],H=n[13],q=n[14],ie=n[15],e[12]=C*r+H*l+q*h+ie*L,e[13]=C*i+H*u+q*d+ie*I,e[14]=C*a+H*f+q*w+ie*v,e[15]=C*o+H*p+q*x+ie*b,e}function n1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ud(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pA(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,u,f;return o<hA?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+a*l,e[2]=a*r*f-i*l,e[3]=0,e[4]=r*i*f-a*l,e[5]=i*i*f+u,e[6]=a*i*f+r*l,e[7]=0,e[8]=r*a*f+i*l,e[9]=i*a*f-r*l,e[10]=a*a*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function vA(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function gA(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],l=t[6],u=t[8],f=t[9],p=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(u,f,p),e}function yA(){var e=new Mo(4);return Mo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function cd(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=yA();return function(t,n,r,i,a,o){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function xA(){var e=new Mo(2);return Mo!=Float32Array&&(e[0]=0,e[1]=0),e}function EA(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),l=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=xA();return function(t,n,r,i,a,o){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();const _A=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],a=[[-1/0,1/0],[-1/0,1/0]])=>{const o=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=up(),p=[...r.slice(0,2),0,1];const h=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],w=Array.isArray(a[0])?[...a[0]]:[...a],x=Array.isArray(a[0])?[...a[1]]:[...a],L=()=>gA(o,f).slice(0,2),I=()=>{const Ee=L();return Math.min(Ee[0],Ee[1])},v=()=>{const Ee=L();return Math.max(Ee[0],Ee[1])},b=()=>Math.acos(f[0]/v()),C=()=>[[...h],[...d]],H=()=>[[...w],[...x]],q=()=>{const Ee=L();return[1/Ee[0],1/Ee[1]]},ie=()=>1/I(),we=()=>1/v(),ue=()=>vA(o,f).slice(0,2),at=()=>cd(o,p,L0(u,f)).slice(0,2),He=()=>f,Se=()=>p.slice(0,2),Ke=([Ee=0,$e=0]=[],lt=1,xt=0)=>{f=up(),Qe([-Ee,-$e]),Pt(xt),Ge(1/lt)},Qe=([Ee=0,$e=0]=[])=>{o[0]=Ee,o[1]=$e,o[2]=0;const lt=n1(l,o);lr(f,lt,f)},Ge=(Ee,$e)=>{const lt=Array.isArray(Ee);let xt=lt?Ee[0]:Ee,Wt=lt?Ee[1]:Ee;if(xt<=0||Wt<=0||xt===1&&Wt===1)return;const Yt=L(),Qt=Yt[0]*xt,It=Yt[1]*Wt;if(xt=Math.max(h[0],Math.min(Qt,h[1]))/Yt[0],Wt=Math.max(d[0],Math.min(It,d[1]))/Yt[1],xt===1&&Wt===1)return;o[0]=xt,o[1]=Wt,o[2]=1;const pt=ud(l,o),Yn=$e?[...$e,0]:p,mn=n1(o,Yn);lr(f,mn,lr(f,pt,lr(f,L0(u,mn),f)))},Pt=Ee=>{const $e=up();pA($e,Ee,[0,0,1]),lr(f,$e,f)},mt=Ee=>{const $e=Array.isArray(Ee[0]);h[0]=$e?Ee[0][0]:Ee[0],h[1]=$e?Ee[0][1]:Ee[1],d[0]=$e?Ee[1][0]:Ee[0],d[1]=$e?Ee[1][1]:Ee[1]},ht=Ee=>{const $e=Array.isArray(Ee[0]);w[0]=$e?Ee[0][0]:Ee[0],w[1]=$e?Ee[0][1]:Ee[1],x[0]=$e?Ee[1][0]:Ee[0],x[1]=$e?Ee[1][1]:Ee[1]},pe=Ee=>{!Ee||Ee.length<16||(f=Ee)},We=Ee=>{p=[...Ee.slice(0,2),0,1]},Le=()=>{Ke(e,t,n)};return Ke(e,t,n),{get translation(){return ue()},get target(){return at()},get scaling(){return L()},get minScaling(){return I()},get maxScaling(){return v()},get scaleBounds(){return C()},get translationBounds(){return H()},get distance(){return q()},get minDistance(){return ie()},get maxDistance(){return we()},get rotation(){return b()},get view(){return He()},get viewCenter(){return Se()},lookAt:Ke,translate:Qe,pan:Qe,rotate:Pt,scale:Ge,zoom:Ge,reset:Le,set:(...Ee)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),pe(...Ee)),setScaleBounds:mt,setTranslationBounds:ht,setView:pe,setViewCenter:We}},SA=["pan","rotate"],r1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},wA=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:a=!1,isPan:o=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:p=1,defaultMouseDownMoveAction:h="pan",mouseDownMoveModKey:d="alt",isZoom:w=!0,zoomSpeed:x=1,viewCenter:L,scaleBounds:I,translationBounds:v,onKeyDown:b=()=>{},onKeyUp:C=()=>{},onMouseDown:H=()=>{},onMouseUp:q=()=>{},onMouseMove:ie=()=>{},onWheel:we=()=>{}}={})=>{let ue=_A(n,t,r,L,I,v),at=0,He=0,Se=0,Ke=0,Qe=0,Ge=0,Pt=!1,mt=0,ht=1,pe=1,We=1,Le=!1,Ee=!1,$e=!1,lt=h==="pan",xt=o,Wt=o,Yt=l,Qt=l,It=w,pt=w;const Yn=()=>{xt=Array.isArray(o)?!!o[0]:o,Wt=Array.isArray(o)?!!o[1]:o,Yt=Array.isArray(l)?!!l[0]:l,Qt=Array.isArray(l)?!!l[1]:l,It=Array.isArray(w)?!!w[0]:w,pt=Array.isArray(w)?!!w[1]:w};Yn();const mn=i?De=>De/ht*2*We:De=>De,Xt=i?De=>De/pe*2:De=>-De,en=i?De=>(-1+De/ht*2)*We:De=>De,Et=i?De=>1-De/pe*2:De=>De,St=()=>{if(a){const st=Ee;return Ee=!1,st}Le=!1;const De=at,ut=He;if((xt||Wt)&&Pt&&(lt&&!$e||!lt&&$e)){const st=Yt?Qe-De:De-Qe,tn=xt?mn(u*st):0,nn=Qt?Ge-ut:ut-Ge,Ot=Wt?Xt(u*nn):0;(tn!==0||Ot!==0)&&(ue.pan([tn,Ot]),Le=!0)}if((It||pt)&&mt){const st=x*Math.exp(mt/pe),tn=en(Se),nn=Et(Ke);ue.scale([It?1/st:1,pt?1/st:1],[tn,nn]),Le=!0}if(f&&Pt&&(lt&&$e||!lt&&!$e)&&Math.abs(Qe-De)+Math.abs(Ge-ut)>0){const st=ht/2,tn=pe/2,nn=Qe-st,Ot=tn-Ge,Sn=De-st,pn=tn-ut,Tr=EA([nn,Ot],[Sn,pn]),nr=nn*pn-Sn*Ot;ue.rotate(p*Tr*Math.sign(nr)),Le=!0}mt=0,Qe=De,Ge=ut;const jt=Le||Ee;return Ee=!1,jt},kt=({defaultMouseDownMoveAction:De=null,isFixed:ut=null,isPan:jt=null,isPanInverted:st=null,isRotate:tn=null,isZoom:nn=null,panSpeed:Ot=null,rotateSpeed:Sn=null,zoomSpeed:pn=null,mouseDownMoveModKey:Tr=null}={})=>{h=De!==null&&SA.includes(De)?De:h,lt=h==="pan",a=ut!==null?ut:a,o=jt!==null?jt:o,l=st!==null?st:l,f=tn!==null?tn:f,w=nn!==null?nn:w,u=+Ot>0?Ot:u,p=+Sn>0?Sn:p,x=+pn>0?pn:x,Yn(),d=Tr!==null&&Object.keys(r1).includes(Tr)?Tr:d},At=()=>{const De=e.getBoundingClientRect();ht=De.width,pe=De.height,We=ht/pe},Ct=De=>{$e=!1,C(De)},Ut=De=>{$e=De[r1[d]],b(De)},hn=De=>{Pt=!1,q(De)},ln=De=>{Pt=De.buttons===1,H(De)},y=document.createEvent("MouseEvent").offsetX!==void 0?De=>{Se=De.offsetX,Ke=De.offsetY}:De=>{const ut=e.getBoundingClientRect();Se=De.clientX-ut.left,Ke=De.clientY-ut.top},wt=De=>{at=De.clientX,He=De.clientY},Ft=De=>{wt(De),ie(De)},Ie=De=>{if(It||pt){De.preventDefault(),wt(De),y(De);const ut=De.deltaMode===1?12:1;mt+=ut*(De.deltaY||De.deltaX||0)}we(De)},Kt=()=>{ue=void 0,window.removeEventListener("keydown",Ut),window.removeEventListener("keyup",Ct),e.removeEventListener("mousedown",ln),window.removeEventListener("mouseup",hn),window.removeEventListener("mousemove",Ft),e.removeEventListener("wheel",Ie)};window.addEventListener("keydown",Ut,{passive:!0}),window.addEventListener("keyup",Ct,{passive:!0}),e.addEventListener("mousedown",ln,{passive:!0}),window.addEventListener("mouseup",hn,{passive:!0}),window.addEventListener("mousemove",Ft,{passive:!0}),e.addEventListener("wheel",Ie,{passive:!1}),ue.config=kt,ue.dispose=Kt,ue.refresh=At,ue.tick=St;const gt=De=>function(){De.apply(null,arguments),Ee=!0};return ue.lookAt=gt(ue.lookAt),ue.translate=gt(ue.translate),ue.pan=gt(ue.pan),ue.rotate=gt(ue.rotate),ue.scale=gt(ue.scale),ue.zoom=gt(ue.zoom),ue.reset=gt(ue.reset),ue.set=gt(ue.set),ue.setScaleBounds=gt(ue.setScaleBounds),ue.setTranslationBounds=gt(ue.setTranslationBounds),ue.setView=gt(ue.setView),ue.setViewCenter=gt(ue.setViewCenter),At(),ue};function R0(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;E_(e,t,o,r,i,a%2),R0(e,t,n,r,o-1,a+1),R0(e,t,n,o+1,i,a+1)}function E_(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const f=i-r+1,p=n-r+1,h=Math.log(f),d=.5*Math.exp(2*h/3),w=.5*Math.sqrt(h*d*(f-d)/f)*(p-f/2<0?-1:1),x=Math.max(r,Math.floor(n-p*d/f+w)),L=Math.min(i,Math.floor(n+(f-p)*d/f+w));E_(e,t,n,x,L,a)}const o=t[2*n+a];let l=r,u=i;for(lu(e,t,r,n),t[2*i+a]>o&&lu(e,t,r,i);l<u;){for(lu(e,t,l,u),l++,u--;t[2*l+a]<o;)l++;for(;t[2*u+a]>o;)u--}t[2*r+a]===o?lu(e,t,r,u):(u++,lu(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function lu(e,t,n,r){cp(e,n,r),cp(t,2*n,2*r),cp(t,2*n+1,2*r+1)}function cp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function TA(e,t,n,r,i,a,o){const l=[0,e.length-1,0],u=[];let f,p;for(;l.length;){const h=l.pop(),d=l.pop(),w=l.pop();if(d-w<=o){for(let I=w;I<=d;I++)f=t[2*I],p=t[2*I+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[I]);continue}const x=Math.floor((w+d)/2);f=t[2*x],p=t[2*x+1],f>=n&&f<=i&&p>=r&&p<=a&&u.push(e[x]);const L=(h+1)%2;(h===0?n<=f:r<=p)&&(l.push(w),l.push(x-1),l.push(L)),(h===0?i>=f:a>=p)&&(l.push(x+1),l.push(d),l.push(L))}return u}function bA(e,t,n,r,i,a){const o=[0,e.length-1,0],l=[],u=i*i;for(;o.length;){const f=o.pop(),p=o.pop(),h=o.pop();if(p-h<=a){for(let I=h;I<=p;I++)i1(t[2*I],t[2*I+1],n,r)<=u&&l.push(e[I]);continue}const d=Math.floor((h+p)/2),w=t[2*d],x=t[2*d+1];i1(w,x,n,r)<=u&&l.push(e[d]);const L=(f+1)%2;(f===0?n-i<=w:r-i<=x)&&(o.push(h),o.push(d-1),o.push(L)),(f===0?n+i>=w:r+i>=x)&&(o.push(d+1),o.push(p),o.push(L))}return l}function i1(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}const AA=e=>e[0],CA=e=>e[1];class LA{constructor(t,n=AA,r=CA,i=64,a=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new o(t.length),u=this.coords=new a(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);R0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return TA(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return bA(this.ids,this.coords,t,n,r,this.nodeSize)}}const RA=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var OA=RA;const PA=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var kA=PA;const{push:a1,splice:NA}=Array.prototype,fp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ar=Float32Array.BYTES_PER_ELEMENT,IA=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const a=n+i*2,o=a+1,l=a+2,u=a+3;t.push(a,o,l,l,o,u)}n+=(r+2)*2}),t},Pr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let a=0,o=e.length/t;a<o;a++){const l=a*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}a1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,a=e.length/n;i<a;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},copyElement(e,t,n,r){const i=new Array(r),a=t*r;for(let o=0;o<r;o++)i[o]=e[a+o];return NA.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],a=new Array(n).fill(r);for(let o=0,l=e.length/t;o<l;o++){const u=o*t;for(let f=0;f<t;f++)a[f]=e[u+f];a1.apply(i,a)}return i}},DA=(e,{projection:t=fp,model:n=fp,view:r=fp,points:i=[],colorIndices:a=[],color:o=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:p=[],miter:h=1,is2d:d=!1,zPos2d:w=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const x=new Float32Array(16);let L,I,v,b,C,H,q,ie,we,ue,at,He,Se,Ke,Qe,Ge,Pt,mt,ht=d?2:3;const pe=()=>+(u.length===I||l!==null),We=()=>{ue=e.buffer(),at=e.buffer(),He=e.buffer(),Qe=e.buffer(),Ge={prevPosition:{buffer:()=>ue,offset:0,stride:ar*3},currPosition:{buffer:()=>ue,offset:ar*3*2,stride:ar*3},nextPosition:{buffer:()=>ue,offset:ar*3*4,stride:ar*3},opacity:{buffer:()=>at,offset:ar*2,stride:ar},offsetScale:{buffer:()=>He,offset:ar*2,stride:ar},colorIndex:{buffer:()=>Qe,offset:ar*2,stride:ar}},Pt=e.elements(),mt=e({attributes:Ge,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(Et,St)=>{const kt=Et.projection||St.projection,At=Et.model||St.model,Ct=Et.view||St.view;return lr(x,kt,lr(x,Ct,At))},aspectRatio:({viewportWidth:Et,viewportHeight:St})=>Et/St,colorTex:()=>Se,colorTexRes:()=>Ke,colorTexEps:()=>.5/Ke,pixelRatio:({pixelRatio:Et})=>Et,width:({pixelRatio:Et,viewportHeight:St})=>f/St*Et,useOpacity:pe,useColorOpacity:()=>+!pe(),miter:h},elements:()=>Pt,vert:kA,frag:OA})},Le=()=>{L===1&&i.length%ht>0&&console.warn(`The length of points (${I}) does not match the dimensions (${ht}). Incomplete points are ignored.`),b=i.flat().slice(0,I*ht),d&&(b=Pr.increaseStride(b,2,3,w)),a.length!==I&&(a=new Array(I).fill(0)),p.length!==I&&(p=new Array(I).fill(1));let Et=a.slice(),St=u.length===I?u.slice():new Array(I).fill(+l),kt=p.slice(),At=0;v.forEach(Ct=>{const Ut=At+Ct-1;Pr.copyElement(b,Ut,Ut,3),Pr.copyElement(b,At,At,3),Pr.copyElement(Et,Ut,Ut,1),Pr.copyElement(Et,At,At,1),Pr.copyElement(St,Ut,Ut,1),Pr.copyElement(St,At,At,1),Pr.copyElement(kt,Ut,Ut,1),Pr.copyElement(kt,At,At,1),At+=Ct+2}),C=new Float32Array(Pr.duplicate(b,3)),H=Pr.duplicate(Et),q=Pr.duplicate(St),ie=Pr.duplicate(kt,1,-1),we=IA(v),ue({usage:"dynamic",type:"float",length:C.length*ar,data:C}),at({usage:"dynamic",type:"float",length:q.length*ar,data:q}),He({usage:"dynamic",type:"float",length:ie.length*ar,data:ie}),Qe({usage:"dynamic",type:"float",length:H.length*ar,data:H}),Pt({primitive:"triangles",usage:"dynamic",type:we.length>2**16?"uint32":"uint16",data:we})},Ee=()=>{$e(),We()},$e=()=>{i=null,b=null,C=null,ie=null,we=null,ue.destroy(),He.destroy(),Pt.destroy()},lt=({projection:Et,model:St,view:kt}={})=>{Et&&(t=Et),St&&(n=St),kt&&(r=kt),i&&i.length>1&&mt({projection:t,model:n,view:r})},xt=(Et,St)=>{const kt=St.flat(2);return kt.length===I?kt:kt.length===L?v.map((At,Ct)=>Array(At).fill(kt[Ct])).flat():Et},Wt=()=>i,Yt=(Et=[],{colorIndices:St=a,opacities:kt=u,widths:At=p,is2d:Ct=d}={})=>{i=Et,d=Ct,ht=d?2:3,L=Array.isArray(i[0])?i.length:1,v=L>1?i.map(Ut=>Math.floor(Ut.length/ht)):[Math.floor(i.length/ht)],I=v.reduce((Ut,hn)=>Ut+hn,0),a=xt(a,St),u=xt(u,kt),p=xt(p,At),i&&I>1?Le():Ee()},Qt=(Et,St=-1)=>Array.isArray(Et)?Et.length&&!Array.isArray(Et[0])?St+1:Qt(Et[0],++St):St,It=()=>{const Et=Qt(o)===0?[o]:o;Ke=Math.max(2,Math.ceil(Math.sqrt(Et.length)));const St=new Uint8Array(Ke**2*4);Et.forEach((kt,At)=>{St[At*4]=Math.min(255,Math.max(0,Math.round(kt[0]*255))),St[At*4+1]=Math.min(255,Math.max(0,Math.round(kt[1]*255))),St[At*4+2]=Math.min(255,Math.max(0,Math.round(kt[2]*255))),St[At*4+3]=Number.isNaN(+kt[3])?255:Math.min(255,Math.max(0,Math.round(kt[3]*255)))}),Se=e.texture({data:St,shape:[Ke,Ke,4]})},pt=(Et,St=l)=>{o=Et,l=St,Se&&Se.destroy(),It()},Yn=()=>({color:o,miter:h,width:f}),mn=({color:Et,opacity:St,miter:kt,width:At}={})=>{Et&&pt(Et,St),kt&&(h=kt),+At>0&&(f=At)},Xt=()=>({points:ue,widths:He,opacities:at,colorIndices:Qe}),en=()=>({points:C,widths:ie,opacities:q,colorIndices:H});return We(),It(),i&&i.length>1&&Yt(i),{clear:Ee,destroy:$e,draw:lt,getPoints:Wt,setPoints:Yt,getData:en,getBuffer:Xt,getStyle:Yn,setStyle:mn}};var zf=DA;const MA=e=>e*e*e,__=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,FA=e=>--e*e*e+1,jA=e=>e,BA=e=>e*e,$A=e=>e<.5?2*e*e:-1+(4-2*e)*e,GA=e=>e*(2-e),Dl=e=>e,zA=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},UA=e=>e.reduce((t,n)=>n>t?n:t,-1/0),o1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},VA=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,a)=>(i&&r.push(a),r),[])},Fv=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,a)=>(i[a]=Object.getOwnPropertyDescriptor(n,a),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const a=Object.getOwnPropertyDescriptor(n,i);a.enumerable&&(r[i]=a)}),Object.defineProperties(e,r)}),e),HA=(...e)=>t=>e.reduce((n,r)=>r(n),t),WA=e=>t=>Fv({__proto__:{constructor:e}},t),l1=(e,t)=>n=>Fv(n,{get[e](){return t}}),XA=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),YA=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),_l=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),S_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const a=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let o=!1;const l=(...u)=>{o?(i++,a(...u)):(e(...u),a(...u),o=!0,i=0,setTimeout(()=>{o=!1},t))};return l.reset=()=>{o=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},Ci="auto",QA=0,dp=1,KA=2,s1=3,qA=4,ZA=Float32Array.BYTES_PER_ELEMENT,w_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],u1={color:[0,0,0,0],depth:1},jv="panZoom",T_="lasso",b_="rotate",JA=[jv,T_,b_],eC=jv,tC={cubicIn:MA,cubicInOut:__,cubicOut:FA,linear:jA,quadIn:BA,quadInOut:$A,quadOut:GA},c1=__,bi="continuous",Sl="categorical",f1=[bi,Sl],O0="deselect",Bv="lassoEnd",nC=[O0,Bv],rC=[0,.666666667,1,1],iC=2,aC=!1,oC=10,lC=3,sC=Bv,uC=!1,Bd=750,$d=500,Gd=100,zd=250,$v="lasso",Ud="rotate",Vd="merge",cC=[$v,Ud,Vd],Gv="alt",zv="cmd",A_="ctrl",C_="meta",Uv="shift",fC=[Gv,zv,A_,C_,Uv],dC={[Gv]:Ud,[Uv]:$v,[zv]:Vd},mC=1,hC=Ci,pC=Ci,vC=1,mp=1,gC=6,yC=2,xC=2,hp=null,EC=2,_C=2,pp=null,SC=null,vp=null,wC=.66,TC=1,gp=null,bC=.15,AC=25,CC=1,LC=1,su=null,RC=[.66,.66,.66,TC],OC=[0,.55,1,1],PC=[1,1,1,1],kC=[0,0,0,1],yp=null,NC=[.66,.66,.66,.2],IC=[0,.55,1,1],DC=[1,1,1,1],MC=[0,0],FC=1,jC=0,BC=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),$C="IMAGE_LOAD_ERROR",GC=null,zC=!1,UC=[1,1,1,.5],VC=!0,HC=!0,WC=!1,XC=100,YC=1/500,QC="auto",KC=!1,qC=200,ZC=500,L_=new Set(["z","valueZ","valueA","value1","category"]),R_=new Set(["w","valueW","valueB","value2","value"]),Vv=15e3,d1="Points have not been drawn",JC=(e,t)=>e?w_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,e2=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return w_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),mA({gl:t,extensions:n})},xp=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),t2=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let a=0;a<e.length;a+=2)t=e[a]<t?e[a]:t,n=e[a]>n?e[a]:n,r=e[a+1]<r?e[a+1]:r,i=e[a+1]>i?e[a+1]:i;return[t,r,n,i]},n2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,r2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,a)=>`#${r}${r}${i}${i}${a}${a}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),wa=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),Ta=e=>!Number.isNaN(+e)&&+e>=0,Uf=e=>!Number.isNaN(+e)&&+e>0,m1=(e,t)=>n=>e.indexOf(n)>=0?n:t,i2=(e,t=!1,n=Vv)=>new Promise((r,i)=>{const a=new Image;t&&(a.crossOrigin="anonymous"),a.src=e,a.onload=()=>{r(a)};const o=()=>{i(new Error($C))};a.onerror=o,setTimeout(o,n)}),h1=(e,t,n=Vv)=>new Promise((r,i)=>{i2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(a=>{r(e.texture(a))}).catch(a=>{i(a)})}),a2=(e,t=!1)=>[...r2(e,t),255**!t],o2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),l2=e=>e>=0&&e<=1,Hd=e=>Array.isArray(e)&&e.every(l2),s2=(e,[t,n]=[])=>{let r,i,a,o,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],a=e[f],o=e[f+1],i>n!=o>n&&t<(a-r)*(n-i)/(o-i)+r&&(l=!l),f=u;return l},P0=e=>typeof e=="string"||e instanceof String,u2=e=>Number.isInteger(e)&&e>=0&&e<=255,O_=e=>Array.isArray(e)&&e.every(u2),c2=e=>e.length===3&&(Hd(e)||O_(e)),f2=e=>e.length===4&&(Hd(e)||O_(e)),ba=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||P0(e[0])),Vf=(e,t)=>e>t?e:t,p1=(e,t)=>e<t?e:t,gr=(e,t)=>{if(f2(e)){const n=Hd(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(c2(e)){const n=255**!t,r=Hd(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return o2(e)?a2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},v1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),g1=e=>.21*e[0]+.72*e[1]+.07*e[2],d2=(e,t,n)=>Math.min(n,Math.max(t,e)),m2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=vC}=e;t||(t=e2(n));const i=JC(t),a=[n.width,n.height],o=t.framebuffer({width:a[0],height:a[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>o,srcRes:()=>a,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=I=>{const v=I.getContext("2d");v.clearRect(0,0,I.width,I.height),v.drawImage(n,(n.width-I.width)/2,(n.height-I.height)/2,I.width,I.height,0,0,I.width,I.height)},f=(I,v)=>{t.clear(u1),o.use(()=>{t.clear(u1),I()}),l(),u(v)},p=()=>{t.poll()},h=new Set,d=I=>(h.add(I),()=>{h.delete(I)}),w=t.frame(()=>{const I=h.values();let v=I.next();for(;!v.done;)v.value(),v=I.next()}),x=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,a[0]=n.width,a[1]=n.height,o.resize(...a)};return e.canvas||(window.addEventListener("resize",x),window.addEventListener("orientationchange",x),x()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(I){r=+I},get isSupported(){return i},render:f,onFrame:d,refresh:p,destroy:()=>{w.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",x),window.removeEventListener("orientationchange",x)}}},h2=!0,Ep=8,y1=2,p2=2500,v2=250,g2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const a=document.createElement("div");return a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="1.25rem",a.style.height="1.25rem",a.style.borderRadius="1.25rem",a.style.background="currentcolor",a.style.transform="scale(0)",a.style.opacity=0,e.appendChild(a),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:a}},y2=(e,t,n)=>(1-e)*t+n,x2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,E2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,_2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,S2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,w2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,T2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,b2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,A2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,C2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,L2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,R2=({time:e=Bd,extraTime:t=$d,delay:n=Gd,currentColor:r,targetColor:i,effectOpacity:a,effectScale:o,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:p})=>{const h=l/360,d=y2(h,e,t),w=Math.round((1-h)*e/d*100),x=Math.round(w/2),L=w+(100-w)/4;return{rules:{main:T2(w,r,i),effect:b2(w,L,a,o),circleRight:L2(x,u),circleLeft:C2(w,l),circle:A2(x,f,p)},names:{main:x2(d,n),effect:E2(d,n),circleLeft:_2(d,n),circleRight:S2(d,n),circle:w2(d,n)}}},O2=e=>`${e}ms linear mainOut 0s 1 normal forwards`,P2=e=>`${e}ms linear effectOut 0s 1 normal forwards`,k2=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,N2=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,I2=e=>`${e}ms linear circleOut 0s 1 normal forwards`,D2=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,M2=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,F2=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,j2=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,B2=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,$2=({time:e=zd,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:a,circleRightRotation:o,circleClipPath:l,circleOpacity:u})=>{const f=a/360,p=f*e,h=Math.min(100,f*100),d=h>50?Math.round((1-50/h)*100):0;return{rules:{main:D2(t,n),effect:M2(r,i),circleRight:F2(d,o),circleLeft:j2(a),circle:B2(d,l,u)},names:{main:O2(p),effect:P2(p),circleRight:k2(p),circleLeft:N2(p),circle:I2(p)}}},uu=(e,t=null)=>e===null?t:e;let _p;const P_=()=>{if(!_p){const e=document.createElement("style");document.head.appendChild(e),_p=e.sheet}return _p},zr=e=>{const t=P_(),n=t.rules.length;return t.insertRule(e,n),n},Ur=e=>{P_().deleteRule(e)},G2=`${p2}ms ease scaleInFadeOut 0s 1 normal backwards`,z2=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let Sp=null;const U2=`${v2}ms ease fadeScaleOut 0s 1 normal backwards`,V2=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let wp=null;const k_=(e,{onDraw:t=Dl,onStart:n=Dl,onEnd:r=Dl,enableInitiator:i=h2,initiatorParentElement:a=document.body,longPressIndicatorParentElement:o=document.body,minDelay:l=Ep,minDist:u=y1,pointNorm:f=Dl}={})=>{let p=i,h=a,d=o,w=t,x=n,L=r,I=f;const v=document.createElement("div"),b=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);v.id=`lasso-initiator-${b}`,v.style.position="fixed",v.style.display="flex",v.style.justifyContent="center",v.style.alignItems="center",v.style.zIndex=99,v.style.width="4rem",v.style.height="4rem",v.style.borderRadius="4rem",v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:C,longPressCircle:H,longPressCircleLeft:q,longPressCircleRight:ie,longPressEffect:we}=g2();let ue=!1,at=!1,He=[],Se=[],Ke,Qe=!1,Ge=null,Pt=null,mt=null,ht=null,pe=null,We=null,Le=null,Ee=null,$e=null,lt=null;const xt=()=>{ue=!1},Wt=wt=>{const{left:Ft,top:Ie}=e.getBoundingClientRect();return[wt.clientX-Ft,wt.clientY-Ie]};window.addEventListener("mouseup",xt);const Yt=()=>{v.style.opacity=.5,v.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Qt=(wt,Ft)=>{const Ie=getComputedStyle(wt),Kt=+Ie.opacity,gt=Ie.transform.match(/([0-9.-]+)+/g),De=+gt[0],ut=+gt[1],jt=Math.sqrt(De*De+ut*ut);let st=Math.atan2(ut,De)*(180/Math.PI);return st=Ft&&st<=0?360+st:st,{opacity:Kt,scale:jt,rotate:st}},It=wt=>{if(!p||ue)return;const Ft=wt.clientX,Ie=wt.clientY;v.style.top=`${Ie}px`,v.style.left=`${Ft}px`;const Kt=Qt(v),gt=Kt.opacity,De=Kt.scale,ut=Kt.rotate;v.style.opacity=gt,v.style.transform=`translate(-50%,-50%) scale(${De}) rotate(${ut}deg)`,v.style.animation="none",_l().then(()=>{Sp!==null&&Ur(Sp),Sp=zr(z2(gt,De,ut)),v.style.animation=G2,_l().then(()=>{Yt()})})},pt=()=>{const{opacity:wt,scale:Ft,rotate:Ie}=Qt(v);v.style.opacity=wt,v.style.transform=`translate(-50%,-50%) scale(${Ft}) rotate(${Ie}deg)`,v.style.animation="none",_l(2).then(()=>{wp!==null&&Ur(wp),wp=zr(V2(wt,Ft,Ie)),v.style.animation=U2,_l().then(()=>{Yt()})})},Yn=(wt,Ft,{time:Ie=Bd,extraTime:Kt=$d,delay:gt=Gd}={time:Bd,extraTime:$d,delay:Gd})=>{Qe=!0;const De=getComputedStyle(C);C.style.color=De.color,C.style.top=`${Ft}px`,C.style.left=`${wt}px`,C.style.animation="none";const ut=getComputedStyle(H);H.style.clipPath=ut.clipPath,H.style.opacity=ut.opacity,H.style.animation="none";const jt=Qt(we);we.style.opacity=jt.opacity,we.style.transform=`scale(${jt.scale})`,we.style.animation="none";const st=Qt(q);q.style.transform=`rotate(${st.rotate}deg)`,q.style.animation="none";const tn=Qt(ie);ie.style.transform=`rotate(${tn.rotate}deg)`,ie.style.animation="none",_l().then(()=>{if(!Qe)return;pe!==null&&Ur(pe),ht!==null&&Ur(ht),mt!==null&&Ur(mt),Pt!==null&&Ur(Pt),Ge!==null&&Ur(Ge);const{rules:nn,names:Ot}=R2({time:Ie,extraTime:Kt,delay:gt,currentColor:De.color||"currentcolor",targetColor:C.dataset.activeColor,effectOpacity:jt.opacity||0,effectScale:jt.scale||0,circleLeftRotation:st.rotate||0,circleRightRotation:tn.rotate||0,circleClipPath:ut.clipPath||"inset(0 0 0 50%)",circleOpacity:ut.opacity||0});Ge=zr(nn.main),Pt=zr(nn.effect),mt=zr(nn.circleLeft),ht=zr(nn.circleRight),pe=zr(nn.circle),C.style.animation=Ot.main,we.style.animation=Ot.effect,q.style.animation=Ot.circleLeft,ie.style.animation=Ot.circleRight,H.style.animation=Ot.circle})},mn=({time:wt=zd}={time:zd})=>{if(!Qe)return;Qe=!1;const Ft=getComputedStyle(C);C.style.color=Ft.color,C.style.animation="none";const Ie=getComputedStyle(H);H.style.clipPath=Ie.clipPath,H.style.opacity=Ie.opacity,H.style.animation="none";const Kt=Qt(we);we.style.opacity=Kt.opacity,we.style.transform=`scale(${Kt.scale})`,we.style.animation="none";const gt=Ie.clipPath.slice(-2,-1)==="x",De=Qt(q,gt);q.style.transform=`rotate(${De.rotate}deg)`,q.style.animation="none";const ut=Qt(ie);ie.style.transform=`rotate(${ut.rotate}deg)`,ie.style.animation="none",_l().then(()=>{lt!==null&&Ur(lt),$e!==null&&Ur($e),Ee!==null&&Ur(Ee),Le!==null&&Ur(Le),We!==null&&Ur(We);const{rules:jt,names:st}=$2({time:wt,currentColor:Ft.color||"currentcolor",targetColor:C.dataset.color,effectOpacity:Kt.opacity||0,effectScale:Kt.scale||0,circleLeftRotation:De.rotate||0,circleRightRotation:ut.rotate||0,circleClipPath:Ie.clipPath||"inset(0px)",circleOpacity:Ie.opacity||1});We=zr(jt.main),Le=zr(jt.effect),Ee=zr(jt.circleLeft),$e=zr(jt.circleRight),lt=zr(jt.circle),C.style.animation=st.main,we.style.animation=st.effect,q.style.animation=st.circleLeft,ie.style.animation=st.circleRight,H.style.animation=st.circle})},Xt=()=>{w(He,Se)},en=wt=>{if(Ke){if(XA(wt[0],wt[1],Ke[0],Ke[1])>y1){Ke=wt;const Ie=I(wt);He.push(Ie),Se.push(Ie[0],Ie[1]),He.length>1&&Xt()}}else{at||(at=!0,x()),Ke=wt;const Ft=I(wt);He=[Ft],Se=[Ft[0],Ft[1]]}},Et=S_(en,Ep,Ep),St=(wt,Ft)=>{const Ie=Wt(wt);return Ft?Et(Ie):en(Ie)},kt=()=>{He=[],Se=[],Ke=void 0,Xt()},At=wt=>{It(wt)},Ct=()=>{ue=!0,at=!0,kt(),x()},Ut=()=>{pt()},hn=({merge:wt=!1}={})=>{at=!1;const Ft=[...He],Ie=[...Se];return Et.cancel(),kt(),Ft.length&&L(Ft,Ie,{merge:wt}),Ft},ln=({onDraw:wt=null,onStart:Ft=null,onEnd:Ie=null,enableInitiator:Kt=null,initiatorParentElement:gt=null,longPressIndicatorParentElement:De=null,minDelay:ut=null,minDist:jt=null,pointNorm:st=null}={})=>{w=uu(wt,w),x=uu(Ft,x),L=uu(Ie,L),p=uu(Kt,p),I=uu(st,I),gt!==null&&gt!==h&&(h.removeChild(v),gt.appendChild(v),h=gt),De!==null&&De!==d&&(d.removeChild(C),De.appendChild(C),d=De),p?(v.addEventListener("click",At),v.addEventListener("mousedown",Ct),v.addEventListener("mouseleave",Ut)):(v.removeEventListener("mousedown",Ct),v.removeEventListener("mouseleave",Ut))},qr=()=>{h.removeChild(v),d.removeChild(C),window.removeEventListener("mouseup",xt),v.removeEventListener("click",At),v.removeEventListener("mousedown",Ct),v.removeEventListener("mouseleave",Ut)},y=()=>wt=>Fv(wt,{clear:kt,destroy:qr,end:hn,extend:St,set:ln,showInitiator:It,hideInitiator:pt,showLongPressIndicator:Yn,hideLongPressIndicator:mn});return h.appendChild(v),d.appendChild(C),ln({onDraw:w,onStart:x,onEnd:L,enableInitiator:p,initiatorParentElement:h}),HA(l1("initiator",v),l1("longPressIndicator",C),y(),WA(k_))({})},H2=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,W2=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,X2=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,Y2=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,Q2=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,K2=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,q2=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,Z2=function(){const t=(f,p,h,d,w)=>{const x=(d-p)*.5,L=(w-h)*.5;return(2*h-2*d+x+L)*f*f*f+(-3*h+3*d-2*x-L)*f*f+x*f+h},n=(f,p,h)=>{const d=h*f,w=Math.floor(d),x=d-w,L=p[Math.max(0,w-1)],I=p[w],v=p[Math.min(h,w+1)],b=p[Math.min(h,w+2)];return[t(x,L[0],I[0],v[0],b[0]),t(x,L[1],I[1],v[1],b[1])]},r=(f,p,h,d)=>(f-h)**2+(p-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,p,h)=>{let d=p[0],w=p[1],x=h[0]-d,L=h[1]-w;if(x!==0||L!==0){const I=((f[0]-d)*x+(f[1]-w)*L)/(x*x+L*L);I>1?(d=h[0],w=h[1]):I>0&&(d+=x*I,w+=L*I)}return x=f[0]-d,L=f[1]-w,x*x+L*L};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const a=(f,p,h,d,w)=>{let x=d,L;for(let I=p+1;I<h;I++){const v=i(f[I],f[p],f[h]);v>x&&(L=I,x=v)}x>d&&(L-p>1&&a(f,p,L,d,w),w.push(f[L]),h-L>1&&a(f,L,h,d,w))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const o=(f,p)=>{const h=f.length-1,d=[f[0]];return a(f,0,h,p,d),d.push(f[h]),d},l=(f,{maxIntPointsPerSegment:p=100,tolerance:h=.002}={})=>{const d=f.length,w=d-1,x=w*p+1,L=h**2;let I=[],v;for(let b=0;b<d-1;b++){let C=[f[b].slice(0,2)];v=f[b];for(let H=1;H<p;H++){const q=(b*p+H)/x,ie=n(q,f,w);r(v[0],v[1],ie[0],ie[1])>L&&(C.push(ie),v=ie)}C.push(f[b+1]),C=o(C,L),I=I.concat(C.slice(0,C.length-1))}return I.push(f[f.length-1].slice(0,2)),I.flat()},u=f=>{const p={},h=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const w=d[4];p[w]||(p[w]=[]),h?p[w][d[5]]=d:p[w].push(d)}),Object.entries(p).forEach(d=>{p[d[0]]=d[1].filter(w=>w),p[d[0]].reference=d[1][0]}),p};self.onmessage=function(p){(p.data.points?+p.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),p.data.points;const d=u(p.data.points);self.postMessage({points:Object.entries(d).reduce((w,x)=>(w[x[0]]=l(x[1],p.data.options),w[x[0]].reference=x[1].reference,w),{})})}},J2=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=YA(Z2);i.onmessage=a=>{a.data.error?r(a.data.error):n(a.data.points),i.terminate()},i.postMessage({points:e,options:t})});var eL="1.8.5";const Tp={showRecticle:"showReticle",recticleColor:"reticleColor"},bp=e=>{Object.keys(e).filter(t=>Tp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${Tp[t]}" instead.`),e[Tp[t]]=e[t],delete e[t]})},Vr=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>L_.has(e)?"valueZ":R_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Ap=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},tL=(e={})=>{const t=cA({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];bp(e);let{renderer:a,backgroundColor:o=kC,backgroundImage:l=GC,canvas:u=document.createElement("canvas"),colorBy:f=su,deselectOnDblClick:p=VC,deselectOnEscape:h=HC,lassoColor:d=rC,lassoLineWidth:w=iC,lassoMinDelay:x=oC,lassoMinDist:L=lC,lassoClearEvent:I=sC,lassoInitiator:v=aC,lassoInitiatorParentElement:b=document.body,lassoOnLongPress:C=uC,lassoLongPressTime:H=Bd,lassoLongPressAfterEffectTime:q=$d,lassoLongPressEffectDelay:ie=Gd,lassoLongPressRevertEffectTime:we=zd,keyMap:ue=dC,mouseMode:at=eC,showReticle:He=zC,reticleColor:Se=UC,pointColor:Ke=RC,pointColorActive:Qe=OC,pointColorHover:Ge=PC,showPointConnections:Pt=WC,pointConnectionColor:mt=NC,pointConnectionColorActive:ht=IC,pointConnectionColorHover:pe=DC,pointConnectionColorBy:We=yp,pointConnectionOpacity:Le=SC,pointConnectionOpacityBy:Ee=vp,pointConnectionOpacityActive:$e=wC,pointConnectionSize:lt=EC,pointConnectionSizeActive:xt=_C,pointConnectionSizeBy:Wt=pp,pointConnectionMaxIntPointsPerSegment:Yt=XC,pointConnectionTolerance:Qt=YC,pointSize:It=gC,pointSizeSelected:pt=yC,pointSizeMouseDetection:Yn=QC,pointOutlineWidth:mn=xC,opacity:Xt=Ci,opacityBy:en=gp,opacityByDensityFill:Et=bC,opacityInactiveMax:St=CC,opacityInactiveScale:kt=LC,sizeBy:At=hp,height:Ct=pC,width:Ut=hC}=e,hn=Ut===Ci?1:Ut,ln=Ct===Ci?1:Ct;const{performanceMode:qr=KC,opacityByDensityDebounceTime:y=AC}=e;a||(a=m2({regl:e.regl,gamma:e.gamma})),o=gr(o,!0),d=gr(d,!0),Se=gr(Se,!0);let wt=!1,Ft=g1(o),Ie,Kt,gt=!1,De=null,ut=[0,0],jt=-1,st=[];const tn=new Set,nn=new Set;let Ot=!1;const Sn=new Set;let pn=0,Tr=0,nr=!1,Zr=[],Ln,di,na=e.aspectRatio||mC,Jr,fr,ei,rn,ae,Rt,fn,vn,rr,ki=v1(ue),dr,jr,ra,Bo=!1,yt=!0,Ni=!1,$o;Ke=ba(Ke)?[...Ke]:[Ke],Qe=ba(Qe)?[...Qe]:[Qe],Ge=ba(Ge)?[...Ge]:[Ge],Ke=Ke.map(s=>gr(s,!0)),Qe=Qe.map(s=>gr(s,!0)),Ge=Ge.map(s=>gr(s,!0)),Xt=!Array.isArray(Xt)&&Number.isNaN(+Xt)?Ke[0][3]:Xt,Xt=wa(Xt,Ta,{minLength:1})?[...Xt]:[Xt],It=wa(It,Ta,{minLength:1})?[...It]:[It];let nc=mp/It[0];mt==="inherit"?mt=[...Ke]:(mt=ba(mt)?[...mt]:[mt],mt=mt.map(s=>gr(s,!0))),ht==="inherit"?ht=[...Qe]:(ht=ba(ht)?[...ht]:[ht],ht=ht.map(s=>gr(s,!0))),pe==="inherit"?pe=[...Ge]:(pe=ba(pe)?[...pe]:[pe],pe=pe.map(s=>gr(s,!0))),Le==="inherit"?Le=[...Xt]:Le=wa(Le,Ta,{minLength:1})?[...Le]:[Le],lt==="inherit"?lt=[...It]:lt=wa(lt,Ta,{minLength:1})?[...lt]:[lt],f=Vr(f,su),en=Vr(en,gp,{allowDensity:!0}),At=Vr(At,hp),We=Vr(We,yp,{allowSegment:!0}),Ee=Vr(Ee,vp,{allowSegment:!0}),Wt=Vr(Wt,pp,{allowSegment:!0});let mi,hi,pi,rc,br=0,as=0,Ya,os,Qa,Go,zo,Uo,Vo,Ii=!1,Ka=null,ls,ss,ic=He,ia,aa=0,Ho,oa=0,us=!1,mr=!1,vi=!1,gi=Sl,Di=Sl,Dn,Br=!1,Bn=e.xScale||null,wn=e.yScale||null,la=0,Wo=0,Xo=0,Yo=0;Bn&&(la=Bn.domain()[0],Wo=Bn.domain()[1]-Bn.domain()[0],Bn.range([0,hn])),wn&&(Xo=wn.domain()[0],Yo=wn.domain()[1]-wn.domain()[0],wn.range([ln,0]));const ac=s=>-1+s/hn*2,hr=s=>1+s/ln*-2,ir=()=>[ac(i[0]),hr(i[1])],Ar=(s,D)=>{const z=[s,D,1,1],oe=L0(n,lr(n,Jr,lr(n,Ie.view,ei)));return cd(z,z,oe),z.slice(0,2)},oc=(s=0)=>{const D=ro(),oe=(jr[1]-ra[1])/u.height;return(rr*D+s)*oe},cs=()=>Ot?Ln.points.filter((s,D)=>Sn.has(D)):Ln.points,Qo=(s,D,z,oe)=>{const be=Ln.range(s,D,z,oe);return Ot?be.filter(je=>Sn.has(je)):be},fs=()=>{const[s,D]=ir(),[z,oe]=Ar(s,D),be=oc(4),je=Qo(z-be,oe-be,z+be,oe+be);let Xe=be,dt=-1;return je.forEach(Bt=>{const[Dt,Tn]=Ln.points[Bt],Vt=xp(Dt,Tn,z,oe);Vt<Xe&&(Xe=Vt,dt=Bt)}),dt},vm=(s,D)=>{Zr=s,Kt.setPoints(D),t.publish("lassoExtend",{coordinates:s})},gm=s=>{const D=t2(s);if(!n2(D))return[];const z=Qo(...D),oe=[];return z.forEach(be=>{s2(s,Ln.points[be])&&oe.push(be)}),oe},sa=()=>{Zr=[],Kt&&Kt.clear()},qa=s=>s&&s.length>4,Mi=(s,D)=>{if(Rt||!Pt||!qa(Ln.points[s[0]]))return;const z=D===0,oe=D===1?Xe=>nn.add(Xe):Dl,be=Object.keys(s.reduce((Xe,dt)=>{const Bt=Ln.points[dt],Tn=Array.isArray(Bt[4])?Bt[4][0]:Bt[4];return Xe[Tn]=!0,Xe},{})),je=rn.getData().opacities;be.filter(Xe=>!nn.has(+Xe)).forEach(Xe=>{const dt=ae[Xe][0],Bt=ae[Xe][2],Dt=ae[Xe][3],Tn=dt*4+Dt*2,Vt=Tn+Bt*2+4;je.__original__===void 0&&(je.__original__=je.slice());for(let Mt=Tn;Mt<Vt;Mt++)je[Mt]=z?je.__original__[Mt]:$e;oe(Xe)}),rn.getBuffer().opacities.subdata(je,0)},Ko=s=>[s%br/br+as,Math.floor(s/br)/br+as],ym=s=>Ot&&!Sn.has(s),qo=({preventEvent:s=!1}={})=>{I===O0&&sa(),st.length&&(s||t.publish("deselect"),nn.clear(),Mi(st,0),st=[],tn.clear(),yt=!0)},ua=(s,{merge:D=!1,preventEvent:z=!1}={})=>{const oe=Array.isArray(s)?s:[s],be=[...st];if(D){if(st=VA(st,oe),be.length===st.length){yt=!0;return}}else{if(st&&st.length&&Mi(st,0),be.length>0&&oe.length===0){qo({preventEvent:z});return}st=oe}if(zA(be,st)){yt=!0;return}const je=[];tn.clear(),nn.clear();for(let Xe=st.length-1;Xe>=0;Xe--){const dt=st[Xe];if(dt<0||dt>=pn||ym(dt)){st.splice(Xe,1);continue}tn.add(dt),je.push.apply(je,Ko(dt))}os({usage:"dynamic",type:"float",data:je}),Mi(st,1),z||t.publish("select",{points:st}),yt=!0},Za=(s,{showReticleOnce:D=!1,preventEvent:z=!1}={})=>{let oe=!1;if(s>=0&&s<pn){oe=!0;const be=Dn,je=s!==Dn;+be>=0&&je&&!tn.has(be)&&Mi([be],0),Dn=s,Qa.subdata(Ko(s)),tn.has(s)||Mi([s],2),je&&!z&&t.publish("pointover",Dn)}else oe=+Dn>=0,oe&&(tn.has(Dn)||Mi([Dn],0),z||t.publish("pointout",Dn)),Dn=void 0;oe&&(yt=!0,Ni=D)},ds=s=>{const D=u.getBoundingClientRect();return i[0]=s.clientX-D.left,i[1]=s.clientY-D.top,[...i]},Rn=k_(u,{onStart:()=>{Ie.config({isFixed:!0}),gt=!0,nr=!0,sa(),jt>=0&&(clearTimeout(jt),jt=-1),t.publish("lassoStart")},onDraw:vm,onEnd:(s,D,{merge:z=!1}={})=>{Ie.config({isFixed:!1}),Zr=[...s];const oe=gm(D);ua(oe,{merge:z}),t.publish("lassoEnd",{coordinates:Zr}),I===Bv&&sa()},enableInitiator:v,initiatorParentElement:b,pointNorm:([s,D])=>Ar(ac(s),hr(D))}),Zo=()=>at===T_,Ja=(s,D)=>{switch(ki[D]){case Gv:return s.altKey;case zv:return s.metaKey;case A_:return s.ctrlKey;case C_:return s.metaKey;case Uv:return s.shiftKey;default:return!1}},lc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(D=>D===u),ms=s=>{!mr||s.buttons!==1||(gt=!0,De=performance.now(),ut=ds(s),nr=Zo()||Ja(s,$v),!nr&&C&&(Rn.showLongPressIndicator(s.clientX,s.clientY,{time:H,extraTime:q,delay:ie}),jt=setTimeout(()=>{jt=-1,nr=!0},H)))},hs=s=>{mr&&(gt=!1,jt>=0&&(clearTimeout(jt),jt=-1),nr&&(s.preventDefault(),nr=!1,Rn.end({merge:Ja(s,Vd)})),C&&Rn.hideLongPressIndicator({time:we}))},Jo=s=>{if(!mr)return;s.preventDefault();const D=ds(s);if(xp(...D,...ut)>=L)return;const z=performance.now()-De;if(!v||z<ZC){const oe=fs();oe>=0?(st.length&&I===O0&&sa(),ua([oe],{merge:Ja(s,Vd)})):dr||(dr=setTimeout(()=>{dr=null,Rn.showInitiator(s)},qC))}},el=s=>{Rn.hideInitiator(),dr&&(clearTimeout(dr),dr=null),p&&(s.preventDefault(),qo())},ti=s=>{if(vi||(Br=lc(s),vi=!0),!mr||!Br&&!gt)return;const D=ds(s),oe=xp(...D,...ut)>=L;Br&&!nr&&Za(fs()),nr?(s.preventDefault(),Rn.extend(s,!0)):gt&&C&&oe&&Rn.hideLongPressIndicator({time:we}),jt>=0&&oe&&(clearTimeout(jt),jt=-1),gt&&(yt=!0)},eo=()=>{Dn=void 0,Br=!1,vi=!1,mr&&(+Dn>=0&&!tn.has(Dn)&&Mi([Dn],0),hs(),yt=!0)},tl=()=>{const s=Math.max(It.length,Xt.length);oa=Math.max(2,Math.ceil(Math.sqrt(s)));const D=new Float32Array(oa**2*4);for(let z=0;z<s;z++){D[z*4]=It[z]||0,D[z*4+1]=Math.min(1,Xt[z]||0);const oe=Number((Qe[z]||Qe[0])[3]);D[z*4+2]=Math.min(1,Number.isNaN(oe)?1:oe);const be=Number((Ge[z]||Ge[0])[3]);D[z*4+3]=Math.min(1,Number.isNaN(be)?1:be)}return a.regl.texture({data:D,shape:[oa,oa,4],type:"float"})},ps=(s=Ke,D=Qe,z=Ge)=>{const oe=s.length,be=D.length,je=z.length,Xe=[];if(oe===be&&be===je)for(let dt=0;dt<oe;dt++)Xe.push(s[dt],D[dt],z[dt],o);else for(let dt=0;dt<oe;dt++){const Bt=[s[dt][0],s[dt][1],s[dt][2],1],Dt=f===su?D[0]:Bt,Tn=f===su?z[0]:Bt;Xe.push(s[dt],Dt,Tn,o)}return Xe},vs=()=>{const s=ps(),D=s.length;aa=Math.max(2,Math.ceil(Math.sqrt(D)));const z=new Float32Array(aa**2*4);return s.forEach((oe,be)=>{z[be*4]=oe[0],z[be*4+1]=oe[1],z[be*4+2]=oe[2],z[be*4+3]=oe[3]}),a.regl.texture({data:z,shape:[aa,aa,4],type:"float"})},xm=(s,D)=>{fr[0]=s/di,fr[5]=D},gs=()=>{di=hn/ln,Jr=ud([],[1/di,1,1]),fr=ud([],[1/di,1,1]),ei=ud([],[na,1,1])},Em=s=>{+s<=0||(na=s)},ys=(s,D)=>z=>{if(!z||!z.length)return;const be=[...s()];let je=ba(z)?z:[z];je=je.map(Xe=>gr(Xe,!0)),ia&&ia.destroy();try{D(je),ia=vs()}catch{console.error("Invalid colors. Switching back to default colors."),D(be),ia=vs()}},_m=ys(()=>Ke,s=>{Ke=s}),Sm=ys(()=>Qe,s=>{Qe=s}),yi=ys(()=>Ge,s=>{Ge=s}),wm=()=>{const s=Ar(-1,-1),D=Ar(1,1),z=(s[0]+1)/2,oe=(D[0]+1)/2,be=(s[1]+1)/2,je=(D[1]+1)/2,Xe=[la+z*Wo,la+oe*Wo],dt=[Xo+be*Yo,Xo+je*Yo];return[Xe,dt]},Fi=()=>{if(!Bn&&!wn)return;const[s,D]=wm();Bn&&Bn.domain(s),wn&&wn.domain(D)},ji=s=>{ln=Math.max(1,s),u.height=Math.floor(ln*window.devicePixelRatio),wn&&(wn.range([ln,0]),Fi())},Tm=s=>{if(s===Ci){Ct=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&ji(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Ct=+s,ji(Ct),u.style.height=`${Ct}px`)},xi=()=>{rr=Yn,Yn===Ci&&(rr=Array.isArray(It)?UA(It):It)},sc=s=>{wa(s,Ta,{minLength:1})&&(It=[...s]),Uf(+s)&&(It=[+s]),nc=mp/It[0],Ho=tl(),xi()},fa=s=>{!+s||+s<0||(pt=+s)},uc=s=>{!+s||+s<0||(mn=+s)},ni=s=>{hn=Math.max(1,s),u.width=Math.floor(hn*window.devicePixelRatio),Bn&&(Bn.range([0,hn]),Fi())},xs=s=>{if(s===Ci){Ut=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&ni(u.getBoundingClientRect().width)});return}!+s||+s<=0||(Ut=+s,ni(Ut),u.style.width=`${hn}px`)},bm=s=>{wa(s,Ta,{minLength:1})&&(Xt=[...s]),Uf(+s)&&(Xt=[+s]),Ho=tl()},Es=s=>{switch(s){case"valueZ":return gi;case"valueW":return Di;default:return null}},_s=(s,D)=>{switch(s){case bi:return z=>Math.round(z*(D.length-1));case Sl:default:return Dl}},cc=s=>{f=Vr(s,su)},Am=s=>{en=Vr(s,gp,{allowDensity:!0})},Cm=s=>{At=Vr(s,hp)},fc=s=>{We=Vr(s,yp,{allowSegment:!0})},Zt=s=>{Ee=Vr(s,vp,{allowSegment:!0})},dc=s=>{Wt=Vr(s,pp,{allowSegment:!0})},Lm=()=>[u.width,u.height],$r=()=>l,Ss=()=>ia,nl=()=>aa,Bi=()=>.5/aa,ws=()=>window.devicePixelRatio,rl=()=>Ya,$i=()=>os,il=()=>Ho,mc=()=>oa,Ts=()=>.5/oa,bs=()=>0,Rm=()=>pi||mi,Om=()=>br,Pm=()=>.5/br,hc=()=>fr,al=()=>Ie.view,to=()=>ei,no=()=>lr(r,fr,lr(r,Ie.view,ei)),ro=()=>Ie.scaling[0]>1?Math.asinh(Vf(1,Ie.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:Vf(nc,Ie.scaling[0])*window.devicePixelRatio,da=()=>Ot?Sn.size:pn,Gi=()=>st.length,As=()=>Gi()>0?St:1,Cs=()=>Gi()>0?kt:1,Ls=()=>+(f==="valueZ"),pc=()=>+(f==="valueW"),vc=()=>+(en==="valueZ"),gc=()=>+(en==="valueW"),yc=()=>+(en==="density"),xc=()=>+(At==="valueZ"),Ec=()=>+(At==="valueW"),_c=()=>f==="valueZ"?gi===bi?Ke.length-1:1:Di===bi?Ke.length-1:1,Sc=()=>en==="valueZ"?gi===bi?Xt.length-1:1:Di===bi?Xt.length-1:1,ma=()=>At==="valueZ"?gi===bi?It.length-1:1:Di===bi?It.length-1:1,Rs=s=>{if(en!=="density")return 1;const D=ro(),z=It[0]*D,oe=2/(2/Ie.view[0])*(2/(2/Ie.view[5])),be=s.viewportHeight,je=s.viewportWidth;let Xe=Et*je*be/(Tr*z*z)*p1(1,oe);Xe*=qr?1:1/(.25*Math.PI);const dt=Vf(mp,z)+.5;return Xe*=(z/dt)**2,p1(1,Vf(0,Xe))},Os=a.regl({framebuffer:()=>rc,vert:q2,frag:K2,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>hi,endStateTex:()=>mi,t:(s,D)=>D.t},count:3}),Cr=(s,D,z,oe=QA,be=As,je=Cs)=>a.regl({frag:qr?Y2:X2,vert:Q2(oe),blend:{enable:!qr,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:z,size:2}},uniforms:{resolution:Lm,modelViewProjection:no,devicePixelRatio:ws,pointScale:ro,encodingTex:il,encodingTexRes:mc,encodingTexEps:Ts,pointOpacityMax:be,pointOpacityScale:je,pointSizeExtra:s,globalState:oe,colorTex:Ss,colorTexRes:nl,colorTexEps:Bi,stateTex:Rm,stateTexRes:Om,stateTexEps:Pm,isColoredByZ:Ls,isColoredByW:pc,isOpacityByZ:vc,isOpacityByW:gc,isOpacityByDensity:yc,isSizedByZ:xc,isSizedByW:Ec,colorMultiplicator:_c,opacityMultiplicator:Sc,opacityDensity:Rs,sizeMultiplicator:ma,numColorStates:qA},count:D,primitive:"points"}),km=Cr(bs,da,rl),Nm=Cr(bs,()=>1,()=>Qa,KA,()=>1,()=>1),Im=Cr(()=>(pt+mn*2)*window.devicePixelRatio,Gi,$i,dp,()=>1,()=>1),Ps=Cr(()=>(pt+mn)*window.devicePixelRatio,Gi,$i,s1,()=>1,()=>1),Dm=Cr(()=>pt*window.devicePixelRatio,Gi,$i,dp,()=>1,()=>1),Mm=()=>{Im(),Ps(),Dm()},Fm=a.regl({frag:H2,vert:W2,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:no,texture:$r},count:6}),ks=a.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>Zr},uniforms:{modelViewProjection:no,color:()=>d},elements:()=>Array.from({length:Zr.length-2},(s,D)=>[0,D+1,D+2])}),jm=()=>{if(!(Dn>=0))return;const[s,D]=Ln.points[Dn].slice(0,2),z=[s,D,0,1];lr(n,fr,lr(n,Ie.view,ei)),cd(z,z,n),fn.setPoints([-1,z[1],1,z[1]]),vn.setPoints([z[0],1,z[0],-1]),fn.draw(),vn.draw(),Cr(()=>(pt+mn*2)*window.devicePixelRatio,()=>1,Qa,dp)(),Cr(()=>(pt+mn)*window.devicePixelRatio,()=>1,Qa,s1)()},ol=s=>{const D=new Float32Array(s*2);let z=0;for(let oe=0;oe<s;++oe){const be=Ko(oe);D[z]=be[0],D[z+1]=be[1],z+=2}return D},Ns=(s,D={})=>{const z=s.length;br=Math.max(2,Math.ceil(Math.sqrt(z))),as=.5/br;const oe=new Float32Array(br**2*4);let be=!0,je=!0,Xe=0,dt=0,Bt=0;for(let Dt=0;Dt<z;++Dt)Xe=Dt*4,oe[Xe]=s[Dt][0],oe[Xe+1]=s[Dt][1],dt=s[Dt][2]||0,Bt=s[Dt][3]||0,oe[Xe+2]=dt,oe[Xe+3]=Bt,be&&(be=Number.isInteger(dt)),je&&(je=Number.isInteger(Bt));return D.z&&f1.includes(D.z)?gi=D.z:gi=be?Sl:bi,D.w&&f1.includes(D.w)?Di=D.w:Di=je?Sl:bi,a.regl.texture({data:oe,shape:[br,br,4],type:"float"})},wc=(s,D={})=>{if(!mi)return!1;if(Ii){const z=hi;hi=pi,z.destroy()}else hi=mi;return pi=Ns(s,D),rc=a.regl.framebuffer({color:pi,depth:!1,stencil:!1}),mi=void 0,!0},Is=()=>!!(hi&&pi),Bm=()=>{hi&&(hi.destroy(),hi=void 0),pi&&(pi.destroy(),pi=void 0)},io=(s,D={})=>{mr=!1,pn=s.length,Tr=pn,mi&&mi.destroy(),mi=Ns(s,D),Ya({usage:"static",type:"float",data:ol(pn)}),Ln=new LA(s,z=>z[0],z=>z[1],16),mr=!0},Tc=(s,D)=>{Go=Ie.target,zo=s,Uo=Ie.distance[0],Vo=D},$m=()=>Go!==void 0&&zo!==void 0&&Uo!==void 0&&Vo!==void 0,Gm=()=>{Go=void 0,zo=void 0,Uo=void 0,Vo=void 0},zm=s=>{const D=We==="inherit"?f:We;if(D==="segment"){const z=mt.length-1;return z<1?[]:s.reduce((oe,be,je)=>{let Xe=0;const dt=[];for(let Dt=2;Dt<be.length;Dt+=2){const Tn=Math.sqrt((be[Dt-2]-be[Dt])**2+(be[Dt-1]-be[Dt+1])**2);dt.push(Tn),Xe+=Tn}oe[je]=[0];let Bt=0;for(let Dt=0;Dt<be.length/2-1;Dt++)Bt+=dt[Dt],oe[je].push(Math.floor(Bt/Xe*z)*4);return oe},[])}if(D){const z=Ap(D),oe=_s(Es(D),We==="inherit"?Ke:mt);return ae.reduce((be,[je,Xe])=>(be[je]=oe(Xe[z])*4,be),[])}return Array(ae.length).fill(0)},Um=()=>{const s=Ee==="inherit"?en:Ee;if(s==="segment"){const D=Le.length-1;return D<1?[]:ae.reduce((z,[oe,be,je])=>(z[oe]=o1(je,Xe=>Le[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Ap(s),z=Ee==="inherit"?Xt:Le,oe=_s(Es(s),z);return ae.reduce((be,[je,Xe])=>(be[je]=z[oe(Xe[D])],be),[])}},Vm=()=>{const s=Wt==="inherit"?At:Wt;if(s==="segment"){const D=lt.length-1;return D<1?[]:ae.reduce((z,[oe,be,je])=>(z[oe]=o1(je,Xe=>lt[Math.floor(Xe/(je-1)*D)]),z),[])}if(s){const D=Ap(s),z=Wt==="inherit"?It:lt,oe=_s(Es(s),z);return ae.reduce((be,[je,Xe])=>(be[je]=z[oe(Xe[D])],be),[])}},Hm=s=>{ae=[];let D=0;Object.keys(s).forEach((z,oe)=>{ae[z]=[oe,s[z].reference,s[z].length/2,D],D+=s[z].length/2})},ha=s=>new Promise(D=>{rn.setPoints([]),!s||!s.length?D():(Rt=!0,J2(s,{maxIntPointsPerSegment:Yt,tolerance:Qt}).then(z=>{Hm(z);const oe=Object.values(z);rn.setPoints(oe.length===1?oe[0]:oe,{colorIndices:zm(oe),opacities:Um(),widths:Vm()}),Rt=!1,D()}))}),ao=({preventEvent:s=!1}={})=>(Ot=!1,Sn.clear(),Ya.subdata(ol(pn)),new Promise(D=>{const z=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),D()},1),yt=!0};Pt||qa(Ln.points[0])?ha(cs()).then(()=>{s||t.publish("pointConnectionsDraw"),z()}):z()})),bc=(s,{preventEvent:D=!1}={})=>{const z=Array.isArray(s)?s:[s];Ot=!0,Sn.clear();const oe=[],be=[];for(let je=z.length-1;je>=0;je--){const Xe=z[je];if(Xe<0||Xe>=pn){z.splice(je,1);continue}Sn.add(Xe),oe.push.apply(oe,Ko(Xe)),tn.has(Xe)&&be.push(Xe)}return Ya.subdata(oe),ua(be,{preventEvent:D}),Sn.has(Dn)||Za(-1,{preventEvent:D}),new Promise(je=>{const Xe=()=>{t.subscribe("draw",()=>{D||t.publish("filter",{points:z}),je()},1),yt=!0};Pt||qa(Ln.points[0])?ha(cs()).then(()=>{D||t.publish("pointConnectionsDraw"),ua(be,{preventEvent:D}),Xe()}):Xe()})},oo=()=>Qo(ra[0],ra[1],jr[0],jr[1]),pa=S_(()=>{Tr=oo().length},y),Ac=s=>{const[D,z]=Go,[oe,be]=zo,je=1-s,Xe=D*je+oe*s,dt=z*je+be*s,Bt=Uo*je+Vo*s;Ie.lookAt([Xe,dt],Bt)},Cc=()=>Is(),Lc=()=>$m(),Rc=(s,D)=>{Ka||(Ka=performance.now());const z=performance.now()-Ka,oe=d2(D(z/s),0,1);return Cc()&&Os({t:oe}),Lc()&&Ac(oe),z<s},Oc=()=>{Ii=!1,Ka=null,ls=void 0,ss=void 0,He=ic,Bm(),Gm(),t.publish("transitionEnd")},ll=({duration:s=500,easing:D=c1})=>{Ii&&t.publish("transitionEnd"),Ii=!0,Ka=null,ls=s,ss=P0(D)?tC[D]||c1:D,ic=He,He=!1,t.publish("transitionStart")},Wm=s=>new Promise((D,z)=>{if(!s||Array.isArray(s))D(s);else{const oe=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,be=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Vt=>s.x[Vt]),je=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Vt=>s.y[Vt]),Xe=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Vt=>s.line[Vt]),dt=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Vt=>s.lineOrder[Vt]),Bt=Object.keys(s),Dt=(()=>{const Vt=Bt.find(Mt=>L_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})(),Tn=(()=>{const Vt=Bt.find(Mt=>R_.has(Mt));return Vt&&(Array.isArray(s[Vt])||ArrayBuffer.isView(s[Vt]))&&(Mt=>s[Vt][Mt])})();be&&je&&Dt&&Tn&&Xe&&dt?D(s.x.map((Vt,Mt)=>[Vt,je(Mt),Dt(Mt),Tn(Mt),Xe(Mt),dt(Mt)])):be&&je&&Dt&&Tn&&Xe?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),Tn(Mt),Xe(Mt)])):be&&je&&Dt&&Tn?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt),Tn(Mt)])):be&&je&&Dt?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt),Dt(Mt)])):be&&je?D(Array.from({length:oe},(Vt,Mt)=>[be(Mt),je(Mt)])):z(new Error("You need to specify at least x and y"))}}),va=(s,D={})=>wt?Promise.reject(new Error("The instance was already destroyed")):Wm(s).then(z=>new Promise(oe=>{if(wt){oe();return}let be=!1;(!D.preventFilterReset||(z==null?void 0:z.length)!==pn)&&(Ot=!1,Sn.clear());const je=z&&qa(z[0])&&(Pt||D.showPointConnectionsOnce),{zDataType:Xe,wDataType:dt}=D;z&&(D.transition&&(z.length===pn?be=wc(z,{z:Xe,w:dt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),io(z,{z:Xe,w:dt}),D.hover!==void 0&&Za(D.hover,{preventEvent:!0}),D.select!==void 0&&ua(D.select,{preventEvent:!0}),D.filter!==void 0&&bc(D.filter,{preventEvent:!0}),je&&ha(z).then(()=>{t.publish("pointConnectionsDraw"),yt=!0,Ni=D.showReticleOnce})),D.transition&&be?(je?Promise.all([new Promise(Bt=>{t.subscribe("transitionEnd",()=>{yt=!0,Ni=D.showReticleOnce,Bt()},1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(oe):t.subscribe("transitionEnd",()=>{yt=!0,Ni=D.showReticleOnce,oe()},1),ll({duration:D.transitionDuration,easing:D.transitionEasing})):(je?Promise.all([new Promise(Bt=>{t.subscribe("draw",Bt,1)}),new Promise(Bt=>{t.subscribe("pointConnectionsDraw",Bt,1)})]).then(oe):t.subscribe("draw",oe,1),yt=!0,Ni=D.showReticleOnce)})),On=s=>(...D)=>{const z=s(...D);return yt=!0,z},Pc=s=>{let D=1/0,z=-1/0,oe=1/0,be=-1/0;for(let je=0;je<s.length;je++){const[Xe,dt]=Ln.points[s[je]];D=Math.min(D,Xe),z=Math.max(z,Xe),oe=Math.min(oe,dt),be=Math.max(be,dt)}return{x:D,y:oe,width:z-D,height:be-oe}},Ds=(s,D={})=>new Promise(z=>{const oe=[s.x+s.width/2,s.y+s.height/2],be=2*Math.atan(1),je=s.height*di>s.width?s.height/2/Math.tan(be/2):s.width/2/Math.tan(be*di/2);D.transition?(Ie.config({isFixed:!0}),Tc(oe,je),t.subscribe("transitionEnd",()=>{z(),Ie.config({isFixed:!1})},1),ll({duration:D.transitionDuration,easing:D.transitionEasing})):(Ie.lookAt(oe,je),t.subscribe("draw",z,1),yt=!0)}),zi=(s,D={})=>{if(!mr)return Promise.reject(new Error(d1));const z=Pc(s),oe=z.x+z.width/2,be=z.y+z.height/2,je=oc(),Xe=1+(D.padding||0),dt=Math.max(z.width,je)*Xe,Bt=Math.max(z.height,je)*Xe,Dt=oe-dt/2,Tn=be-Bt/2;return Ds({x:Dt,y:Tn,width:dt,height:Bt},D)},Ms=(s,D,z={})=>new Promise(oe=>{z.transition?(Ie.config({isFixed:!0}),Tc(s,D),t.subscribe("transitionEnd",()=>{oe(),Ie.config({isFixed:!1})},1),ll({duration:z.transitionDuration,easing:z.transitionEasing})):(Ie.lookAt(s,D),t.subscribe("draw",oe,1),yt=!0)}),kc=(s={})=>Ms([0,0],1,s),Xm=s=>{if(!mr)throw new Error(d1);const D=Ln.points[s];if(!D)return;const z=[D[0],D[1],0,1];lr(n,Jr,lr(n,Ie.view,ei)),cd(z,z,n);const oe=hn*(z[0]+1)/2,be=ln*(.5-z[1]/2);return[oe,be]},Fs=()=>{rn.setStyle({color:ps(mt,ht,pe),opacity:Le===null?null:Le[0],width:lt[0]})},Nc=()=>{const s=Math.round(Ft)>.5?0:255;Rn.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,Rn.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Ic=()=>{const s=Math.round(Ft)>.5?0:255;Rn.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,Rn.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const D=d.map(z=>Math.round(z*255));Rn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},js=s=>{s&&(o=gr(s,!0),Ft=g1(o),Nc(),Ic())},Dc=s=>{s?P0(s)?h1(a.regl,s).then(D=>{l=D,yt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},Ym=s=>{s>0&&Ie.lookAt(Ie.target,s,Ie.rotation)},Mc=s=>{s!==null&&Ie.lookAt(Ie.target,Ie.distance[0],s)},Fc=s=>{s&&Ie.lookAt(s,Ie.distance[0],Ie.rotation)},jc=s=>{s&&Ie.setView(s)},sl=s=>{if(!s)return;d=gr(s,!0),Kt.setStyle({color:d});const D=d.map(z=>Math.round(z*255));Rn.longPressIndicator.dataset.activeColor=`rgb(${D[0]}, ${D[1]}, ${D[2]})`},Qm=s=>{Number.isNaN(+s)||+s<1||(w=+s,Kt.setStyle({width:w}))},Ei=s=>{+s&&(x=+s,Rn.set({minDelay:x}))},ul=s=>{+s&&(L=+s,Rn.set({minDist:L}))},Bc=s=>{I=m1(nC,I)(s)},$c=s=>{v=!!s,Rn.set({enableInitiator:v})},Gc=s=>{b=s,Rn.set({startInitiatorParentElement:b})},zc=s=>{C=!!s},Uc=s=>{H=Number(s)},Vc=s=>{q=Number(s)},Hc=s=>{ie=Number(s)},Wc=s=>{we=Number(s)},Xc=s=>{ue=Object.entries(s).reduce((D,[z,oe])=>(fC.includes(z)&&cC.includes(oe)&&(D[z]=oe),D),{}),ki=v1(ue),ki[Ud]?Ie.config({isRotate:!0,mouseDownMoveModKey:ki[Ud]}):Ie.config({isRotate:!1})},Rr=s=>{at=m1(JA,jv)(s),Ie.config({defaultMouseDownMoveAction:at===b_?"rotate":"pan"})},Yc=s=>{s!==null&&(He=s)},Km=s=>{s&&(Se=gr(s,!0),fn.setStyle({color:Se}),vn.setStyle({color:Se}))},ri=s=>{s&&(Bn=s,la=s.domain()[0],Wo=s?s.domain()[1]-s.domain()[0]:0,Bn.range([0,hn]),Fi())},Bs=s=>{s&&(wn=s,Xo=wn.domain()[0],Yo=wn?wn.domain()[1]-wn.domain()[0]:0,wn.range([ln,0]),Fi())},Ui=s=>{p=!!s},cl=s=>{h=!!s},Qc=s=>{Pt=!!s,Pt?qa(Ln.points[0])&&ha(cs()).then(()=>{t.publish("pointConnectionsDraw"),yt=!0}):ha()},fl=(s,D)=>z=>{if(z==="inherit")s([...D()]);else{const oe=ba(z)?z:[z];s(oe.map(be=>gr(be,!0)))}Fs()},Kc=fl(s=>{mt=s},()=>Ke),qc=fl(s=>{ht=s},()=>Qe),Zc=fl(s=>{pe=s},()=>Ge),qm=s=>{wa(s,Ta,{minLength:1})&&(Le=[...s]),Uf(+s)&&(Le=[+s]),mt=mt.map(D=>(D[3]=Number.isNaN(+Le[0])?D[3]:+Le[0],D)),Fs()},Zm=s=>{!Number.isNaN(+s)&&+s&&($e=+s)},Jm=s=>{wa(s,Ta,{minLength:1})&&(lt=[...s]),Uf(+s)&&(lt=[+s]),Fs()},eh=s=>{!Number.isNaN(+s)&&+s&&(xt=Math.max(0,s))},th=s=>{Yt=Math.max(0,s)},nh=s=>{Qt=Math.max(0,s)},rh=s=>{Yn=s,xi()},Jc=s=>{Et=+s},ef=s=>{St=+s},ih=s=>{kt=+s},ah=s=>{a.gamma=s},$s=s=>{if(bp({property:!0}),s==="aspectRatio")return na;if(s==="background"||s==="backgroundColor")return o;if(s==="backgroundImage")return l;if(s==="camera")return Ie;if(s==="cameraTarget")return Ie.target;if(s==="cameraDistance")return Ie.distance[0];if(s==="cameraRotation")return Ie.rotation;if(s==="cameraView")return Ie.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return At;if(s==="deselectOnDblClick")return p;if(s==="deselectOnEscape")return h;if(s==="height")return Ct;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return w;if(s==="lassoMinDelay")return x;if(s==="lassoMinDist")return L;if(s==="lassoClearEvent")return I;if(s==="lassoInitiator")return v;if(s==="lassoInitiatorElement")return Rn.initiator;if(s==="lassoInitiatorParentElement")return b;if(s==="keyMap")return{...ue};if(s==="mouseMode")return at;if(s==="opacity")return Xt.length===1?Xt[0]:Xt;if(s==="opacityBy")return en;if(s==="opacityByDensityFill")return Et;if(s==="opacityByDensityDebounceTime")return y;if(s==="opacityInactiveMax")return St;if(s==="opacityInactiveScale")return kt;if(s==="points")return Ln.points;if(s==="hoveredPoint")return Dn;if(s==="selectedPoints")return[...st];if(s==="filteredPoints")return Ot?Array.from(Sn):Array.from({length:Ln.points.length},(D,z)=>z);if(s==="pointsInView")return oo();if(s==="pointColor")return Ke.length===1?Ke[0]:Ke;if(s==="pointColorActive")return Qe.length===1?Qe[0]:Qe;if(s==="pointColorHover")return Ge.length===1?Ge[0]:Ge;if(s==="pointOutlineWidth")return mn;if(s==="pointSize")return It.length===1?It[0]:It;if(s==="pointSizeSelected")return pt;if(s==="pointSizeMouseDetection")return Yn;if(s==="showPointConnections")return Pt;if(s==="pointConnectionColor")return mt.length===1?mt[0]:mt;if(s==="pointConnectionColorActive")return ht.length===1?ht[0]:ht;if(s==="pointConnectionColorHover")return pe.length===1?pe[0]:pe;if(s==="pointConnectionColorBy")return We;if(s==="pointConnectionOpacity")return Le.length===1?Le[0]:Le;if(s==="pointConnectionOpacityBy")return Ee;if(s==="pointConnectionOpacityActive")return $e;if(s==="pointConnectionSize")return lt.length===1?lt[0]:lt;if(s==="pointConnectionSizeActive")return xt;if(s==="pointConnectionSizeBy")return Wt;if(s==="pointConnectionMaxIntPointsPerSegment")return Yt;if(s==="pointConnectionTolerance")return Qt;if(s==="reticleColor")return Se;if(s==="regl")return a.regl;if(s==="showReticle")return He;if(s==="version")return eL;if(s==="width")return Ut;if(s==="xScale")return Bn;if(s==="yScale")return wn;if(s==="performanceMode")return qr;if(s==="gamma")return a.gamma;if(s==="renderer")return a;if(s==="isDestroyed")return wt;if(s==="isPointsDrawn")return mr;if(s==="isPointsFiltered")return Ot;if(s==="zDataType")return gi;if(s==="wDataType")return Di},lo=(s={})=>(bp(s),(s.backgroundColor!==void 0||s.background!==void 0)&&js(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Dc(s.backgroundImage),s.cameraTarget!==void 0&&Fc(s.cameraTarget),s.cameraDistance!==void 0&&Ym(s.cameraDistance),s.cameraRotation!==void 0&&Mc(s.cameraRotation),s.cameraView!==void 0&&jc(s.cameraView),s.colorBy!==void 0&&cc(s.colorBy),s.pointColor!==void 0&&_m(s.pointColor),s.pointColorActive!==void 0&&Sm(s.pointColorActive),s.pointColorHover!==void 0&&yi(s.pointColorHover),s.pointSize!==void 0&&sc(s.pointSize),s.pointSizeSelected!==void 0&&fa(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&rh(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Cm(s.sizeBy),s.opacity!==void 0&&bm(s.opacity),s.showPointConnections!==void 0&&Qc(s.showPointConnections),s.pointConnectionColor!==void 0&&Kc(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&qc(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&Zc(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&fc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&Zt(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&qm(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&Zm(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&Jm(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&eh(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&dc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&th(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&nh(s.pointConnectionTolerance),s.opacityBy!==void 0&&Am(s.opacityBy),s.lassoColor!==void 0&&sl(s.lassoColor),s.lassoLineWidth!==void 0&&Qm(s.lassoLineWidth),s.lassoMinDelay!==void 0&&Ei(s.lassoMinDelay),s.lassoMinDist!==void 0&&ul(s.lassoMinDist),s.lassoClearEvent!==void 0&&Bc(s.lassoClearEvent),s.lassoInitiator!==void 0&&$c(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&Gc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&zc(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&Uc(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&Vc(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&Hc(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&Wc(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&Xc(s.keyMap),s.mouseMode!==void 0&&Rr(s.mouseMode),s.showReticle!==void 0&&Yc(s.showReticle),s.reticleColor!==void 0&&Km(s.reticleColor),s.pointOutlineWidth!==void 0&&uc(s.pointOutlineWidth),s.height!==void 0&&Tm(s.height),s.width!==void 0&&xs(s.width),s.aspectRatio!==void 0&&Em(s.aspectRatio),s.xScale!==void 0&&ri(s.xScale),s.yScale!==void 0&&Bs(s.yScale),s.deselectOnDblClick!==void 0&&Ui(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&cl(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&Jc(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&ef(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&ih(s.opacityInactiveScale),s.gamma!==void 0&&ah(s.gamma),new Promise(D=>{window.requestAnimationFrame(()=>{u&&(gs(),Ie.refresh(),a.refresh(),yt=!0,D())})})),oh=(s,{preventEvent:D=!1}={})=>{jc(s),yt=!0,Bo=D},tf=()=>{Ie||(Ie=wA(u,{isPanInverted:[!1,!0]})),e.cameraView?Ie.setView(t1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?Ie.lookAt([...e.cameraTarget||MC],e.cameraDistance||FC,e.cameraRotation||jC):Ie.setView(t1(BC)),jr=Ar(1,1),ra=Ar(-1,-1)},lh=({preventEvent:s=!1}={})=>{tf(),Fi(),!s&&t.publish("view",{view:Ie.view,camera:Ie,xScale:Bn,yScale:wn})},nf=({key:s})=>{switch(s){case"Escape":h&&qo();break}},rf=()=>{Br=!0,vi=!0},Gs=()=>{Za(),Br=!1,vi=!0,yt=!0},af=()=>{yt=!0},sh=()=>{io([]),rn.clear()},so=()=>{Ie.refresh();const s=Ut===Ci,D=Ct===Ci;if(s||D){const{width:z,height:oe}=u.getBoundingClientRect();s&&ni(z),D&&ji(oe),gs(),yt=!0}},uh=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),ch=()=>{gs(),tf(),Fi(),Kt=zf(a.regl,{color:d,width:w,is2d:!0}),rn=zf(a.regl,{color:mt,colorHover:pe,colorActive:ht,opacity:Le===null?null:Le[0],width:lt[0],widthActive:xt,is2d:!0}),fn=zf(a.regl,{color:Se,width:1,is2d:!0}),vn=zf(a.regl,{color:Se,width:1,is2d:!0}),xi(),u.addEventListener("wheel",af),Ya=a.regl.buffer(),os=a.regl.buffer(),Qa=a.regl.buffer({usage:"dynamic",type:"float",length:ZA*2}),ia=vs(),Ho=tl();const s=lo({backgroundImage:l,width:Ut,height:Ct,keyMap:ue});Nc(),Ic(),window.addEventListener("keyup",nf,!1),window.addEventListener("blur",eo,!1),window.addEventListener("mouseup",hs,!1),window.addEventListener("mousemove",ti,!1),u.addEventListener("mousedown",ms,!1),u.addEventListener("mouseenter",rf,!1),u.addEventListener("mouseleave",Gs,!1),u.addEventListener("click",Jo,!1),u.addEventListener("dblclick",el,!1),"ResizeObserver"in window?($o=new ResizeObserver(so),$o.observe(u)):(window.addEventListener("resize",so),window.addEventListener("orientationchange",so)),s.then(()=>{t.publish("init")})},ga=a.onFrame(()=>{us=Ie.tick(),!(!mr||!(yt||Ii))&&(Ii&&!Rc(ls,ss)&&Oc(),us&&(jr=Ar(1,1),ra=Ar(-1,-1),en==="density"&&pa()),a.render(()=>{const s=u.width/a.canvas.width,D=u.height/a.canvas.height;xm(s,D),l&&l._reglType&&Fm(),Zr.length>2&&ks(),Ii||rn.draw({projection:hc(),model:to(),view:al()}),km(),!gt&&(He||Ni)&&jm(),Dn>=0&&Nm(),st.length&&Mm(),Kt.draw({projection:hc(),model:to(),view:al()})},u),us&&(Fi(),Bo?Bo=!1:t.publish("view",{view:Ie.view,camera:Ie,xScale:Bn,yScale:wn})),yt=!1,Ni=!1,t.publish("draw"))}),fh=()=>{yt=!0},dh=()=>{mr=!1,wt=!0,ga(),window.removeEventListener("keyup",nf,!1),window.removeEventListener("blur",eo,!1),window.removeEventListener("mouseup",hs,!1),window.removeEventListener("mousemove",ti,!1),u.removeEventListener("mousedown",ms,!1),u.removeEventListener("mouseenter",rf,!1),u.removeEventListener("mouseleave",Gs,!1),u.removeEventListener("click",Jo,!1),u.removeEventListener("dblclick",el,!1),u.removeEventListener("wheel",af,!1),$o?$o.disconnect():(window.removeEventListener("resize",so),window.removeEventListener("orientationchange",so)),u=void 0,Ie.dispose(),Ie=void 0,Kt.destroy(),Rn.destroy(),rn.destroy(),fn.destroy(),vn.destroy(),e.renderer||a.destroy(),t.publish("destroy"),t.clear()};return ch(),{get isSupported(){return a.isSupported},clear:On(sh),createTextureFromUrl:(s,D=Vv)=>h1(a.regl,s,D),deselect:qo,destroy:dh,draw:va,filter:bc,get:$s,getScreenPosition:Xm,hover:Za,redraw:fh,refresh:a.refresh,reset:On(lh),select:ua,set:lo,export:uh,subscribe:t.subscribe,unfilter:ao,unsubscribe:t.unsubscribe,view:oh,zoomToLocation:Ms,zoomToArea:Ds,zoomToPoints:zi,zoomToOrigin:kc}};function fd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N_(e){let t,n,r;e.length!==2?(t=fd,n=(l,u)=>fd(e(l),u),r=(l,u)=>e(l)-u):(t=e===fd||e===nL?e:rL,n=e,r=e);function i(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<0?f=h+1:p=h}while(f<p)}return f}function a(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const h=f+p>>>1;n(l[h],u)<=0?f=h+1:p=h}while(f<p)}return f}function o(l,u,f=0,p=l.length){const h=i(l,u,f,p-1);return h>f&&r(l[h-1],u)>-r(l[h],u)?h-1:h}return{left:i,center:o,right:a}}function rL(){return 0}function iL(e){return e===null?NaN:+e}const aL=N_(fd),oL=aL.right;N_(iL).center;const lL=oL,sL=Math.sqrt(50),uL=Math.sqrt(10),cL=Math.sqrt(2);function Wd(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=sL?10:a>=uL?5:a>=cL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?Wd(e,t,n*2):[l,u,f]}function k0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Wd(t,e,n):Wd(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function N0(e,t,n){return t=+t,e=+e,n=+n,Wd(e,t,n)[2]}function fL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?N0(t,e,n):N0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function I_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function D_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tc(){}var Vu=.7,Xd=1/Vu,Ul="\\s*([+-]?\\d+)\\s*",Hu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dL=/^#([0-9a-f]{3,8})$/,mL=new RegExp(`^rgb\\(${Ul},${Ul},${Ul}\\)$`),hL=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),pL=new RegExp(`^rgba\\(${Ul},${Ul},${Ul},${Hu}\\)$`),vL=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${Hu}\\)$`),gL=new RegExp(`^hsl\\(${Hu},${Pi},${Pi}\\)$`),yL=new RegExp(`^hsla\\(${Hu},${Pi},${Pi},${Hu}\\)$`),x1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(tc,Wu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:E1,formatHex:E1,formatHex8:xL,formatHsl:EL,formatRgb:_1,toString:_1});function E1(){return this.rgb().formatHex()}function xL(){return this.rgb().formatHex8()}function EL(){return M_(this).formatHsl()}function _1(){return this.rgb().formatRgb()}function Wu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?S1(t):n===3?new Er(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mL.exec(e))?new Er(t[1],t[2],t[3],1):(t=hL.exec(e))?new Er(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pL.exec(e))?Hf(t[1],t[2],t[3],t[4]):(t=vL.exec(e))?Hf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gL.exec(e))?b1(t[1],t[2]/100,t[3]/100,1):(t=yL.exec(e))?b1(t[1],t[2]/100,t[3]/100,t[4]):x1.hasOwnProperty(e)?S1(x1[e]):e==="transparent"?new Er(NaN,NaN,NaN,0):null}function S1(e){return new Er(e>>16&255,e>>8&255,e&255,1)}function Hf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Er(e,t,n,r)}function _L(e){return e instanceof tc||(e=Wu(e)),e?(e=e.rgb(),new Er(e.r,e.g,e.b,e.opacity)):new Er}function I0(e,t,n,r){return arguments.length===1?_L(e):new Er(e,t,n,r??1)}function Er(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hv(Er,I0,D_(tc,{brighter(e){return e=e==null?Xd:Math.pow(Xd,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vu:Math.pow(Vu,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Er(Oo(this.r),Oo(this.g),Oo(this.b),Yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:w1,formatHex:w1,formatHex8:SL,formatRgb:T1,toString:T1}));function w1(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function SL(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function T1(){const e=Yd(this.opacity);return`${e===1?"rgb(":"rgba("}${Oo(this.r)}, ${Oo(this.g)}, ${Oo(this.b)}${e===1?")":`, ${e})`}`}function Yd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Oo(e),(e<16?"0":"")+e.toString(16)}function b1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new si(e,t,n,r)}function M_(e){if(e instanceof si)return new si(e.h,e.s,e.l,e.opacity);if(e instanceof tc||(e=Wu(e)),!e)return new si;if(e instanceof si)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new si(o,l,u,e.opacity)}function wL(e,t,n,r){return arguments.length===1?M_(e):new si(e,t,n,r??1)}function si(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hv(si,wL,D_(tc,{brighter(e){return e=e==null?Xd:Math.pow(Xd,e),new si(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vu:Math.pow(Vu,e),new si(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Er(Cp(e>=240?e-240:e+120,i,r),Cp(e,i,r),Cp(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new si(A1(this.h),Wf(this.s),Wf(this.l),Yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yd(this.opacity);return`${e===1?"hsl(":"hsla("}${A1(this.h)}, ${Wf(this.s)*100}%, ${Wf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function A1(e){return e=(e||0)%360,e<0?e+360:e}function Wf(e){return Math.max(0,Math.min(1,e||0))}function Cp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wv=e=>()=>e;function TL(e,t){return function(n){return e+n*t}}function bL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function AL(e){return(e=+e)==1?F_:function(t,n){return n-t?bL(t,n,e):Wv(isNaN(t)?n:t)}}function F_(e,t){var n=t-e;return n?TL(e,n):Wv(isNaN(e)?t:e)}const C1=function e(t){var n=AL(t);function r(i,a){var o=n((i=I0(i)).r,(a=I0(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),f=F_(i.opacity,a.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=e,r}(1);function CL(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function LL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Xv(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function OL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function PL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xv(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var D0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lp=new RegExp(D0.source,"g");function kL(e){return function(){return e}}function NL(e){return function(t){return e(t)+""}}function IL(e,t){var n=D0.lastIndex=Lp.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=D0.exec(e))&&(i=Lp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Qd(r,i)})),n=Lp.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?NL(u[0].x):kL(t):(t=u.length,function(f){for(var p=0,h;p<t;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}function Xv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Wv(t):(n==="number"?Qd:n==="string"?(r=Wu(t))?(t=r,C1):IL:t instanceof Wu?C1:t instanceof Date?OL:LL(t)?CL:Array.isArray(t)?RL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PL:Qd)(e,t)}function DL(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function ML(e){return function(){return e}}function FL(e){return+e}var L1=[0,1];function Ml(e){return e}function M0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ML(isNaN(t)?NaN:.5)}function jL(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function BL(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=M0(i,r),a=n(o,a)):(r=M0(r,i),a=n(a,o)),function(l){return a(r(l))}}function $L(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=M0(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=lL(e,l,1,r)-1;return a[u](i[u](l))}}function j_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B_(){var e=L1,t=L1,n=Xv,r,i,a,o=Ml,l,u,f;function p(){var d=Math.min(e.length,t.length);return o!==Ml&&(o=jL(e[0],e[d-1])),l=d>2?$L:BL,u=f=null,h}function h(d){return d==null||isNaN(d=+d)?a:(u||(u=l(e.map(r),t,n)))(r(o(d)))}return h.invert=function(d){return o(i((f||(f=l(t,e.map(r),Qd)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,FL),p()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),p()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=DL,p()},h.clamp=function(d){return arguments.length?(o=d?!0:Ml,p()):o!==Ml},h.interpolate=function(d){return arguments.length?(n=d,p()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,w){return r=d,i=w,p()}}function GL(){return B_()(Ml,Ml)}function zL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Kd(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Zl(e){return e=Kd(Math.abs(e)),e?e[1]:NaN}function UL(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function VL(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var HL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xu(e){if(!(t=HL.exec(e)))throw new Error("invalid format: "+e);var t;return new Yv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xu.prototype=Yv.prototype;function Yv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WL(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $_;function XL(e,t){var n=Kd(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-($_=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Kd(e,Math.max(0,t+a-1))[0]}function R1(e,t){var n=Kd(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const O1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>R1(e*100,t),r:R1,s:XL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function P1(e){return e}var k1=Array.prototype.map,N1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function YL(e){var t=e.grouping===void 0||e.thousands===void 0?P1:UL(k1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?P1:VL(k1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Xu(h);var d=h.fill,w=h.align,x=h.sign,L=h.symbol,I=h.zero,v=h.width,b=h.comma,C=h.precision,H=h.trim,q=h.type;q==="n"?(b=!0,q="g"):O1[q]||(C===void 0&&(C=12),H=!0,q="g"),(I||d==="0"&&w==="=")&&(I=!0,d="0",w="=");var ie=L==="$"?n:L==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",we=L==="$"?r:/[%p]/.test(q)?o:"",ue=O1[q],at=/[defgprs%]/.test(q);C=C===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function He(Se){var Ke=ie,Qe=we,Ge,Pt,mt;if(q==="c")Qe=ue(Se)+Qe,Se="";else{Se=+Se;var ht=Se<0||1/Se<0;if(Se=isNaN(Se)?u:ue(Math.abs(Se),C),H&&(Se=WL(Se)),ht&&+Se==0&&x!=="+"&&(ht=!1),Ke=(ht?x==="("?x:l:x==="-"||x==="("?"":x)+Ke,Qe=(q==="s"?N1[8+$_/3]:"")+Qe+(ht&&x==="("?")":""),at){for(Ge=-1,Pt=Se.length;++Ge<Pt;)if(mt=Se.charCodeAt(Ge),48>mt||mt>57){Qe=(mt===46?i+Se.slice(Ge+1):Se.slice(Ge))+Qe,Se=Se.slice(0,Ge);break}}}b&&!I&&(Se=t(Se,1/0));var pe=Ke.length+Se.length+Qe.length,We=pe<v?new Array(v-pe+1).join(d):"";switch(b&&I&&(Se=t(We+Se,We.length?v-Qe.length:1/0),We=""),w){case"<":Se=Ke+Se+Qe+We;break;case"=":Se=Ke+We+Se+Qe;break;case"^":Se=We.slice(0,pe=We.length>>1)+Ke+Se+Qe+We.slice(pe);break;default:Se=We+Ke+Se+Qe;break}return a(Se)}return He.toString=function(){return h+""},He}function p(h,d){var w=f((h=Xu(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Zl(d)/3)))*3,L=Math.pow(10,-x),I=N1[8+x/3];return function(v){return w(L*v)+I}}return{format:f,formatPrefix:p}}var Xf,Qv,G_;QL({thousands:",",grouping:[3],currency:["$",""]});function QL(e){return Xf=YL(e),Qv=Xf.format,G_=Xf.formatPrefix,Xf}function KL(e){return Math.max(0,-Zl(Math.abs(e)))}function qL(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zl(t)/3)))*3-Zl(Math.abs(e)))}function ZL(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zl(t)-Zl(e))+1}function JL(e,t,n,r){var i=fL(e,t,n),a;switch(r=Xu(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=qL(i,o))&&(r.precision=a),G_(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ZL(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=KL(i))&&(r.precision=a-(r.type==="%")*2);break}}return Qv(r)}function eR(e){var t=e.domain;return e.ticks=function(n){var r=t();return k0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return JL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,f,p=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);p-- >0;){if(f=N0(o,l,n),f===u)return r[i]=o,r[a]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Yu(){var e=GL();return e.copy=function(){return j_(e,Yu())},I_.apply(e,arguments),eR(e)}function tR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function I1(e){return Math.log(e)}function D1(e){return Math.exp(e)}function nR(e){return-Math.log(-e)}function rR(e){return-Math.exp(-e)}function iR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function aR(e){return e===10?iR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function oR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function M1(e){return(t,n)=>-e(-t,n)}function lR(e){const t=e(I1,D1),n=t.domain;let r=10,i,a;function o(){return i=oR(r),a=aR(r),n()[0]<0?(i=M1(i),a=M1(a),e(nR,rR)):e(I1,D1),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],p=u[u.length-1];const h=p<f;h&&([f,p]=[p,f]);let d=i(f),w=i(p),x,L;const I=l==null?10:+l;let v=[];if(!(r%1)&&w-d<I){if(d=Math.floor(d),w=Math.ceil(w),f>0){for(;d<=w;++d)for(x=1;x<r;++x)if(L=d<0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}}else for(;d<=w;++d)for(x=r-1;x>=1;--x)if(L=d>0?x/a(-d):x*a(d),!(L<f)){if(L>p)break;v.push(L)}v.length*2<I&&(v=k0(f,p,I))}else v=k0(d,w,Math.min(w-d,I)).map(a);return h?v.reverse():v},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Xu(u)).precision==null&&(u.trim=!0),u=Qv(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return p=>{let h=p/a(Math.round(i(p)));return h*r<r-.5&&(h*=r),h<=f?u(p):""}},t.nice=()=>n(tR(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function Kv(){const e=lR(B_()).domain([1,10]);return e.copy=()=>j_(e,Kv()).base(e.base()),I_.apply(e,arguments),e}const sR="_scatter_10z4g_2",uR={scatter:sR};qv.propTypes={points:qe.array.isRequired,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onView:qe.func,onSelect:qe.func,onHover:qe.func};const cR=e=>Kv().domain([100,1e6]).range([6,1]).clamp(!0)(e),fR=e=>Kv().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function qv({points:e,width:t,height:n,onScatter:r,onView:i,onSelect:a,onHover:o}){const l=j.useRef(),u=j.useRef([-1,1]),f=j.useRef([-1,1]),p=Yu().domain(u.current),h=Yu().domain(f.current);return j.useEffect(()=>{const d=cR(e.length),w=fR(e.length);console.log("point size",d,w);const x=tL({canvas:l.current,width:t,height:n,pointSize:d,opacity:w,pointColor:[250/255,128/255,114/255,1],pointColorHover:[.1,.1,.1,.5],xScale:p,yScale:h});return x.draw(e),i&&i(p,h),x.subscribe("view",({camera:L,view:I,xScale:v,yScale:b})=>{u.current=v.domain(),f.current=b.domain(),i&&i(u.current,f.current)}),x.subscribe("select",({points:L})=>{a&&a(L)}),x.subscribe("deselect",()=>{a&&a([])}),x.subscribe("pointOver",L=>{o&&o(L)}),x.subscribe("pointOut",()=>{o&&o(null)}),r&&r(x),()=>{x.destroy()}},[e]),O.jsx("canvas",{className:uR.scatter,ref:l})}const cu=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:a,yDomain:o,width:l,height:u})=>{const f=j.useRef();return j.useEffect(()=>{if(a&&o){const p=Yu().domain(a).range([0,l]),h=Yu().domain(o).range([u,0]),d=I=>I/(.1+a[1]-a[0]),x=f.current.getContext("2d");x.clearRect(0,0,l,u),x.fillStyle=t,x.strokeStyle=n,x.font=`${d(r)}px monospace`,x.globalAlpha=.75;let L=d(r);if(!e.length)return;e.map(I=>{t&&x.fillRect(p(I[0])-L/2,h(I[1])-L/2,L,L),n&&x.strokeRect(p(I[0])-L/2,h(I[1])-L/2,L,L),i&&x.fillText(i,p(I[0])-L/3.2,h(I[1])+L/3.2)})}},[e,t,n,r,a,o,l,u]),O.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})};z_.propTypes={dataset:qe.object.isRequired,slides:qe.array.isRequired,selected:qe.object,onHover:qe.func,onClick:qe.func};function z_({dataset:e,slides:t,selected:n,onHover:r,onClick:i}){return O.jsxs("div",{className:"slide-bar",children:[O.jsxs("div",{className:"slide-bar-header",children:[t.length," Slides"]}),O.jsx("div",{className:"slide-bar-body",children:t.map((a,o)=>O.jsx("div",{className:a===n?"slide-active slide-bar-item":"slide-bar-item",onMouseEnter:()=>r?r(a):null,onMouseLeave:()=>r?r(null):null,onClick:()=>i?i(a):null,children:a.label},o))})]})}const xo=640,Eo=640;function dR(){var ei,rn;const e="/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then(ae=>ae.json()).then(ae=>{n(ae)})},[r]);const[a,o]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/embeddings`).then(ae=>ae.json()).then(ae=>{o(ae)})},[r]);const[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/umaps`).then(ae=>ae.json()).then(ae=>{u(ae)})},[r]);const[f,p]=j.useState([]);j.useEffect(()=>{fetch(`${e}/datasets/${r}/clusters`).then(ae=>ae.json()).then(ae=>{console.log("clusters",ae),p(ae)})},[r]);const[h,d]=j.useState([]),[w,x]=j.useState(null),[L,I]=j.useState(null),[v,b]=j.useState(null),[C,H]=j.useState(L),q=ae=>{console.log("selected",ae),H(ae)};j.useEffect(()=>{fetch(`${e}/datasets/${r}/scopes`).then(ae=>ae.json()).then(ae=>{d(ae.sort((Rt,fn)=>Rt.name.localeCompare(fn.name)))})},[r,d]),j.useEffect(()=>{if(i&&h.length){const ae=h.find(Rt=>Rt.name==i);if(ae){x(ae);const Rt=l.find(fn=>fn.name===ae.umap);I(ae.embeddings),H(ae.embeddings),b(Rt)}}else x(null)},[i,h,l,f,x,b]);const[ie,we]=j.useState([]),[ue,at]=j.useState(!1);j.useEffect(()=>{v&&fetch(`${e}/datasets/${t.id}/umaps/${v.name}/points`).then(ae=>ae.json()).then(ae=>{console.log("umap points",ae),we(ae.map(Rt=>[Rt.x,Rt.y]))})},[t,v]);const He=j.useCallback((ae,Rt,fn=[])=>{fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ae)}`).then(vn=>vn.json()).then(vn=>{if(!t)return;const rr=t.text_column;let ki=vn.map((dr,jr)=>({index:ae[jr],text:dr[rr],score:dr.score,distance:fn[jr],date:dr.date}));ki.sort((dr,jr)=>jr.score-dr.score),Rt(ki)})},[t,r]),[Se,Ke]=j.useState({});j.useEffect(()=>{fetch(`${e}/tags?dataset=${r}`).then(ae=>ae.json()).then(ae=>Ke(ae))},[r]);const Qe=j.useMemo(()=>{const ae=[];for(const Rt in Se)ae.push(Rt);return ae},[Se]),[Ge,Pt]=j.useState(Qe[0]),[mt,ht]=j.useState([]);j.useEffect(()=>{Se[Ge]?fetch(`${e}/tags/rows?dataset=${t.id}&tag=${Ge}`).then(ae=>ae.json()).then(ae=>{const Rt=t.text_column;let fn=ae.map((vn,rr)=>({index:Se[Ge][rr],text:vn[Rt],score:vn.score,date:vn.date}));fn.sort((vn,rr)=>rr.score-vn.score),ht(fn)}).catch(ae=>console.log(ae)):ht([])},[t,Ge,Se]);const[pe,We]=j.useState([]);j.useEffect(()=>{if(Se[Ge]){const ae=Se[Ge].map(Rt=>ie[Rt]);We(ae)}else We([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[Se,Ge,ie]);const[Le,Ee]=j.useState([]),[$e,lt]=j.useState([]),xt=j.useCallback(ae=>{fetch(`${e}/search/nn?dataset=${r}&query=${ae}&model=${C}`).then(Rt=>Rt.json()).then(Rt=>{lt(Rt.distances),Ee(Rt.indices),console.log("SEARCH RESULTS",Rt),pt==null||pt.zoomToPoints(Rt.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[C]),[Wt,Yt]=j.useState([]);j.useEffect(()=>{He(Le,Yt,$e)},[Le,Yt,$e]);const[Qt,It]=j.useState([]);j.useEffect(()=>{const ae=Le.map(Rt=>ie[Rt]);It(ae)},[Le,ie]);const[pt,Yn]=j.useState({}),[mn,Xt]=j.useState([-1,1]),[en,Et]=j.useState([-1,1]),St=j.useCallback((ae,Rt)=>{Xt(ae),Et(Rt)}),[kt,At]=j.useState([]),[Ct,Ut]=j.useState([]);j.useEffect(()=>{He(kt,Ut)},[kt,Ut]);const hn=j.useCallback(ae=>{At(ae),De(0)}),[ln,qr]=j.useState(null),[y,wt]=j.useState([]);j.useEffect(()=>{ln!=null?He([ln],wt):wt([])},[ln,wt]);const[Ft,Ie]=j.useState([]);j.useEffect(()=>{ln!=null?Ie([ie[ln]]):Ie([])},[ln,ie]);const Kt=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Slide"},{id:3,name:"Tag"}],[gt,De]=j.useState(0);j.useState([]);const[ut,jt]=j.useState(null),[st,tn]=j.useState(null),[nn,Ot]=j.useState([]),[Sn,pn]=j.useState([]);j.useEffect(()=>{w?fetch(`${e}/datasets/${r}/clusters/${w.cluster}/labels`).then(ae=>ae.json()).then(ae=>{console.log("cluster labels",ae),pn(ae)}):pn([])},[w,pn,r]),j.useEffect(()=>{ut?fetch(`${e}/indexed?dataset=${r}&indices=${JSON.stringify(ut.indices)}`).then(ae=>ae.json()).then(ae=>{const Rt=t.text_column;let fn=ae.map((vn,rr)=>({index:ut.indices[rr],text:vn[Rt],score:vn.score,date:vn.date}));fn.sort((vn,rr)=>rr.score-vn.score),Ot(fn)}).catch(ae=>console.log(ae)):Ot([])},[r,ut]);const[Tr,nr]=j.useState([]);j.useEffect(()=>{if(ut){const ae=ut.indices.map(Rt=>ie[Rt]);nr(ae)}else nr([]),pt&&pt.config&&(pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500}))},[ut,ie]);const[Zr,Ln]=j.useState([]);j.useEffect(()=>{if(st){const ae=st.indices.map(Rt=>ie[Rt]);Ln(ae)}else Ln([])},[st,ie]);const di=j.useCallback(ae=>{jt(ae),De(2),pt==null||pt.zoomToPoints(ae.indices,{transition:!0,padding:.5,transitionDuration:1500})}),na=j.useCallback(ae=>{tn(ae)}),Jr=j.useCallback(ae=>{pt==null||pt.zoomToPoints([ae],{transition:!0,padding:.9,transitionDuration:1500})}),fr=j.useCallback(ae=>{qr(ae)});return t?O.jsxs("div",{className:"dataset--explore",children:[O.jsxs("h2",{children:["Dataset: ",r]}),O.jsxs("div",{className:"dataset--explore-summary",children:["[ ",t.length," rows ]",O.jsx("br",{}),w==null?void 0:w.name,": [",L,"][ ",v==null?void 0:v.name," ] [ ",w==null?void 0:w.cluster," ] [ ",O.jsx("a",{href:`/datasets/${r}/setup/${i}`,children:"setup"})," ]",O.jsx("br",{}),"Tags: ",Qe.map(ae=>O.jsxs("button",{className:"dataset--tag-link",onClick:()=>{Pt(ae),De(3),pt==null||pt.zoomToPoints(Se[ae],{transition:!0,padding:.2,transitionDuration:1500})},children:[ae,"(",Se[ae].length,")"]},ae)),O.jsxs("form",{className:"new-tag",onSubmit:ae=>{ae.preventDefault();const Rt=ae.target.elements.newTag.value;fetch(`${e}/tags/new?dataset=${r}&tag=${Rt}`).then(fn=>fn.json()).then(fn=>{console.log("new tag",fn),Ke(fn)})},children:[O.jsx("input",{type:"text",id:"newTag"}),O.jsx("button",{type:"submit",children:"New Tag"})]}),O.jsx("br",{})]}),O.jsx("div",{className:"dataset--search-box",children:O.jsxs("form",{onSubmit:ae=>{ae.preventDefault(),xt(ae.target.elements.searchBox.value),De(1)},children:[O.jsx("input",{type:"text",id:"searchBox"}),O.jsx("button",{type:"submit",children:"Similarity Search"}),O.jsx("label",{htmlFor:"embeddingModel",children:"Using:"}),O.jsx("select",{id:"embeddingModel",onChange:ae=>q(ae.target.value),value:C,children:a.map((ae,Rt)=>O.jsx("option",{value:ae,children:ae},Rt))})]})}),O.jsxs("div",{className:"dataset--scope-container",children:[O.jsxs("div",{className:"dataset--scope",style:{width:xo,height:Eo},children:[O.jsx(qv,{points:ie,loading:ue,width:xo,height:Eo,onScatter:Yn,onView:St,onSelect:hn,onHover:fr}),O.jsx(cu,{points:Qt,fill:"black",size:"5",xDomain:mn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Tr,fill:"darkred",size:"5",xDomain:mn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Zr,fill:"red",size:"8",xDomain:mn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:pe,symbol:Ge,size:"10",xDomain:mn,yDomain:en,width:xo,height:Eo}),O.jsx(cu,{points:Ft,stroke:"black",fill:"orange",size:"6",xDomain:mn,yDomain:en,width:xo,height:Eo})]}),O.jsxs("div",{className:"dataset--tabs",children:[O.jsx("div",{className:"dataset--tab-header",children:Kt.map(ae=>O.jsx("button",{onClick:()=>De(ae.id),className:ae.id===gt?"tab-active":"tab-inactive",children:ae.name},ae.id))}),O.jsxs("div",{className:"dataset--tab-content",children:[gt===0?O.jsxs("div",{className:"dataset--selected-table",children:[O.jsxs("span",{children:["Selected: ",Ct.length,Ct.length>0?O.jsx("button",{className:"deselect",onClick:()=>{At([]),pt==null||pt.select([]),pt==null||pt.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Ct.length>0?O.jsx(Ao,{data:Ct,tagset:Se,datasetId:r,maxRows:150,onTagset:ae=>Ke(ae),onHover:fr,onClick:Jr}):null]}):null,gt===1?O.jsxs("div",{className:"dataset--neighbors",children:[O.jsxs("span",{children:["Nearest Neighbors: ",Le.length,Le.length>0?O.jsx("button",{className:"deselect",onClick:()=>{Ee([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),Wt.length>0?O.jsx(Ao,{data:Wt,tagset:Se,datasetId:r,onTagset:ae=>Ke(ae),onHover:fr,onClick:Jr}):null]}):null,gt===2?O.jsxs("div",{className:"dataset--slide",children:[O.jsxs("span",{children:[ut==null?void 0:ut.label," ",ut==null?void 0:ut.indices.length,ut?O.jsx("button",{className:"deselect",onClick:()=>{jt(null)},children:"X"}):null]}),nn.length?O.jsx(Ao,{data:nn,tagset:Se,datasetId:r,onTagset:ae=>Ke(ae),onHover:fr,onClick:Jr}):null]}):null,gt===3?O.jsxs("div",{className:"dataset--tag",children:[O.jsxs("span",{children:[Ge," ",(ei=Se[Ge])==null?void 0:ei.length,Ge?O.jsx("button",{className:"deselect",onClick:()=>{Pt(null)},children:"X"}):null]}),mt.length?O.jsx(Ao,{data:mt,tagset:Se,datasetId:r,onTagset:ae=>Ke(ae),onHover:fr,onClick:Jr}):null]}):null]})]})]}),O.jsx(z_,{dataset:t,slides:Sn,selected:ut,onClick:di,onHover:na}),O.jsx("div",{className:"dataset--hovered-table",children:O.jsx("span",{children:(rn=y[0])==null?void 0:rn.text})})]}):O.jsx("div",{children:"Loading..."})}const Rp="/api";U_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,textColumn:qe.string.isRequired,embedding:qe.string,umaps:qe.array,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function U_({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:a,onChange:o}){const[l,u]=j.useState([]),[f,p]=j.useState(null),{startJob:h}=ql(e,p,`${Rp}/jobs/embed`),[d,w]=j.useState([]);j.useEffect(()=>{fetch(`${Rp}/embedding_models`).then(I=>I.json()).then(w).catch(console.error)},[]);const x=(I,v)=>{fetch(`${Rp}/datasets/${I}/embeddings`).then(b=>b.json()).then(b=>{v(b)})};j.useEffect(()=>{x(e==null?void 0:e.id,I=>{u(I),a(I)})},[e,u,a]),j.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&x(e.id,I=>{u(I),a(I)})},[f,e,u,a]);const L=I=>{I.preventDefault();const v=I.target,b=new FormData(v),C=d.find(q=>q.id===b.get("modelName"));let H={text_column:t,provider:C.provider,model:C.id};h(H)};return O.jsxs("div",{children:[O.jsxs("div",{children:["Embedding on column: ",O.jsx("b",{children:t})]}),O.jsxs("form",{onSubmit:L,children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"modelName",children:"Model:"}),O.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:d.filter(I=>(l==null?void 0:l.indexOf(I.id))<0).map((I,v)=>O.jsxs("option",{value:I.id,children:[I.provider,": ",I.name]},v))})]}),O.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]}),O.jsx(is,{job:f,clearJob:()=>{p(null)}}),O.jsx("div",{className:"embeddings-list",children:l.map((I,v)=>O.jsxs("div",{children:[O.jsx("input",{type:"radio",id:`embedding${v}`,name:"embedding",value:I,checked:I===n,onChange:()=>o(I)}),O.jsx("label",{htmlFor:`embedding${v}`,children:O.jsxs("span",{children:[I," [",r.filter(b=>b.embeddings==I).length," umaps,",i.filter(b=>r.filter(C=>C.embeddings==I).map(C=>C.name).indexOf(b.umap_name)>=0).length," clusters ]"]})})]},v))})]})}const F1={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},j1="/api";V_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,umap:qe.object,embedding:qe.string,clusters:qe.array.isRequired,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function V_({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:a}){const[o,l]=j.useState(null),{startJob:u}=ql(e,l,"${apiUrl}/jobs/umap"),{startJob:f}=ql(e,l,"${apiUrl}/jobs/delete/umap"),[p,h]=j.useState([]);function d(x,L){fetch(`${j1}/datasets/${x}/umaps`).then(I=>I.json()).then(I=>{const v=I.map(b=>({...b,url:`${j1}/files/${x}/umaps/${b.name}.png`}));L(v.reverse())})}j.useEffect(()=>{d(e.id,x=>{h(x),i(x)})},[e,i]),j.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&d(e.id,x=>{h(x),i(x)})},[o,e,h,i]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("neighbors"),b=I.get("min_dist");u({embeddings:n,neighbors:v,min_dist:b})},[u,n]);return O.jsxs("div",{className:"dataset--umaps-new",children:[O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Neighbors:",O.jsx("input",{type:"number",name:"neighbors",defaultValue:"50",disabled:!!o})]}),O.jsxs("label",{children:["Min Dist:",O.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!o})]}),O.jsx("button",{type:"submit",disabled:!!o,children:"New UMAP"})]}),O.jsx(is,{job:o,clearJob:()=>l(null)}),O.jsx("div",{className:F1["umaps-list"],children:p.filter(x=>x.embeddings==n).map((x,L)=>O.jsxs("div",{className:F1["umaps-item"],children:[O.jsx("input",{type:"radio",id:`umap${L}`,name:"umap",value:x,checked:x.name===(t==null?void 0:t.name),onChange:()=>a(x)}),O.jsxs("label",{htmlFor:`umap${L}`,children:[x.name,O.jsx("br",{}),"Neighbors: ",x.neighbors,O.jsx("br",{}),"Min Dist: ",x.min_dist,O.jsx("br",{}),O.jsx("img",{src:x.url,alt:x.name}),O.jsx("br",{}),r.filter(I=>I.umap_name==x.name).length," clusters",O.jsx("button",{onClick:()=>f({umap_name:x.name}),disabled:o&&o.status!=="completed",children:" umap"})]})]},L))})]})}const Yf="/api";H_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,umap:qe.object,clusters:qe.array,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function H_({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[a,o]=j.useState(null),{startJob:l}=ql(e,o,`${Yf}/jobs/cluster`),{startJob:u}=ql(e,o,`${Yf}/jobs/delete/cluster`),[f,p]=j.useState([]);function h(w,x){fetch(`${Yf}/datasets/${w}/clusters`).then(L=>L.json()).then(L=>{const I=L.map(v=>({...v,url:`${Yf}/files/${w}/clusters/${v.cluster_name}.png`}));x(I.reverse())})}j.useEffect(()=>{h(e.id,w=>{p(w),r(w)})},[e,r]),j.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&h(e.id,w=>{p(w),r(w)})},[a,e,p,r]);const d=j.useCallback(w=>{w.preventDefault();const x=w.target,L=new FormData(x),I=L.get("samples"),v=L.get("min_samples");l({umap_name:n.name,samples:I,min_samples:v})},[l,n]);return O.jsxs("div",{className:"dataset--clusters-new",children:[O.jsxs("form",{onSubmit:w=>d(w,n),children:[O.jsxs("label",{children:["Samples:",O.jsx("input",{type:"number",name:"samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("br",{}),O.jsxs("label",{children:["Min Samples:",O.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!a||!n})]}),O.jsx("button",{type:"submit",disabled:!!a||!n,children:"New Clusters"})]}),O.jsx(is,{job:a,clearJob:()=>o(null)}),O.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(w=>w.umap_name==n.name).map((w,x)=>O.jsxs("div",{className:"dataset--setup-clusters-item",children:[O.jsx("input",{type:"radio",id:`cluster${x}`,name:"cluster",value:t,checked:w.cluster_name===(t==null?void 0:t.cluster_name),onChange:()=>i(w)}),O.jsxs("label",{htmlFor:`cluster${x}`,children:[w.cluster_name,O.jsx("br",{}),"Clusters: ",w.n_clusters,O.jsx("br",{}),"Noise points: ",w.n_noise,O.jsx("br",{}),"Samples: ",w.samples,O.jsx("br",{}),"Min Samples: ",w.min_samples,O.jsx("br",{}),O.jsx("img",{src:w.url,alt:w.name}),O.jsx("button",{onClick:()=>u({cluster_name:w.cluster_name}),children:" cluster"})]})]},x))})]})}const Qf="/api";W_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,cluster:qe.object,selectedModel:qe.string,onChange:qe.func.isRequired};function W_({dataset:e,cluster:t,selectedModel:n,onChange:r}){const[i,a]=j.useState(null),{startJob:o}=ql(e,a,`${Qf}/jobs/cluster_label`),[l,u]=j.useState([]);j.useEffect(()=>{fetch(`${Qf}/chat_models`).then(x=>x.json()).then(x=>{u(x)}).catch(x=>{console.log(x),u([])})},[]);const[f,p]=j.useState([]),[h,d]=j.useState([]);j.useEffect(()=>{if(e&&t){const x=n?`labels/${n}`:"labels";fetch(`${Qf}/datasets/${e.id}/clusters/${t.cluster_name}/${x}`).then(L=>L.json()).then(L=>{d(L)}).catch(L=>{console.log(L),d([])})}else d([])},[n,d,e,t]),j.useEffect(()=>{console.log("cluster changed, set label models",t==null?void 0:t.cluster_name),t?fetch(`${Qf}/datasets/${e.id}/clusters/${t.cluster_name}/labels_available`).then(x=>x.json()).then(x=>{console.log("cluster changed, set label models fetched",t.cluster_name,x),p(x)}).catch(x=>{console.log(x),p([])}):p([])},[e,t,i,p]);const w=j.useCallback(x=>{x.preventDefault();const L=x.target,I=new FormData(L),v=I.get("chatModel"),b=e.text_column,C=t==null?void 0:t.cluster_name,H=I.get("context");o({model:v,cluster:C,text_column:b,context:H})},[t,o]);return O.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[O.jsxs("div",{className:"dataset--slides-new",children:[O.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_name}`:""," using a chat model. "]}),O.jsxs("form",{onSubmit:w,children:[O.jsxs("label",{children:["Chat Models:",O.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!i,children:l.filter(x=>(f==null?void 0:f.indexOf(x.id))<0).map((x,L)=>O.jsxs("option",{value:x.id,children:[x.provider," - ",x.name]},L))}),O.jsx("br",{}),O.jsx("textarea",{name:"context",disabled:!!i||!t})]}),O.jsx("button",{type:"submit",disabled:!!i||!t,children:"Auto Label"})]}),O.jsx(is,{job:i,clearJob:()=>a(null)})]}),t?O.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[O.jsxs("label",{children:["View Labels:",O.jsxs("select",{name:"model",value:n,onChange:x=>r(x.target.value),children:[O.jsx("option",{value:"",children:"Default labels"}),f.map((x,L)=>O.jsx("option",{value:x,children:x},L))]})]}),O.jsx("div",{className:"dataset--setup-labels-list",children:O.jsx(Ao,{data:h.map((x,L)=>({cluster:L,label:x.label,items:x.indices.length}))})})]}):null]})}const Op="/api";X_.propTypes={dataset:qe.shape({id:qe.string.isRequired}).isRequired,scope:qe.object,umap:qe.object,embedding:qe.string,cluster:qe.object,clusterLabelModel:qe.string,onNew:qe.func.isRequired,onChange:qe.func.isRequired};function X_({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelModel:a,onNew:o,onChange:l}){const u=pm();j.useEffect(()=>{e&&fetch(`${Op}/datasets/${e.id}/scopes`).then(p=>p.json()).then(p=>{const h=p.sort((d,w)=>d.name.localeCompare(w.name));o(h)})},[e,o]);const f=j.useCallback(p=>{if(p.preventDefault(),!n||!i)return;const h=p.target,d=new FormData(h),w={embeddings:r,umap:n.name,cluster:i.cluster_name,cluster_labels:a,label:d.get("label"),description:d.get("description")},x=d.get("action");console.log("action",x),x=="save"&&(w.name=t.name),fetch(`${Op}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(L=>L.json()).then(L=>{const I=L;fetch(`${Op}/datasets/${e.id}/scopes`).then(v=>v.json()).then(v=>{o(v),l(v.find(b=>b.name==I.name))}),u(`/datasets/${e.id}/setup/${L.name}`)}).catch(L=>{console.error("Error saving scope:",L)})},[e,i,a,n,r,u,o,l]);return O.jsxs("div",{className:"setup-scope",children:[O.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r,O.jsx("br",{}),"Labels: ",a||"Default"]}),O.jsxs("div",{className:"dataset--setup-save-box-boxes",children:[n?O.jsxs("div",{className:"box-item",children:[n.name,O.jsx("img",{src:n.url,alt:n.name})]}):O.jsx("div",{className:"empty-box"}),i?O.jsxs("div",{className:"box-item",children:[i.cluster_name,O.jsx("img",{src:i.url,alt:i.name})]}):O.jsx("div",{className:"empty-box"})]}),O.jsx("div",{className:"dataset--setup-save-box-nav",children:O.jsxs("form",{onSubmit:f,children:[O.jsxs("label",{children:["Label:",O.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),O.jsxs("label",{children:["Description:",O.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),O.jsx("input",{type:"hidden",name:"action",value:""}),t?O.jsxs("div",{className:"previous-scope",children:[O.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embeddings,O.jsx("br",{}),"Umap: ",t.umap,O.jsx("br",{}),"Cluster: ",t.cluster,O.jsx("br",{}),"Labels: ",t.cluster_labels||"Default",O.jsx("br",{})]}):null,t?O.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,O.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const mR="_stage_lm7gt_1",hR="_content_lm7gt_13",pR="_complete_lm7gt_17",vR="_active_lm7gt_28",Kf={stage:mR,content:hR,complete:pR,active:vR};function fu({active:e,complete:t,title:n,children:r}){return O.jsxs("div",{className:`${Kf.stage} ${e?Kf.active:""} ${t?Kf.complete:""}`,children:[O.jsx("h3",{children:n}),O.jsx("div",{className:Kf.content,children:r})]})}const gR="/api";Y_.propTypes={dataset:qe.object.isRequired,indices:qe.array.isRequired,distances:qe.array,maxRows:qe.number,tagset:qe.object,onHover:qe.func,onClick:qe.func,onTagset:qe.func};function Y_({dataset:e,indices:t,distances:n=[],maxRows:r,tagset:i,onHover:a,onClick:o,onTagset:l}){const[u,f]=j.useState([]),p=j.useCallback(h=>{e&&fetch(`${gR}/indexed?dataset=${e.id}&indices=${JSON.stringify(h)}`).then(d=>d.json()).then(d=>{let w=d.map((x,L)=>{let I={index:h[L],...x};return n&&n.length&&(I.distance=n[L]),I});f(w)})},[e,f,n]);return j.useEffect(()=>{t&&t.length&&p(t)},[t,p]),O.jsx("div",{children:O.jsx(Ao,{data:u,tagset:i,datasetId:e==null?void 0:e.id,maxRows:r,onTagset:l,onHover:a,onClick:o})})}const yR="/api";Q_.propTypes={dataset:qe.object.isRequired,umap:qe.object,width:qe.number.isRequired,height:qe.number.isRequired,onScatter:qe.func,onSelect:qe.func};function Q_({dataset:e,umap:t,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l}){const[u,f]=j.useState([]);return j.useEffect(()=>{t?fetch(`${yR}/datasets/${e.id}/umaps/${t.name}/points`).then(p=>p.json()).then(p=>{f(p.map(h=>[h.x,h.y]))}):f([])},[e,t]),O.jsx("div",{style:{width:`${n}px`,height:`${r}px`},children:O.jsx(qv,{points:u,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l})})}function B1(){const e="/api",[t,n]=j.useState(null),{dataset:r,scope:i}=l_();pm();const a=500,o=500;j.useEffect(()=>{fetch(`${e}/datasets/${r}/meta`).then($e=>$e.json()).then($e=>n($e))},[r]);const l=j.useMemo(()=>t?t.text_column||t.columns[0]:"",[t]),u=j.useCallback($e=>{const lt=$e.target.value;console.log("setting column",lt),fetch(`${e}/datasets/${r}/meta/update?key=text_column&value=${lt}`).then(xt=>xt.json()).then(xt=>{n(xt)})},[r]),[f,p]=j.useState([]),[h,d]=j.useState(f[0]);j.useEffect(()=>{f!=null&&f.length&&!h&&d(f[0])},[f,h]);const[w,x]=j.useState([]),[L,I]=j.useState(null),[v,b]=j.useState(null);j.useEffect(()=>{if(w.length){const $e=w.filter(xt=>xt.embeddings==h),lt=$e.find(xt=>xt.name==v);I(v&&lt?lt:$e[0])}},[v,w,h]);const[C,H]=j.useState([]),[q,ie]=j.useState(null),[we,ue]=j.useState(null);j.useEffect(()=>{if(C.length&&L){const $e=C.filter(xt=>xt.umap_name==L.name),lt=$e.find(xt=>xt.cluster_name==we);ie(we&&lt?lt:$e[0])}else ie(null)},[we,C,L]);const[at,He]=j.useState(null),[Se,Ke]=j.useState([]),[Qe,Ge]=j.useState(null);j.useEffect(()=>{if(i&&(Se!=null&&Se.length)){const $e=Se.find(lt=>lt.name==i);$e&&(Ge($e),d($e.embeddings),b($e.umap),ue($e.cluster),He($e.cluster_labels))}else Ge(null)},[i,Se]);const[Pt,mt]=j.useState([]),ht=j.useCallback($e=>{mt($e)},[mt]),[pe,We]=j.useState({}),[Le,Ee]=j.useState(1);return j.useEffect(()=>{Ee(h?L?q?at?Qe?6:5:4:3:2:1),console.log("sup",Qe,at)},[h,L,q,at,Qe]),t?O.jsxs("div",{className:"dataset--setup",children:[O.jsxs("div",{className:"dataset--setup-summary",children:[O.jsxs("div",{className:"dataset--setup-info",children:[O.jsx("h3",{children:r}),O.jsxs("div",{className:"dataset--setup-info-content",children:["[ ",t.length," rows ] Columns: ",t.columns.join(", "),O.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",O.jsx("select",{value:l,onChange:u,children:t.columns.map(($e,lt)=>O.jsx("option",{value:$e,children:$e},lt))})]})]})]}),Qe?O.jsxs("a",{href:`/datasets/${t==null?void 0:t.id}/explore/${Qe.name}`,children:["Explore ",Qe.label," (",Qe.name,")"]}):null]}),O.jsxs("div",{className:"dataset--setup-layout",children:[O.jsxs("div",{className:"dataset--setup-left-column",children:[O.jsx(fu,{active:Le==1,complete:Le>1,title:"1. Embeddings",children:O.jsx(U_,{dataset:t,textColumn:l,embedding:h,umaps:w,clusters:C,onNew:p,onChange:d})}),O.jsx(fu,{active:Le==2,complete:Le>2,title:"2. UMAP",children:O.jsx(V_,{dataset:t,umap:L,embedding:h,clusters:C,onNew:x,onChange:I})}),O.jsx(fu,{active:Le==3,complete:Le>3,title:"3. Clusters",children:O.jsx(H_,{dataset:t,cluster:q,umap:L,onNew:H,onChange:ie})}),O.jsx(fu,{active:Le==4,complete:Le>4,title:"4. Auto-Label Clusters",children:O.jsx(W_,{dataset:t,cluster:q,selectedModel:at,onChange:He})}),O.jsx(fu,{active:Le==5,complete:Le>5,title:"5. Save Scope",children:O.jsx(X_,{dataset:t,scope:Qe,embedding:h,umap:L,cluster:q,clusterLabelModel:at,onNew:Ke,onChange:Ge})})]}),O.jsxs("div",{className:"dataset--setup-right-column",children:[O.jsx("div",{className:"dataset--setup-umap",children:O.jsx(Q_,{dataset:t,umap:L,width:a,height:o,onScatter:We,onSelect:ht})}),O.jsxs("div",{className:"dataset--selected",children:[O.jsxs("span",{children:["Points Selected: ",Pt.length," ",Pt.length?null:"(Hold shift and drag an area of the map to select)",Pt.length>0?O.jsx("button",{className:"deselect",onClick:()=>{mt([]),pe==null||pe.select([]),pe==null||pe.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),Pt.length>0?O.jsx("div",{className:"dataset--selected-table",children:O.jsx(Y_,{dataset:t,indices:Pt,datasetId:r,maxRows:150})}):null]})]})]})]}):O.jsx("div",{children:"Loading..."})}const xR=()=>O.jsx("nav",{children:O.jsx("ul",{children:O.jsx("li",{children:O.jsx(C0,{to:"/",children:"Latent Scope"})})})});function ER(){return O.jsxs(qb,{children:[O.jsx(xR,{}),O.jsx("div",{className:"page",children:O.jsxs(Hb,{children:[O.jsx(vu,{path:"/",element:O.jsx(sA,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/setup/:scope",element:O.jsx(B1,{})}),O.jsx(vu,{path:"/datasets/:dataset/explore/:scope",element:O.jsx(dR,{})})]})})]})}Pp.createRoot(document.getElementById("root")).render(O.jsx(Q1.StrictMode,{children:O.jsx(ER,{})}));
